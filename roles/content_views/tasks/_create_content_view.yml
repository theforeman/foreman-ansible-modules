---
- name: Create content view  # noqa: args[module]
  theforeman.foreman.content_view:
    username: "{{ foreman_username | default(omit) }}"
    password: "{{ foreman_password | default(omit) }}"
    server_url: "{{ foreman_server_url | default(omit) }}"
    validate_certs: "{{ foreman_validate_certs | default(omit) }}"
    organization: "{{ foreman_organization }}"
    name: "{{ content_view.name }}"
    auto_publish: "{{ content_view.auto_publish | default(omit) }}"
    components: "{{ content_view.components | default(omit) }}"
    composite: "{{ content_view.components | default(false) | ternary(true, false) }}"
    description: "{{ content_view.description | default(omit) }}"
    label: "{{ content_view.label | default(omit) }}"
    repositories: "{{ content_view.repositories | default(omit) }}"
    solve_dependencies: "{{ content_view.solve_dependencies | default(omit) }}"

- name: Create content view filters
  ansible.builtin.include_tasks: '_create_content_view_filter.yml'
  loop: "{{ content_view.filters | default([]) }}"
  loop_control:
    loop_var: content_view_filter
