interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/status
  response:
    body:
      string: '{"result":"ok","status":200,"version":"3.5.0-develop","api_version":2}'
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 3.5.0-develop
      Keep-Alive:
      - timeout=15, max=100
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '70'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/katello/api/organizations?search=name%3D%22Test+Organization%22&per_page=4294967296
  response:
    body:
      string: "{\n  \"total\": 8,\n  \"subtotal\": 1,\n  \"page\": 1,\n  \"per_page\":
        4294967296,\n  \"search\": \"name=\\\"Test Organization\\\"\",\n  \"sort\":
        {\n    \"by\": null,\n    \"order\": null\n  },\n  \"results\": [{\"label\":\"Test_Organization\",\"created_at\":\"2022-08-16
        15:28:02 UTC\",\"updated_at\":\"2022-08-16 15:28:04 UTC\",\"id\":12,\"name\":\"Test
        Organization\",\"title\":\"Test Organization\",\"description\":\"A test organization\"}]\n}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 3.5.0-develop
      Keep-Alive:
      - timeout=15, max=99
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '389'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/katello/api/organizations/12/content_views?search=name%3D%22Test+Content+View%22&per_page=4294967296
  response:
    body:
      string: '{"total":2,"subtotal":1,"selectable":1,"page":1,"per_page":"4294967296","error":null,"search":"name=\"Test
        Content View\"","sort":{"by":"name","order":"asc"},"results":[{"composite":false,"component_ids":[],"default":false,"version_count":1,"latest_version":"1.0","latest_version_id":161,"auto_publish":false,"solve_dependencies":false,"import_only":false,"generated_for":"none","related_cv_count":0,"related_composite_cvs":[],"repository_ids":[372],"id":29,"name":"Test
        Content View","label":"Test_Content_View","description":null,"organization_id":12,"organization":{"name":"Test
        Organization","label":"Test_Organization","id":12},"created_at":"2022-08-16
        15:28:10 UTC","updated_at":"2022-08-16 15:28:12 UTC","last_task":{"id":"bc9b691c-fb34-4aa8-a9d6-72cbb39e72e6","started_at":"2022-08-16
        15:28:12 UTC","result":"success","last_sync_words":"9 days"},"latest_version_environments":[{"id":15,"name":"Library","label":"Library"}],"repositories":[{"id":372,"name":"TestRepo","label":"TestRepo","content_type":"yum"}],"versions":[{"id":161,"version":"1.0","published":"2022-08-16
        15:28:12 UTC","environment_ids":[15]}],"components":[],"content_view_components":[],"activation_keys":[],"hosts":[],"next_version":"2.0","last_published":"2022-08-16
        15:28:12 UTC","environments":[{"id":15,"label":"Library","name":"Library","activation_keys":[],"hosts":[],"permissions":{"readable":true}}]}]}

        '
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - 12; Test Organization
      Foreman_version:
      - 3.5.0-develop
      Keep-Alive:
      - timeout=15, max=98
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '1388'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/katello/api/content_views/29/content_view_versions?search=version%3D%221.0%22&per_page=4294967296
  response:
    body:
      string: '{"total":1,"subtotal":1,"selectable":1,"page":1,"per_page":"4294967296","error":null,"search":"version=\"1.0\"","sort":{"by":"version","order":"desc"},"results":[{"version":"1.0","major":1,"minor":0,"composite_content_view_ids":[],"published_in_composite_content_view_ids":[],"content_view_id":29,"default":false,"description":null,"id":161,"name":"Test
        Content View 1.0","created_at":"2022-08-16 15:28:12 UTC","updated_at":"2022-08-16
        15:28:15 UTC","content_view":{"id":29,"name":"Test Content View","label":"Test_Content_View","generated_for":"none"},"composite_content_views":[],"composite_content_view_versions":[],"published_in_composite_content_views":[],"environments":[{"id":15,"name":"Library","label":"Library","publish_date":"9
        days","permissions":{"readable":true,"promotable_or_removable":true,"all_hosts_editable":true,"all_keys_editable":true},"host_count":0,"activation_key_count":0}],"repositories":[{"id":373,"name":"TestRepo","label":"TestRepo","content_type":"yum","library_instance_id":372}],"last_event":{"user":"admin","status":"successful","description":null,"action":"publish","created_at":"2022-08-16
        15:28:12 UTC","updated_at":"2022-08-16 15:28:15 UTC","environment":null,"task":{"id":"bc9b691c-fb34-4aa8-a9d6-72cbb39e72e6","label":"Actions::Katello::ContentView::Publish","pending":false,"action":"Publish
        content view ''Test Content View''; organization ''Test Organization''","username":"admin","started_at":"2022-08-16
        15:28:12 UTC","ended_at":"2022-08-16 15:28:15 UTC","state":"stopped","result":"success","progress":1.0,"input":{"content_view":{"id":29,"name":"Test
        Content View","label":"Test_Content_View"},"organization":{"id":12,"name":"Test
        Organization","label":"Test_Organization"},"services_checked":["pulp3","candlepin","candlepin_auth"],"history_id":163,"content_view_id":29,"auto_publish_composite_ids":[],"content_view_version_name":"Test
        Content View 1.0","content_view_version_id":161,"environment_id":15,"user_id":4,"skip_promotion":null,"locale":"en","current_request_id":"3016ab5d-6bec-4624-91da-3fc3cf69a5b1","current_timezone":"UTC","current_organization_id":null,"current_location_id":null,"current_user_id":4},"output":{"content_view_id":29,"content_view_version_id":161,"skip_promotion":null,"history_id":163},"humanized":{"action":"Publish","input":[["content_view",{"text":"content
        view ''Test Content View''","link":"/content_views/29/versions"}],["organization",{"text":"organization
        ''Test Organization''","link":"/organizations/12/edit"}]],"output":"","errors":[]},"cli_example":null,"start_at":"2022-08-16
        15:28:12 UTC","available_actions":{"cancellable":false,"resumable":false}},"version":"1.0","publish":true,"version_id":161,"triggered_by":null,"triggered_by_id":null},"active_history":[],"ansible_collection_count":0,"deb_count":0,"docker_manifest_count":0,"docker_manifest_list_count":0,"docker_tag_count":0,"file_count":0,"python_package_count":0,"rpm_count":0,"modulemd_count":0,"erratum_count":0,"package_group_count":0,"srpm_count":0,"ostree_ref_count":0,"module_stream_count":0,"package_count":0,"component_view_count":0,"ansible_collection_repository_count":0,"deb_repository_count":0,"docker_repository_count":0,"file_repository_count":0,"python_repository_count":0,"yum_repository_count":1,"ostree_repository_count":0,"errata_counts":{"security":0,"bugfix":0,"enhancement":0,"total":0},"permissions":{"deletable":true}}]}

        '
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 3.5.0-develop
      Keep-Alive:
      - timeout=15, max=97
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '3390'
    status:
      code: 200
      message: OK
- request:
    body: '{"id": 161, "destination_server": "airgapped.example.com"}'
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '58'
      Content-Type:
      - application/json
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: POST
    uri: https://foreman.example.org/katello/api/content_exports/version
  response:
    body:
      string: '  {"id":"f503784b-f634-48a2-a20c-33a2fcea072b","label":"Actions::Katello::ContentViewVersion::Export","pending":true,"action":"Export
        content view version ''Test Content View 1.0''; content view ''Test Content
        View''; organization ''Test Organization''","username":"admin","started_at":"2022-08-25
        20:09:00 UTC","ended_at":null,"state":"planned","result":"pending","progress":0.0,"input":{"content_view_version":{"id":161,"name":"Test
        Content View 1.0"},"content_view":{"id":29,"name":"Test Content View","label":"Test_Content_View"},"organization":{"id":12,"name":"Test
        Organization","label":"Test_Organization"},"services_checked":["pulp3"],"export_history_id":{"class":"Dynflow::ExecutionPlan::OutputReference","execution_plan_id":"b3ccb075-c9ea-4dce-8989-9d738c62e887","step_id":11,"action_id":2,"subkeys":["export_history_id"]},"exported_file_checksum":{"class":"Dynflow::ExecutionPlan::OutputReference","execution_plan_id":"b3ccb075-c9ea-4dce-8989-9d738c62e887","step_id":11,"action_id":2,"subkeys":["exported_file_checksum"]},"export_path":{"class":"Dynflow::ExecutionPlan::OutputReference","execution_plan_id":"b3ccb075-c9ea-4dce-8989-9d738c62e887","step_id":11,"action_id":2,"subkeys":["export_path"]},"locale":"en","current_request_id":"ee662f05-537b-4242-9fa8-245216588c08","current_timezone":"UTC","current_organization_id":null,"current_location_id":null,"current_user_id":4},"output":{},"humanized":{"action":"Export","input":[["content_view_version",{"text":"content
        view version ''Test Content View 1.0''","link":null}],["content_view",{"text":"content
        view ''Test Content View''","link":"/content_views/29/versions"}],["organization",{"text":"organization
        ''Test Organization''","link":"/organizations/12/edit"}]],"output":"","errors":[]},"cli_example":null,"start_at":"2022-08-25
        20:09:00 UTC","available_actions":{"cancellable":false,"resumable":false}}

        '
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 3.5.0-develop
      Keep-Alive:
      - timeout=15, max=96
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/foreman_tasks/api/tasks/f503784b-f634-48a2-a20c-33a2fcea072b
  response:
    body:
      string: '{"id":"f503784b-f634-48a2-a20c-33a2fcea072b","label":"Actions::Katello::ContentViewVersion::Export","pending":false,"action":"Export
        content view version ''Test Content View 1.0''; content view ''Test Content
        View''; organization ''Test Organization''","username":"admin","started_at":"2022-08-25
        20:09:00 UTC","ended_at":"2022-08-25 20:09:02 UTC","duration":"1.877606","state":"stopped","result":"success","progress":1.0,"input":{"content_view_version":{"id":161,"name":"Test
        Content View 1.0"},"content_view":{"id":29,"name":"Test Content View","label":"Test_Content_View"},"organization":{"id":12,"name":"Test
        Organization","label":"Test_Organization"},"services_checked":["pulp3"],"export_history_id":164,"exported_file_checksum":{"/var/lib/pulp/exports/Test_Organization/Test
        Content View/1.0/airgapped.example.com/2022-08-25T20-09-00-00-00/export-aa512474-c52e-47ce-b835-bb56421edd2b-20220825_2009.tar.gz":"663ddeeceacbf9a6b8b80bee682b078773170f34dbd3b4aecd332cb164084c3e","/var/lib/pulp/exports/Test_Organization/Test
        Content View/1.0/airgapped.example.com/2022-08-25T20-09-00-00-00/export-aa512474-c52e-47ce-b835-bb56421edd2b-20220825_2009-toc.json":"b9715870c3e9ec7520bdc35023730e4d72e20f60b653e8bd9f652d40d60e375b"},"export_path":"/var/lib/pulp/exports/Test_Organization/Test
        Content View/1.0/airgapped.example.com/2022-08-25T20-09-00-00-00","locale":"en","current_request_id":"ee662f05-537b-4242-9fa8-245216588c08","current_timezone":"UTC","current_organization_id":null,"current_location_id":null,"current_user_id":4},"output":{"export_history_id":164,"export_path":"/var/lib/pulp/exports/Test_Organization/Test
        Content View/1.0/airgapped.example.com/2022-08-25T20-09-00-00-00","exported_file_checksum":{"/var/lib/pulp/exports/Test_Organization/Test
        Content View/1.0/airgapped.example.com/2022-08-25T20-09-00-00-00/export-aa512474-c52e-47ce-b835-bb56421edd2b-20220825_2009.tar.gz":"663ddeeceacbf9a6b8b80bee682b078773170f34dbd3b4aecd332cb164084c3e","/var/lib/pulp/exports/Test_Organization/Test
        Content View/1.0/airgapped.example.com/2022-08-25T20-09-00-00-00/export-aa512474-c52e-47ce-b835-bb56421edd2b-20220825_2009-toc.json":"b9715870c3e9ec7520bdc35023730e4d72e20f60b653e8bd9f652d40d60e375b"}},"humanized":{"action":"Export","input":[["content_view_version",{"text":"content
        view version ''Test Content View 1.0''","link":null}],["content_view",{"text":"content
        view ''Test Content View''","link":"/content_views/29/versions"}],["organization",{"text":"organization
        ''Test Organization''","link":"/organizations/12/edit"}]],"output":"","errors":[]},"cli_example":null,"start_at":"2022-08-25
        20:09:00 UTC","available_actions":{"cancellable":false,"resumable":false}}'
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 3.5.0-develop
      Keep-Alive:
      - timeout=15, max=95
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '2667'
    status:
      code: 200
      message: OK
version: 1
