interactions:
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
    method: GET
    uri: https://centos7-foreman-1-22/api/status
  response:
    body: {string: !!python/unicode '{"result":"ok","status":200,"version":"1.22.0","api_version":2}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-length: ['63']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:05 GMT']
      etag: [W/"674e9dbc2140c688b559566b581c5c09"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      set-cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601; path=/; secure; HttpOnly;
          SameSite=Lax]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ea54064a-d2c2-4ea2-90a9-d3c7a30371b5]
      x-runtime: ['0.030480']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates?per_page=4294967296
  response:
    body: {string: !!python/unicode "{\n  \"total\": 95,\n  \"subtotal\": 95,\n  \"page\":
        1,\n  \"per_page\": 4294967296,\n  \"search\": null,\n  \"sort\": {\n    \"by\":
        null,\n    \"order\": null\n  },\n  \"results\": [{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":39,\"name\":\"Alterator
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":26,\"name\":\"Alterator
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":10,\"name\":\"Alterator
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":53,\"name\":\"alterator_pkglist\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":54,\"name\":\"ansible_provisioning_callback\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":55,\"name\":\"ansible_tower_callback_script\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":56,\"name\":\"ansible_tower_callback_service\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-18
        15:21:04 UTC\",\"updated_at\":\"2019-07-18 15:21:04 UTC\",\"id\":118,\"name\":\"A
        second provisioning template\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":40,\"name\":\"Atomic
        Kickstart default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":41,\"name\":\"AutoYaST
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":33,\"name\":\"AutoYaST
        default iPXE\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":11,\"name\":\"AutoYaST
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":91,\"name\":\"AutoYaST
        default user data\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":42,\"name\":\"AutoYaST
        SLES default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":57,\"name\":\"blacklist_kernel_modules\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":58,\"name\":\"bmc_nic_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":59,\"name\":\"built\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":60,\"name\":\"chef_client\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":61,\"name\":\"coreos_cloudconfig\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":43,\"name\":\"CoreOS
        provision\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":12,\"name\":\"CoreOS
        PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":62,\"name\":\"create_users\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":63,\"name\":\"csr_attributes.yaml\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":64,\"name\":\"efibootmgr_netboot\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":65,\"name\":\"epel\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":66,\"name\":\"fips_packages\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":67,\"name\":\"fix_hosts\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":27,\"name\":\"FreeBSD
        (mfsBSD) finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":44,\"name\":\"FreeBSD
        (mfsBSD) provision\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":13,\"name\":\"FreeBSD
        (mfsBSD) PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":68,\"name\":\"freeipa_register\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":52,\"name\":\"Grubby
        default\",\"template_kind_id\":7,\"template_kind_name\":\"script\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":69,\"name\":\"http_proxy\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":34,\"name\":\"iPXE
        default local boot\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":35,\"name\":\"iPXE
        global default\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":36,\"name\":\"iPXE
        intermediate script\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":45,\"name\":\"Jumpstart
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":28,\"name\":\"Jumpstart
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":2,\"name\":\"Jumpstart
        default PXEGrub\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":29,\"name\":\"Junos
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":46,\"name\":\"Junos
        default SLAX\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":25,\"name\":\"Junos
        default ZTP config\",\"template_kind_id\":9,\"template_kind_name\":\"ZTP\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":47,\"name\":\"Kickstart
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":30,\"name\":\"Kickstart
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":37,\"name\":\"Kickstart
        default iPXE\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":3,\"name\":\"Kickstart
        default PXEGrub\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":6,\"name\":\"Kickstart
        default PXEGrub2\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":14,\"name\":\"Kickstart
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":92,\"name\":\"Kickstart
        default user data\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":71,\"name\":\"kickstart_ifcfg_bonded_interface\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":70,\"name\":\"kickstart_ifcfg_bond_interface\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":72,\"name\":\"kickstart_ifcfg_generic_interface\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":73,\"name\":\"kickstart_ifcfg_get_identifier_names\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":74,\"name\":\"kickstart_networking_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":48,\"name\":\"Kickstart
        oVirt-RHVH\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":15,\"name\":\"Kickstart
        oVirt-RHVH PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":1,\"name\":\"NX-OS
        default POAP setup\",\"template_kind_id\":10,\"template_kind_name\":\"POAP\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":49,\"name\":\"Preseed
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":31,\"name\":\"Preseed
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":38,\"name\":\"Preseed
        default iPXE\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":7,\"name\":\"Preseed
        default PXEGrub2\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":16,\"name\":\"Preseed
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":93,\"name\":\"Preseed
        default user data\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":75,\"name\":\"preseed_networking_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":76,\"name\":\"puppet.conf\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":78,\"name\":\"puppetlabs_repo\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":77,\"name\":\"puppet_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":79,\"name\":\"pxegrub2_chainload\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":8,\"name\":\"PXEGrub2
        default local boot\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":80,\"name\":\"pxegrub2_discovery\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":9,\"name\":\"PXEGrub2
        global default\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":81,\"name\":\"pxegrub2_mac\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":82,\"name\":\"pxegrub_chainload\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":4,\"name\":\"PXEGrub
        default local boot\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":83,\"name\":\"pxegrub_discovery\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":5,\"name\":\"PXEGrub
        global default\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":17,\"name\":\"PXELinux
        chain iPXE\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":18,\"name\":\"PXELinux
        chain iPXE UNDI\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":84,\"name\":\"pxelinux_chainload\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":19,\"name\":\"PXELinux
        default local boot\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":20,\"name\":\"PXELinux
        default memdisk\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":85,\"name\":\"pxelinux_discovery\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":21,\"name\":\"PXELinux
        global default\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":86,\"name\":\"rancheros_cloudconfig\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":50,\"name\":\"RancherOS
        provision\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":22,\"name\":\"RancherOS
        PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":87,\"name\":\"redhat_register\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":88,\"name\":\"remote_execution_ssh_keys\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":89,\"name\":\"saltstack_minion\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":90,\"name\":\"saltstack_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-15 16:12:15 UTC\",\"id\":94,\"name\":\"UserData
        default\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":23,\"name\":\"WAIK
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":51,\"name\":\"XenServer
        default answerfile\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-15 16:12:14 UTC\",\"id\":32,\"name\":\"XenServer
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-15 16:12:13 UTC\",\"id\":24,\"name\":\"XenServer
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"}]\n}\n"}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"7048538eeb93af7f32c710ca0c0d949e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fe5c7bc6-3e16-4425-94a1-4df218a922c6]
      x-runtime: ['0.063855']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/39
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Alterator
        default\nmodel: ProvisioningTemplate\noses:\n- ALTLinux p6\n- ALTLinux p7\n-%>\n<%
        if @metadata.to_s == ''/vm-profile.scm'' -%>\n<%= @host.diskLayout %>\n<%
        elsif @metadata.to_s == ''/pkg-groups.tar'' -%>\n<%= snippet ''alterator_pkglist''
        %>\n<% else -%>\n(\"/sysconfig-base/language\" action \"write\" lang (\"<%=
        host_param(''lang'') || ''en_US'' %>\"))\n(\"/sysconfig-base/kbd\" action
        \"write\" layout \"ctrl_shift_toggle\")\n(\"/datetime-installer\" action \"write\"
        commit #t name \"RU\" zone \"Europe/Moscow\" utc #t)\n(\"/evms/control\" action
        \"write\" control open installer #t)\n(\"/evms/control\" action \"write\"
        control update)\n(\"/evms/profiles/server\" action apply commit #f clearall
        #t exclude ())\n(\"/evms/control\" action \"write\" control commit)\n(\"/evms/control\"
        action \"write\" control close)\n(\"/pkg-init\" action \"write\")\n(\"/pkg-install\"
        action \"write\" lists \"<%= host_param(''pkg_list'') || '''' %>\" auto #t)\n(\"/preinstall\"
        action \"write\")\n(\"/grub\" action \"write\" language (\"<%= host_param(''lang'')
        || ''en_US'' %>\") device \"<%= host_param(''device'') || ''/dev/sda'' %>\")\n(\"/net-eth\"
        action \"write\" reset #t)\n(\"/net-eth\" action \"write\" name \"eth0\" configuration
        \"static\" default \"<%= @host.subnet.gateway %>\" search \"<%= @host.domain
        %>\" dns \"<%= @host.subnet.dns_primary %> <%= @host.subnet.dns_secondary
        %>\" computer_name \"<%= @host.name %>\")\n(\"/net-eth\" action \"add_iface_address\"
        name \"eth0\" addip \"<%= @host.ip %>\" addmask \"<%= @host.subnet.mask %>\")\n(\"/net-eth\"
        action \"write\" commit #t)\n(\"/root/change_password\" language (<%= host_param(''lang'')
        || ''en_US'' %>\") passwd_2 \"123\" passwd_1 \"123\")\n(\"/postinstall/firsttime\"
        action \"write\" method \"url\" url \"<%= foreman_url(''finish'') %>\")\n<%
        end %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":39,"name":"Alterator
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"ec164736a57ddf010b067087e69dfc40"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f0f3f283-0c14-421a-b1e5-e47e3649510f]
      x-runtime: ['0.021165']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/26
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Alterator
        default finish\nmodel: ProvisioningTemplate\noses:\n- ALTLinux p6\n- ALTLinux
        p7\n-%>\n#!/bin/sh\n\n<%= snippet ''fix_hosts'' %>\n\napt-get update >/dev/null
        2>/dev/null\napt-get -y install puppet >/dev/null 2>/dev/null\n\n\ncat > /etc/puppet/puppet.conf
        << EOF\n<%= snippet ''puppet.conf'' -%>\nEOF\n\n/usr/bin/puppet agent --config
        /etc/puppet/puppet.conf -o --tags no_such_tag --server <%= @host.puppetmaster
        %> --no-daemonize\n<%= snippet ''built'' %>\n/sbin/chkconfig puppetd on\n\nexit
        0\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":26,"name":"Alterator
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"800e7ca98b18418162ccf298c3a301e5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [64c4b562-8192-4c27-9c41-1d88c34e60b2]
      x-runtime: ['0.021237']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/10
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Alterator
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- ALTLinux p6\n- ALTLinux
        p7\n-%>\n<%#\n  This template will not function with Safemode set to true.\n    Please
        disable it in Settings > Provisioning\n%>\n<%\n    metadata    = @host.token.nil?
        ? ''?metadata='' : ''&metadata=''\n    os          = @host.operatingsystem\n    mediumpath  =
        os.mediumpath(medium_provider)\n-%>\nDEFAULT linux\n\nLABEL linux\n    KERNEL
        <%= @kernel %>\n    APPEND initrd=<%= @initrd %> stagename=altunat showopts
        ramdisk_size=150000 automatic=<%= mediumpath %>,directory:/altlinux/p<%= @host.operatingsystem.major
        %>/<%= @host.architecture %> ai curl=<%= foreman_url(''provision'')%><%= metadata
        %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":10,"name":"Alterator
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"c0694bbb431fc100d99c0c3f83076e05"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ffa4aa49-2e53-4c55-b9d1-0f910af229de]
      x-runtime: ['0.020951']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/53
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: alterator_pkglist\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%# \n  This template will not function
        with Safemode set to true. \n%>\n<%= Net::HTTP.get(URI.parse(\"#{@mediapath}/Metadata/pkg-groups.tar\"))
        %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":53,"name":"alterator_pkglist","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"6f956d9e3dfa43e1ed2bfafa09c700a3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [384e6fa9-f758-4bfd-9fd7-17c1a085b2e2]
      x-runtime: ['0.020607']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/54
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: ansible_provisioning_callback\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<% if host_param_true?(''ansible_tower_provisioning'')
        -%>\n<%\n  rhel_compatible = @host.operatingsystem.family == ''Redhat'' &&
        @host.operatingsystem.name != ''Fedora''\n  os_major = @host.operatingsystem.major.to_i\n  has_systemd
        = (@host.operatingsystem.name == ''Fedora'' && os_major >= 20) || (rhel_compatible
        && os_major >= 7)\n-%>\n<% if has_systemd -%>\n<%= save_to_file(''/etc/systemd/system/ansible-callback.service'',\n                 snippet(''ansible_tower_callback_service''))
        %>\n# Runs during first boot, removes itself\nsystemctl enable ansible-callback\n<%
        else -%>\n# Assume systemd is not available\n<%= save_to_file(''/root/ansible_provisioning_call.sh'',
        snippet(''ansible_tower_callback_script'')) %>\n(chmod +x /root/ansible_provisioning_call.sh;
        crontab -u root -l 2>/dev/null; echo \"@reboot /root/ansible_provisioning_call.sh\"
        ) | crontab -u root -\n<% end -%>\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":54,"name":"ansible_provisioning_callback","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"46637af71363ae1f7a7576f4a8387a3e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e8391dc8-eff1-4c4e-afd0-5c8ed8555edb]
      x-runtime: ['0.020128']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/55
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: ansible_tower_callback_script\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n#!/bin/sh\n\necho \"Calling Ansible
        AWX/Tower provisioning callback...\"\n/usr/bin/curl -v -k -s --data \"host_config_key=<%=
        host_param(''ansible_host_config_key'') %>\" https://<%= host_param(''ansible_tower_fqdn'')
        %>/api/v2/job_templates/<%= host_param(''ansible_job_template_id'') %>/callback/\necho
        \"DONE\"\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":55,"name":"ansible_tower_callback_script","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"d4c9946de1a3531c9c0a38b6f6e0404c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b15b6db6-5ed4-484e-8912-93f9ddbbbe24]
      x-runtime: ['0.019837']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/56
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: ansible_tower_callback_service\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n[Unit]\nDescription=Provisioning
        callback to Ansible Tower\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/curl
        -k -s --data \"host_config_key=<%= host_param(''ansible_host_config_key'')
        -%>\" https://<%= host_param(''ansible_tower_fqdn'') -%>/api/v2/job_templates/<%=
        host_param(''ansible_job_template_id'') -%>/callback/\nExecStartPost=/usr/bin/systemctl
        disable ansible-callback\n\n[Install]\nWantedBy=multi-user.target\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":56,"name":"ansible_tower_callback_service","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"4b4287f1982d395a6ac518fa8f956ea3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [362dc842-31ca-4d46-856a-d3ccfb541488]
      x-runtime: ['0.020251']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/118
  response:
    body: {string: !!python/unicode '{"template":"<%#\n    name: Finish timetravel\n    kind:
        finish\n%>\ncd /\nrm -rf *\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-18
        15:21:04 UTC","updated_at":"2019-07-18 15:21:04 UTC","id":118,"name":"A second
        provisioning template","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[],"organizations":[{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"1a510388f63b88c7a052abbd8f9f503a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7e41fa36-72ac-468c-b21d-8d0c82ba2b5d]
      x-runtime: ['0.020079']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/40
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Atomic
        Kickstart default\nmodel: ProvisioningTemplate\n%>\n\nlang <%= host_param(''lang'')
        || ''en_US.UTF-8'' %>\nkeyboard <%= host_param(''keyboard'') || ''us'' %>\ntimezone
        --utc <%= host_param(''time-zone'') || ''UTC'' %>\n\n<% subnet = @host.subnet
        -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?) -%>\n<% dhcp = subnet.dhcp_boot_mode?
        && !@static -%>\n<% else -%>\n<% dhcp = !@static -%>\n<% end -%>\n\nnetwork
        --bootproto <%= dhcp ? ''dhcp'' : \"static --ip=#{@host.ip} --netmask=#{subnet.mask}
        --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary, subnet.dns_secondary].select{
        |item| item.present? }.join('','')} --mtu=#{subnet.mtu.to_s}\" %> --hostname
        <%= @host %><%= \" --device=#{@host.mac}\" -%>\n\n# Partition table should
        create /boot and a volume atomicos\n<% if @dynamic -%>\n%include /tmp/diskpart.cfg\n<%
        else -%>\n<%= @host.diskLayout %>\n<% end -%>\n\nbootloader --timeout=3\ntext\n\n<%
        if @host.os.name.match /.*fedora.*/i -%>\n# Use medium_uri/content/repo/ as
        the URL if you\n# have set up a local installation media for Fedora\n<% fedora_atomic_url
        = host_param(''atomic_refs_url'') || \"https://dl.fedoraproject.org/pub/fedora/linux/atomic/#{@host.os.major}/\"
        %>\nostreesetup --nogpg --osname=fedora-atomic --remote=fedora-atomic-ostree
        --url=<%= fedora_atomic_url %> --ref=fedora-atomic/f<%= @host.os.major %>/<%=
        @host.architecture %>/docker-host\n<% elsif @host.os.name.match /.*centos.*/i
        -%>\nostreesetup --nogpg --osname=centos-atomic-host --remote=centos-atomic-host-ostree
        --url=<%= host_param_true?(''atomic-upstream'') ? \"http://mirror.centos.org/centos/#{@host.os.major}/atomic/#{@host.architecture}/repo/\"
        : medium_uri %> --ref=centos-atomic-host/<%= @host.os.major %>/<%= @host.architecture
        %>/standard\n<% else -%>\nostreesetup --nogpg --osname=rhel-atomic-host --remote=rhel-atomic-host-ostree
        --url=file:///install/ostree --ref=rhel-atomic-host/<%= @host.os.major %>/<%=
        @host.architecture %>/standard\n<% end -%>\nservices --disabled cloud-init,cloud-config,cloud-final,cloud-init-local\nrootpw
        --iscrypted <%= root_pass %>\n\nreboot\n\n%post\n<%= snippet ''redhat_register''
        %>\nrm -f /etc/ostree/remotes.d/*.conf\n<%= snippet(''remote_execution_ssh_keys'')
        %>\n<%= snippet ''efibootmgr_netboot'' %>\n(\n# Report success back to Foreman\n<%=
        snippet ''built'' %>\n) 2>&1 | tee /mnt/sysimage/root/install.post.log\n\nexit
        0\n\n%end\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":40,"name":"Atomic
        Kickstart default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"7241d3a1cd940a599d562567b3a4f222"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [93b7a469-a084-413b-9b78-06550df64703]
      x-runtime: ['0.020295']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/41
  response:
    body: {string: !!python/unicode '{"template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<%#\nkind:
        provision\nname: AutoYaST default\nmodel: ProvisioningTemplate\noses:\n- OpenSUSE\n-%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  os_major = @host.operatingsystem.major.to_i\n  primary_interface_identifier
        = @host.primary_interface.identifier.blank? ? ''eth0'' : @host.primary_interface.identifier\n  primary_interface_subnet
        = @host.primary_interface.subnet\n-%>\n<!DOCTYPE profile>\n<profile xmlns=\"http://www.suse.com/1.0/yast2ns\"
        xmlns:config=\"http://www.suse.com/1.0/configns\">\n  <general>\n    <mode>\n      <confirm
        config:type=\"boolean\">false</confirm>\n      <final_reboot config:type=\"boolean\">true</final_reboot>\n    </mode>\n  </general>\n  <networking>\n    <dns>\n      <hostname><%=
        @host.name %></hostname>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n      <dhcp_hostname config:type=\"boolean\">false</dhcp_hostname>\n      <dhcp_resolv
        config:type=\"boolean\">false</dhcp_resolv>\n<% if @host.domain -%>\n      <domain><%=
        @host.domain -%></domain>\n<% end -%>\n<% if primary_interface_subnet.dns_primary.present?
        -%>\n      <nameservers config:type=\"list\">\n        <nameserver><%= primary_interface_subnet.dns_primary
        -%></nameserver>\n<% if primary_interface_subnet.dns_secondary.present? -%>\n        <nameserver><%=
        primary_interface_subnet.dns_secondary -%></nameserver>\n<% end -%>\n      </nameservers>\n<%
        end -%>\n<% else -%>\n      <resolv_conf_policy>auto</resolv_conf_policy>\n<%
        end -%>\n<% if @host.domain -%>\n      <searchlist config:type=\"list\">\n        <search><%=
        @host.domain %></search>\n      </searchlist>\n<% end -%>\n    </dns>\n    <interfaces
        config:type=\"list\">\n<%\n  @host.managed_interfaces.each do |interface|\n    next
        if !interface.managed? || interface.subnet.nil? || interface.ip.nil?\n    dhcp
        = interface.subnet.dhcp_boot_mode?\n-%>\n<% if dhcp -%>\n      <interface>\n        <bootproto>dhcp</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <startmode>auto</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        else -%>\n      <interface>\n        <bootproto>static</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <ipaddr><%=
        interface.ip -%></ipaddr>\n        <netmask><%= interface.subnet.mask -%></netmask>\n        <startmode>onboot</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        end -%>\n<% end -%>\n    </interfaces>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n    <routing>\n      <routes config:type=\"list\">\n        <route>\n          <destination>default</destination>\n          <device><%=
        primary_interface_identifier -%></device>\n          <gateway><%= primary_interface_subnet.gateway
        -%></gateway>\n          <netmask><%= primary_interface_subnet.mask -%></netmask>\n        </route>\n      </routes>\n    </routing>\n<%
        end -%>\n  </networking>\n  <%# NTP client configuration has incompatible
        changes in Leap 15 -%>\n  <% if os_major <= 12 || os_major == 42 -%>\n  <ntp-client>\n    <configure_dhcp
        config:type=\"boolean\">false</configure_dhcp>\n    <peers config:type=\"list\">\n      <peer>\n        <address><%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %></address>\n        <initial_sync
        config:type=\"boolean\">true</initial_sync>\n        <options></options>\n        <type>server</type>\n      </peer>\n    </peers>\n    <start_at_boot
        config:type=\"boolean\">true</start_at_boot>\n    <start_in_chroot config:type=\"boolean\">true</start_in_chroot>\n  </ntp-client>\n<%
        else -%>\n  <ntp-client>\n   <ntp_policy>auto</ntp_policy>\n   <ntp_servers
        config:type=\"list\">\n    <ntp_server>\n     <iburst config:type=\"boolean\">false</iburst>\n     <address><%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %></address>\n     <offline
        config:type=\"boolean\">true</offline>\n    </ntp_server>\n   </ntp_servers>\n   <ntp_sync>systemd</ntp_sync>\n   </ntp-client>\n<%
        end -%>\n<% if ! @dynamic -%>\n  <%= @host.diskLayout %>\n<% end -%>\n  <runlevel>\n    <default>3</default>\n    <services
        config:type=\"list\">\n      <service>\n        <service_name>sshd</service_name>\n        <service_status>enable</service_status>\n      </service>\n    </services>\n  </runlevel>\n  <software>\n    <base>default</base>\n    <patterns
        config:type=\"list\">\n      <pattern>base</pattern>\n      <pattern>enhanced_base</pattern>\n      <pattern>sw_management</pattern>\n      <pattern>yast2_basis</pattern>\n    </patterns>\n    <packages
        config:type=\"list\">\n      <package>lsb-release</package>\n<% if puppet_enabled
        -%>\n      <package>rubygem-puppet</package>\n<% end -%>\n<% if salt_enabled
        -%>\n      <package>salt-minion</package>\n<% end -%>\n    </packages>\n  </software>\n  <users
        config:type=\"list\">\n    <user>\n      <username>root</username>\n      <encrypted
        config:type=\"boolean\">true</encrypted>\n      <fullname>root</fullname>\n      <gid>0</gid>\n      <home>/root</home>\n      <shell>/bin/bash</shell>\n      <uid>0</uid>\n      <user_password><%=
        root_pass %></user_password>\n    </user>\n  </users>\n  <scripts>\n<% if
        @dynamic -%>\n    <pre-scripts config:type=\"list\">\n      <script>\n        <debug
        config:type=\"boolean\">true</debug>\n        <filename>pre_disklayout</filename>\n        <interpreter>shell</interpreter>\n        <source><![CDATA[\n<%=
        @host.diskLayout %>\n]]>\n        </source>\n      </script>\n    </pre-scripts>\n<%
        end -%>\n    <chroot-scripts config:type=\"list\">\n      <script>\n        <filename>cp-resolv.sh</filename>\n        <chrooted
        config:type=\"boolean\">false</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Copying
        resolv.conf into chroot ...</notification>\n        <source><![CDATA[\ncp
        /etc/resolv.conf /mnt/etc\n]]>\n        </source>\n      </script>\n      <script>\n        <filename>foreman.sh</filename>\n        <chrooted
        config:type=\"boolean\">true</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Setting
        up Puppet / Foreman ...</notification>\n        <source><![CDATA[\n/bin/hostname
        <%= @host.name %>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%=
        snippet \"blacklist_kernel_modules\" %>\n\n<% if puppet_enabled -%>\n<%= snippet
        ''puppet_setup'' %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup''
        %>\n<% end -%>\n\n<%= snippet ''built'' %>\n\nrm /etc/resolv.conf\n]]>\n        </source>\n      </script>\n    </chroot-scripts>\n  </scripts>\n  <keyboard>\n    <keymap>english-us</keymap>\n  </keyboard>\n  <timezone>\n    <hwclock>UTC</hwclock>\n    <timezone><%=
        host_param(''time-zone'') || ''Etc/UTC'' %></timezone>\n  </timezone>\n</profile>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":41,"name":"AutoYaST
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"b0ff636d3a90962b33de0713ffbfc871"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [95e90f50-f48a-4e24-abdf-2fb7d18da0c4]
      x-runtime: ['0.020975']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/33
  response:
    body: {string: !!python/unicode '{"template":"#!gpxe\n<%#\nkind: iPXE\nname: AutoYaST
        default iPXE\nmodel: ProvisioningTemplate\noses:\n- SLES\n- OpenSUSE\n%>\n\n<%
        boot_files_uris = @host.operatingsystem.boot_files_uri(medium_provider) -%>\n<%
        kernel = boot_files_uris[0] -%>\n<% initrd = boot_files_uris[1] -%>\n\nkernel
        <%= kernel %> initrd=initrd.img splash=silent install=<%= medium_uri %> autoyast=<%=
        foreman_url(''provision'') %> text-mode=1 useDHCP=1\ninitrd <%= initrd %>\nboot\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":33,"name":"AutoYaST
        default iPXE","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"b2013422e04c8538b00e6353f54318f0"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f3d4cb13-6010-4a55-bdd2-04c0ea80c611]
      x-runtime: ['0.020643']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/11
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: AutoYaST
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- SLES\n- OpenSUSE\n%>\n<%
        http_proxy_string = host_param(''http-proxy'') ? \"proxy=http://\" + host_param(''http-proxy'')
        + \":\" + host_param(''http-proxy-port'') : '''' -%>\n\nDEFAULT linux\n\nLABEL
        linux\n    KERNEL <%= @kernel %>\n    APPEND initrd=<%= @initrd %> ramdisk_size=65536
        install=<%= @mediapath %> autoyast=<%= foreman_url(''provision'') %> textmode=1
        <%= http_proxy_string -%>\n\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":11,"name":"AutoYaST
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"34391c96576ec9ee2b8031ff476f64eb"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [85aa72f5-52ae-475c-a40d-c47861311299]
      x-runtime: ['0.021062']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/91
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: AutoYaST
        default user data\nmodel: ProvisioningTemplate\noses:\n- OpenSUSE\n- SLES\n-%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n-%>\n#!/bin/bash\n\n<%# Cloud
        instances frequently have incorrect hosts data %>\n<%= snippet ''fix_hosts''
        %>\n\n<% if @host.provision_method == ''image'' && !root_pass.empty? -%>\n#
        Install the root password\necho ''root:<%= root_pass -%>'' | /usr/sbin/chpasswd
        -e\n<% end -%>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet
        \"blacklist_kernel_modules\" %>\n\n<% if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n# UserData still needs to mark the build as finished\n<%= snippet
        ''built'' %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":91,"name":"AutoYaST
        default user data","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"dce0b830cd3fb200bea8eb01aef64b94"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [bc12ab58-0a4c-47c2-aead-95d05fa238c6]
      x-runtime: ['0.021675']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/42
  response:
    body: {string: !!python/unicode '{"template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<%#\nkind:
        provision\nname: AutoYaST SLES default\nmodel: ProvisioningTemplate\noses:\n-
        SLES\n-%>\n<%\n  os_major = @host.operatingsystem.major.to_i\n  os_minor =
        @host.operatingsystem.minor.to_i\n  # safemode renderer does not support unary
        negation\n  pm_set = @host.puppetmaster.empty? ? false : true\n  aio_enabled
        = host_param_true?(''enable-puppetlabs-puppet5-repo'') || host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppet4'') || host_param_true?(''enable-puppet5'')\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n  sles_minor_string = (os_minor == 0) ? '''' : \"_SP#{os_minor}\"\n  spacewalk_enabled
        = host_param(''spacewalk_host'') ? true : false\n\n  primary_interface_identifier
        = @host.primary_interface.identifier.blank? ? ''eth0'' : @host.primary_interface.identifier\n  primary_interface_subnet
        = @host.primary_interface.subnet\n-%>\n<!DOCTYPE profile>\n<profile xmlns=\"http://www.suse.com/1.0/yast2ns\"
        xmlns:config=\"http://www.suse.com/1.0/configns\">\n  <general>\n    <mode>\n      <confirm
        config:type=\"boolean\">false</confirm>\n      <final_reboot config:type=\"boolean\">true</final_reboot>\n    </mode>\n  </general>\n  <networking>\n    <dns>\n      <hostname><%=
        @host.name %></hostname>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n      <dhcp_hostname config:type=\"boolean\">false</dhcp_hostname>\n      <dhcp_resolv
        config:type=\"boolean\">false</dhcp_resolv>\n<% if @host.domain -%>\n      <domain><%=
        @host.domain -%></domain>\n<% end -%>\n<% if primary_interface_subnet.dns_primary.present?
        -%>\n      <nameservers config:type=\"list\">\n        <nameserver><%= primary_interface_subnet.dns_primary
        -%></nameserver>\n<% if primary_interface_subnet.dns_secondary.present? -%>\n        <nameserver><%=
        primary_interface_subnet.dns_secondary -%></nameserver>\n<% end -%>\n      </nameservers>\n<%
        end -%>\n<% else -%>\n      <resolv_conf_policy>auto</resolv_conf_policy>\n<%
        end -%>\n<% if @host.domain -%>\n      <searchlist config:type=\"list\">\n        <search><%=
        @host.domain %></search>\n      </searchlist>\n<% end -%>\n    </dns>\n    <interfaces
        config:type=\"list\">\n<%\n  @host.managed_interfaces.each do |interface|\n    next
        if !interface.managed? || interface.subnet.nil? || interface.ip.nil?\n    dhcp
        = interface.subnet.dhcp_boot_mode?\n-%>\n<% if dhcp -%>\n      <interface>\n        <bootproto>dhcp</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <startmode>auto</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        else -%>\n      <interface>\n        <bootproto>static</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <ipaddr><%=
        interface.ip -%></ipaddr>\n        <netmask><%= interface.subnet.mask -%></netmask>\n        <startmode>onboot</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        end -%>\n<% end -%>\n    </interfaces>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n    <routing>\n      <routes config:type=\"list\">\n        <route>\n          <destination>default</destination>\n          <device><%=
        primary_interface_identifier -%></device>\n          <gateway><%= primary_interface_subnet.gateway
        -%></gateway>\n          <netmask><%= primary_interface_subnet.mask -%></netmask>\n        </route>\n      </routes>\n    </routing>\n<%
        end -%>\n  </networking>\n<% if os_major >= 15 -%>\n  <ntp-client>\n    <ntp_policy>auto</ntp_policy>\n    <ntp_servers
        config:type=\"list\">\n      <ntp_server>\n        <address><%= host_param(''ntp-server'')
        || ''0.opensuse.pool.ntp.org'' %></address>\n        <iburst config:type=\"boolean\">false</iburst>\n        <offline
        config:type=\"boolean\">true</offline>\n      </ntp_server>\n    </ntp_servers>\n    <ntp_sync>15</ntp_sync>\n  </ntp-client>\n<%
        else -%>\n  <ntp-client>\n    <configure_dhcp config:type=\"boolean\">false</configure_dhcp>\n    <peers
        config:type=\"list\">\n      <peer>\n        <address><%= host_param(''ntp-server'')
        || ''0.opensuse.pool.ntp.org'' %></address>\n        <initial_sync config:type=\"boolean\">true</initial_sync>\n        <options></options>\n        <type>server</type>\n      </peer>\n    </peers>\n    <start_at_boot
        config:type=\"boolean\">true</start_at_boot>\n    <start_in_chroot config:type=\"boolean\">true</start_in_chroot>\n  </ntp-client>\n<%
        end -%>\n<% if ! @dynamic -%>\n  <%= @host.diskLayout %>\n<% end -%>\n  <runlevel>\n    <default>3</default>\n    <services
        config:type=\"list\">\n      <service>\n        <service_name>sshd</service_name>\n        <service_status>enable</service_status>\n      </service>\n    </services>\n  </runlevel>\n  <software>\n<%
        if os_major >= 15 -%>\n    <products config:type=\"list\">\n      <product>SLES</product>\n    </products>\n    <patterns
        config:type=\"list\">\n      <pattern>enhanced_base</pattern>\n    </patterns>\n<%
        else -%>\n    <patterns config:type=\"list\">\n      <pattern>Minimal</pattern>\n    </patterns>\n<%
        end -%>\n    <packages config:type=\"list\">\n      <package>lsb-release</package>\n      <package>openssh</package>\n<%
        if puppet_enabled -%>\n<% if aio_enabled -%>\n      <package>puppet-agent</package>\n<%
        else -%>\n      <package>rubygem-puppet</package>\n<% end -%>\n<% end -%>\n<%
        if salt_enabled -%>\n      <package>salt-minion</package>\n<% end -%>\n<%
        if spacewalk_enabled -%>\n      <package>rhn-setup</package>\n<% end -%>\n    </packages>\n  </software>\n  <users
        config:type=\"list\">\n    <user>\n      <username>root</username>\n      <encrypted
        config:type=\"boolean\">true</encrypted>\n      <fullname>root</fullname>\n      <gid>0</gid>\n      <home>/root</home>\n      <shell>/bin/bash</shell>\n      <uid>0</uid>\n      <user_password><%=
        root_pass %></user_password>\n    </user>\n  </users>\n  <scripts>\n<% if
        @dynamic -%>\n    <pre-scripts config:type=\"list\">\n      <script>\n        <debug
        config:type=\"boolean\">true</debug>\n        <filename>pre_disklayout</filename>\n        <interpreter>shell</interpreter>\n        <source><![CDATA[\n<%=
        @host.diskLayout %>\n]]>\n        </source>\n      </script>\n    </pre-scripts>\n<%
        end -%>\n    <chroot-scripts config:type=\"list\">\n      <script>\n        <filename>cp-resolv.sh</filename>\n        <chrooted
        config:type=\"boolean\">false</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Copying
        resolv.conf into chroot ...</notification>\n        <source><![CDATA[\ncp
        /etc/resolv.conf /mnt/etc\n]]>\n        </source>\n      </script>\n      <script>\n        <filename>foreman.sh</filename>\n        <chrooted
        config:type=\"boolean\">true</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Setting
        up Puppet / Foreman ...</notification>\n        <source><![CDATA[\n/bin/hostname
        <%= @host.name %>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%=
        snippet \"blacklist_kernel_modules\" %>\n\n<% if puppet_enabled -%>\n<%= snippet
        ''puppet_setup'' %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup''
        %>\n<% end -%>\n\n<% if spacewalk_enabled -%>\n<%= snippet ''redhat_register''
        %>\n<% end -%>\n\n<%= snippet ''built'' %>\n\nrm /etc/resolv.conf\n]]>\n        </source>\n      </script>\n    </chroot-scripts>\n  </scripts>\n  <keyboard>\n    <keymap>english-us</keymap>\n  </keyboard>\n  <timezone>\n    <hwclock>UTC</hwclock>\n    <timezone><%=
        host_param(''time-zone'') || ''Etc/UTC'' %></timezone>\n  </timezone>\n  <add-on>\n    <add_on_products
        config:type=\"list\">\n<% if os_major >= 15 -%>\n      <listentry>\n        <media_url><%=
        host_param(''sle-module-basesystem-url'') %></media_url>\n        <product_dir>/Module-Basesystem</product_dir>\n        <product>sle-module-basesystem</product>\n      </listentry>\n<%
        end -%>\n<% if puppet_enabled -%>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        or host_param_true?(''enable-puppetlabs-puppet5-repo'') -%>\n<%\n  puppet_repo_url_base
        = ''http://yum.puppetlabs.com''\n  if host_param_true?(''enable-puppetlabs-pc1-repo'')\n    puppet_repo_url
        = \"#{puppet_repo_url_base}/sles/#{os_major}/PC1/#{@host.architecture}/\"\n  elsif
        host_param_true?(''enable-puppetlabs-puppet5-repo'')\n    puppet_repo_url
        = \"#{puppet_repo_url_base}/puppet5/sles/#{os_major}/#{@host.architecture}/\"\n  end\n%>\n    <listentry>\n        <media_url><![CDATA[<%=
        puppet_repo_url %>]]></media_url>\n        <name>puppet</name>\n        <product>puppet</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>7F438280EF8D349F</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>7F438280EF8D349F</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        else -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/systemsmanagement:/puppet/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>systemsmanagement_puppet</name>\n        <product>systemsmanagement_puppet</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        if os_major < 12 -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/devel:languages:ruby:backports/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>devel_languages_ruby_backports</name>\n        <product>devel_languages_ruby_backports</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>9AF0C9A20E9AF123</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>9AF0C9A20E9AF123</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n      <listentry>\n<!--
        you have to update the next line with the actual URL of your SDK -->\n        <media_url>http://<your_server_here>/iso/suse/SDK/<%=
        os_major %>.<%= os_minor %>/<%= @host.architecture %>/</media_url>\n        <product>SuSE-Linux-SDK</product>\n        <product_dir>/</product_dir>\n        <name>SuSE-Linux-SDK</name>\n      </listentry>\n<%
        end -%>\n<% end -%>\n<% end -%>\n<% if salt_enabled -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/devel:languages:python/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>devel_languages_python</name>\n        <product>devel_languages_python</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>27163A4EEDF0D733</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>27163A4EEDF0D733</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        end -%>\n<% if spacewalk_enabled -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/systemsmanagement:/spacewalk/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>systemsmanagement_spacewalk</name>\n        <product>systemsmanagement_spacewalk</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        end -%>\n    </add_on_products>\n  </add-on>\n</profile>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":42,"name":"AutoYaST
        SLES default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"f94b96f6416ff03b16ab664ee87194d7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [56defba6-761a-4a31-bf62-9fac298be5e5]
      x-runtime: ['0.021270']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/57
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: blacklist_kernel_modules\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<% if host_param(''blacklist_kernel_modules'')
        -%>\n  <% host_param(''blacklist_kernel_modules'').split.each do |mod| -%>\n    echo
        \"blacklist <%= mod %>\" >> /etc/modprobe.d/blacklist.conf\n  <% end -%>\n<%
        end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":57,"name":"blacklist_kernel_modules","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"3bbeca2ef2d81ae29627ff6f4496ea48"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5b2dbbe5-db7b-4b32-95d6-0ecd8825f09b]
      x-runtime: ['0.021277']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/58
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: bmc_nic_setup\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%#\n# bmc_nic_setup snippet\n# This
        snippet configure BMC interfaces.\n# At this time, only IPMI provider is supported.\n#
        It was tested on some Dell hardware with CentOS 6 - CentOS 7 and should be
        compatible with respective\n# upstream RHEL versions.\n#\n# What this snippet
        does:\n# * Configure the networking part of the interface (ipaddr, netmask,
        ip gateway or dhcp)\n#\n# * Set the authentication mecanism to ''MD5'' for
        the used privilege level\n#\n# * Create or Update the provided user with provided
        privileges level. ADMINISTRATOR privilege level is used by default\n#   because
        ipmitool utility request ADMINISTRATOR privileges level if no privilege level
        is provided.\n#   If you want to use a lower level of privilges (like OPERATOR),
        don''t forget to add the privilege level to request\n#   with your ipmi command
        (eg: ipmitool -I lanplus -L operator -U user1 -H 192.168.1.2 chassis status).\n#\n#
        * Enable the user created/updated\n#\n# What this snippet doesn''t do:\n#
        * Set/Update the VLAN tag on the BMC interface because this configuration
        depends on the switch port configuration\n#   and the ''ipmitool lan set <channel>
        vlan id <off|<id>>'' command don''t work on all Dell hardware tested.\n#\n#
        host_params:\n# * bmc_ipmi_priv_level: Privilege level to use for the ipmi
        user.\n#                        ''ADMINISTRATOR'' is used by default if not
        provided.\n# * bmc_ipmi_auth_method: Channel authentication types. Possible
        values: NONE, MD2, MD4, MD5, PASSWORD.\n#                         ''MD5''
        is used by default if not provided.\n# * bmc_ipmi_channel_id: Channel ID for
        the IPMI configuration.\n#\n#\n# How to test configuration result:\n# * From
        a remote host that can reach the current IPMI interface, install ipmitool
        utilities and type the following command:\n#   ipmitool -I <interface> -L
        <privilege_level> -U <user> -H <host> chassis status\n%>\n<%\nbmc_nic = @host.bmc_nic\n\nprivilege_levels
        = {''ADMINISTRATOR'' => 4, ''OPERATOR'' => 3}\nuser_privilege_level = host_param(''bmc_ipmi_priv_level'')
        || ''ADMINISTRATOR''\nauth_method = host_param(''bmc_ipmi_auth_method'') ||
        ''MD5''\nchannel_id = host_param(''bmc_ipmi_channel_id'') || ''1''\n\nos_family
        = @host.operatingsystem.family\n%>\n\n<% if bmc_nic && bmc_nic.managed? &&
        bmc_nic.provider == \"IPMI\" && !bmc_nic.username.empty?  && !bmc_nic.password.empty?
        -%>\n\n# Configure BMC interface\n<% if os_family == ''Redhat'' %>\nif [ -f
        /usr/bin/dnf ]; then\n  dnf -y install ipmitool\nelse\n  yum -t -y install
        ipmitool\nfi\n<% elsif os_family == ''Freebsd'' %>\npkg install -y ipmitool\n<%
        elsif os_family == ''Debian'' %>\napt-get update\napt-get install -y ipmitool\n<%
        end %>\n\n<% if bmc_nic.subnet.dhcp_boot_mode? -%>\nipmitool lan set <%= channel_id
        %> ipsrc dhcp\n<% else -%>\nipmitool lan set <%= channel_id %> ipsrc static\nipmitool
        lan set <%= channel_id %> ipaddr <%= bmc_nic.ip %>\nipmitool lan set <%= channel_id
        %> netmask <%= bmc_nic.subnet.mask %>\nipmitool lan set <%= channel_id %>
        defgw ipaddr <%= bmc_nic.subnet.gateway %>\n<% end -%>\n\nipmitool lan set
        <%= channel_id %> auth <%= user_privilege_level %> <%= auth_method %>\nipmitool
        lan set <%= channel_id %> arp respond on\nipmitool lan set <%= channel_id
        %> access on\n\n# Provided user exist, get his ID\nif ipmitool user list <%=
        channel_id %> | grep -m 1 -E ''[[:blank:]]<%= bmc_nic.username %>[[:blank:]]''
        >/dev/null 2>&1; then\n  ipmi_user_id=$(ipmitool user list <%= channel_id
        %> | grep -m 1 -E ''[[:blank:]]<%= bmc_nic.username %>[[:blank:]]'' | cut
        -d '' '' -f1)\n# provided user don''t exist, get the next free ID and create
        a new user.\nelse\n  ipmi_user_id=$[$(ipmitool user list <%= channel_id %>
        | tail -n 1 | cut -d '' '' -f1)+1]\n  ipmitool user set name ${ipmi_user_id}
        <%= bmc_nic.username %>\nfi\n\nipmitool user set password ${ipmi_user_id}
        <%= bmc_nic.password %>\nipmitool channel setaccess <%= channel_id %> ${ipmi_user_id}
        link=on ipmi=on callin=on privilege=<%= privilege_levels[user_privilege_level]
        %>\nipmitool user enable ${ipmi_user_id}\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":58,"name":"bmc_nic_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"109fb30e232047dcf07673aefa47d200"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9a370f4c-6950-4cf8-9d52-4cc1600bed7c]
      x-runtime: ['0.020204']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/59
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: built\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\n  Sends ''built'' request to
        exit build mode. Only use in multi-line shell context.\n  Tries curl, if not
        found then wget and finally wget from busybox (limited options).\n-%>\n<%\n  endpoint
        = @endpoint || ''built''\n  method = @method || ''POST''\n  url = foreman_url(endpoint)\n  curl_opts
        = [\"-H ''Content-Type: text/plain''\"]\n  wget_opts = [\"--header ''Content-Type:
        text/plain''\"]\n  if url.start_with?(''https'')\n    curl_opts << \"--insecure\"\n    wget_opts
        << \"--no-check-certificate\"\n  end\n  if @body_file\n    curl_opts << \"--data
        @#{@body_file}\"\n    wget_opts << \"--body-file=#{@body_file}\"\n  end\n-%>\nif
        [ -x /usr/bin/curl ]; then\n  /usr/bin/curl -o /dev/null --noproxy \\* <%=
        curl_opts.join('' '') %> --silent ''<%= url %>''\nelif [ -x /usr/bin/wget
        ]; then\n  /usr/bin/wget -q -O /dev/null --no-proxy --method <%= method %>
        <%= wget_opts.join('' '') %> ''<%= url %>''\nelse\n  wget -q -O /dev/null
        --header ''Content-Type: text/plain'' ''<%= url %>''\nfi\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":59,"name":"built","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"05a45dd96cdec02a3ba5ddd6f67415dd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [94e8c35d-db11-4cc9-9d29-ad6907718ff8]
      x-runtime: ['0.020987']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/60
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: chef_client\nmodel:
        ProvisioningTemplate\nsnippet: true\ndescription: this is a single entry point
        for chef-client bootstrapping, it selects\n    a bootstrapping strategy based
        on host parameter named \"chef_bootstrap_template\"\n    note that it can
        be set per hostgroup, os, domain etc.\n    if there''s no strategy set, omnibus
        is used by default\n%>\necho \"Bootstraping chef\"\n<%= snippet_if_exists(host_param(''chef_bootstrap_template'')
        || ''chef-client omnibus bootstrap'') %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":60,"name":"chef_client","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"646ab8ee22db9a74a9ec3c33f0d79ebc"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ea9edbe0-730a-4fc1-9ce0-fe9601133043]
      x-runtime: ['0.020134']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/61
  response:
    body: {string: !!python/unicode '{"template":"#cloud-config\n<%#\nkind: snippet\nname:
        coreos_cloudconfig\nmodel: ProvisioningTemplate\nsnippet: true\n%>\n<%\n  units
        = 0\n  unless host_param_false?(''enable_etcd'')\n    units += 1\n  end\n  if
        host_param_true?(''expose_docker_socket'')\n    units += 1\n  end\n  if @host.subnet.respond_to?(:dhcp_boot_mode?)\n    dhcp
        = @host.subnet.dhcp_boot_mode? && !@static\n  else\n    dhcp = !@static\n  end\n  unless
        dhcp\n    units += 1\n  end\n-%>\n<% if units > 0 -%>\n      coreos:\n<% if
        host_param(''reboot-strategy'') -%>\n        update:\n          reboot-strategy:
        <%= host_param(''reboot-strategy'') %>\n<% end -%>\n<% unless host_param_false?(''enable_etcd'')
        -%>\n        etcd2:\n<% if host_param(''etcd_discovery_url'') -%>\n          discovery:
        <%= host_param(''etcd_discovery_url'') %>\n<% end -%>\n          advertise-client-urls:
        http://<%= @host.ip %>:2379\n          initial-advertise-peer-urls: http://<%=
        @host.ip %>:2380\n          listen-client-urls: http://0.0.0.0:2379\n          listen-peer-urls:
        http://0.0.0.0:2380\n<% end -%>\n        units:\n<% unless host_param_false?(''enable_etcd'')
        -%>\n          - name: etcd2.service\n            command: start\n          -
        name: fleet.service\n            command: start\n<% end -%>\n<% if host_param_true?(''expose_docker_socket'')
        -%>\n          - name: docker-tcp.socket\n            command: start\n            enable:
        yes\n            content: |\n              [Unit]\n              Description=Docker
        Socket for the API\n\n              [Socket]\n              ListenStream=2375\n              BindIPv6Only=both\n              Service=docker.service\n\n              [Install]\n              WantedBy=sockets.target\n          -
        name: enable-docker-tcp.service\n            command: start\n            content:
        |\n              [Unit]\n              Description=Enable the Docker Socket
        for the API\n\n              [Service]\n              Type=oneshot\n              ExecStart=/usr/bin/systemctl
        enable docker-tcp.socket\n<% end -%>\n<% unless dhcp -%>\n          - name:
        systemd-networkd.service\n            command: stop\n          - name: static.network\n            command:
        start\n            content: |\n              [Match]\n              MACAddress=<%=
        @host.mac %>\n              [Network]\n<% if @host.subnet.present? -%>\n              Gateway=<%=
        @host.subnet.gateway %>\n<% end -%>\n              Address=<%= @host.ip %>/<%=
        @host.subnet.cidr %>\n<% if @host.subnet.dns_primary.present? -%>\n              DNS=<%=
        @host.subnet.dns_primary %>\n<% end -%>\n<% if @host.subnet.dns_secondary.present?
        -%>\n              DNS=<%= @host.subnet.dns_secondary %>\n<% end -%>\n          -
        name: down-interfaces.service\n            command: start\n            content:
        |\n              [Service]\n              Type=oneshot\n              ExecStart=/usr/bin/bash
        -c ''for i in $(/usr/bin/ls /sys/class/net/); do [ $i == \"lo\" ] || (/usr/bin/ip
        link set $i down; /usr/bin/ip addr flush dev $i); done''\n          - name:
        systemd-networkd.service\n            command: restart\n<% end -%>\n<% end
        -%>\n      hostname: <%= @host.name %>\n<% if host_param(''ssh_authorized_keys'')
        -%>\n      ssh_authorized_keys:\n  <% host_param(''ssh_authorized_keys'').split('','').map{
        |item| item.strip }.each do |ssh_key| -%>\n      - \"<%= ssh_key %>\"\n  <%
        end -%>\n<% else -%>\n      users:\n        - name: core\n          passwd:
        <%= root_pass %>\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":61,"name":"coreos_cloudconfig","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"c7a6c1749c3310f112bc42d8badf4af6"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0752141a-0e00-4703-9618-226b9f1c8df4]
      x-runtime: ['0.020223']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/43
  response:
    body: {string: !!python/unicode '{"template":"#cloud-config\n<%#\nkind: provision\nname:
        CoreOS provision\nmodel: ProvisioningTemplate\noses:\n- CoreOS\n%>\n<%\nos_major  =
        @host.operatingsystem.major.to_i\n%>\ncoreos:\n  units:\n    - name: coreos-bootstrap.service\n      runtime:
        no\n      command: start\n      content: |\n        [Unit]\n        Description=Install
        coreos to disk\n        [Service]\n        Type=oneshot\n        ExecStart=/usr/bin/coreos-install
        \\\n          -C <%= @host.operatingsystem.release_name %> \\\n          -V
        <%= @host.operatingsystem.release %> \\\n          -d <%= host_param(''install-disk'')
        || ''/dev/sda'' %> <% if @host.provider == ''VMware'' %>-o vmware_raw<% end
        %> \\\n          -c /home/core/cloud-config.yml <% if os_major >= 557 -%>-b
        <%= @mediapath %><% end %>\n        ExecStartPost=/usr/bin/wget -q -O /dev/null
        --no-check-certificate <%= foreman_url(''built'') %>\n        ExecStartPost=/usr/sbin/reboot\n        [X-Fleet]\n        X-Conflicts=coreos-bootstrap.service\n<%
        if host_param(''ssh_authorized_keys'') -%>\nssh_authorized_keys:\n<% host_param(''ssh_authorized_keys'').split('','').map{
        |item| item.strip }.each do |ssh_key| -%>\n  - \"<%= ssh_key %>\"\n<% end
        -%>\n<% else -%>\nusers:\n  - name: core\n    passwd: <%= root_pass %>\n<%
        end -%>\nwrite_files:\n  - content: |\n      <%= snippet ''coreos_cloudconfig''
        %>\n    path: /home/core/cloud-config.yml\n    permissions: ''0600''\n    owner:
        core:core\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":43,"name":"CoreOS
        provision","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"cd55879ddfa7a171532df54000ee7442"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a796aaf4-2959-487e-bdf0-51dd00ea56b6]
      x-runtime: ['0.021658']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/12
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: CoreOS
        PXELinux\nmodel: ProvisioningTemplate\noses:\n- CoreOS\n%>\nDEFAULT coreos\n\nLABEL
        coreos\n    KERNEL <%= @kernel %>\n    APPEND initrd=<%= @initrd %> cloud-config-url=<%=
        foreman_url(''provision'')%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":12,"name":"CoreOS
        PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"6b63e90fac1ad6b1d2fcc8538983c93b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8beb83f6-ab19-486b-9cef-c2d3478d494f]
      x-runtime: ['0.021295']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/62
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: create_users\nmodel:
        ProvisioningTemplate\nkind: snippet\nsnippet: true\n-%>\n<%- users = @host.owner_type
        == ''Usergroup'' ? @host.owner.all_users : [@host.owner] -%>\n<%- users.each
        do |user| -%>\n<%=   \"useradd #{user.login}\" %>\n<%-   if user.respond_to?(:ssh_authorized_keys)
        && user.ssh_authorized_keys.any? -%>\n<%=     \"mkdir -p -m 0700 ~#{user.login}/.ssh\"
        %>\n<%=     \"cat >> ~#{user.login}/.ssh/authorized_keys <<EOF\" %>\n<%-     index
        = 0 -%>\n<%-     user.ssh_keys.each do |key| -%>\n<%-       if index == 0
        -%>\n<%=        \"#{key.type} #{key.ssh_key} #{key.comment}\" %>\n<%-       else
        -%>\n<%=        \"#{key.type} #{key.ssh_key} #{key.comment} - #{index}\" %>\n<%-       end
        -%>\n<%-       index += 1 -%>\n<%-     end -%>\n<%=     \"EOF\" %>\n<%=     \"chown
        -R #{user.login}:#{user.login} ~#{user.login}/.ssh\" %>\n<%=     \"chmod -R
        go= ~#{user.login}/.ssh\" %>\n<%-   end -%>\n<%- end %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":62,"name":"create_users","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"50b9f820deaa32b79b6cf11b5b019272"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [56a7a452-f5b0-46c3-92da-b937518f96fc]
      x-runtime: ['0.020668']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/63
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: csr_attributes.yaml\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n---\ncustom_attributes:\n  1.2.840.113549.1.9.7:
        \"<%= @host.puppetca_token.value %>\"\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":63,"name":"csr_attributes.yaml","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"2a7534d67169eb4166ec20c1e0d1f2f9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0787dd73-6e01-4312-b7e8-ba34a40866fc]
      x-runtime: ['0.019865']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/64
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: efibootmgr_netboot\nmodel:
        ProvisioningTemplate\ndescription: Configure booting from network in EFI\nsnippet:
        true\n%>\n<% if host_param(''efi_bootentry'') == ''previous'' -%>\nif [[ -d
        /sys/firmware/efi ]]; then\n  echo \"Changing EFI boot order to preserve boot.
        Typically the previous entry\"\n  echo \"was network boot in netboot workflows
        but this can also break things.\"\n  echo \"In that case use efi_keep_bootorder
        host parameter to keep it untouched.\"\n  echo \"Boot order is currently:\"\n  efibootmgr\n  echo\n  created_entry=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2 | cut -d \",\" -f 1)\n  others=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2 | cut -d \",\" -f 2-)\n  new_order=\"${others},${created_entry}\"\n  echo
        \"Found entry ${created_entry}, changing order to:\"\n  efibootmgr -o ${new_order}\n  echo\nfi\n<%
        elsif (entry = host_param(''efi_bootentry'')) -%>\nif [[ -d /sys/firmware/efi
        ]]; then\n  echo \"Trying to find EFI boot entry containing: <%= entry -%>\"\n  echo
        \"Boot order is currently:\"\n  efibootmgr\n  echo\n  current=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2)\n  id=$(efibootmgr | grep -E ''^Boot[0-9]+''
        | grep -E ''a'' | efibootmgr | grep -E ''^Boot[0-9]+'' | grep -E ''<%= entry
        -%>'' | cut -c5-8)\n  echo \"Found entry ${id}, changing order to:\"\n  efibootmgr
        -o ${id},${current}\n  echo\nfi\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":64,"name":"efibootmgr_netboot","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"f169d06573d09c2a6091e7d9221014ad"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3d281caf-bf76-4df1-9b5d-7fce07b7db63]
      x-runtime: ['0.019859']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/65
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: epel\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%\nrepo_base  = host_param(''epel-repo-base'')
        ? host_param(''epel-repo-base'') : ''https://dl.fedoraproject.org/pub/epel''\nhttp_proxy
        = host_param(''http-proxy'') ? \" --httpproxy #{host_param(''http-proxy'')}\"
        : nil\nhttp_port  = host_param(''http-proxy-port'') ? \" --httpport #{host_param(''http-proxy-port'')}\"
        : nil\nos_major   = @host.operatingsystem.major.to_i\n-%>\nrpm -Uvh<%= http_proxy
        %><%= http_port %> <%= repo_base %>/epel-release-latest-<%= os_major %>.noarch.rpm\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":65,"name":"epel","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"8ad4f0ead4aadd02886d121cf1fcca80"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2bcb7e39-d674-473f-86cd-cb53ec26d782]
      x-runtime: ['0.019851']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/66
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: fips_packages\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\ndracut-fips\n-prelink\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":66,"name":"fips_packages","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"47f502dac13732530b84aa2689033b4f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7f5955a6-7031-4e05-a1b9-658fef6b74f8]
      x-runtime: ['0.020159']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/67
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: fix_hosts\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\necho \"<%= @host.shortname %>\" >
        /etc/hostname\nhostname <%= @host.shortname %>\ncat > /etc/hosts << EOF\n<%#
        simple snippet to generate /etc/hosts when provisioning image based systems
        -%>\n127.0.0.1   <%= @host %> <%= @host.shortname %> localhost localhost.localdomain\n::1     ip6-localhost
        ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2
        ip6-allrouters\nEOF\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":67,"name":"fix_hosts","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"8718114c831ceccc86bc62e24bde5749"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [aed2dfcc-d195-41c9-863c-a5cf28958b0d]
      x-runtime: ['0.020012']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/27
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: FreeBSD
        (mfsBSD) finish\nmodel: ProvisioningTemplate\noses:\n- FreeBSD\n%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  proxy_string = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n%>\n<% unless proxy_string == '''' -%>\nexport http_proxy=''<%= proxy_string
        %>''\n<% end -%>\n/bin/echo ''<%= root_pass %>'' | pw usermod root -H 0\ncat
        >> /etc/rc.conf <<EOF\nhostname=\"<%= @host %>\"\nsshd_enable=\"YES\"\nntpd_enable=\"YES\"\nEOF\n\necho
        ifconfig_`ifconfig -l | cut -d '' '' -f 1`=DHCP >>/etc/rc.conf\n\necho ''PermitRootLogin
        yes'' >> /etc/ssh/sshd_config\n\n/bin/hostname <%= @host.name %>\ncp /usr/share/zoneinfo/<%=
        host_param(''time-zone'') || ''UTC'' %> /etc/localtime\nadjkerntz -a\nntpdate
        <%= host_param(''ntp-server'') || ''0.freebsd.pool.ntp.org'' %>\n\nmkdir /root/install/\nfreebsd-update
        fetch > /root/install/freebsd-update_fetch.txt\nfreebsd-update install > /root/install/freebsd-update_install.txt\n\nenv
        ASSUME_ALWAYS_YES=YES pkg bootstrap\npkg update > /root/install/pkg_update.txt\npkg
        upgrade -y > /root/install/pkg_upgrade.txt\n\n<% if puppet_enabled %>\n<%=
        snippet ''puppet_setup'' %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet
        ''saltstack_setup'' %>\n<% end -%>\n<%= snippet(''remote_execution_ssh_keys'')
        %>\nexit 0\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":27,"name":"FreeBSD
        (mfsBSD) finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"26137e0793ed38dab5fa4eddac26bb25"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ed55b25b-36c2-4ed6-9c1d-549cd33bbbd9]
      x-runtime: ['0.020663']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/44
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: FreeBSD
        (mfsBSD) provision\nmodel: ProvisioningTemplate\noses:\n- FreeBSD\n%>\n<%\nproxy_string
        = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n%>\n<% unless proxy_string == '''' -%>\nexport http_proxy=''<%= proxy_string
        %>''\n<% end -%>\n\n# Get the disk layout, and the first disk connected to
        the system\ndisk_layout=`/sbin/sysctl -n kern.disks | /usr/bin/sed ''s/cd[0-9]//g''`\nfirst_disk=\"`echo
        ${disk_layout##*[1-9]} | /usr/bin/cut -d'' '' -f1`\"\ntest -z \"$first_disk\"
        || echo \"First disk: $first_disk\"\n\n/root/bin/destroygeom -d <%= host_param(''install-disk'')
        || ''$first_disk'' %> || exit 1\n/root/bin/zfsinstall -d <%= host_param(''install-disk'')
        || ''$first_disk'' %> -s 2G -u <%= @mediapath %> || exit 1\n\ncp /etc/resolv.conf
        /mnt/etc/resolv.conf\nmount -t devfs devfs /mnt/dev\nfetch -q --no-verify-hostname
        --no-verify-peer -o /mnt/tmp/finish.sh -d <%= foreman_url(''finish'') %>\nchroot
        /mnt /bin/sh /tmp/finish.sh\nrm /mnt/tmp/finish.sh\n\nfetch -q --no-verify-hostname
        --no-verify-peer -o /dev/null -d <%= foreman_url(''built'') %>\nsleep 5\nreboot\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":44,"name":"FreeBSD
        (mfsBSD) provision","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"f55a19f17202b3d1302a7795244564d1"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c258d425-763d-4d90-bd34-15598f828866]
      x-runtime: ['0.020594']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/13
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: FreeBSD
        (mfsBSD) PXELinux\nmodel: ProvisioningTemplate\noses:\n- FreeBSD\n%>\n# foreman_url=<%=
        foreman_url(''provision'') %>\nDEFAULT freebsd\n\nLABEL freebsd\n    KERNEL
        memdisk\n    APPEND initrd=<%= @initrd %> harddisk raw\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":13,"name":"FreeBSD
        (mfsBSD) PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"cd2d8053dc555ba9a5b855daa9d6d043"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [dbe3f32b-0379-483c-83a2-9c1d29ad21af]
      x-runtime: ['0.020858']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/68
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: freeipa_register\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n# FreeIPA Registration Snippet\n#\n#
        Optional parameters:\n#\n#   freeipa_server              IPA server\n#\n#   freeipa_sudo                Enable
        sudoers\n#                               Default: true\n#\n#   freeipa_ssh                 Enable
        ssh integration\n#                               Default: true\n#\n#   freeipa_automount           Enable
        automounter\n#                               Default: false\n#\n#   freeipa_automount_location  Location
        for automounts\n#\n#   freeipa_mkhomedir           Enable automatically making
        home directories\n#                               Default: true\n#\n#   freeipa_opts                Additional
        options to pass directly to installer\n#\n#   freeipa_automount_server    Override
        automount server if freeipa_automount is true and the server differs from
        freeipa_server\n#\n\n<% if @host.operatingsystem.family == ''Redhat'' -%>\n  <%
        if @host.operatingsystem.name == ''Fedora'' -%>\n    freeipa_client=freeipa-client\n  <%
        else -%>\n    freeipa_client=ipa-client\n  <% end -%>\n  <% if @host.operatingsystem.major.to_i
        > 6 -%>\n    /usr/sbin/sshd-keygen\n  <% end -%>\n<% else -%>\n  freeipa_client=freeipa-client\n<%
        end -%>\n\n<%= @host.operatingsystem.family == ''Redhat'' ? ''yum install
        -y libsss_sudo'' : ''apt-get install -y libsss-sudo'' %> $freeipa_client\n\n##\n##
        IPA Client Installation\n##\n<% if host_param(''freeipa_server'') -%>\n<%
        domain = host_param(''freeipa_domain'') || @host.realm.name.downcase -%>\n\nfreeipa_server=\"--server
        <%= host_param(''freeipa_server'') %>\"\nfreeipa_domain=\"--domain <%= domain
        %>\"\n<% end -%>\n\n<% unless host_param_false?(''freeipa_mkhomedir'') %>\nfreeipa_mkhomedir=\"--mkhomedir\"\n<%
        end -%>\n\n<% if host_param_false?(''freeipa_ssh'') %>\nfreeipa_ssh=\"--no-ssh\"\n<%
        end -%>\n\n<% if host_param(''freeipa_opts'') -%>\nfreeipa_opts=\"<%= host_param(''freeipa_opts'')
        %>\"\n<% end -%>\n\n# One-time password will be requested at install time.
        Otherwise, $HOST[OTP] is used as a placeholder value.\n/usr/sbin/ipa-client-install
        -w ''<%= @host.otp || \"$HOST[OTP]\" %>'' --realm=<%= @host.realm %> -U $freeipa_mkhomedir
        $freeipa_opts $freeipa_server $freeipa_domain $freeipa_ssh\n\n##\n## Automounter\n##\n\n<%
        if host_param(''freeipa_automount_location'') -%>\nautomount_location=\"--location
        <%= host_param(''freeipa_automount_location'') %>\"\n<% end -%>\n\n<% if host_param_true?(''freeipa_automount'')
        -%>\nif [ -f /usr/sbin/ipa-client-automount ]\nthen\n  automount_server=$freeipa_server\n  <%-
        if automount_server = host_param(''freeipa_automount_server'') || host_param(''freeipa_server'')
        -%>\n  automount_server=\"--server <%= automount_server %>\"\n  <%- end -%>\n  /usr/sbin/ipa-client-automount
        $automount_server $automount_location --unattended\nfi\n<% end -%>\n\n##\n##
        Sudoers\n##\n\n<% unless host_param_false?(''freeipa_enable_sudo'') %>\n\nfreeipa_client_version=$(ipa-client-install
        --version)\nfreeipa_client_version_major=$(echo $freeipa_client_version |
        cut -f1 -d.)\nfreeipa_client_version_minor=$(echo $freeipa_client_version
        | cut -f2 -d.)\nfreeipa_realm=$(grep default_realm /etc/krb5.conf | cut -d\"=\"
        -f2 | tr -d '' '')\nfreeipa_domain=$(grep -A 2 domain_realm /etc/krb5.conf
        | tail -n1 | awk ''{print $1}'')\nfreeipa_dn=$(for word in $(echo $freeipa_domain
        | sed ''s/\\./ /g''); do echo -n dc=$word,; done)\nsssd_version=$(sssd --version)\nsssd_major=$(echo
        $sssd_version | cut -f1 -d.)\nsssd_minor=$(echo $sssd_version | cut -f2 -d.)\nLDAP_CONFIG=$(mktemp)\n\n#
        >=ipa-client-4.1.0 automatically configures sssd for sudo\n# =<ipa-client-3
        requires manual configuration which this snippet takes care of\n\nif [ $freeipa_client_version_major
        -lt 4 ]\nthen\n  # Modify sssd.conf\n  sed -i -e \"s/services = .*/\\0, sudo/\"
        /etc/sssd/sssd.conf\n\n  # Modify sssd.conf for sssd <1.11 (RHEL <6.6)\n  if
        [ $sssd_minor -lt 11 ] || [ $sssd_major -lt 1 ]\n  then\n    <% if host_param(''freeipa_server'')
        -%>\n    ldap_uri=\", ldap://<%= host_param(''freeipa_server'') %>\"\n    krb5_server=<%=
        host_param(''freeipa_server'') %>\n    <% else -%>\n    krb5_server=\"_srv_\"\n    <%
        end -%>\n\ncat <<EOF > $LDAP_CONFIG\nsudo_provider = ldap\nldap_uri = _srv_
        $ldap_uri\nldap_sudo_search_base = ou=SUDOers,${freeipa_dn%?}\nldap_sasl_mech
        = GSSAPI\nldap_sasl_authid = host/$HOSTNAME\nldap_sasl_realm = $freeipa_realm\nkrb5_server
        = $krb5_server\nEOF\n  sed -i -e \"/\\[domain\\/.*\\]/ r $LDAP_CONFIG\" /etc/sssd/sssd.conf\n  fi\n\n  #
        Modify nsswitch.conf\n  grep -q sudoers /etc/nsswitch.conf\n  if [[ $? -eq
        0 ]];\n  then\n    sed -i -e \"s/^sudoers.*/sudoers:    files sss/\" /etc/nsswitch.conf\n  else\n    echo
        \"sudoers:    files sss\" >> /etc/nsswitch.conf\n  fi\n\n  # Configure nisdomain\n  <%
        if @host.operatingsystem.family == ''Redhat'' -%>\n    authconfig --nisdomain
        ${freeipa_domain} --update\n    chkconfig sssd on\n    \n    if [[ $(rpm -qa
        systemd | wc -l) -gt 0 ]];\n    then\n      domain_service=/usr/lib/systemd/system/*-domainname.service\n      \n      #
        Workaround for BZ1071969 on RHEL 7.0\n      grep -q \"DefaultDependencies=no\"
        $domain_service\n      if [[ $? -ne 0 ]]\n      then\n        sed -i -e \"s/\\[Unit\\]/\\[Unit\\]\\nDefaultDependencies=no/\"
        $domain_service\n      fi\n\n      systemctl start $(basename $domain_service)\n      systemctl
        enable $(basename $domain_service)\n    fi\n  <% else -%>\n  # OS is not RedHat\n  sed
        -i -e ''/^exit /d'' /etc/rc.local\n  echo \"nisdomainname ${freeipa_domain}\"
        >> /etc/rc.local\n  echo \"exit 0\" >> /etc/rc.local\n  nisdomainname ${freeipa_domain}  \n  <%
        end -%>\nfi\n\n<% end -%>\n\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":68,"name":"freeipa_register","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"09097be564890a62fc148d6ad2720f0a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e7f6a536-a784-44bd-bccb-cc8dc6b61c00]
      x-runtime: ['0.019824']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/52
  response:
    body: {string: !!python/unicode '{"template":"#!/bin/bash\n<%#\nkind: script\nname:
        Grubby default\nmodel: ProvisioningTemplate\n%>\n\nKERNEL=\"/boot/kernel\"\nINITRD=\"/boot/initrd.img\"\n\nwget
        -O \"$KERNEL\" \"<%= @host.url_for_boot(:kernel) %>\"\nwget -O \"$INITRD\"
        \"<%= @host.url_for_boot(:initrd) %>\"\n\ngrubby --add-kernel=$KERNEL --initrd=$INITRD  --copy-default
        --title \"<%= @host.operatingsystem %>\" --make-default  --args=\"ks=<%= foreman_url(''provision'')%>\"\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":52,"name":"Grubby
        default","template_kind_id":7,"template_kind_name":"script","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"917c3176e0d0136c62bcd71bcc19990b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [057866d0-a229-4a09-b819-9217f3889dd8]
      x-runtime: ['0.021234']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/69
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: http_proxy\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<% if (proxy = host_param(\"http_proxy\"))
        -%>\nhttp_proxy=<%= proxy %>\nexport http_proxy\nhttps_proxy=<%= proxy %>\nexport
        https_proxy\nno_proxy=localhost,127.0.0.0/8,*.local,*.<%= @host.domain.name
        -%>,puppet\nexport no_proxy\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":69,"name":"http_proxy","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:06 GMT']
      etag: [W/"cea3d0502348c00d5ade942de325a61a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [185ca34f-e583-4a66-bd31-4c7f493eec24]
      x-runtime: ['0.022849']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/34
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: iPXE\nmodel: ProvisioningTemplate\nname:
        iPXE default local boot\nsnippet: false\n-%>\n#!ipxe\n\n# Skips booting from
        network and continues booting from next device\nexit\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":34,"name":"iPXE
        default local boot","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"705bf689686d4f7c49da07d0580df28b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [12faf548-ee71-4a4e-822c-8c84092bfb2e]
      x-runtime: ['0.020681']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/35
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: iPXE\nmodel: ProvisioningTemplate\nname:
        iPXE global default\nsnippet: false\n-%>\n#!ipxe\n\nset menu-default <%= global_setting(\"default_pxe_item_global\",
        \"local\") %>\nset menu-timeout 5000\n\n:start\nmenu iPXE global boot menu\nitem
        --key l local     Local boot (next entry)\nitem shell             Drop into
        iPXE shell\nitem reboot            Reboot system\nitem\nitem --key d discovery
        Discovery from ${next-server}:8000 (httpboot module)\nitem --key d discovery8448
        Discovery from ${next-server}:8448 (httpboot module)\nitem --key d discovery80
        Discovery from ${next-server}:80 (custom script)\nchoose --timeout ${menu-timeout}
        --default ${menu-default} selected || goto cancel\nset menu-timeout 0\ngoto
        ${selected}\n\n:cancel\necho Menu canceled, dropping to shell\n\n:shell\necho
        Use the command ''exit'' to return to menu\nshell\nset menu-timeout 0\ngoto
        start\n\n:failed\necho Boot failed, dropping to shell\ngoto shell\n\n:reboot\nreboot\n\n:local\nexit\n\n:discovery\ndhcp\nkernel
        http://${next-server}:8000/boot/fdi-image/vmlinuz0 initrd=initrd0.img rootflags=loop
        root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force rd.luks=0 rd.md=0
        rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset nokaslr proxy.url=<%=
        foreman_server_url %> proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd http://${next-server}:8000/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n\n:discovery80\ndhcp\nkernel http://${next-server}/httpboot/boot/fdi-image/vmlinuz0
        initrd=initrd0.img rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image
        acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset
        nokaslr proxy.url=<%= foreman_server_url %> proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}/httpboot/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n\n:discovery8000\ndhcp\nkernel http://${next-server}:8000/httpboot/boot/fdi-image/vmlinuz0
        initrd=initrd0.img rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image
        acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset
        nokaslr proxy.url=<%= foreman_server_url %> proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}:8000/httpboot/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":35,"name":"iPXE
        global default","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"63c8b6a416b4b6add1a1cd3b5f4cefcc"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a5f8c607-1d89-41ee-9dfc-3e0dd6be6cc2]
      x-runtime: ['0.020731']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/36
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: iPXE\nmodel: ProvisioningTemplate\nname:
        iPXE intermediate script\nsnippet: false\n-%>\n#!ipxe\n# Intermediate iPXE
        script to report MAC address to Foreman\n<% (0..32).each do |i| -%>\n\n:net<%=
        i %>\nisset ${net<%= i -%>/mac} || goto no_nic\ndhcp net<%= i -%> || goto
        net<%= i+1 %>\nchain <%= foreman_url(''iPXE'') %>?mac=${net<%= i -%>/mac}
        || goto net<%= i+1 %>\n<% end -%>\n\n:net33\ngoto no_nic\n\nexit 0\n\n:no_nic\necho
        Failed to chainload from any network interface\nsleep 30\nexit 1\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":36,"name":"iPXE
        intermediate script","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"62385dfe3eaee718a37289a70b55ca72"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d058ee8c-79b9-480b-96dd-4f3cf35903ed]
      x-runtime: ['0.020996']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/45
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Jumpstart
        default\nmodel: ProvisioningTemplate\noses:\n- Solaris\n%>\ninstall_type <%=
        @install_type %>\npartitioning explicit\n<%= @disk %>\n<% if @host.use_image  -%>\narchive_location
        nfs <%=@archive_location%>\n<% else -%>\nsystem_type <%= @system_type %>\npackage
        <%= @packages %> add\ncluster <%= @cluster %>\n<% end -%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":45,"name":"Jumpstart
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"c5eb7d9f998548273534a68b5a64d87c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f181988e-c8ec-4ead-bdf4-c51633f96de3]
      x-runtime: ['0.020609']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/28
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Jumpstart
        default finish\nmodel: ProvisioningTemplate\noses:\n- Solaris\n%>\nlogger
        \"Starting finish script\"\n\n# Do not turn the machine off after 30 minutes.
        Very annoying!\n/bin/touch /noautoshutdown\n\n# Install the root password\n/usr/bin/perl
        -p -i -e ''s/^root:[^:]+/root:<%= @host.root_pass.gsub(''/'', ''\\/'')-%>/''
        /etc/shadow\n\n# Root can ssh into this box. This is very useful while we
        rebuild this\n/usr/bin/perl -p -i -e \"s/PermitRootLogin no/PermitRootLogin
        yes/\" /etc/ssh/sshd_config\n\n# Now ensure that we have the newest puppet
        and facter installed\nmount /proc\n/usr/bin/cat /etc/mnttab | sed -e ''s/\\/a/\\//''
        | sed -e ''s/\\/a//'' > /a/etc/mnttab\n/sbin/mount -F mntfs mnttab /etc/mnttab\n/usr/sbin/mknod
        /devices/pseudo/random@0:random c 190 0\n/usr/sbin/mknod /devices/pseudo/random@0:urandom
        c 190 1\n/usr/sbin/pkgadd -a /tmp/admin -d http://get.opencsw.org/now all\n/opt/csw/bin/pkgutil
        -U -y\n/opt/csw/bin/pkgutil -u -f -y CSWfacter CSWpuppet CSWwget\n\n/usr/bin/echo
        \"Creating helper startup script to start puppet\"\nONETIME=S99.enable.puppet\n/usr/bin/cat
        > /etc/rc3.d/$ONETIME << EOF\n#!/bin/sh\n#\n# $ONETIME\n#\n# runs once at
        startup and then removes itself.\n#\nPATH=/usr/bin:/usr/sbin; export PATH\n/usr/sbin/svccfg
        import /var/opt/csw/svc/manifest/network/cswpuppetd.xml\n/usr/sbin/svcadm
        enable svc:/network/cswpuppetd\nsleep 2\nrm \\$0\nEOF\n\n/usr/bin/echo \"Configuring
        puppet\"\ncat > /etc/puppet/puppet.conf << EOF\n<%= snippet ''puppet.conf''
        -%>\nEOF\n# The x86 version of the puppet package ignores the --config parameter.
        This should fix that and not hurt other installations\nif [ -f /etc/opt/csw/puppet/puppetd.conf
        ]\nthen\n    rm -f /etc/opt/csw/puppet/puppetd.conf\n    ln -s /etc/puppet/puppet.conf
        /etc/opt/csw/puppet/puppetd.conf\nfi\n/opt/csw/bin/puppet agent --config /etc/puppet/puppet.conf
        -o --tags no_such_tag --server <%= @host.puppetmaster %> --no-daemonize\necho
        \"Informing Foreman that we are built\"\n/opt/csw/bin/wget --no-check-certificate
        -O /dev/null <%= foreman_url(''built'') %>\nexit 0\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":28,"name":"Jumpstart
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"fe00c940d780b79e6067487f4ccdff54"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f29039c3-2d9c-407f-b4e0-41f8ec1977ad]
      x-runtime: ['0.020932']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/2
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: Jumpstart
        default PXEGrub\nmodel: ProvisioningTemplate\noses:\n- Solaris\n%>\ndefault=0\ntimeout=10\ntitle
        Solaris_10 Jumpstart\n        kernel <%= @host.multiboot %> kernel/unix -
        install dhcp nowin -B install_config=<%= @host.jumpstart_path %>,sysid_config=<%=
        @host.jumpstart_path %>/sysidcfg/sysidcfg_primary,install_media=<%= @host.install_path
        %>,install_boot=<%= @host.install_path %>/boot\n        module <%= @host.miniroot
        %>\ntitle Solaris 10\n        findroot (rootfs0,0,a)\n        kernel$ /platform/i86pc/multiboot\n        module
        /platform/i86pc/boot_archive\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":2,"name":"Jumpstart
        default PXEGrub","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"6d506667ad197c0989a04b432f633654"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a662bcda-fcdc-4f2c-bb5b-0adfcd0535b7]
      x-runtime: ['0.020808']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/29
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Junos default
        finish\nmodel: ProvisioningTemplate\noses:\n- Junos\n-%>\nsystem {\n    host-name
        <%= @host %>;\n    time-zone <%= host_param(''time-zone'') || ''Etc/UTC''
        %>;\n    root-authentication {\n        encrypted-password \"<%= root_pass
        %>\"; ## SECRET-DATA\n    }\n    name-server {\n        <%= @host.subnet.dns_primary
        || ''8.8.8.8'' %>;\n        <% if @host.subnet.dns_secondary -%>\n        <%=
        @host.subnet.dns_secondary %>;\n        <% end -%>\n    }\n    ntp {\n        boot-server
        <%= host_param(''ntp-server'') || ''0.pool.ntp.org'' %>;\n        server <%=
        host_param(''ntp-server'') || ''0.pool.ntp.org'' %>;\n    }\n    login {\n        message
        \"This device was provisioned by using The Foreman!\\nSee http://theforeman.org/
        for further information.\\n\";\n        class automation {\n            permissions
        all;\n        }\n        user puppet {\n            uid 2001;\n            class
        automation;\n            authentication {\n                encrypted-password
        \"<%= root_pass %>\"; ## SECRET-DATA\n            }\n            shell csh;\n        }\n    }\n    services
        {\n        ssh {\n            protocol-version v2;\n        }\n        netconf
        {\n            ssh;\n        }\n    }\n    syslog {\n        user * {\n            any
        emergency;\n        }\n        file messages {\n            any notice;\n            authorization
        info;\n        }\n        file interactive-commands {\n            interactive-commands
        any;\n        }\n    }\n    ntp {\n        boot-server 0.pool.ntp.org;\n        server
        0.pool.ntp.org;\n        server 1.pool.ntp.org;\n    }\n    extensions {\n        providers
        {\n            juniper {\n                license-type juniper deployment-scope
        commercial;\n            }\n        }\n    }\n}\nchassis {\n    alarm {\n        management-ethernet
        {\n            link-down ignore;\n        }\n    }\n}\ninterfaces {\n    interface-range
        ACCESS-PORT {\n        member ge-0/0/0;\n        unit 0 {\n            family
        ethernet-switching {\n                port-mode access;\n            }\n        }\n    }\n    interface-range
        UPLINK-PORT {\n        member ge-0/0/47;\n        unit 0 {\n            family
        ethernet-switching {\n                port-mode trunk;\n                vlan
        {\n                    members all;\n                }\n            }\n        }\n    }\n    vlan
        {\n        unit 37 {\n            family inet;\n        }\n    }\n    vme
        {\n        unit 0 {\n            family inet {\n                dhcp;\n            }\n        }\n    }\n}\nprotocols
        {\n    igmp-snooping {\n        vlan all;\n    }\n    rstp;\n    lldp {\n        interface
        all;\n    }\n    lldp-med {\n        interface all;\n    }\n}\nethernet-switching-options
        {\n    storm-control {\n        interface all;\n    }\n    bpdu-block {\n        interface
        ACCESS-PORT;\n        disable-timeout 120;\n    }\n}\nvlans {\n    testlan
        {\n        vlan-id 37;\n        l3-interface vlan.37;\n    }\n}\ngroups {\n    fmztp
        {\n        apply-macro conf {\n            package jinstall-ex-4200-<%= @host.operatingsystem.major
        %>R<%= @host.operatingsystem.minor %>-domestic-signed.tgz;\n            puppet
        jpuppet-ex-1.0R1.1.tgz;\n        }\n    }\n}\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":29,"name":"Junos
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"642ab812ca36016313ca6cd5e0c2c24a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [00505c96-ecba-4156-b57a-0cf049c5c88a]
      x-runtime: ['0.020669']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/46
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Junos
        default SLAX\nmodel: ProvisioningTemplate\noses:\n- Junos\n-%>\nversion 1.0;\n\n/*
        ------------------------------------------------------------------\n * LICENSE\n
        * ------------------------------------------------------------------\n *\n
        * Copyright (c) 2013, Juniper Networks\n *\n * All rights reserved.\n *\n
        * Redistribution and use in source and binary forms, with or without\n * modification,
        are permitted provided that the following conditions are met: \n *\n * (1)
        Redistributions of source code must retain the above copyright notice, this
        \n * list of conditions and the following disclaimer. \n *\n * (2) Redistributions
        in binary form must reproduce the above copyright notice,\n * this list of
        conditions and the following disclaimer in the documentation\n * and/or other
        materials provided with the distribution. \n *\n * THIS SOFTWARE IS PROVIDED
        BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR
        IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES
        OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED.
        IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY
        DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n
        * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n
        * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
        AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
        OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
        THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n
        *\n * The views and conclusions contained in the software and documentation
        are those\n * of the authors and should not be interpreted as representing
        official policies, \n * either expressed or implied, of Juniper Networks.\n
        * \n *\n * ------------------------------------------------------------------\n
        * AUTHORS AND CONTRIBUTORS\n * ------------------------------------------------------------------\n
        *\n * Jeremy Schulman, Juniper Networks\n * - initial release (https://github.com/jeremyschulman/jctyztp/)\n
        *\n * Frank Wall, noris network AG\n * - adapt for integration in The Foreman\n
        * - fix compatibility with older Junos releases\n * \n *\n * ------------------------------------------------------------------\n
        * LIMITATIONS\n * ------------------------------------------------------------------\n
        *\n * To maintain backwards compatibility with JunOS 11.x (and maybe \n *
        even 10.x) you MUST AVOID all of these:\n * - global variable $junos-context
        (introduced with Junos 11.1)\n * - mutable variables (introduced with JunOS
        12.2 -> SLAX 1.1)\n * - native functions (introduced with JunOS 12.2 -> SLAX
        1.1)\n *\n * ------------------------------------------------------------------\n
        */\n\n/* ------------------------------------------------------------------
        */\n/* XML namespaces                                                     */\n/*
        ------------------------------------------------------------------ */\n\n/*
        Juniper */\nns junos = \"http://xml.juniper.net/junos/*/junos\";\nns xnm =
        \"http://xml.juniper.net/xnm/1.1/xnm\";\nns jcs = \"http://xml.juniper.net/junos/commit-scripts/1.0\";\nns
        ztp = \"http://xml.juniper.net/junos/ztp\";\n\n/* EXSLT */\nns exsl extension
        = \"http://exslt.org/common\";\nns func extension = \"http://exslt.org/functions\";\nns
        str extension = \"http://exslt.org/strings\";\n\n/* private namespace for
        this script */\nns jctyztp = \"http://xml.juniper.com/jctyztp/1.0\";\nns fmztp
        = \"http://xml.juniper.com/fmztp/1.0\";\n\n/* depending on Junos version relative
        path may be broken */\n/* import ''../import/junos.xsl''; */\nimport ''/usr/libdata/cscript/import/junos.xsl'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Script parameters                                                  */\n/*
        ------------------------------------------------------------------ */\n\nparam
        $server = ''ztpserver'';\nparam $mediapath = ''<%= @mediapath %>'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Constants                                                          */\n/*
        ------------------------------------------------------------------ */\n\nvar
        $APPNAME = ''foreman-ztp'';\nvar $SYSLOG = ''user.info'';\nvar $TMPDIR = ''/var/tmp'';\nvar
        $JUNOS_CONF = ''/var/tmp/junos.conf'';\n\nvar $ZTP_GROUP_NAME = \"fmztp\";\nvar
        $ZTP_MACRO_NAME = \"conf\";\nvar $ZTP_LOCKFILE = ''/tmp/fmztp.lock'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Global variables                                                   */\n/*
        ------------------------------------------------------------------ */\n\n/*
        Open a connection to the device API */\nvar $jnx = jcs:open();\n\n/* ------------------------------------------------------------------
        */\n/*                                MAIN                                */
        \n/* ------------------------------------------------------------------ */\n\nmatch
        / {\n\n  /* Terminate on connection error */\n  if(not( $jnx )) {\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable to connect to Junos API\");\n    expr
        fmztp:terminate();\n  }\n  \n  var $running = fmztp:only_once();\n  if( $running
        ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": start op script: already
        running, exiting...\" );\n    <xsl:message terminate=\"yes\">;\n  }\n  \n  /*
        if the $JUNOS_CONF file is not on the device, then */\n  /* download it from
        the server */\n  if(not( fmztp:file-exists( $JUNOS_CONF ))) {\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": obtaining device config file\");\n    var $cp = fmztp:dl_junos_conf();\n  }\n  \n  /*
        now load $JUNOS_CONF into the candidate configuration so we can */\n  /* extract
        the ZTP config */\n  var $ztp_conf = fmztp:ld_junos_conf();\n  var $has_version
        = $ztp_conf/has_version;\n  var $new_package = $ztp_conf/package;\n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": preparing update from \", $has_version,
        \" to \", $new_package );\n  \n  /* if we have a version difference, then
        we will install the new OS */\n  /* and reboot the device.  the $JUNOS_CONF
        file will be loaded on */\n  /* after the install process completes */\n  if(
        $ztp_conf/install ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": Junos install
        required\" );\n    var $os = fmztp:install_os( $ztp_conf );\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": rebooting in 60 seconds\" );\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": SCRIPT-END\");\n    expr fmztp:reboot( 1 );\n    expr
        jcs:close( $jnx );\n  }\n  else {\n    expr jcs:syslog( $SYSLOG, $APPNAME,
        \": no Junos install required\" );\n    /* puppet agent is only supported
        on Junos 12.3R2.5 */\n    if( jcs:regex( \"12.3R2.5\", $ztp_conf/has_version
        )) {\n\texpr jcs:syslog( $SYSLOG, $APPNAME, \": puppet agent install required\"
        );\n\tvar $puppet = fmztp:install_puppet( $ztp_conf );\n    }\n    else {\n\texpr
        jcs:syslog( $SYSLOG, $APPNAME, \": os version is \", $has_version, \", but
        puppet agent is only available on 12.3R2.5\" );\n    }\n    var $fini = fmztp:finalize();\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": SCRIPT-END\");\n    expr jcs:close( $jnx
        );\n  }\n}\n\n/* ------------------------------------------------------------------
        */\n/* HTTP Junos configuration file onto the device                      */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:dl_junos_conf\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        downloading new Junos conf...\");\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        URL: \", ''<%= foreman_url(''finish'') %>'');\n\n  var $get = <file-copy>
        {\n    <source> ''<%= foreman_url(''finish'') %>'';\n    <destination> $JUNOS_CONF;\n    <staging-directory>
        $TMPDIR;\n  };\n\n  var $got = jcs:execute( $jnx, $get );\n\n  if(not( fmztp:file-exists(
        $JUNOS_CONF ))) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable
        to find new Junos conf at \", $JUNOS_CONF);\n    expr fmztp:terminate();\n  }\n\n  <func:result
        select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Load the $JUNOS_CONF file into the candidate config and extract    */\n/*
        the ZTP config from the [edit groups] area.  Do *NOT* commit       */\n/*
        this configuration yet, since we may need to install the OS first  */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:ld_junos_conf\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        loading new Junos conf...\");\n\n  /* get the current version from the configuration
        file */\n  \n  var $get_cur_ver = <get-configuration database=''committed''>
        { <configuration> { <version>; }};\n  var $got_cur_ver = jcs:execute( $jnx,
        $get_cur_ver );\n\n  /* now load the configuration file we got from the ztp
        server */\n  var $do_load = <load-configuration action=\"override\" url=$JUNOS_CONF
        format=\"text\">;\n  var $did_load = jcs:execute( $jnx, $do_load );\n  if(not(
        $did_load/load-success )) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR:
        unable to load config \", $JUNOS_CONF );\n    expr fmztp:terminate();\n  }\n  \n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": extracting Junos config parameters...\");\n  var
        $get = <get-configuration> { <configuration> {\n    <version>;\n    <groups>
        { <name> $ZTP_GROUP_NAME;\n      <apply-macro> { <name> $ZTP_MACRO_NAME;\n      }\n    }\n  }};\n  \n  var
        $got = jcs:execute( $jnx, $get );\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": package: \", $got//data[name = ''package'']/value);\n  expr jcs:syslog(
        $SYSLOG, $APPNAME, \": URL: \", $mediapath);\n\n  /* create a node-set to
        store the following elements             */\n  /* has_version = current Junos
        version string                    */\n  /* package = filename of Junos package
        (*.tgz)                   */\n  /* mediapath = URL where package is obtained
        from                */\n  /* install = present if a install is requeired                   */\n  var
        $ver = $got_cur_ver/version;\n  var $package = $got//data[name = ''package'']/value;\n  var
        $puppet = $got//data[name = ''puppet'']/value;\n  var $conf := {\n    <has_version>
        $ver; \n    <package> $package;\n    <puppet> $puppet;\n    <url> $mediapath;\n    if(not(
        jcs:regex( $ver, $package ))) {\n      <install>;\n    }\n  }\n\n  /* @@@
        should put some trap here on ensuring that the config */\n  /* @@@ file actually
        had the correct group/macro defined */\n    \n  <func:result select=\"$conf\">;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Junos Software Installation - download the software from the HTTP  */\n/*
        server and perform the ''request system software add'' operation     */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:install_os\">\n{\n  param $ztp_conf;\n\n  var $local_image =
        $TMPDIR _ \"/\" _ $ztp_conf/package;\n  \n  if( fmztp:file-exists( $local_image
        )) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": junos image exists, no download
        needed\" );\n  }\n  else {\n  \n    /* request system storage cleanup */\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": cleaning filesystem\" );\n    var $clean
        = jcs:execute( $jnx, ''request-system-storage-cleanup'' ); \n\n    /* file
        copy .... */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": downloading junos
        image...\" );    \n    expr jcs:syslog( $SYSLOG, $APPNAME, \": URL: \", $ztp_conf/url,
        $ztp_conf/package );\n    var $do_copy = <file-copy> {\n      <source> $ztp_conf/url
        _ $ztp_conf/package;\n      <destination> $TMPDIR;\n      <staging-directory>
        $TMPDIR;\n    };\n    var $did_copy = jcs:execute( $jnx, $do_copy );\n    \n    /*
        trap error here */\n    if( not(fmztp:file-exists( $local_image )) ) {\n        expr
        jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: unable to download junos image\"
        );\n        expr fmztp:terminate();\n    }\n  }\n  \n  /* request system software
        add ... */\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": installing junos image\"
        );    \n  var $do_install = <request-package-add> {\n    <no-validate>;\n    <package-name>
        $local_image;\n  };\n  var $did_install = jcs:execute( $jnx, $do_install );\n  /*
        @@@ need to trap error here on $did_install */\n  \n  expr jcs:syslog( $SYSLOG,
        $APPNAME, \": completed installing junos image\" );\n   \n  <func:result select=\"true()\">;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Reboot the device given a delay, in minutes                        */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:reboot\">\n{\n  param $in_min;\n\n  var $do_reboot = <request-reboot>
        { <in> $in_min; };\n  var $did_reboot = jcs:execute( $jnx, $do_reboot );\n  <func:result
        select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Puppet Agent Installation - download the software from the HTTP    */\n/*
        server and perform the ''request system software add'' operation     */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:install_puppet\">\n{\n  param $ztp_conf;\n  expr jcs:syslog(
        $SYSLOG, $APPNAME, \": starting puppet installation...\" );\n\n  if (fmztp:is-installed(\"puppet\"))
        {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package puppet is already installed\"
        );\n    <func:result select=\"true()\">;\n  }\n\n  var $local_image = $TMPDIR
        _ \"/\" _ $ztp_conf/puppet;\n  \n  if( fmztp:file-exists( $local_image ))
        {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package puppet exists, no download
        needed\" );\n  }\n  else {\n  \n    /* request system storage cleanup */\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": cleaning filesystem\" );\n    var $clean
        = jcs:execute( $jnx, ''request-system-storage-cleanup'' ); \n\n    /* file
        copy .... */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": downloading puppet
        image...\" );    \n    expr jcs:syslog( $SYSLOG, $APPNAME, \": URL: \", $ztp_conf/url,
        $ztp_conf/puppet );    \n    var $do_copy = <file-copy> {\n      <source>
        $ztp_conf/url _ $ztp_conf/puppet;\n      <destination> $TMPDIR;\n      <staging-directory>
        $TMPDIR;\n    };\n    var $did_copy = jcs:execute( $jnx, $do_copy );\n    \n    /*
        trap error on $did_copy */\n    if( not(fmztp:file-exists( $local_image ))
        ) {\n      expr jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: failed to download
        puppet image\" );\n      expr fmztp:terminate();\n    }\n  }\n\n  /* request
        system software add ... */\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": installing
        puppet image\" );    \n  var $do_install = <request-package-add> {\n    <no-validate>;\n    <package-name>
        $local_image;\n  };\n  var $did_install = jcs:execute( $jnx, $do_install );\n  \n  /*
        NOTE: To complete the puppet installation you need to take manual steps, see:\n   *       http://www.juniper.net/techpubs/en_US/release-independent/junos-puppet/information-products/pathway-pages/index.html\n   */\n\n  /*
        validate installation */\n  if (not(fmztp:is-installed(\"puppet\"))) {\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: failed to install package puppet\"
        );\n    expr fmztp:terminate();\n  }\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": completed installing puppet image\" );\n   \n  <func:result select=\"true()\">;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Finalize the ZTP process; i.e. after the OS is correct.  Remove    */\n/*
        the $JUNOS_CONF file and committing the configuration to make      */\n/*
        it active.                                                         */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:finalize\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": deleting
        temp config file...\");  \n  var $rm1 = fmztp:file-delete( $JUNOS_CONF );\n\n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": sending finish signal to foreman...\");  \n  var
        $do_foreman = <file-copy> {\n      <source> ''<%= foreman_url %>'';\n      <destination>
        \"/tmp\";\n      <staging-directory> \"/tmp\";\n  };\n  var $did_foreman =
        jcs:execute( $jnx, $do_foreman );\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": deleting ztp lock file...\");  \n  var $rm2 = fmztp:file-delete( $ZTP_LOCKFILE
        );\n\n  /* commit the configuration that was previously loaded */  \n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": committing configuration...\");  \n  var
        $commit = jcs:execute( $jnx, ''commit-configuration'' );\n  if( $commit//self::xnm:error
        ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable to commit configuration:
        \", $commit//self::xnm:error/message );\n    var $die = fmztp:terminate();\n  }\n\n  <func:result
        select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Helper routine: check to see if a file exists on the device,       */\n/*
        returns [ true | false ]                                           */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:file-exists\">\n{\n  param $filename;\n  var $ls_file = <file-list>
        { <path> $filename; };\n  var $ls_got = jcs:execute( $jnx, $ls_file );\n  var
        $retval = boolean( $ls_got//file-information );\n\n  <func:result select=\"$retval\">;\n}\n\n<func:function
        name=\"fmztp:file-delete\">\n{\n  param $filename;\n  var $do_rm = <file-delete>
        { <path> $filename; };\n  var $did_rm = jcs:execute( $jnx, $do_rm );\n  /*
        @@@ trap error */\n  \n  <func:result select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Helper routine: create a lockfile to make sure the script only     */\n/*
        runs once, and terminate if it is already running.                 */\n/*
        returns [ true | false ]                                           */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:only_once\">\n{\n  if( fmztp:file-exists( $ZTP_LOCKFILE )) {\n    <func:result
        select=\"true()\">;\n  }\n  else {\n    var $do_lock = <file-put> {\n      <filename>
        $ZTP_LOCKFILE;\n      <encoding> ''ascii'';\n      <file-contents> ''locked'';\n    };\n    var
        $did_lock = jcs:execute( $jnx, $do_lock );\n    <func:result select=\"false()\">;\n  }\n}\n\n<func:function
        name=\"fmztp:terminate\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": SCRIPT-FAILED\"
        );\n  var $rm_lock = fmztp:file-delete( $ZTP_LOCKFILE );\n  <xsl:message terminate=\"yes\">;\n}\n\n/*
        ------------------------------------------------- */\n/* check if software
        package is installed            */\n/* -------------------------------------------------
        */\n<func:function name=\"fmztp:is-installed\">\n{\n  param $string;\n\n  var
        $do_query = <get-software-information>;\n  var $did_query = jcs:execute( $jnx,
        $do_query );\n\n  if( jcs:regex( $string, $did_query )) {\n    expr jcs:output(\"package
        found: \", $string);\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package
        found: \", $string);\n    <func:result select=\"true()\">;\n  }\n  else {\n    expr
        jcs:output(\"package NOT found: \", $string);\n    expr jcs:syslog( $SYSLOG,
        $APPNAME, \": package NOT found: \", $string);\n    <func:result select=\"false()\">;\n  }\n}\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":46,"name":"Junos
        default SLAX","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"62a04bc7694861ebcd857f5338eda116"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f29b33e1-a6e4-42f5-a2bf-bf41e480deb2]
      x-runtime: ['0.021207']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/25
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: ZTP\nname: Junos default
        ZTP config\nmodel: ProvisioningTemplate\noses:\n- Junos\n-%>\nsystem {\n    host-name
        <%= @host.shortname %>;\n    root-authentication {\n      encrypted-password
        \"<%= root_pass %>\"; ## SECRET-DATA\n    }\n    services {\n        ssh;\n        netconf
        {\n            ssh;\n        }\n    }\n    syslog {\n        user * {\n            any
        emergency;\n            user info;\n        }\n        file messages {\n            any
        notice;\n            authorization info;\n        }\n        console {\n            user
        info;\n        }\n    }\n}\ninterfaces {\n    vme {\n        unit 0 {\n            family
        inet {\n                dhcp;\n            }\n        }\n    }\n}\nevent-options
        {\n    generate-event {\n        fmztp time-interval 90;\n    }\n    policy
        fmztp {\n        events fmztp;\n        then {\n            execute-commands
        {\n                commands {\n                    \"op url <%= foreman_url(''provision'')%>.slax\";\n                }\n            }\n        }\n    }\n}\nprotocols
        {\n    igmp-snooping {\n        vlan all;\n    }\n    rstp;\n    lldp {\n        interface
        all;\n    }\n    lldp-med {\n        interface all;\n    }\n}\nethernet-switching-options
        {\n    storm-control {\n        interface all;\n    }\n}\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":25,"name":"Junos
        default ZTP config","template_kind_id":9,"template_kind_name":"ZTP","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"9fa7191b4a9382c42941e9124cf0e0ce"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c8750304-1404-408c-a242-8d44db4cbe30]
      x-runtime: ['0.020865']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/47
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Kickstart
        default\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n- RedHat\n%>\n<%#\nThis
        template accepts the following parameters:\n- lang: string (default=\"en_US.UTF-8\")\n-
        selinux-mode: string (default=\"enforcing\")\n- keyboard: string (default=\"us\")\n-
        time-zone: string (default=\"UTC\")\n- http-proxy: string (default=\"\")\n-
        http-proxy-port: string (default=\"\")\n- force-puppet: boolean (default=false)\n-
        enable-epel: boolean (default=true)\n- enable-puppetlabs-repo: boolean (default=false)\n-
        enable-puppetlabs-pc1-repo: boolean (default=false)\n- enable-puppetlabs-puppet5-repo:
        boolean (default=false)\n- salt_master: string (default=undef)\n- ntp-server:
        string (default=\"0.fedora.pool.ntp.org\")\n- bootloader-append: string (default=\"nofb
        quiet splash=quiet\")\n- disable-firewall: boolean (default=false)\n- package_upgrade:
        boolean (default=true)\n- disable-uek: boolean (default=false)\n- use-ntp:
        boolean (default depends on OS release)\n- fips_enabled: boolean (default=false)\n%>\n<%\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' && @host.operatingsystem.name
        != ''Fedora''\n  is_fedora = @host.operatingsystem.name == ''Fedora''\n  os_major
        = @host.operatingsystem.major.to_i\n  os_minor = @host.operatingsystem.minor.to_i\n  realm_compatible
        = (@host.operatingsystem.name == ''Fedora'' && os_major >= 20) || (rhel_compatible
        && os_major >= 7)\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  proxy_string = proxy_uri ? \" --proxy=#{proxy_uri}\" : ''''\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy) && @host.chef_proxy\n  section_end
        = (rhel_compatible && os_major <= 5) ? '''' : ''%end''\n  use_ntp = host_param_true?(''use-ntp'')
        || (is_fedora && os_major < 16) || (rhel_compatible && os_major <= 7)\n%>\n<%
        if (is_fedora && os_major < 29) || (rhel_compatible && os_major <= 7) -%>\ninstall\n<%
        end -%>\n<%\nif host_param(''kickstart_liveimg'')\n  img_name = host_param(''kickstart_liveimg'')\n  liveimg_url
        = if host_param(''kt_activation_keys'')\n    repository_url(img_name, ''isos'')\n  else\n    if
        img_name.match(%r|^([\\w\\-\\+]+)://|)\n      img_name\n    else\n      \"#{@host.operatingsystem.medium_uri(@host)}/#{img_name}\"\n    end\n  end\n%>\nliveimg
        --url=<%= liveimg_url %> <%= proxy_string %>\n<% else %>\n<%= @mediapath %><%=
        proxy_string %>\n<% @additional_media.each do |medium| -%>\nrepo --name <%=
        medium[:name] %> --baseurl <%= medium[:url] %> <%= medium[:install] ? '' --install''
        : '''' %><%= proxy_string %>\n<% end -%>\n<% end %>\nlang <%= host_param(''lang'')
        || ''en_US.UTF-8'' %>\nselinux --<%= host_param(''selinux-mode'') || host_param(''selinux'')
        || ''enforcing'' %>\nkeyboard <%= host_param(''keyboard'') || ''us'' %>\nskipx\n\n<%
        subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?) -%>\n<%
        dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n<% dhcp = !@static
        -%>\n<% end -%>\n\nnetwork --bootproto <%= dhcp ? ''dhcp'' : \"static --ip=#{@host.ip}
        --netmask=#{subnet.mask} --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary,
        subnet.dns_secondary].select{ |item| item.present? }.join('','')} --mtu=#{subnet.mtu.to_s}\"
        %> --hostname <%= @host %><%= os_major >= 6 ? \" --device=#{@host.mac}\" :
        '''' -%>\n\nrootpw --iscrypted <%= root_pass %>\n<% if host_param_true?(''disable-firewall'')
        -%>\nfirewall --disable\n<% else -%>\nfirewall --<%= os_major >= 6 ? ''service=''
        : '''' %>ssh\n<% end -%>\n<% if (is_fedora && os_major >= 28) || (rhel_compatible
        && os_major > 7) -%>\nauthselect --useshadow --passalgo=<%= @host.operatingsystem.password_hash.downcase
        || ''sha256'' %> --kickstart\n<% else -%>\nauthconfig --useshadow --passalgo=<%=
        @host.operatingsystem.password_hash.downcase || ''sha256'' %> --kickstart\n<%
        end -%>\n<% if use_ntp -%>\ntimezone --utc <%= host_param(''time-zone'') ||
        ''UTC'' %>\n<% else -%>\ntimezone --utc <%= host_param(''time-zone'') || ''UTC''
        %> <%= host_param(''ntp-server'') ? \"--ntpservers #{host_param(''ntp-server'')}\"
        : '''' %>\n<% end -%>\n\n<% if rhel_compatible -%>\nservices --disabled gpm,sendmail,cups,pcmcia,isdn,rawdevices,hpoj,bluetooth,openibd,avahi-daemon,avahi-dnsconfd,hidd,hplip,pcscd\n<%
        end -%>\n\n<% if realm_compatible && host_enc[''parameters''][''realm''] &&
        @host.realm && @host.realm.realm_type == ''Active Directory'' -%>\n# One-time
        password will be requested at install time. Otherwise, $HOST[OTP] is used
        as a placeholder value.\nrealm join --one-time-password=''<%= @host.otp ||
        \"$HOST[OTP]\" %>'' <%= @host.realm %>\n<% end -%>\n\n<% if @host.operatingsystem.name
        == ''Fedora'' -%>\nrepo --name=fedora-everything --mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-<%=
        @host.operatingsystem.major %>&arch=<%= @host.architecture %><%= proxy_string
        %>\n<% end -%>\n\n<% if @host.operatingsystem.name == ''OracleLinux'' && os_major
        == 7 && os_minor < 5 -%>\nrepo --name=\"Server-Mysql\"\n<% end -%>\n\n<% if
        @host.operatingsystem.name == ''Fedora'' && os_major <= 16 -%>\n# Bootloader
        exception for Fedora 16:\nbootloader --append=\"<%= host_param(''bootloader-append'')
        || ''nofb quiet splash=quiet'' %> <%= ks_console %>\" <%= @grub_pass %>\npart
        biosboot --fstype=biosboot --size=1\n<% else -%>\nbootloader --location=mbr
        --append=\"<%= host_param(''bootloader-append'') || ''nofb quiet splash=quiet''
        %>\" <%= @grub_pass %>\n<% if os_major == 5 -%>\nkey --skip\n<% end -%>\n<%
        end -%>\n\n<% if @dynamic -%>\n%include /tmp/diskpart.cfg\n<% else -%>\n<%=
        @host.diskLayout %>\n<% end -%>\n\ntext\n<% if @host.respond_to?(:bootdisk_build?)
        && @host.bootdisk_build? %>\nreboot --eject\n<% else -%>\nreboot\n<% end -%>\n\n%packages\n<%=
        snippet_if_exists(template_name + \" custom packages\") %>\nyum\ndhclient\n<%
        if use_ntp -%>\nntp\n<% else -%>\nchrony\n<% end -%>\nwget\n@Core\n<% if os_major
        >= 6 -%>\nredhat-lsb-core\n<% end -%>\n<% if host_param_true?(''fips_enabled'')
        -%>\n<%=   snippet ''fips_packages'' %>\n<% end -%>\n\n\n<% if salt_enabled
        %>\nsalt-minion\n<% end -%>\n<%= section_end -%>\n\n<% if @dynamic -%>\n%pre\n<%=
        snippet_if_exists(template_name + \" custom pre\") %>\n<%= @host.diskLayout
        %>\n<%= section_end -%>\n<% end -%>\n\n%post --nochroot\nexec < /dev/tty3
        > /dev/tty3\n#changing to VT 3 so that we can see whats going on....\n/usr/bin/chvt
        3\n(\ncp -va /etc/resolv.conf /mnt/sysimage/etc/resolv.conf\n/usr/bin/chvt
        1\n) 2>&1 | tee /mnt/sysimage/root/install.postnochroot.log\n<%= section_end
        -%>\n\n<%#\nMain post script, if it fails the last post is still executed.\n%>\n%post
        --log=/mnt/sysimage/root/install.post.log\nlogger \"Starting anaconda <%=
        @host %> postinstall\"\nexec < /dev/tty3 > /dev/tty3\n#changing to VT 3 so
        that we can see whats going on....\n/usr/bin/chvt 3\n<%= snippet_if_exists(template_name
        + \" custom post\") %>\n<% if subnet.respond_to?(:dhcp_boot_mode?) || @host.subnet6.respond_to?(:dhcp_boot_mode?)
        -%>\n<%= snippet ''kickstart_networking_setup'' %>\n<% end -%>\n\necho \"Updating
        system time\"\n<% if use_ntp -%>\n/usr/sbin/ntpdate -sub <%= host_param(''ntp-server'')
        || ''0.fedora.pool.ntp.org'' %>\n<% else -%>\n/usr/bin/chronyc makestep\n<%
        end -%>\n/usr/sbin/hwclock --systohc\n\n<% if proxy_uri -%>\n# Yum proxy\necho
        ''proxy = <%= proxy_uri %>'' >> /etc/yum.conf\n<% end -%>\n\n<% if rhel_compatible
        && !host_param_false?(''enable-epel'') -%>\n<%= snippet ''epel'' -%>\n<% end
        -%>\n\n<%= snippet ''redhat_register'' %>\n\n<% if host_enc[''parameters''][''realm'']
        && @host.realm && (@host.realm.realm_type == ''FreeIPA'' || @host.realm.realm_type
        == ''Red Hat Identity Management'') -%>\n<%= snippet ''freeipa_register''
        %>\n<% end -%>\n\n<% unless host_param_false?(''package_upgrade'') -%>\n#
        update all the base packages from the updates repository\nif [ -f /usr/bin/dnf
        ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n<% if @host.operatingsystem.name == ''OracleLinux'' && host_param_true?(''disable-uek'')
        -%>\n# Uninstall the Oracle Unbreakable Kernel packages\nyum -t -y remove
        kernel-uek*\nsed -e ''s/DEFAULTKERNEL=kernel-uek/DEFAULTKERNEL=kernel/g''
        -i /etc/sysconfig/kernel\n<% end -%>\n\n<%= snippet(''ansible_provisioning_callback'')
        %>\n\n<%= snippet ''efibootmgr_netboot'' %>\n\ntouch /tmp/foreman_built\n<%=
        section_end -%>\n\n<%#\nThe last post section halts Anaconda to prevent endless
        loop\n%>\n<% if (is_fedora && os_major < 20) || (rhel_compatible && os_major
        < 7) -%>\n%post\n<% else -%>\n%post --erroronfail\n<% end -%>\nif test -f
        /tmp/foreman_built; then\n  echo \"calling home: build is done!\"\n  <%= indent(2,
        skip1: true) { snippet(''built'', :variables => { :endpoint => ''built'',
        :method => ''POST'', :body_file => ''/mnt/sysimage/root/install.post.log''
        }) } -%>\nelse\n  echo \"calling home: build failed!\"\n  <%= indent(2, skip1:
        true) { snippet(''built'', :variables => { :endpoint => ''failed'', :method
        => ''POST'', :body_file => ''/mnt/sysimage/root/install.post.log'' }) } -%>\nfi\n\nsync\n<%=
        section_end -%>\n\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":47,"name":"Kickstart
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"1b9256fa41b8692764f2090522187348"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0189c157-b810-4b06-ad3c-20513b84b009]
      x-runtime: ['0.021340']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/30
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Kickstart
        default finish\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n%>\n  <%#\n  This
        template accepts the following parameters:\n  - bootloader-append: string
        (default=\"nofb quiet splash=quiet\")\n  - force-puppet: boolean (default=false)\n  -
        ntp-server: string (default=\"0.fedora.pool.ntp.org\")\n  - package_upgrade:
        boolean (default=true)\n  - salt_master: string (default=undef)\n  %>\n<%
        if @host.subnet.respond_to?(:dhcp_boot_mode?) -%>\n<%= snippet ''kickstart_networking_setup''
        %>\nservice network restart\n<% end -%>\n\n<%\n  rhel_compatible = @host.operatingsystem.family
        == ''Redhat'' && @host.operatingsystem.name != ''Fedora''\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  proxy_uri = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n%>\n\n<% if @host.provision_method == ''image'' && root_pass.present?
        -%>\n# Install the root password\necho ''root:<%= root_pass -%>'' | /usr/sbin/chpasswd
        -e\n<% end -%>\n\n<% if proxy_uri -%>\n# Yum proxy\necho ''proxy = <%= proxy_uri
        %>'' >> /etc/yum.conf\n<% end -%>\n\n#update local time\necho \"updating system
        time\"\nyum -y install ntpdate\n/usr/sbin/ntpdate -sub <%= host_param(''ntp-server'')
        || ''0.fedora.pool.ntp.org'' %>\n/usr/sbin/hwclock --systohc\n\n<% if rhel_compatible
        && !host_param_false?(''enable-epel'') -%>\n<%= snippet ''epel'' -%>\n<% end
        -%>\n\n<%= snippet ''redhat_register'' %>\n\n<% if host_enc[''parameters''][''realm'']
        && @host.realm && (@host.realm.realm_type == ''FreeIPA'' || @host.realm.realm_type
        == ''Red Hat Identity Management'') -%>\n<%= snippet ''freeipa_register''
        %>\n<% end -%>\n\n<% unless host_param_false?(''package_upgrade'') -%>\n#
        update all the base packages from the updates repository\nif [ -f /usr/bin/dnf
        ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n<% if host_param_true?(''ansible_tower_provisioning'') -%>\n<%=
        save_to_file(''/root/ansible_provisioning_call.sh'', snippet(''ansible_tower_callback_script''))
        %>\n/root/ansible_provisioning_call.sh\n<% end -%>\n\nsync\n\nexit 0\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":30,"name":"Kickstart
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"5ba93b7e2fe04061cab1f65de7edc7d7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ac2e1a29-6072-405e-aa12-2a09353f2737]
      x-runtime: ['0.021333']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/37
  response:
    body: {string: !!python/unicode '{"template":"#!gpxe\n<%#\nkind: iPXE\nname: Kickstart
        default iPXE\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n- RedHat\n%>\n<%
        subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?) && subnet.dhcp_boot_mode?
        -%>\n  <% static = '''' -%>\n<% else -%>\n  <% static_arg = ''static=yes''
        -%>\n  <% static = (@host.token.nil? ? ''?'' : ''&'') + static_arg -%>\n<%
        end -%>\n\n<% stage2 = host_param(''kickstart_liveimg'') ? ''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s : '''' %>\n\n<%- if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')
        %>\n<%-   fips = ''fips=1'' -%>\n<%- else -%>\n<%-   fips = '''' -%>\n<%-
        end -%>\n\nkernel <%= \"#{@host.url_for_boot(:kernel)}\" %> initrd=initrd.img
        ks=<%= foreman_url(''provision'')%> inst.stage2=<%= @host.operatingsystem.medium_uri(@host)
        %> <%= stage2 %> <%= static %> ksdevice=<%= @host.mac %> network kssendmac
        ks.sendmac inst.ks.sendmac ip=${netX/ip} netmask=${netX/netmask} gateway=${netX/gateway}
        dns=${dns} <%= fips %>\ninitrd <%= \"#{@host.url_for_boot(:initrd)}\" %>\nimgstat\nsleep
        2\nboot\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":37,"name":"Kickstart
        default iPXE","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"db99cf25d3a0439d054ab56475760d6d"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [1f0b07a1-b6b2-4f3c-9fd8-1a3cca48f926]
      x-runtime: ['0.020968']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/3
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: Kickstart
        default PXEGrub\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-
        RedHat\n-%>\n# This file was deployed via ''<%= template_name %>'' template\n\n<%\n  major
        = @host.operatingsystem.major.to_i\n  mac = @host.provision_interface.mac\n\n  #
        Tell Anaconda to perform network functions with boot interface\n  #  both
        current and legacy syntax provided\n  options = [\"network\", \"ksdevice=bootif\",
        \"ks.device=bootif\"]\n  if mac\n    bootif = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) && major < 17) || major < 7\n      #
        old Anaconda found in Fedora 16 or RHEL 6 and older\n      dns_servers = dns.join('','')\n      options.push(\"ip=#{ip}\",
        \"netmask=#{mask}\", \"gateway=#{gw}\", \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  ksoptions
        = options.join('' '')\n-%>\n\ndefault=0\ntimeout=<%= host_param(''loader_timeout'')
        || 10 %>\n\ntitle <%= template_name %>\n  root (nd)\n  kernel (nd)/../<%=
        @kernel %> ks=<%= foreman_url(''provision'') %> <%= pxe_kernel_options %>
        <%= ksoptions %>\n  initrd (nd)/../<%= @initrd %>\n\n<%= snippet_if_exists(template_name
        + \" custom menu\") %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":3,"name":"Kickstart
        default PXEGrub","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"6377bdd604982e40fa589447f22588ec"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c7587446-9f7d-4e9a-a81e-89c8be531d49]
      x-runtime: ['0.021070']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/6
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: Kickstart
        default PXEGrub2\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-
        RedHat\n-%>\n# This file was deployed via ''<%= template_name %>'' template\n\n<%\n  major
        = @host.operatingsystem.major.to_i\n  mac = @host.provision_interface.mac\n\n  #
        Tell Anaconda to perform network functions with boot interface\n  #  both
        current and legacy syntax provided\n  options = [\"network\", \"ksdevice=bootif\",
        \"ks.device=bootif\"]\n  if mac\n    bootif = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) && major < 17) || major < 7\n      #
        old Anacoda found in Fedora 16 or RHEL 6 and older\n      dns_servers = dns.join('','')\n      options.push(\"ip=#{ip}\",
        \"netmask=#{mask}\", \"gateway=#{gw}\", \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  #
        send PXELinux \"IPAPPEND 2\" option along\n  options.push(\"BOOTIF=01-$net_default_mac\")\n\n  ksoptions
        = options.join('' '')\n\n  # Grub EFI commands are RHEL7+ only (prevents \"Kernel
        is too old\") or for non-EFI arch\n  if (@host.operatingsystem.family == ''Redhat''
        && major < 7) || !@host.pxe_loader.include?(''EFI'')\n    linuxcmd = \"linux\"\n    initrdcmd
        = \"initrd\"\n  else\n    linuxcmd = \"linuxefi\"\n    initrdcmd = \"initrdefi\"\n  end\n-%>\n\nset
        default=0\nset timeout=<%= host_param(''loader_timeout'') || 10 %>\n\nmenuentry
        ''<%= template_name %>'' {\n  <%= linuxcmd %> <%= @kernel %> ks=<%= foreman_url(''provision'')
        %> <%= pxe_kernel_options %> <%= ksoptions %>\n  <%= initrdcmd %> <%= @initrd
        %>\n}\n\n<%= snippet_if_exists(template_name + \" custom menu\") %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":6,"name":"Kickstart
        default PXEGrub2","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"408908a6442282ac3f2fb006581527f9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b06b88c5-58e6-4309-a872-4883b4f95421]
      x-runtime: ['0.021213']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/14
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Kickstart
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-
        RedHat\n-%>\n# This file was deployed via ''<%= template_name %>'' template\n\n<%\n  major
        = @host.operatingsystem.major.to_i\n  mac = @host.provision_interface.mac\n\n  #
        Tell Anaconda to perform network functions with boot interface\n  #  both
        current and legacy syntax provided\n  options = [\"network\", \"ksdevice=bootif\",
        \"ks.device=bootif\"]\n  if mac\n    bootif = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) && major < 17) || major < 7\n      #
        old Anacoda found in Fedora 16 or RHEL 6 and older\n      dns_servers = dns.join('','')\n      options.push(\"ip=#{ip}\",
        \"netmask=#{mask}\", \"gateway=#{gw}\", \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  ksoptions
        = options.join('' '')\n  timeout = host_param(''loader_timeout'').to_i * 10\n  timeout
        = 100 if timeout.nil? || timeout <= 0\n-%>\n\nDEFAULT menu\nMENU TITLE Booting
        into OS installer (ESC to stop)\nTIMEOUT <%= timeout %>\nONTIMEOUT installer\n\nLABEL
        installer\n  MENU LABEL <%= template_name %>\n  KERNEL <%= @kernel %>\n  APPEND
        initrd=<%= @initrd %> ks=<%= foreman_url(''provision'') %> <%= pxe_kernel_options
        %> <%= ksoptions %>\n  IPAPPEND 2\n\n<%= snippet_if_exists(template_name +
        \" custom menu\") %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":14,"name":"Kickstart
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"d13bfbadba9759966c160c623f980907"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3341971c-2478-4111-b859-5d59c005fba9]
      x-runtime: ['0.020666']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/92
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: Kickstart
        default user data\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-%>\n<%\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' && @host.operatingsystem.name
        != ''Fedora''\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n-%>\n#!/bin/bash\n\n<%# Cloud instances frequently have
        incorrect hosts data %>\n<%= snippet ''fix_hosts'' %>\n\n<% if @host.provision_method
        == ''image'' && !root_pass.empty? -%>\n# Install the root password\necho ''root:<%=
        root_pass -%>'' | /usr/sbin/chpasswd -e\n<% end -%>\n\n<% if proxy_uri -%>\n#
        Yum proxy\necho ''proxy = <%= proxy_uri %>'' >> /etc/yum.conf\n<% end -%>\n\n#update
        local time\necho \"updating system time\"\nyum -y install ntpdate\n/usr/sbin/ntpdate
        -sub <%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %>\n/usr/sbin/hwclock
        --systohc\n\n<% if rhel_compatible && !host_param_false?(''enable-epel'')
        -%>\n<%= snippet ''epel'' -%>\n<% end -%>\n\n<%= snippet ''redhat_register''
        %>\n\n<% if host_enc[''parameters''][''realm''] && @host.realm && (@host.realm.realm_type
        == ''FreeIPA'' || @host.realm.realm_type == ''Red Hat Identity Management'')
        -%>\n<%= snippet ''freeipa_register'' %>\n<% end -%>\n\n<% unless host_param_false?(''package_upgrade'')
        -%>\n# update all the base packages from the updates repository\nif [ -f /usr/bin/dnf
        ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n# UserData still needs to mark the build as finished\n<%= snippet
        ''built'' %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":92,"name":"Kickstart
        default user data","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"5e014c31d7c86180e2e7bff5835d89cd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9f45b67f-d217-43e8-ac2a-2f568f0b0b25]
      x-runtime: ['0.021302']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/71
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_bonded_interface\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%=
        snippet(''kickstart_ifcfg_generic_interface'', :variables => {\n                  :interface
        => @interface,\n                  :subnet => @subnet,\n                  :subnet6
        => @subnet6,\n                  :dhcp => @dhcp }) -%>\nNM_CONTROLLED=no\nMASTER=<%=
        @bond_identifier %>\nSLAVE=yes\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":71,"name":"kickstart_ifcfg_bonded_interface","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"a9c2161bf8f816fae6252ea2077fd166"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d23fa00c-4fbc-4027-a0e7-b3dba44da21a]
      x-runtime: ['0.020448']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/70
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_bond_interface\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%=
        snippet(''kickstart_ifcfg_generic_interface'', :variables => {\n                  :interface
        => @interface,\n                  :subnet => @subnet,\n                  :subnet6
        => @subnet6,\n                  :dhcp => @dhcp }) -%>\nTYPE=Bond\nBONDING_OPTS=\"<%=
        @interface.bond_options -%> mode=<%= @interface.mode -%>\"\nBONDING_MASTER=yes\nNM_CONTROLLED=no\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":70,"name":"kickstart_ifcfg_bond_interface","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"c3941662c78720cfd92857b68d5a71cc"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2701f1fe-9c22-4fcd-bc22-cd7a3f7dca89]
      x-runtime: ['0.020294']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/72
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_generic_interface\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\nBOOTPROTO=\"<%=
        @dhcp ? ''dhcp'' : ''none'' -%>\"\n<%- unless @dhcp || @subnet.nil? -%>\n<%-   if
        @interface.ip.present? -%>\n<%=     \"IPADDR=\\\"#{@interface.ip}\\\"\" %>\n<%=     \"NETMASK=\\\"#{@subnet.mask}\\\"\"
        %>\n<%-     if @subnet.gateway.present? -%>\n<%=       \"GATEWAY=\\\"#{@subnet.gateway}\\\"\"
        %>\n<%-     end -%>\n<%-   end -%>\n<%- end -%>\n<%- if @interface.ip6.present?
        -%>\n<%=   \"IPV6INIT=yes\" %>\n<%=   \"IPV6_AUTOCONF=no\" %>\n<%=   \"IPV6ADDR=#{@interface.ip6}\"
        %>\n<%-   if !@subnet6.nil? && @subnet6.gateway.present? -%>\n<%=     \"IPV6_DEFAULTGW=#{@subnet6.gateway}\"
        %><%= ''%$real'' if @subnet6.gateway.match(/^fe80:/) %>\n<%-   end -%>\n<%=   \"IPV6_PEERDNS=no\"
        %>\n<%- end -%>\n<%- if @interface.domain -%>\nDOMAIN=\"<%= @interface.domain
        %>\"\n<%- end -%>\nDEVICE=$real\n<%- unless @interface.virtual? -%>\n<%=   \"HWADDR=\\\"#{@interface.mac}\\\"\"
        %>\n<%- end -%>\nONBOOT=yes\n<%- primary = @interface.primary ? ''yes'' :
        ''no'' -%>\nPEERDNS=<%= primary %>\nPEERROUTES=<%= primary %>\nDEFROUTE=<%=
        primary %>\n<%- if @interface.primary -%>\n<%-   if !@dhcp && @subnet && @subnet.dns_primary.present?
        -%>\n<%=     \"DNS1=\\\"#{@subnet.dns_primary}\\\"\" %>\n<%-     if @subnet.dns_secondary.present?
        -%>\n<%=       \"DNS2=\\\"#{@subnet.dns_secondary}\\\"\" %>\n<%-     end -%>\n<%-   end
        -%>\n<%- end -%>\n<%- if @interface.virtual? && (!@subnet.nil? && (@subnet.has_vlanid?
        || @interface.vlanid.present?)) -%>\n<%=   \"VLAN=yes\" %>\n<%-   if @attached_to_bond
        -%>\n<%=     \"NM_CONTROLLED=no\" %>\n<%-   end -%>\n<%-   if @interface.identifier.match(/^vlan\\d+/)
        -%>\n<%=     \"VLAN_NAME_TYPE=VLAN_PLUS_VID_NO_PAD\" %>\n<%=     \"PHYSDEV=#{@interface.attached_to}\"
        %>\n<%-     if @bonding_interfaces.include?(@interface.attached_to) -%>\n<%=       \"TYPE=bonding\"
        %>\n<%-     end -%>\n<%-   end -%>\n<%- elsif @interface.virtual? && !@subnet.nil?
        && !@subnet.has_vlanid? && @interface.identifier.include?('':'') -%>\n<%=   \"TYPE=Alias\"
        %>\n<%- end -%>\n<%- if @subnet -%>\n<%=   \"MTU=#{@subnet.mtu}\" %>\n<%-
        elsif @subnet6 -%>\n<%=   \"MTU=#{@subnet6.mtu}\" %>\n<%- end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":72,"name":"kickstart_ifcfg_generic_interface","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"eb07097710f5d74a82afe95f75a29bcc"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [06fd8c66-15d9-4478-9f44-6dfe31b1fd01]
      x-runtime: ['0.020345']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/73
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_get_identifier_names\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%-
        if @identifier -%>\n<%=   \"real=\\\"#{@identifier}\\\"\" %>\n<%- else -%>\n<%=   \"real=`grep
        -l #{@interface.inheriting_mac} /sys/class/net/*/{bonding_slave/perm_hwaddr,address}
        2>/dev/null | awk -F ''/'' ''// {print $5}'' | head -1`\" -%>\n<%-   if @interface.virtual?
        -%>\n<%=     \"\\nreal=`echo #{@interface.identifier} | sed s/#{@interface.attached_to}/$real/`\"
        -%>\n<%-   end -%>\n<%- end -%>\n<%# ifcfg files are ignored by NM if their
        name contains colons so we convert colons to underscore %>\nsanitized_real=`echo
        $real | sed s/:/_/`\n\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":73,"name":"kickstart_ifcfg_get_identifier_names","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"00f213e4bef8c123be8fae17ab6a1fce"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [aaa61b23-bcd8-4398-8272-f6e9c9d06654]
      x-runtime: ['0.020477']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/74
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_networking_setup\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%-
        bonded_interfaces = [] -%>\n<%- bonding_interfaces = [] -%>\n<%- @host.bond_interfaces.each
        do |bond| -%>\n<%-   bonding_interfaces.push(bond.identifier) -%>\n<%=   \"#
        #{bond.identifier} interface\" %>\n<%=   snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables => { :identifier => bond.identifier }) %>\n<%-   ifcfg = snippet(''kickstart_ifcfg_bond_interface'',
        :variables => {\n                        :interface => bond,\n                        :subnet
        => bond.subnet,\n                        :subnet6 => bond.subnet6,\n                        :dhcp
        => bond.subnet.nil? ? false : bond.subnet.dhcp_boot_mode? }) -%>\n<%=   save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %>\n\n<%-   @host.interfaces_with_identifier(bond.attached_devices_identifiers).each
        do |interface| -%>\n<%-     next if !interface.managed? -%>\n<%=     \"# #{interface.identifier}
        interface\" %>\n<%=     snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables => { :interface => interface }) -%>\n<%-     ifcfg = snippet(''kickstart_ifcfg_bonded_interface'',
        :variables => {\n                          :interface => interface,\n                          :subnet
        => interface.subnet,\n                          :subnet6 => interface.subnet6,\n                          :dhcp
        => false,\n                          :bond_identifier => bond.identifier })
        %>\n<%=     save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %>\n<%-     bonded_interfaces.push(interface.identifier) %>\n<%-   end
        -%>\n<%- end -%>\n\n<%- @host.managed_interfaces.each do |interface| %>\n<%-   next
        if !interface.managed? -%>\n<%-   next if bonded_interfaces.include?(interface.identifier)
        -%>\n\n<%-   interface_identifier = @host.bond_interfaces.map { |i| i.identifier
        }.include?(interface.attached_to) ? interface.identifier : nil %>\n<%=   \"#
        #{interface.identifier} interface\" %>\n<%=   snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables => { :interface => interface, :identifier => interface_identifier
        }) -%>\n<%-   ifcfg = snippet(''kickstart_ifcfg_generic_interface'', :variables
        => {\n                        :interface => interface,\n                        :subnet
        => interface.subnet,\n                        :subnet6 => interface.subnet6,\n                        :bonding_interfaces
        => bonding_interfaces,\n                        :dhcp => interface.subnet.nil?
        ? false : interface.subnet.dhcp_boot_mode?,\n                        :attached_to_bond
        => interface_identifier.present? }) %>\n<%=   save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %>\n<%- end %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":74,"name":"kickstart_networking_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"f6f02e30c1069a2529ada317b530fcfd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8ee6a804-43b1-4b5e-922b-965f38cadc76]
      x-runtime: ['0.020593']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/48
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Kickstart
        oVirt-RHVH\nmodel: ProvisioningTemplate\noses:\n- oVirt\n- RHVH\n%>\n<%#\nThis
        template accepts the following parameters:\n- liveimg_name: string (default=squashfs.img)\n-
        lang: string (default=\"en_US.UTF-8\")\n- selinux-mode: string (default=\"enforcing\")\n-
        keyboard: string (default=\"us\")\n- time-zone: string (default=\"UTC\")\n-
        ntp-server: string (default=\"0.fedora.pool.ntp.org\")\n- disable-firewall:
        boolean (default=false)\n\nThis kickstart will only work with LVM THIN partitioning
        (''Kickstart default thin'')\nand it requires the installation URL to have
        squashfs.img image extracted in the\nroot folder (or specified via ''liveimg_name''
        parameter). See oVirt Node documentation\nor RHV Installation Manual, section
        5.2. Advanced installation.\n\nBy default, the template expects the squashfs.img
        to be present inside\nthe installation media. When using Katello for content
        management (the\nkt_activation_key parameter is set), the liveimg_name is
        used to\nspecify relative path to the file and the template use repository_url\nhelper
        to generate an absolute path to the file (taking into account\nalso info about
        the content proxy relevant for the host)\n\nFor example, in case the squashfs.img
        is uploaded inside custom\nproduct named ''oVirt'' and repository ''hypervisor'',
        the\nliveimg_name would be ''custom/ovirt/hypervisor/squashfs.img''.\nIn this
        case, this repository would need to be part of the content\nview the host
        is assigned to. It''s also possible to provide full url,\nin which case it
        would be used without a change.\n%>\n\ninstall\n<%\nliveimg_name = host_param(''liveimg_name'')
        || ''squashfs.img''\nif host_param(''kt_activation_keys'')\n  liveimg_url
        = repository_url(liveimg_name, ''isos'')\nelse\n  liveimg_url = \"#{medium_uri}/#{liveimg_name}\"\nend\n%>\n\nliveimg
        --url=<%= liveimg_url %>\n\n<% subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?)
        -%>\n<% dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n<% dhcp
        = !@static -%>\n<% end -%>\nnetwork --bootproto <%= dhcp ? ''dhcp'' : \"static
        --ip=#{@host.ip} --netmask=#{subnet.mask} --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary,
        subnet.dns_secondary].select{ |item| item.present? }.join('','')}\" %> --hostname
        <%= @host %> --device=<%= @host.mac -%>\n\nrootpw --iscrypted <%= root_pass
        %>\n<% if host_param_true?(''disable-firewall'') -%>\nfirewall --disable\n<%
        else -%>\nfirewall --service=ssh\n<% end -%>\nlang <%= host_param(''lang'')
        || ''en_US.UTF-8'' %>\ntimezone --utc <%= host_param(''time-zone'') || ''UTC''
        %>\nselinux --<%= host_param(''selinux-mode'') || host_param(''selinux'')
        || ''enforcing'' %>\nkeyboard <%= host_param(''keyboard'') || ''us'' %>\nservices
        --enabled=sshd\ntext\nreboot\n<%= @host.diskLayout %>\n\n%post --log=/root/ks.post.log
        --erroronfail\nnodectl init\n<%= snippet ''redhat_register'' %>\n<%= snippet
        ''kickstart_networking_setup'' %>\n<%= snippet ''efibootmgr_netboot'' %>\n/usr/sbin/ntpdate
        -sub <%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %>\n/usr/sbin/hwclock
        --systohc\n\n/usr/bin/curl <%= foreman_url(''built'') %>\nsync\nsystemctl
        reboot\n%end\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":48,"name":"Kickstart
        oVirt-RHVH","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"f6e8814b9f77914a19d29051575650c7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0fa2e4d0-7362-4156-a75f-178621614dfa]
      x-runtime: ['0.022007']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/15
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Kickstart
        oVirt-RHVH PXELinux\nmodel: ProvisioningTemplate\noses:\n- oVirt\n- RHVH\n%>\nDEFAULT
        rhvh\n\nLABEL rhvh\nKERNEL <%= @kernel %>\nAPPEND initrd=<%= @initrd %> inst.ks=<%=
        foreman_url(\"provision\") %> inst.stage2=<%= medium_uri %> local_boot_trigger=<%=
        foreman_url(\"built\") %> intel_iommu=on\nIPAPPEND 2\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":15,"name":"Kickstart
        oVirt-RHVH PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"2b3711327e9d9a8645ab378a844e1628"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f588c91a-2afa-4531-be6c-318ad6e683e9]
      x-runtime: ['0.029227']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/1
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: POAP\nname: NX-OS default
        POAP setup\nmodel: ProvisioningTemplate\noses:\n- NX-OS\n%>\n# This template
        file is only a placeholder. Cisco provides sample Python\n# scripts for POAP,
        but they are only distributed through their support site.\n# You will need
        to provide your own POAP scripts or download one from Cisco.\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":1,"name":"NX-OS
        default POAP setup","template_kind_id":10,"template_kind_name":"POAP","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"f1c2a41834490019cf695a73b33b069b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8fd769ba-f988-4f26-b024-af774c74c4db]
      x-runtime: ['0.021503']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/49
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Preseed
        default\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n<%\n  proxy_string
        = host_param(''http-proxy'') ? \" http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n  ansible_enabled = plugin_present?(''foreman_ansible'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  os_major = @host.operatingsystem.major.to_i\n  squeeze_or_older
        = (@host.operatingsystem.name == ''Debian'' && os_major <= 6)\n\n  additional_packages
        = [''lsb-release'']\n  additional_packages << host_param(''additional-packages'')\n  additional_packages
        << ''python'' if ansible_enabled\n  additional_packages << ''salt-minion''
        if salt_enabled\n  additional_packages = additional_packages.join(\" \").split().uniq().join(\"
        \")\n%>\n# Locale\nd-i debian-installer/locale string <%= host_param(''lang'')
        || ''en_US'' %>\n# country and keyboard settings are automatic. Keep them
        ...\n# ... for wheezy and newer:\nd-i keyboard-configuration/xkb-keymap seen
        true\n<% if squeeze_or_older -%>\n# ... for squeeze and older:\nd-i console-keymaps-at/keymap
        seen true\n<% end -%>\n\n<% subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?)
        -%>\n  <% dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n  <%
        dhcp = !@static -%>\n<% end -%>\n<% unless dhcp -%>\n# Static network configuration.\nd-i
        preseed/early_command string /bin/killall.sh; /bin/netcfg\nd-i netcfg/disable_autoconfig
        boolean true\nd-i netcfg/dhcp_failed note\nd-i netcfg/dhcp_options select
        Configure network manually\nd-i netcfg/disable_dhcp boolean true\nd-i netcfg/get_ipaddress
        string <%= @host.ip %>\nd-i netcfg/get_netmask string <%= subnet.mask %>\nd-i
        netcfg/get_nameservers string <%= [subnet.dns_primary,subnet.dns_secondary].reject{|n|
        n.blank?}.join('' '') %>\nd-i netcfg/get_gateway string <%= subnet.gateway
        %>\nd-i netcfg/confirm_static boolean true\n<% end -%>\n\n# Network configuration\nd-i
        netcfg/choose_interface select auto\nd-i netcfg/get_hostname string <%= @host
        %>\nd-i netcfg/get_domain string <%= @host.domain %>\nd-i netcfg/wireless_wep
        string\n\nd-i hw-detect/load_firmware boolean true\n\n<% if host_param_true?(''preseed-live-installer'')
        -%>\n# Offline live-installer location\nd-i live-installer/net-image string
        http://<%= @preseed_server %><%= @preseed_path %>/install/filesystem.squashfs\n<%
        end -%>\n\n# Mirror settings\nd-i mirror/country string manual\nd-i mirror/http/hostname
        string <%= @preseed_server %>\nd-i mirror/http/directory string <%= @preseed_path
        %>\nd-i mirror/http/proxy string<%= proxy_string %>\nd-i mirror/codename string
        <%= @host.operatingsystem.release_name %>\nd-i mirror/suite string <%= @host.operatingsystem.release_name
        %>\nd-i mirror/udeb/suite string <%= @host.operatingsystem.release_name %>\n\n#
        Time settings\nd-i clock-setup/utc boolean true\nd-i time/zone string <%=
        host_param(''time-zone'') || ''UTC'' %>\n\n# NTP\nd-i clock-setup/ntp boolean
        true\nd-i clock-setup/ntp-server string <%= host_param(''ntp-server'') ||
        ''0.debian.pool.ntp.org'' %>\n\n# Set alignment for automatic partitioning\n#
        Choices: cylinder, minimal, optimal\n#d-i partman/alignment select cylinder\n\n<%=
        @host.diskLayout %>\n\n<% if host_param(''preseed-kernel-image'') -%>\n# Install
        different kernel\nd-i base-installer/kernel/image string <%= host_param(''preseed-kernel-image'')
        %>\n<% end %>\n\n# User settings\nd-i passwd/root-password-crypted password
        <%= root_pass %>\nuser-setup-udeb passwd/root-login boolean true\nd-i passwd/make-user
        boolean false\nuser-setup-udeb passwd/make-user boolean false\n\n<% repos
        = 0 %>\n\n<% @additional_media.each do |medium| -%>\nd-i apt-setup/local<%=
        repos %>/repository string <%= medium[:url] %> <%= @host.operatingsystem.release_name
        %>-<%= medium[:name] %> main\n<%= \"d-i apt-setup/local#{repos}/comment string
        #{medium[:comment]}\" if medium[:comment] %>\n<%= \"d-i apt-setup/local#{repos}/key
        string #{medium[:gpgkey]}\" if medium[:gpgkey] %>\n<% repos +=1 -%>\n<% end
        -%>\n\n<% if salt_enabled -%>\n<% salt_package = ''salt-minion'' -%>\n<% if
        host_param_true?(''enable-saltstack-repo'') -%>\n<% if @host.operatingsystem.name
        == ''Debian'' -%>\nd-i apt-setup/local<%= repos %>/repository string http://debian.saltstack.com/debian
        <%= @host.operatingsystem.release_name %>-saltstack main\nd-i apt-setup/local<%=
        repos %>/comment string SaltStack Repository\nd-i apt-setup/local<%= repos
        %>/key string http://debian.saltstack.com/debian-salt-team-joehealy.gpg.key\n<%
        repos += 1 -%>\n<% end -%>\n<% if @host.operatingsystem.name == ''Ubuntu''
        -%>\nd-i apt-setup/local<%= repos %>/repository string http://ppa.launchpad.net/saltstack/salt/ubuntu
        <%= @host.operatingsystem.release_name %> main\nd-i apt-setup/local<%= repos
        %>/comment string SaltStack Repository\nd-i apt-setup/local<%= repos %>/key
        string http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x4759FA960E27C0A6\n<%
        repos += 1 -%>\n<% end -%>\n<% end -%>\n<% else -%>\n<% salt_package = ''''
        -%>\n<% end -%>\n\n# Install minimal task set (see tasksel --task-packages
        minimal)\ntasksel tasksel/first multiselect minimal, ssh-server, openssh-server\n\n#
        Install some base packages\nd-i pkgsel/include string <%= additional_packages
        %>\nd-i pkgsel/update-policy select <%= host_param(''preseed-update-policy'')
        || ''unattended-upgrades'' %>\nd-i pkgsel/upgrade select <%= host_param(''preseed-post-install-upgrade'')
        || ''none'' %>\n\npopularity-contest popularity-contest/participate boolean
        false\n\n# Boot loader settings\n#grub-pc grub-pc/hidden_timeout boolean false\n#grub-pc
        grub-pc/timeout string 10\nd-i grub-installer/only_debian boolean true\nd-i
        grub-installer/with_other_os boolean true\n<% if host_param(''install-disk'')
        -%>\nd-i grub-installer/bootdev string <%= host_param(''install-disk'') %>\n<%
        elsif (@host.operatingsystem.name == ''Debian'' and @host.operatingsystem.major.to_i
        >= 8) or (@host.operatingsystem.name == ''Ubuntu'' and @host.operatingsystem.major.to_i
        >= 16) -%>\nd-i grub-installer/bootdev string default\n<% end -%>\nd-i finish-install/reboot_in_progress
        note\n\nd-i preseed/late_command string wget -Y off <%= @static ? \"''#{foreman_url(''finish'')}&static=true''\"
        : foreman_url(''finish'') %> -O /target/tmp/finish.sh && in-target chmod +x
        /tmp/finish.sh && in-target /tmp/finish.sh\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":49,"name":"Preseed
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"6eb6b743949f0c51f80b178605ee5c97"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9c80046c-98b9-4328-8ed0-6c0e859db547]
      x-runtime: ['0.020954']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/31
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Preseed
        default finish\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n%>\n\n<% subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?)
        -%>\n<% dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n<% dhcp
        = !@static -%>\n<% end -%>\n<% unless dhcp -%>\n# host and domain name need
        setting as these values may have come from dhcp if pxe booting\n/bin/sed -i
        \"s/^search.*$/search <%= @host.domain %>/g\" /etc/resolv.conf\n/bin/sed -i
        \"s/.*dns-search.*/\\tdns-search <%= @host.domain %>/g\" /etc/network/interfaces\n/bin/sed
        -i \"s/^<%= @host.ip %>.*/<%= @host.ip %>\\t<%= @host.shortname %>.<%= @host.domain
        %>\\t<%= @host.shortname %>/g\" /etc/hosts\n/bin/echo <%= @host.shortname
        %> > /etc/hostname\n/bin/hostname  <%= @host.shortname %>.<%= @host.domain
        %>\n<% end -%>\n\n<%= snippet_if_exists(template_name + \" custom snippet\")
        %>\n<% if host_enc[''parameters''][''realm''] && @host.realm && @host.realm.realm_type
        == ''FreeIPA'' -%>\n<%= snippet ''freeipa_register'' %>\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n<%= snippet ''preseed_networking_setup'' %>\n<%= snippet ''efibootmgr_netboot''
        %>\n<%= snippet ''built'' %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":31,"name":"Preseed
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"b67225cedcebfd5ac98a903f2a51f4f5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [09b07b82-06d1-429d-afa7-10f739875cf7]
      x-runtime: ['0.020929']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/38
  response:
    body: {string: !!python/unicode '{"template":"#!gpxe\n<%#\nkind: iPXE\nname: Preseed
        default iPXE\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n<%
        if @host.operatingsystem.name == ''Debian'' -%>\n<% keyboard_params = \"auto=true
        domain=#{@host.domain}\" -%>\n<% else -%>\n<% keyboard_params = ''console-setup/ask_detect=false
        console-setup/layout=USA console-setup/variant=USA keyboard-configuration/layoutcode=us''
        -%>\n<% end -%>\n<% boot_files_uris = @host.operatingsystem.boot_files_uri(medium_provider)
        -%>\n<% kernel = boot_files_uris[0] -%>\n<% initrd = boot_files_uris[1] -%>\n<%
        static = @host.token.nil? ? ''?static=yes'' : ''&static=yes'' -%>\n\nkernel
        <%= kernel %> initrd=initrd.img interface=auto url=<%= foreman_url(''provision'')%><%=
        static %> ramdisk_size=10800 root=/dev/rd/0 rw auto netcfg/disable_dhcp=true
        BOOTIF=01-${netX/mac:hexhyp} hostname=<%= @host.name %> <%= keyboard_params
        %> locale=<%= host_param(''lang'') || ''en_US'' %> netcfg/get_ipaddress=${netX/ip}
        netcfg/get_netmask=${netX/netmask} netcfg/get_gateway=${netX/gateway} netcfg/get_nameservers=${dns}
        netcfg/confirm_static=true\ninitrd <%= initrd %>\n\nboot\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":38,"name":"Preseed
        default iPXE","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"732c6a0c1ce316d36ad16ad65c57ca2a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e6e8321d-4249-4332-9610-2232bf27ac1d]
      x-runtime: ['0.021022']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/7
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: Preseed
        default PXEGrub2\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n#\n#
        This file was deployed via ''<%= template_name %>'' template\n#\n# Supported
        host/hostgroup parameters:\n#\n# blacklist = module1, module2\n#   Blacklisted
        kernel modules\n#\n# lang = en_US\n#   System locale\n#\n<%\n  os_major =
        @host.operatingsystem.major.to_i\n  os_name  = @host.operatingsystem.name\n\n  options
        = []\n  if host_param(''blacklist'')\n    options << host_param(''blacklist'').split('','').collect{|x|
        \"#{x.strip}.blacklist=yes\"}.join('' '')\n  end\n  if os_name == ''Debian''\n    options
        << \"auto=true\"\n    options << \"domain=#{@host.domain}\"\n  else\n    options
        << ''console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA
        keyboard-configuration/layoutcode=us localechooser/translation/warn-light=true
        localechooser/translation/warn-severe=true''\n  end\n  options << \"locale=#{host_param(''lang'')
        || ''en_US''}\"\n  \n  # send PXELinux \"IPAPPEND 2\" option along\n  options.push(\"BOOTIF=01-$net_default_mac\")\n\n  options
        = options.join('' '')\n\n  if (os_name == ''Ubuntu'' && os_major > 12) ||
        (os_name == ''Debian'' && os_major > 8)\n    efi_suffix = ''efi''\n  else\n    efi_suffix
        = ''''\n  end\n-%>\nset default=0\nset timeout=<%= host_param(''loader_timeout'')
        || 10 %>\n\nmenuentry ''<%= template_name %>'' {\n  linux<%= efi_suffix %>  <%=
        @kernel %> interface=auto url=<%= foreman_url(''provision'')%> ramdisk_size=10800
        root=/dev/rd/0 rw auto hostname=<%= @host.name %> <%= options %>\n  initrd<%=
        efi_suffix %> <%= @initrd %>\n}\n\n<%= snippet_if_exists(template_name + \"
        custom menu\") %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":7,"name":"Preseed
        default PXEGrub2","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"f39710b08655b8698d7033400d481a2a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3f50e309-91c8-43d7-ae20-2c2b4bc7a6b1]
      x-runtime: ['0.020585']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/16
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Preseed
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n#\n#
        This file was deployed via ''<%= template_name %>'' template\n#\n# Supported
        host/hostgroup parameters:\n#\n# blacklist = module1, module2\n#   Blacklisted
        kernel modules\n#\n# lang = en_US\n#   System locale\n#\n<%\n  options = []\n  if
        host_param(''blacklist'')\n    options << host_param(''blacklist'').split('','').collect{|x|
        \"#{x.strip}.blacklist=yes\"}.join('' '')\n  end\n  if @host.operatingsystem.name
        == ''Debian''\n    options << \"auto=true\"\n    options << \"domain=#{@host.domain}\"\n  else\n    options
        << ''console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA
        keyboard-configuration/layoutcode=us localechooser/translation/warn-light=true
        localechooser/translation/warn-severe=true''\n  end\n  options << \"locale=#{host_param(''lang'')
        || ''en_US''}\"\n  options = options.join('' '')\n-%>\n\nDEFAULT linux\n\nLABEL
        linux\n    KERNEL <%= @kernel %>\n    APPEND initrd=<%= @initrd %> interface=auto
        url=<%= foreman_url(''provision'')%> ramdisk_size=10800 root=/dev/rd/0 rw
        auto hostname=<%= @host.name %> <%= options %>\n    IPAPPEND 2\n\n<%= snippet_if_exists(template_name
        + \" custom menu\") %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":16,"name":"Preseed
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"8266dbdc307b384143790385ab995838"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3891705b-c13c-4a7a-a7cd-6d6523412be8]
      x-runtime: ['0.020565']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/93
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: Preseed
        default user data\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n-%>\n#!/bin/bash\n\n<%#
        Cloud instances frequently have incorrect hosts data %>\n<%= snippet ''fix_hosts''
        %>\n\n<%\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n%>\n\n<% if proxy_uri -%>\necho ''Acquire::http::Proxy
        \"<%= proxy_uri %>\";'' >> /etc/apt/apt.conf\n<% end -%>\n\n<% if host_enc[''parameters''][''realm'']
        && @host.realm && @host.realm.realm_type == ''FreeIPA'' -%>\n<%= snippet ''freeipa_register''
        %>\n<% end -%>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet
        \"blacklist_kernel_modules\" %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client''
        %>\n<% end -%>\n\n<% if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n# UserData still needs wget to mark as finished\n<%= snippet ''built''
        %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":93,"name":"Preseed
        default user data","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"20178860933b01bc2b3979602232a393"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [888e3661-27b1-4ee5-9cbd-fb5e7a6fe4b0]
      x-runtime: ['0.020812']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/75
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: preseed_networking_setup\nmodel:
        ProvisioningTemplate\nsnippet: true\ndescription: this will configure your
        host networking, it configures your primary interface as well\n    as other
        configures NICs. It supports physical, VLAN and Alias interfaces. It''s intended
        to be\n    called in your preseed finish template.\n%>\n<% host_subnet = @host.subnet
        -%>\n<% host_dhcp = host_subnet.nil? ? false : host_subnet.dhcp_boot_mode?
        -%>\n<% host_subnet6 = @host.subnet6 -%>\n<% host_dhcp6 = host_subnet6.nil?
        ? false : host_subnet6.dhcp_boot_mode? -%>\n\nreal=`ip -o link | awk ''/<%=
        @host.mac -%>/ {print $2;}'' | sed s/://`\ncat << EOF > /etc/network/interfaces\n#loopback\nauto
        lo\niface lo inet loopback\n\n#<%= @host.primary_interface.identifier %>\nauto
        $real\nallow-hotplug $real\niface $real inet <%= host_dhcp ? ''dhcp'' : ''static''
        %>\n<% unless host_dhcp -%>\n    address <%= @host.ip %>\n    gateway <%=
        host_subnet.gateway %>\n    netmask <%= host_subnet.mask %>\n    dns-nameservers
        <%= host_subnet.dns_primary %> <%= host_subnet.dns_secondary %>\n    dns-search
        <%= @host.domain %>\n<% end -%>\n<% if @host.ip6 && host_subnet6 && !host_dhcp6
        -%>\niface $real inet6 static\n    address <%= @host.ip6 %>/<%= host_subnet6.cidr
        %>\n<% if host_subnet6.gateway -%>\n    gateway <%= host_subnet6.gateway %>\n<%
        end -%>\n<% end -%>\nEOF\n\n<% @host.managed_interfaces.each do |interface|
        -%>\n<% interface_subnet = interface.subnet -%>\n<% interface_dhcp = interface_subnet.nil?
        ? false : interface_subnet.dhcp_boot_mode? -%>\n<% interface_subnet6 = interface.subnet6
        -%>\n<% interface_dhcp6 = interface_subnet6.nil? ? false : interface_subnet6.dhcp_boot_mode?
        -%>\n<% next if !interface.managed? || (interface_subnet.nil? && interface_subnet6.nil?)
        || interface.primary -%>\nreal=`ip -o link | awk ''/<%= interface.mac -%>/
        {print $2;}'' | sed s/:$//`\n<% virtual = interface.virtual? -%>\n<% if virtual
        -%>\nreal=`echo <%= interface.identifier -%> | sed s/<%= interface.attached_to
        -%>/$real/`\n<% end -%>\n\ncat << EOF >> /etc/network/interfaces\n#<%= interface.identifier
        %>\n<% if interface_subnet %>\nauto $real\niface $real inet <%= interface_dhcp
        ? ''dhcp'' : ''static'' %>\n<% unless interface_dhcp -%>\n    address <%=
        interface.ip %>\n    netmask <%= interface_subnet.mask %>\n<% end -%>\n<%
        end -%>\n<% if interface.ip6 && interface_subnet6 %>\n<% unless interface_dhcp6
        -%>\niface $real inet6 static\n    address <%= interface.ip6 %>/<%= interface_subnet6.cidr
        %>\n<% if interface_subnet6.gateway -%>\n    gateway <%= interface_subnet6.gateway
        %>\n<% end -%>\n<% end -%>\n<% end -%>\nEOF\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":75,"name":"preseed_networking_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"6272dc0d852e4f4cf9bc8b6fcb4e04c2"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [6116283e-e9a0-43db-8b12-fc952d695595]
      x-runtime: ['0.019926']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/76
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: puppet.conf\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%\n  os_family = @host.operatingsystem.family\n  os_name   =
        @host.operatingsystem.name\n\n  aio_enabled = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        || host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppet4'')
        || host_param_true?(''enable-puppet5'')\n  aio_available = os_family == ''Debian''
        || os_family == ''Redhat'' || os_name == ''SLES''\n\n  if aio_enabled && aio_available\n    var_dir
        = ''/opt/puppetlabs/puppet/cache''\n    log_dir = ''/var/log/puppetlabs/puppet''\n    run_dir
        = ''/var/run/puppetlabs''\n    ssl_dir = ''/etc/puppetlabs/puppet/ssl''\n  elsif
        os_family == ''Windows''\n    var_dir = ''C:\\ProgramData\\PuppetLabs\\puppet\\cache''\n    log_dir
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\var\\log''\n    run_dir = ''C:\\ProgramData\\PuppetLabs\\puppet\\var\\run''\n    ssl_dir
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\etc\\ssl''\n  else\n    if @host.operatingsystem.family
        == ''Freebsd''\n      var_dir = ''/var/puppet''\n    else\n      var_dir =
        ''/var/lib/puppet''\n    end\n    log_dir = ''/var/log/puppet''\n    run_dir
        = ''/var/run/puppet''\n    ssl_dir = ''\\$vardir/ssl''\n  end\n%>\n[main]\n<%-
        unless host_param(''dns_alt_names'').to_s.empty? -%>\ndns_alt_names = <%=
        host_param(''dns_alt_names'') %>\n<%- end -%>\nvardir = <%= var_dir %>\nlogdir
        = <%= log_dir %>\nrundir = <%= run_dir %>\nssldir = <%= ssl_dir %>\n<% if
        host_param_true?(''fips_enabled'') -%>\ndigest_algorithm = sha256\n<% end
        -%>\n\n[agent]\npluginsync      = true\nreport          = true\nignoreschedules
        = true\n<%- if @host.puppet_ca_server.strip -%>\nca_server       = <%= @host.puppet_ca_server
        %>\n<%- end -%>\ncertname        = <%= @host.certname %>\nenvironment     =
        <%= @host.environment %>\nserver          = <%= @host.puppetmaster %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":76,"name":"puppet.conf","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"1a4500e43e2978bbc76fdefe14909718"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d1ffb65f-4b96-447c-9c1d-c460bf8c8b2c]
      x-runtime: ['0.020205']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/78
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: puppetlabs_repo\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%\nhttp_proxy   = host_param(''http-proxy'')
        ? \" --httpproxy #{host_param(''http-proxy'')}\" : nil\nhttp_port    = host_param(''http-proxy-port'')
        ? \" --httpport #{host_param(''http-proxy-port'')}\" : nil\nproxy_uri    =
        host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\nproxy_string = proxy_uri ? \" -e https_proxy=#{proxy_uri}/\" : ''''\nproxy_string_bits
        = proxy_uri ? \" -ProxyUsage Override -ProxyList #{proxy_uri}\" : ''''\nos_family
        = @host.operatingsystem.family\nos_major  = @host.operatingsystem.major.to_i\nos_name   =
        @host.operatingsystem.name\n\nif os_family == ''Redhat''\n  repo_host = ''yum.puppetlabs.com''\n  if
        os_name == ''Fedora''\n    repo_os = ''fedora''\n  else\n    repo_os = ''el''\n  end\nelsif
        os_family == ''Suse''\n  repo_host = ''yum.puppetlabs.com''\n  repo_os = ''sles''
        # PuppetLabs repos only exist for SLES, not OpenSUSE\nelsif os_family == ''Debian''\n  repo_host
        = ''apt.puppetlabs.com''\n  repo_os = @host.operatingsystem.release_name\nelsif
        os_family == ''Windows''\n  repo_host = ''downloads.puppetlabs.com''\n  repo_os
        = ''windows''\nend\n\nif host_param_true?(''enable-puppetlabs-repo'')\n  repo_name
        = ''puppetlabs-release''\nelsif host_param_true?(''enable-puppetlabs-pc1-repo'')\n  repo_name
        = ''puppetlabs-release-pc1''\nelsif host_param_true?(''enable-puppetlabs-puppet5-repo'')\n  repo_name
        = ''puppet5-release''\nend\n\nrepo_subdir = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        ? ''puppet5/'' : ''''\n-%>\n\n<% if repo_name -%>\n<% if os_family == ''Redhat''
        || os_name == ''SLES'' -%>\nrpm -Uvh<%= http_proxy %><%= http_port %> https://<%=
        repo_host %>/<%= repo_subdir %><%= repo_name %>-<%= repo_os %>-<%= os_major
        %>.noarch.rpm\n<% elsif os_family == ''Debian'' -%>\napt-get update\napt-get
        -y install ca-certificates\nwget -O /tmp/<%= repo_name %>-<%= repo_os %>.deb<%=
        proxy_string %> https://<%= repo_host %>/<%= repo_name %>-<%= repo_os %>.deb\ndpkg
        -i /tmp/<%= repo_name %>-<%= repo_os %>.deb\n<% elsif os_family == ''Windows''
        -%>\n$puppet_agent_source = ''https://<%= repo_host %>/<%= repo_os %>/puppet-agent-<%=
        @host.architecture %>-latest.msi''\n$puppet_agent_msi = \"${env:TEMP}\\puppet-agent-<%=
        @host.architecture %>.msi\"\nWrite-Host \"Downloading puppet-agent from ${$puppet_agent_source}
        to ${puppet_agent_msi}\"\nStart-BitsTransfer -Source \"${puppet_agent_source}\"
        -Destination \"${puppet_agent_msi}\"<%= proxy_string_bits %>\n<% end -%>\n<%
        end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":78,"name":"puppetlabs_repo","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:07 GMT']
      etag: [W/"161eb4959d10a7df4f5cee3ff4cf2abf"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d40a502c-ad01-4946-a530-be04b64c3e2e]
      x-runtime: ['0.024829']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/77
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: puppet_setup\nmodel:
        ProvisioningTemplate\ndescription: this snippet will configure the Puppet
        agent\nsnippet: true\n%>\n<%\nos_family = @host.operatingsystem.family\nos_major  =
        @host.operatingsystem.major.to_i\nos_name   = @host.operatingsystem.name\n\naio_enabled
        = host_param_true?(''enable-puppetlabs-puppet5-repo'') || host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppet4'') || host_param_true?(''enable-puppet5'')\n\nif
        os_family == ''Freebsd''\n  freebsd_package = host_param_true?(''enable-puppet5'')
        ? ''puppet5'' : ''puppet4''\n  etc_path = ''/usr/local/etc/puppet''\n  bin_path
        = ''/usr/local/bin''\nelsif os_family == ''Windows''\n  windows_package =
        \"puppet-agent-#{@host.architecture}.msi\"\n  etc_path = ''C:\\ProgramData\\PuppetLabs\\puppet\\etc''\n  bin_path
        = ''C:\\Program Files\\Puppet Labs\\Puppet\\bin''\nelsif aio_enabled\n  linux_package
        = ''puppet-agent''\n  etc_path = ''/etc/puppetlabs/puppet''\n  bin_path =
        ''/opt/puppetlabs/bin''\nelse\n  linux_package = os_family == ''Suse'' ? ''rubygem-puppet''
        : ''puppet''\n  etc_path = ''/etc/puppet''\n  bin_path = ''/usr/bin''\nend\n%>\n\n<%
        if os_family == ''Debian'' -%>\napt-get update\napt-get install -y <%= linux_package
        %>\n<% elsif os_family == ''Freebsd'' -%>\npkg install -y <%= freebsd_package
        %>\n<% elsif os_family == ''Redhat'' -%>\nif [ -f /usr/bin/dnf ]; then\n  dnf
        -y install <%= linux_package %>\nelse\n  yum -t -y install <%= linux_package
        %>\nfi\n<% elsif os_family == ''Suse'' -%>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-puppet5-repo'') -%>\nrpmkeys --import
        http://yum.puppetlabs.com/RPM-GPG-KEY-puppetlabs\nrpmkeys --import http://yum.puppetlabs.com/RPM-GPG-KEY-puppet\n<%
        end -%>\n<% if @host.provision_method == ''image'' -%>\n/usr/bin/zypper -n
        install <%= linux_package %>\n<% end -%>\n<% elsif os_family == ''Windows''
        -%>\n$puppet_agent_msi = \"${env:TEMP}\\<%= windows_package %>\"\n$puppet_install_args
        = @(\n  ''/qn'',\n  ''/norestart'',\n  ''/i'',\n  \"${puppet_agent_msi}\",\n  <%-
        if @host.puppet_ca_server.strip -%>\n  \"PUPPET_CA_SERVER=<%= @host.puppet_ca_server
        %>\",\n  <%- end -%>\n  \"PUPPET_MASTER_SERVER=<%= @host.puppetmaster %>\"\n)\n\nWrite-Host
        \"Installing ${puppet_agent_msi} with args ${puppet_install_args}\"\nStart-Process
        ''msiexec.exe'' -ArgumentList $puppet_install_args -Wait -NoNewWindow\n<%
        end -%>\n\n<% if os_family == ''Windows'' -%>\n$puppet_conf = @(\"<%= snippet
        ''puppet.conf'' %>\".Replace(\"`n\",\"`r`n\"))\nOut-File -FilePath <%= etc_path
        %>\\puppet.conf -InputObject $puppet_conf\n<% else -%>\ncat > <%= etc_path
        %>/puppet.conf << EOF\n<%= snippet ''puppet.conf'' %>\nEOF\n<% end -%>\n\n<%
        if @host.puppetca_token.present? -%>\n<% if os_family == ''Windows'' -%>\n$csr_attributes
        = @(\"<%= snippet ''csr_attributes.yaml'' %>\".Replace(\"`n\",\"`r`n\"))\nOut-File
        -FilePath <%= etc_path %>\\csr_attributes.yaml -InputObject $csr_attributes\n<%
        else -%>\ncat > <%= etc_path %>/csr_attributes.yaml << EOF\n<%= snippet ''csr_attributes.yaml''
        %>\nEOF\n<% end -%>\n<% end -%>\n\n<% if os_family == ''Redhat'' -%>\n<% if
        os_major > 6 -%>\npuppet_unit=puppet\n/usr/bin/systemctl list-unit-files |
        grep -q puppetagent && puppet_unit=puppetagent\n/usr/bin/systemctl enable
        ${puppet_unit}\n<% else -%>\n/sbin/chkconfig --level 345 puppet on\n<% end
        -%>\n<% end -%>\n<% if os_family == ''Freebsd'' -%>\necho ''puppet_enable=\"YES\"''
        >>/etc/rc.conf\n<% end -%>\n<% unless aio_enabled -%>\n<% if os_family ==
        ''Debian'' -%>\nif [ -f \"/etc/default/puppet\" ]\nthen\n/bin/sed -i ''s/^START=no/START=yes/''
        /etc/default/puppet\nfi\n<%= bin_path %>/puppet agent --enable\n<% elsif os_family
        == ''Suse'' -%>\nif [ -f \"/etc/sysconfig/puppet\" ]\nthen\n/usr/bin/sed -ie
        s/^PUPPET_SERVER=.*/PUPPET_SERVER=<%= @host.puppetmaster.blank? ? '''' : @host.puppetmaster
        %>/ /etc/sysconfig/puppet\nfi\n<% end -%>\n<% end -%>\n<%#\nIMPORTANT NOTE:
        Setting \"run-puppet-in-installer\" is UNSUPPORTED!\n\nThe default mode of
        operation in Foreman is only to set up Puppet, but to not run it inside the
        installer environment.\nRunning Puppet inside the installer can cause various
        hard to diagnose errors, many of them resulting from the fact that\nservices
        are not started inside the installer.\n\nIf you are aware of the downsides,
        you can trigger a Puppet run inside the installer by setting the variable\nrun-puppet-in-installer
        to true.\n\nNote, that this is an *unsupported mode of operation* and not
        supported by Foreman at all. You have been warned!\n%>\n<% if host_param_true?(''run-puppet-in-installer'')
        -%>\n<% if (os_name == ''Ubuntu'' && os_major >= 15) || (os_name == ''Debian''
        && os_major >= 8) -%>\n# Puppet tries to detect the init system by checking
        the presence of the directory /run/systemd/system. That detection\n# fails
        in a chroot environment like the one the installer provides. See Puppet tickets
        PA-136 and PUP-5577\n#\n# We work around that here until it gets fixed in
        Puppet (probably never for Puppet 3.x)\nmkdir -p /run/systemd/system\n<% end
        -%>\n<% end -%>\n# export a custom fact called ''is_installer'' to allow detection
        of the installer environment in Puppet modules\n<% if os_family == ''Windows''
        -%>\n$env:FACTER_is_installer = $TRUE\n\n# passing a non-existent tag like
        \"no_such_tag\" to the puppet agent only initializes the node\n$puppet_agent_args
        = @(\n  \"agent\",\n  \"--config\", \"<%= etc_path %>\\puppet.conf\",\n  \"--onetime\",\n  <%=
        host_param_true?(''run-puppet-in-installer'') ? '''' : ''\"--tags no_such_tag\",''
        %>\n  <%= @host.puppetmaster.blank? ? '''' : \"\\\"--server #{@host.puppetmaster}\\\",\"
        %>\n  \"--no-daemonize\"\n)\nStart-Process ''<%= bin_path %>\\puppet'' -ArgumentList
        $puppet_agent_args -Wait -NoNewWindow\n<% else -%>\nexport FACTER_is_installer=true\n#
        passing a non-existent tag like \"no_such_tag\" to the puppet agent only initializes
        the node\n<%= bin_path %>/puppet agent --config <%= etc_path %>/puppet.conf
        --onetime <%= host_param_true?(''run-puppet-in-installer'') ? '''' : ''--tags
        no_such_tag'' %> <%= @host.puppetmaster.blank? ? '''' : \"--server #{@host.puppetmaster}\"
        %> --no-daemonize\n<% if os_family == ''Suse'' || (os_name == ''Debian'' &&
        os_major > 8) || (os_name == ''Ubuntu'' && os_major >= 15) -%>\n<%= bin_path
        %>/puppet resource service puppet enable=true\n<% if @host.provision_method
        == ''image'' -%>\n<%= bin_path %>/puppet resource service puppet ensure=running\n<%
        end -%>\n<% end -%>\n<% end -%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":77,"name":"puppet_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"799c7203c6e027d487299b861a8a5c4d"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [bcdb0e5d-fc86-4f72-bf2c-3704daf76bd5]
      x-runtime: ['0.019954']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/79
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub2_chainload\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%\n  paths = [\n    ''/EFI/fedora/shim.efi'',\n    ''/EFI/fedora/grubx64.efi'',\n    ''/EFI/redhat/shim.efi'',\n    ''/EFI/redhat/grubx64.efi'',\n    ''/EFI/centos/shim.efi'',\n    ''/EFI/centos/grubx64.efi'',\n    ''/EFI/debian/grubx64.efi'',\n    ''/EFI/ubuntu/grubx64.efi'',\n    ''/EFI/sles/grubx64.efi'',\n    ''/EFI/opensuse/grubx64.efi'',\n    ''/EFI/Microsoft/boot/bootmgfw.efi''\n  ]\n-%>\ninsmod
        part_gpt\ninsmod fat\ninsmod chain\n\nmenuentry ''Chainload Grub2 EFI from
        ESP'' --id local_chain_hd0 {\n  echo Chainloading Grub2 EFI from ESP, enabled
        devices for booting:\n  ls\n<%\n  paths.each do |path|\n-%>\n  echo \"Trying
        <%= path %> \"\n  unset chroot\n  search --file --no-floppy --set=chroot <%=
        path %>\n  if [ -f ($chroot)<%= path %> ]; then\n    chainloader ($chroot)<%=
        path %>\n    echo \"Found <%= path %> at $chroot, attempting to chainboot
        it...\"\n    sleep 2\n    boot\n  fi\n<%\n  end\n-%>\n  echo Partition with
        known EFI file not found, you may want to drop to grub shell\n  echo and investigate
        available files updating ''pxegrub2_chainload'' template and\n  echo the list
        of known filepaths for probing. Contents of \\EFI directory:\n  ls ($chroot)/EFI\n  echo
        The system will halt in 2 minutes or press ESC to halt immediately.\n  sleep
        -i 120\n  halt --no-apm\n}\n\nmenuentry ''Chainload into BIOS bootloader on
        first disk'' --id local_chain_legacy_hd0 {\n  set root=(hd0,0)\n  chainloader
        +1\n  boot\n}\n\nmenuentry ''Chainload into BIOS bootloader on second disk''
        --id local_chain_legacy_hd1 {\n  set root=(hd1,0)\n  chainloader +1\n  boot\n}\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":79,"name":"pxegrub2_chainload","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"95fe27fd6c96f20e34eccf5ff5426c95"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7847f264-1318-4053-8734-071017fd8977]
      x-runtime: ['0.020075']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/8
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: PXEGrub2
        default local boot\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot provisioned
        hosts, do not associate or change the name. %>\n\nset default=<%= global_setting(\"default_pxe_item_local\",
        \"local\") %>\nset timeout=20\necho Default PXE local template entry is set
        to ''<%= global_setting(\"default_pxe_item_local\", \"local\") %>''\n\n<%=
        snippet \"pxegrub2_mac\" %>\n<%= snippet \"pxegrub2_chainload\" %>\n<%= snippet
        \"pxegrub2_discovery\" %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":8,"name":"PXEGrub2
        default local boot","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"e295af3aad54aa33469031f031ae512b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5cf3aa98-476a-47b9-893d-4ec49a408817]
      x-runtime: ['0.020308']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/80
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub2_discovery\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\nRHEL 7 virtio driver does not
        have persistent naming scheme, causing interfaces\nto be named eth0, eth1,
        etc.. If you want to enable the new persistent naming\nscheme and get inteface
        names like ens3, add net.ifnames=1 to the linuxefi line\nbelow. This will
        not be fixed until RHEL8 due to prevent breaking changes for\nexisting systems.
        See RHBZ#1259015 for more details.\n\nAnother bug in RHEL 7.4 is affecting
        $net_default_mac with a trailing slash, in\nthe global template we have a
        regexp module creating corrected variable $mac\nwhich is used here. See RHBZ#1487107
        for more info.\n-%>\n<% [\"efi\", \"\"].each do |suffix| %>\nmenuentry ''Foreman
        Discovery Image <%= suffix %>'' --id discovery<%= suffix %> {\n  linux<%=
        suffix %> boot/fdi-image/vmlinuz0 rootflags=loop root=live:/fdi.iso rootfstype=auto
        ro rd.live.image acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0
        rd.neednet=0 nokaslr nomodeset proxy.url=<%= foreman_server_url %> proxy.type=foreman
        BOOTIF=01-$mac\n  initrd<%= suffix %> boot/fdi-image/initrd0.img\n}\n<% end
        %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":80,"name":"pxegrub2_discovery","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"7e254d840479bac2460197ab0f2434bf"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [443ee230-8b3c-405e-87c5-6cbf357c83b4]
      x-runtime: ['0.020157']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/9
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: PXEGrub2
        global default\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot unknown
        hosts, do not associate or change the name. %>\n\ndefault=<%= global_setting(\"default_pxe_item_global\",
        \"local\") %>\ntimeout=20\necho Default PXE global template entry is set to
        ''<%= global_setting(\"default_pxe_item_global\", \"local\") %>''\n\n<%= snippet
        \"pxegrub2_mac\" %>\n\n# Only grub2 from redhat has MAC-based config loading
        patch, load explicitly\nconfigfile=/grub2/grub.cfg-01-$mac\nsource \"$configfile\"\n\n#
        And if that fails render chain and discovery menu\n<%= snippet \"pxegrub2_chainload\"
        %>\n<%= snippet \"pxegrub2_discovery\" %>\n\n<% unless @profiles.nil? -%>\n<%
        for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %>\nmenuentry ''<%= \"#{profile[:hostgroup]} - #{profile[:template]}\" %>''
        {\n  linuxefi <%= profile[:kernel] %> <%= append %>\n  initrdefi <%= profile[:initrd]
        %>\n}\n<% end %>\n<% end -%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":9,"name":"PXEGrub2
        global default","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"0951a8e34b900ef2f2553367e32d42c4"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [211d1fe3-6f43-4e64-a52d-18f50e3ab496]
      x-runtime: ['0.020884']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/81
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub2_mac\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n# To load MAC-based config explicitly,
        a MAC address separated by dash chars is needed.\n# Also due to bug in RHEL
        7.4 files are loaded with an extra \":\" character at the end.\n# This workarounds
        both cases, make sure \"regexp.mod\" file is present on the TFTP.\n# For more
        info see: https://bugzilla.redhat.com/show_bug.cgi?id=1370642#c70\ninsmod
        regexp\nregexp --set=1:m1 --set=2:m2 --set=3:m3 --set=4:m4 --set=5:m5 --set=6:m6
        ''^([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})''
        \"$net_default_mac\"\nmac=${m1}-${m2}-${m3}-${m4}-${m5}-${m6}\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":81,"name":"pxegrub2_mac","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"d782cf0b187e07fd8961c35f79b47c1c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ce8e1322-50d6-4996-aab3-8fb545081afd]
      x-runtime: ['0.020165']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/82
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub_chainload\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%\n  # paths variable must be passed
        into the snippet, otherwise no EFI items are rendered\n  if !@paths.nil? &&
        @paths.size > 1\n-%>\nfallback=<%= (1..@paths.size).to_a.join('' '') %>\n  <%
        @paths.each do |path| %>\ntitle Chainload Grub from /EFI/<%= path %> or try
        next\n  rootnoverify (hd0,0)\n  chainloader /EFI/<%= path %>/grubx64.efi\n  <%
        end -%>\n<% else -%>\ntitle Update your PXEGrub local template to get EFI
        options\n  root (hd0,0)\n  chainloader +1\n<% end -%>\n\ntitle Chainload into
        bootloader on first disk\n  root (hd0,0)\n  chainloader +1\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":82,"name":"pxegrub_chainload","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"3d66286483413120a12efdab654a44e7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d3048cf8-5cd6-4b08-bc91-d45e7bc15d61]
      x-runtime: ['0.020172']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/4
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: PXEGrub
        default local boot\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot provisioned
        hosts, do not associate or change the name. %>\n<%\n  # Grub1 only supports
        numeric default statement, this allows conversion to number. First define\n  #
        array of directories we will search for EFI booloaders:\n  paths = [\"fedora\",
        \"redhat\", \"centos\", \"debian\", \"ubuntu\", \"sles\", \"opensuse\", \"Microsoft\",
        \"EFI\"]\n  # Add remaining entries to it and use this to convert to number:\n  items
        = paths.push(\"local_chain_hd0\")\n  # Read default setting but since \"local\"
        is missing, use the first path available.\n  default_setting = global_setting(\"default_pxe_item_local\",
        paths.first)\n  default_setting = paths.first if default_setting == ''local''\n  default_item
        = items.index(default_setting) || 0\n%>\ndefault=<%= default_item %>\ntimeout=20\n\n<%=
        snippet \"pxegrub_chainload\", variables: {paths: paths} %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":4,"name":"PXEGrub
        default local boot","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"9fb08f7447b8f100730dc683ca6b76ee"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a67f8d17-e3e1-441c-be4e-29179978519b]
      x-runtime: ['0.020276']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/83
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub_discovery\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\nRHEL 7 virtio driver does not
        have persistent naming scheme, causing interfaces\nto be named eth0, eth1,
        etc.. If you want to enable the new persistent naming\nscheme and get inteface
        names like ens3, add net.ifnames=1 to the linuxefi line\nbelow. This will
        not be fixed until RHEL8 due to prevent breaking changes for\nexisting systems.
        See RHBZ#1259015 for more details.\n-%>\n# http://projects.theforeman.org/issues/15997\ntitle
        Foreman Discovery Image - not supported with Grub 1.x\n  kernel boot/fdi-image/vmlinuz0
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=<%= foreman_server_url %> proxy.type=foreman BOOTIF=01-$net_default_mac\n  initrd
        boot/fdi-image/initrd0.img\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":83,"name":"pxegrub_discovery","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"8d193640210ff6795f26b44cfb21837d"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b033db4f-d9b0-44ca-bd52-cefd255855f9]
      x-runtime: ['0.019787']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/5
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: PXEGrub
        global default\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot unknown
        hosts, do not associate or change the name. %>\n<%\n  # Grub1 only supports
        numeric default statement, this allows conversion to number. First define\n  #
        array of directories we will search for EFI booloaders:\n  paths = [\"fedora\",
        \"redhat\", \"centos\", \"debian\", \"ubuntu\", \"sles\", \"opensuse\", \"Microsoft\",
        \"EFI\"]\n  # Add remaining entries to it and use this to convert to number:\n  items
        = paths.push(\"local_chain_hd0\", \"discovery\")\n  # Read default setting
        but since \"local\" is missing, use the first path available.\n  default_setting
        = global_setting(\"default_pxe_item_global\", paths.first)\n  default_setting
        = paths.first if default_setting == ''local''\n  default_item = items.index(default_setting)
        || 0\n%>\ndefault=<%= default_item %>\ntimeout=20\n\n<%= snippet \"pxegrub_chainload\",
        variables: {paths: paths} %>\n\n<%= snippet \"pxegrub_discovery\" %>\n\n<%
        unless @profiles.nil? -%>\n<% for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %>\ntitle <%= \"#{profile[:hostgroup]} - #{profile[:template]}\" %>\n  kernel
        <%= profile[:kernel] %> <%= append %>\n  initrd <%= profile[:initrd] %>\n<%
        end %>\n<% end -%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":5,"name":"PXEGrub
        global default","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"2780c46d02d6ef00f8f8d7e16227ff60"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4c4a33ad-c166-451f-b74c-4e45ccef1a53]
      x-runtime: ['0.020646']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/17
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        chain iPXE\nmodel: ProvisioningTemplate\n%>\n<%#\nChainboots iPXE/gPXE from
        PXELinux. Make sure the OS has iPXE template\nassociated and file ipxe.lkrn
        was copied in the TFTP directory (e.g. from\n/usr/share/ipxe/ipxe.lkrn or
        iPXE project web site).\n\nFor more info visit:\nhttp://projects.theforeman.org/projects/foreman/wiki/Fetch_boot_files_via_http_instead_of_TFTP\n%>\nDEFAULT
        linux\nLABEL linux\nKERNEL ipxe.lkrn\nAPPEND dhcp && chain <%= foreman_url(''iPXE'')
        %>\nIPAPPEND 2\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":17,"name":"PXELinux
        chain iPXE","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"36720226930f85be808381eec5a98218"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [1f499d79-ded3-4416-a5da-2715c668c0bf]
      x-runtime: ['0.021073']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/18
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        chain iPXE UNDI\nmodel: ProvisioningTemplate\n%>\n<%#\nChainboots iPXE/gPXE
        from PXELinux via UNDI. Make sure the OS has an iPXE\ntemplate associated
        and the file undionly.kpxe was copied into the TFTP\ndirectory as undionly-ipxe.0
        (e.g. from /usr/share/ipxe/undionly.kpxe or\nthe iPXE project web site). Changes
        need to be made in the DHCP\nconfiguration to prevent an endless loop to happen.\n\nFor
        more info visit:\nhttp://projects.theforeman.org/projects/foreman/wiki/Fetch_boot_files_via_http_instead_of_TFTP\n%>\nDEFAULT
        linux\nLABEL linux\nKERNEL undionly-ipxe.0\nIPAPPEND 2\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":18,"name":"PXELinux
        chain iPXE UNDI","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"116add71538b1be5f33f749ecc7d4d95"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [6260fc4c-fcc4-402a-906f-c4a5a9f98816]
      x-runtime: ['0.020694']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/84
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxelinux_chainload\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\nLABEL local\n  MENU LABEL Default
        local boot\n  MENU DEFAULT\n  LOCALBOOT 0\n\nLABEL local_primary\n  MENU LABEL
        Default local boot from primary hard drive\n  LOCALBOOT 0x80\n\nLABEL local_skip\n  MENU
        LABEL Boot from the next BIOS device\n  LOCALBOOT -1\n\nLABEL local_chain_hd0\n  MENU
        LABEL Chainload the first hard drive (hd0)\n  COM32 chain.c32\n  APPEND hd0\n\nLABEL
        local_chain_hd1\n  MENU LABEL Chainload the second hard drive (hd1)\n  COM32
        chain.c32\n  APPEND hd1\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":84,"name":"pxelinux_chainload","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"0d359005a561f81c6ec43df89bd313f0"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9ec3ad31-41e8-4a67-97b6-87a2b2349814]
      x-runtime: ['0.021066']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/19
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        default local boot\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot provisioned
        hosts, do not associate or change the name. %>\n\nDEFAULT menu\nMENU TITLE
        Booting local disk (ESC to stop)\nTIMEOUT 200\nDEFAULT <%= global_setting(\"default_pxe_item_local\",
        \"local_chain_hd0\") %>\n\n<%= snippet \"pxelinux_chainload\" %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":19,"name":"PXELinux
        default local boot","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"379d97489be623562c161585fba44247"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [58ba7d98-ce37-43ab-8f21-ff87d7d74ba8]
      x-runtime: ['0.021025']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/20
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        default memdisk\nmodel: ProvisioningTemplate\noses:\n- FreeBSD (memdisk image)\n%>\nDEFAULT
        memdisk\n\nLABEL memdisk\n    KERNEL memdisk\n    APPEND initrd=<%= @initrd
        %> harddisk raw\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":20,"name":"PXELinux
        default memdisk","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"712283d7c96c5e5f5d634862562257b8"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c631172f-6cc2-44a8-b1bf-24fac0ca0cac]
      x-runtime: ['0.021733']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/85
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxelinux_discovery\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\ndiscovery image is based on
        CentOS/RHEL and therefor it is affected by https://bugzilla.redhat.com/show_bug.cgi?id=1259015.\nIn
        short, before RHEL 7.2 virtio driver didn''t have the new persistent naming
        scheme, causing interfaces to be named eth0, eth1, etc..\nIf you want to enable
        the new persistent naming scheme and get inteface names like ens3, add net.ifnames=1
        to the APPEND line below.\n-%>\nLABEL discovery\n  MENU LABEL Foreman Discovery
        Image\n  KERNEL boot/fdi-image/vmlinuz0\n  APPEND initrd=boot/fdi-image/initrd0.img
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=<%= foreman_server_url %> proxy.type=foreman\n  IPAPPEND 2\n\n<%#\nChainbooting
        via iPXE requires an extra script published via HTTP:\n\n#!ipxe\nkernel http://foreman_url/pub/vmlinuz0
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=https://foreman_url proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://foreman_url/pub/initrd0.img\nboot\n-%>\nLABEL discovery_ipxe\n  MENU
        LABEL Foreman Discovery Image - iPXE\n  KERNEL ipxe.lkrn\n  APPEND dhcp &&
        chain <%= foreman_server_url %>/pub/discovery.ipxe\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":85,"name":"pxelinux_discovery","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"a42131cb09fc64bc7291eca22449fdc7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [267f12ce-0c09-4779-9740-bc143f74cb68]
      x-runtime: ['0.020014']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/21
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        global default\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot unknown
        hosts, do not associate or change the name. %>\n\nDEFAULT menu\nMENU TITLE
        Booting unknown host (ESC to stop)\nTIMEOUT 200\nONTIMEOUT <%= global_setting(\"default_pxe_item_global\",
        \"local\") %>\n\n<%= snippet \"pxelinux_chainload\" %>\n\n<%= snippet \"pxelinux_discovery\"
        %>\n\n<% unless @profiles.nil? -%>\n<% for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %>\nLABEL <%= \"#{profile[:hostgroup]} - #{profile[:template]}\" %>\n  KERNEL
        <%= profile[:kernel] %>\n  APPEND initrd=<%= profile[:initrd] %> <%= append
        %>\n<% end %>\n<% end -%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":21,"name":"PXELinux
        global default","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"af27521eb973488738bfe572e02691e7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d516ab40-93a7-47b2-ace6-b992e22da0d0]
      x-runtime: ['0.020855']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/86
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: rancheros_cloudconfig\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n#cloud-config\nhostname: <%= @host.shortname
        %>\nrancher:\n  network:\n    dns:\n      nameservers:\n<% if @host.subnet.dns_primary.present?
        or @host.subnet.dns_secondary.present? -%>\n<% if @host.subnet.dns_primary.present?
        -%>\n        - <%= @host.subnet.dns_primary %>\n<% end -%>\n<% if @host.subnet.dns_secondary.present?
        -%>\n        - <%= @host.subnet.dns_secondary %>\n<% end -%>\n<% end -%>\n      search:\n        -
        <%= @host.domain %>\n    interfaces:\n      eth*:\n        dhcp: true\n<%
        unless @host.subnet.respond_to?(:dhcp_boot_mode?) -%>\n      eth0:\n        address:
        <%= @host.ip -%>/<%= @host.subnet.cidr %>\n        gateway: <%= @host.subnet.gateway
        %>\n<% end -%>\n  console: debian\nssh_authorized_keys:\n<%-\nusers = @host.owner_type
        == ''Usergroup'' ? @host.owner.all_users : [@host.owner]\nusers.each do |user|\n  if
        user.respond_to?(:ssh_authorized_keys) && user.ssh_authorized_keys.any?\n    index
        = 0\n    user.ssh_keys.each do |key|\n      if index == 0\n-%>\n<%=\"  - #{key.type}
        #{key.ssh_key} #{key.comment}\"%>\n<%-\n      else\n-%>\n<%=\"  - #{key.type}
        #{key.ssh_key} #{key.comment} - #{index}\"%>\n<%-\n      end\n      index
        += 1\n    end\n  end\nend\n-%>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":86,"name":"rancheros_cloudconfig","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"b4bdf32f37ff11769ec7baa17d0beeee"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d97d0fdf-1b5f-4b5f-a10e-a311fb27c97a]
      x-runtime: ['0.020156']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/50
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: RancherOS
        provision\nmodel: ProvisioningTemplate\noses:\n- RancherOS\n-%>\n<%= snippet
        ''rancheros_cloudconfig'' -%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":50,"name":"RancherOS
        provision","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"803fc4c22f0b081b2ab1f1d4fdb0b9ad"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b6f3ed2a-351d-4b28-882d-b8fbc0e35953]
      x-runtime: ['0.020611']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/22
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: RancherOS
        PXELinux\nmodel: ProvisioningTemplate\noses:\n- RancherOS\n-%>\nDEFAULT rancheros\n\nLABEL
        rancheros\n  KERNEL <%= @kernel -%> rancher.state.dev=LABEL=RANCHER_STATE
        rancher.state.autoformat=[<%= host_param(''install-disk'') || ''/dev/sda''
        %>] rancher.cloud_init.datasources=[''url:<%= foreman_url(''provision'')-%>'']\n  APPEND
        initrd=<%= @initrd -%>\n\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":22,"name":"RancherOS
        PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"8a30490fa552a3e6090025068a5031b9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5e707f1d-b828-4142-8012-955ecd697031]
      x-runtime: ['0.020540']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/87
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: redhat_register\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\n# Red Hat Registration Snippet\n#\n#
        General parameters:\n#\n#   redhat_install_agent = [true|false]         Install
        the management agent.  For Spacewalk,\n#                                               this
        is OSAD.  For Katello, this is katello-agent.\n#\n#   redhat_install_host_tools
        = [true|false]    Install the katello-host-tools yum/dnf plugins.\n#\n#   redhat_install_host_tracer_tools
        = [true|false]  Install the katello-host-tools Tracer yum/dnf plugin.\n#\n#   activation_key
        = <key>                      Activation key string, not needed if using\n#                                               subscription-manager
        with username/password\n#\n#   atomic = [true|false]                       Whether
        or not this system is Atomic\n#\n# Parameters for use with subscription-manager
        (Red Hat CDN, Satellite, or Katello)\n#\n#   subscription_manager = ''true''               You''re
        going to use subscription-manager\n#\n#   subscription_manager_username =
        <username>  Username for subscription-manager\n#\n#   subscription_manager_password
        = <password>  Password for subscription-manager\n#\n#   subscription_manager_certpkg_url
        = <url>    Custom certificate package URL\n#\n#   subscription_manager_atomic_url
        = <url>     Script used for configuring Atomic servers\n#                                               for
        subscription-manager\n#\n#   subscription_manager_org = <org name>       Organization
        name, if required\n#\n#   subscription_manager_repos = <repos>        Additional
        repositories to enable\n#                                               after
        registration\n#\n#   subscription_manager_override_repos_cost = <cost>  Override
        repository cost\n#\n#   subscription_manager_pool = <pool>          Specific
        subscription pool to use\n#\n#   http-proxy = <host>                         Proxy
        hostname to be used for registration\n#\n#   http-proxy-port = <port>                    Proxy
        port to be used for registration\n#\n#   http-proxy-user = <user>                    Proxy
        user to be used for registration\n#\n#   http-proxy-password = <password>            Proxy
        password to be used for registration\n#\n#   syspurpose_role                             Sets
        the system purpose role\n#\n#   syspurpose_usage                            Sets
        the system purpose usage\n#\n#   syspurpose_sla                              Sets
        the system purpose SLA\n#\n#   syspurpose_addons                           Sets
        the system purpose add-ons. Separate multiple\n#                                               values
        with commas.\n#\n# Set these parameters if you''re using rhnreg_ks:\n#\n#   spacewalk_host
        = <hostname>                 Hostname of Spacewalk server\n#\n%>\n\n<%\n  #
        Katello or subscription-manager:\n  if host_param_true?(''subscription_manager'')
        || host_param(''kt_activation_keys'')\n    registration_type = ''subscription_manager''\n  #
        Spacewalk:\n  elsif host_param(''spacewalk_host'')\n    registration_type
        = ''spacewalk''\n  end if\n%>\n\n<% if registration_type == ''subscription_manager''
        %>\n  <%\n    atomic = @host.operatingsystem.respond_to?(:atomic) ? @host.operatingsystem.atomic?
        : host_param_true?(''atomic'')\n\n    if host_param(''kt_activation_keys'')\n      subscription_manager_certpkg_url
        = subscription_manager_configuration_url(@host)\n      subscription_manager_atomic_url
        = subscription_manager_configuration_url(@host, false)\n      subscription_manager_org
        = @host.rhsm_organization_label\n      activation_key = host_param(''kt_activation_keys'')\n      redhat_install_agent
        = true\n      redhat_install_host_tools = true\n      redhat_install_host_tracer_tools
        = false\n    else\n      subscription_manager_certpkg_url = host_param(''subscription_manager_certpkg_url'')\n      subscription_manager_atomic_url
        = host_param(''subscription_manager_atomic_url'')\n      subscription_manager_org
        = host_param(''subscription_manager_org'')\n      activation_key = host_param(''activation_key'')\n      redhat_install_agent
        = host_param_true?(''redhat_install_agent'')\n      redhat_install_host_tools
        = host_param_true?(''redhat_install_host_tools'')\n      redhat_install_host_tracer_tools
        = host_param_true?(''redhat_install_host_tracer_tools'')\n    end\n  %>\n\n  echo
        ##############################################################\n  echo #################
        SUBSCRIPTION MANAGER #######################\n  echo ##############################################################\n  echo\n  echo
        \"Starting the subscription-manager registration process\"\n\n  <% if !atomic
        %>\n    if [ -f /usr/bin/dnf ]; then\n      dnf -y install subscription-manager\n    else\n      yum
        -t -y install subscription-manager\n    fi\n  <% end %>\n\n  <%- if (host_param(''syspurpose_role'')
        || host_param(''syspurpose_usage'') || host_param(''syspurpose_sla'') || host_param(''syspurpose_addons''))
        %>\n    <%- if !atomic %>\n      if [ -f /usr/bin/dnf ]; then\n        dnf
        -y install subscription-manager-syspurpose\n      else\n        yum -t -y
        install subscription-manager-syspurpose\n      fi\n    <%- end %>\n\n    if
        [ -f /usr/sbin/syspurpose ]; then\n      <%- if host_param(''syspurpose_role'')
        %>\n        syspurpose set-role \"<%= host_param(''syspurpose_role'') %>\"\n      <%-
        end %>\n      <%- if host_param(''syspurpose_usage'') %>\n        syspurpose
        set-usage \"<%= host_param(''syspurpose_usage'') %>\"\n      <%- end %>\n      <%-
        if host_param(''syspurpose_sla'') %>\n        syspurpose set-sla \"<%= host_param(''syspurpose_sla'')
        %>\"\n      <%- end %>\n      <%- if host_param(''syspurpose_addons'') %>\n        <%-
        addons = host_param(''syspurpose_addons'').split('','')\n              .map
        { |add_on| \"''#{add_on.strip}''\" }.join(\" \") %>\n        syspurpose add-addons
        <%= addons %>\n      <%- end %>\n    else\n      echo \"Syspurpose CLI not
        found.\"\n    fi\n  <% end %>\n\n  <% if host_param(''http-proxy'') %>\n    subscription-manager
        config --server.proxy_hostname=''<%= host_param(\"http-proxy\") %>''\n    <%
        if host_param(''http-proxy-user'') %>\n      subscription-manager config --server.proxy_user=''<%=
        host_param(\"http-proxy-user\") %>''\n    <% end %>\n    <% if host_param(''http-proxy-password'')
        %>\n      subscription-manager config --server.proxy_password=''<%= host_param(\"http-proxy-password\")
        %>''\n    <% end %>\n    <% if host_param(''http-proxy-port'') %>\n      subscription-manager
        config --server.proxy_port=''<%= host_param(\"http-proxy-port\") %>''\n    <%
        end %>\n  <% end %>\n\n  <% if atomic %>\n    curl -s <%= subscription_manager_atomic_url
        %> | IS_ATOMIC=true bash\n  <% elsif subscription_manager_certpkg_url %>\n    rpm
        -Uvh <%= subscription_manager_certpkg_url %>\n  <% end %>\n\n  <% if host_param(''subscription_manager_username'')
        && host_param(''subscription_manager_password'') %>\n    <% if host_param(''subscription_manager_pool'')
        %>\n      subscription-manager register --name=\"<%= @host.name %>\" --username=''<%=
        host_param(\"subscription_manager_username\") %>'' --password=''<%= host_param(\"subscription_manager_password\")
        %>''\n      subscription-manager attach --pool=''<%= host_param(''subscription_manager_pool'')
        %>''\n    <% else %>\n      subscription-manager register --name=\"<%= @host.name
        %>\" --username=''<%= host_param(\"subscription_manager_username\") %>'' --password=''<%=
        host_param(\"subscription_manager_password\") %>'' --auto-attach\n    <% end
        %>\n\n  <% elsif activation_key %>\n    subscription-manager register --name=\"<%=
        @host.name %>\" --org=''<%= subscription_manager_org %>'' --activationkey=''<%=
        activation_key %>''\n  <% else %>\n    echo \"No activation key found: Not
        registering to subscription manager\"\n  <% end %>\n\n  <% if host_param(''subscription_manager_repos'')
        %>\n    # workaround for RHEL 6.4 bug https://bugzilla.redhat.com/show_bug.cgi?id=1008016\n    subscription-manager
        repos --list > /dev/null\n    <%= \"subscription-manager repos --enable #{host_param(''subscription_manager_repos'').gsub('','',
        '' --enable'')}\" %>\n  <% end %>\n\n  <% if host_param(''subscription_manager_override_repos_cost'')
        %>\n    for repo in $(subscription-manager repos --list-enabled | grep \"Repo
        ID:\" | awk -F'' '' ''{ print $3 }''); do\n      <%= \"subscription-manager
        repo-override --list --repo $repo | grep ''cost:'' &>/dev/null || subscription-manager
        repo-override --repo $repo --add=cost:#{host_param(''subscription_manager_override_repos_cost'')}\"
        %>\n    done\n  <% end %>\n\n  <% if !atomic %>\n    <% if redhat_install_agent
        || redhat_install_host_tools || redhat_install_host_tracer_tools %>\n       if
        [ -f /usr/bin/dnf ]; then\n         PACKAGE_MAN=\"dnf -y\"\n       else\n         PACKAGE_MAN=\"yum
        -t -y\"\n       fi\n    <% end %>\n\n    <% if redhat_install_agent %>\n      $PACKAGE_MAN
        install katello-agent\n    <% elsif redhat_install_host_tools %>\n      $PACKAGE_MAN
        install katello-host-tools\n    <% end %>\n\n    <% if redhat_install_host_tracer_tools
        %>\n      $PACKAGE_MAN install katello-host-tools-tracer\n    <% end %>\n  <%
        end %>\n<% end %>\n\n<% if registration_type == ''spacewalk'' %>\n  echo ##############################################################\n  echo
        ################ SPACEWALK REGISTRATION ######################\n  echo ##############################################################\n\n  <%
        if host_param(''activation_key'') %>\n    rhn_activation_key=\"<%= host_param(''activation_key'')
        -%>\"\n    satellite_hostname=\"<%= host_param(''spacewalk_host'') -%>\"\n    rhn_cert_file=\"RHN-ORG-TRUSTED-SSL-CERT\"\n\n    echo
        \"Registering to RHN Satellite at [$satellite_hostname]\"\n    echo \"Using
        Registration Key [$rhn_activation_key]\"\n\n    # Obtain our RHN Satellite
        Certificate\n    echo \"Obtaining RHN SSL certificate\"\n    curl -o /usr/share/rhn/$rhn_cert_file
        -k https://$satellite_hostname/pub/$rhn_cert_file\n\n    <% if @host.operatingsystem.name
        == ''SLES'' -%>\n      # If SLES then add CA Cert to CA Certs for curl\n      cp
        /usr/share/rhn/$rhn_cert_file /etc/ssl/certs/\n      ln -s /etc/ssl/certs/$rhn_cert_file
        /etc/ssl/certs/`openssl x509 -hash -noout -in /etc/ssl/certs/$rhn_cert_file`.0\n    <%
        end -%>\n\n    # Update our up2date configuration file\n    echo \"Updating
        SSL CA Certificate to /usr/share/rhn/$rhn_cert_file\"\n    sed -i -e \"s|^sslCACert=.*$|sslCACert=/usr/share/rhn/$rhn_cert_file|\"
        /etc/sysconfig/rhn/up2date\n\n    # Update our Satellite Hostname\n    echo
        \"Updating Satellite Hostname to [$satellite_hostname]\"\n    sed -i -e \"s|^serverURL=.*$|serverURL=https://$satellite_hostname/XMLRPC|\"
        /etc/sysconfig/rhn/up2date\n    sed -i -e \"s|^noSSLServerURL=.*$|noSSLServerURL=https://$satellite_hostname/XMLRPC|\"
        /etc/sysconfig/rhn/up2date\n\n    # Restart messagebus/HAL to try and prevent
        hardware detection errors in rhnreg_ks\n    echo \"Restarting services...\"\n    <%
        if @host.operatingsystem.name == ''SLES'' && @host.operatingsystem.major.to_i
        < 12 -%>\n      service haldaemon restart\n    <% else -%>\n      service
        messagebus restart\n      service hald restart\n    <% end -%>\n\n    # Now,
        perform our registration\n    #  (might get hardware errors here, due to dbus/messagebus
        lameness. These are safe to ignore.)\n    echo -n \"Performing RHN Registration...
        \"\n    rhnreg_ks --activationkey=$rhn_activation_key\n    echo \"done.\"\n\n    #
        Check we registered\n    echo -n \"Checking System Registration... \"\n    if
        ! rhn_check; then\n        echo \"FAILED\"\n        echo \" >> RHN Registration
        FAILED. Please Investigate. <<\"\n    else\n        echo \"registration successful.\"\n    fi\n\n    <%
        if host_param_true?(''redhat_install_agent'') %>\n    if [ -f /usr/bin/dnf
        ]; then\n      dnf -y install osad\n    else\n      yum -t -y install osad\n    fi\n    <%
        end %>\n  <% else %>\n    echo \"No activation key found: Not registering\"\n  <%
        end %>\n<% end %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":87,"name":"redhat_register","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"799ab658f65c52af4a10f5a9be7e44a3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [483d5fc2-88f0-472e-aad9-218982cdd430]
      x-runtime: ['0.020255']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/88
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: remote_execution_ssh_keys\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n# SSH keys setup snippet for Remote
        Execution plugin\n#\n# Parameters:\n#\n# remote_execution_ssh_keys: public
        keys to be put in ~/.ssh/authorized_keys\n#\n# remote_execution_ssh_user:
        user for which remote_execution_ssh_keys will be\n#                            authorized\n#\n#
        remote_execution_create_user: create user if it not already existing\n#\n#
        remote_execution_effective_user_method: method to switch from ssh user to\n#                                         effective
        user\n#\n# This template sets up SSH keys in any host so that as long as your
        public\n# SSH key is in remote_execution_ssh_keys, you can SSH into a host.
        This \n# works in combination with Remote Execution plugin by querying smart
        proxies\n# to build an array.\n#\n# To use this snippet without the plugin
        provide the SSH keys as host parameter\n# remote_execution_ssh_keys. It expects
        the same format like the authorized_keys\n# file.\n\n\n<% if !host_param(''remote_execution_ssh_keys'').blank?
        %>\n<% ssh_user = host_param(''remote_execution_ssh_user'') || ''root'' %>\n\nuser_exists=false\ngetent
        passwd <%= ssh_user %> >/dev/null 2>&1 && user_exists=true\n\n<% if ssh_user
        != ''root'' && host_param_true?(''remote_execution_create_user'') -%>\nif
        ! $user_exists; then\n  useradd -m <%= ssh_user %> && user_exists=true\nfi\n<%
        end -%>\n\nif $user_exists; then\n<% ssh_path = \"~#{ssh_user}/.ssh\" %>\n\n  mkdir
        -p <%= ssh_path %>\n\n  cat << EOF >> <%= ssh_path %>/authorized_keys\n<%=
        host_param(''remote_execution_ssh_keys'').is_a?(String) ? host_param(''remote_execution_ssh_keys'')
        : host_param(''remote_execution_ssh_keys'').join(\"\\n\") %>\nEOF\n\n  chmod
        0700 <%= ssh_path %>\n  chmod 0600 <%= ssh_path %>/authorized_keys\n  chown
        -R <%= \"#{ssh_user}:\" %> <%= ssh_path %>\n\n  # Restore SELinux context
        with restorecon, if it''s available:\n  command -v restorecon && restorecon
        -RvF <%= ssh_path %> || true\n  \n<% if ssh_user != ''root'' && host_param(''remote_execution_effective_user_method'')
        == ''sudo'' -%>\n<% if @host.operatingsystem.family == ''Redhat'' || @host.operatingsystem.family
        == ''Debian'' -%>\necho \"<%= ssh_user %> ALL = (root) NOPASSWD : ALL\nDefaults:<%=
        ssh_user %> !requiretty\" > /etc/sudoers.d/<%= ssh_user %>\n<% elsif @host.operatingsystem.family
        == ''Suse'' -%>\necho \"<%= ssh_user %> ALL = (root) NOPASSWD : ALL\nDefaults:<%=
        ssh_user %> !targetpw\" >> /etc/sudoers\n<% end -%>\n<% end -%>\nelse\n  echo
        ''The remote_execution_ssh_user does not exist and remote_execution_create_user
        is not set to true.  remote_execution_ssh_keys snippet will not install keys''\nfi\n<%
        end %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":88,"name":"remote_execution_ssh_keys","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"c0fa15bce7288b6a57ace48d269d44ba"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [126d6b1b-05ed-4783-97c2-5c12ef99dfda]
      x-runtime: ['0.020127']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/89
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: saltstack_minion\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\nmaster: <%= host_param(''salt_master'')
        %>\nlog_level: warning\n\n<%#\n# Grains (http://docs.saltstack.com/en/latest/topics/targeting/grains.html#grains-in-the-minion-config)\n#\n#
        Possible parameters are:\n#\n# * {''cluster'': ''alpha''}\n# * {''roles'':
        [''webserver'', ''frontend'']}\n#\n%>\ngrains: <%= host_param(''salt_grains'')
        ? host_param(''salt_grains'') : ''{}'' %>\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":89,"name":"saltstack_minion","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"e83e0c00a593cce644a901f99d58311a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ce8503b5-70c1-4100-bf96-6fc978a12927]
      x-runtime: ['0.019921']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/90
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: saltstack_setup\nmodel:
        ProvisioningTemplate\ndescription: this snippet will configure the Saltstack
        Minion\nsnippet: true\n%>\n<%\netc_path = (@host.operatingsystem.family ==
        ''Freebsd'') ? ''/usr/local/etc/salt'' : ''/etc/salt''\nbin_path = (@host.operatingsystem.family
        == ''Freebsd'') ? ''/usr/local/bin'' : ''/usr/bin''\n%>\n\n<% if @host.operatingsystem.family
        == ''Debian'' -%>\napt-get update\napt-get install -y salt-minion\n<% elsif
        @host.operatingsystem.family == ''Freebsd'' -%>\npkg install -y py27-salt\n<%
        elsif @host.operatingsystem.family == ''Redhat'' -%>\nyum -t -y install salt-minion\n<%
        end -%>\n\ncat > <%= etc_path %>/minion << EOF\n<%= snippet ''saltstack_minion''
        %>\nEOF\n\n<% if @host.operatingsystem.family == ''Freebsd'' -%>\necho ''salt_minion_enable=\"YES\"''
        >>/etc/rc.conf\necho ''salt_minion_paths=\"/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin\"''
        >>/etc/rc.conf\n<% elsif @host.operatingsystem.family == ''Redhat'' -%>\n/sbin/chkconfig
        --level 345 salt-minion on\n<% elsif @host.operatingsystem.family == ''Suse''
        -%>\n/sbin/chkconfig salt-minion on -f\n<% end -%>\n\n<%= bin_path %>/salt-call
        --no-color --grains >/dev/null\n","locked":true,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":90,"name":"saltstack_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"e2ced434e6e90ee6fe7824ccad22120a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [bf99fe2f-2a1e-4707-b090-759dc07a73ad]
      x-runtime: ['0.019859']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/94
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: UserData
        default\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n- Debian\n-
        Ubuntu\n-%>\n<%#\nThis template accepts the following parameters:\n- ssh_pwauth:
        boolean (default=true unless ssh_authorized_keys)\n- ssh_authorized_keys:
        string w newline seperated keys (default=\"\")\n- package_upgrade: boolean
        (default=false)\n- reboot: boolean (default=false)\n-%>\n<%\n  ssh_pwauth
        = host_param(''ssh_pwauth'') ? host_param_true?(''ssh_pwauth'') : !host_param(''ssh_authorized_keys'')\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' && @host.operatingsystem.name
        != ''Fedora''\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n-%>\n#cloud-config\nhostname: <%= @host.shortname %>\nfqdn:
        <%= @host %>\nmanage_etc_hosts: true\n<% if ssh_pwauth -%>\n<%# Don''t enable
        this in production. It is very insecure! Use ssh_authorized_keys instead...\n    http://cloudinit.readthedocs.io/en/latest/topics/examples.html#including-users-and-groups
        -%>\nssh_pwauth: true\ngroups:\n- admin\nusers:\n- default\n- name: admin\n  primary-group:
        admin\n  groups: users\n  shell: /bin/bash\n  sudo: [''ALL=(ALL) ALL'']\n  lock-passwd:
        false\n  passwd: <%= @host.root_pass %>\n<% end -%>\n<% if host_param(''ssh_authorized_keys'')
        -%>\nssh_authorized_keys:\n<% host_param(''ssh_authorized_keys'').split(\"\\n\").each
        do |ssh_key| -%>\n- <%= ssh_key %>\n<% end -%>\n<% end -%>\n\n<% if host_param_true?(''package_upgrade'')
        -%>\npackage_upgrade: true\n<% end -%>\n\nruncmd:\n<% if rhel_compatible -%>\n-
        |\n<%= indent(2) { snippet(''epel'') } %>\n<% end -%>\n- |\n<%= indent(2)
        { snippet(''remote_execution_ssh_keys'') } %>\n<% if chef_enabled -%>\n- |\n<%=
        indent(2) { snippet(''chef_client'') } %>\n<% end -%>\n<% if puppet_enabled
        -%>\n- |\n<%= indent(2) { snippet(''puppetlabs_repo'') } %>\n- |\n<%= indent(2)
        { snippet(''puppet_setup'') } %>\n<% end -%>\n<% if salt_enabled -%>\n- |\n<%=
        indent(2) { snippet(''saltstack_setup'') } %>\n<% end -%>\n\n<%# Contact Foreman
        to confirm instance is built -%>\nphone_home:\n  url: <%= foreman_url(''built'')
        %>\n  post: []\n  tries: 10\n\n<% if host_param_true?(''reboot'') -%>\npower_state:\n  mode:
        reboot\n  timeout: 30\n  condition: true\n<% end -%>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-15 16:12:15 UTC","id":94,"name":"UserData
        default","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"d3e3d53e944994dc8e4601d86cb1e5a7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d33adae8-30c2-417c-9eb8-df3b7c6cf183]
      x-runtime: ['0.020815']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/23
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: WAIK
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- Windows\n%>\nDEFAULT
        winPE\n\nLABEL winPE\n    KERNEL /Boot/startrom.0\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":23,"name":"WAIK
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"c302380a17662c6e0873162536aa5010"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0e748d5c-521a-402c-8f86-55591c3464f0]
      x-runtime: ['0.020294']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/51
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: XenServer
        default answerfile\nmodel: ProvisioningTemplate\noses:\n- XenServer\n-%>\n<%\n  subnet
        = @host.subnet\n  dhcp = subnet.dhcp_boot_mode?\n  interface_name = @host.primary_interface.identifier.blank?
        ? ''eth0'' : @host.primary_interface.identifier\n-%>\n<?xml version=\"1.0\"?>\n<installation
        mode=\"fresh\" srtype=\"lvm\">\n<%= @host.diskLayout -%>\n  <keymap><%= host_param(''keyboard'')
        || ''us'' %></keymap>\n  <hostname><%= @host.shortname %></hostname>\n  <root-password
        type=\"hash\"><%= root_pass %></root-password>\n  <source type=\"url\"><%=
        @mediapath %></source>\n  <admin-interface name=\"<%= interface_name %>\"
        proto=\"<%= dhcp ? ''dhcp'' : ''static'' %>\">\n<% unless dhcp -%>\n    <ip><%=
        @host.ip %></ip>\n    <subnet-mask><%= subnet.mask %></subnet-mask>\n<% if
        subnet.gateway.present? -%>\n    <gateway><%= subnet.gateway %></gateway>\n<%
        end -%>\n<% end -%>\n  </admin-interface>\n<% if subnet.dns_primary.present?
        -%>\n  <name-server><%= subnet.dns_primary %></name-server>\n<% end -%>\n<%
        if subnet.dns_secondary.present? -%>\n  <name-server><%= subnet.dns_secondary
        %></name-server>\n<% end -%>\n  <ntp-server><%= host_param(''ntp-server'')
        || ''pool.ntp.org'' %></ntp-server>\n  <timezone><%= host_param(''time-zone'')
        || ''UTC'' %></timezone>\n  <time-config-method>ntp</time-config-method>\n  <script
        stage=\"installation-complete\" type=\"url\">\n    <%= foreman_url(''finish'')
        %>\n  </script>\n</installation>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":51,"name":"XenServer
        default answerfile","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"d273a12f1325af45353b06d8d7fe673b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [00065d28-6bc4-4513-8f6d-234f7175a23c]
      x-runtime: ['0.020847']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/32
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: XenServer
        default finish\nmodel: ProvisioningTemplate\noses:\n- XenServer\n-%>\n#!/bin/bash\n<%=
        snippet ''built'' %>\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-15 16:12:14 UTC","id":32,"name":"XenServer
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"8aa6f3e6c788a7ab31aa3ff6fa8beede"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [61fdc4f9-4df5-4c0b-8990-f41b106d0284]
      x-runtime: ['0.020611']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates/24
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: XenServer
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- XenServer\n%>\ndefault
        xenserver\nlabel xenserver\nkernel mboot.c32\nappend <%= @xen %> dom0_max_vcpus=1-2
        dom0_mem=752M,max:752M com1=115200,8n1 console=com1,vga --- <%= @kernel -%>
        xencons=hvc console=hvc0 console=tty0 answerfile=<%= foreman_url(''provision'')%>
        install --- <%= @initrd %>\nIPAPPEND 2\n","locked":true,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-15 16:12:13 UTC","id":24,"name":"XenServer
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"424ac2667d0e308a072b5afcece0d3c7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b194c12f-8a85-4772-9ad0-61e5d6a4eed9]
      x-runtime: ['0.020311']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: GET
    uri: https://centos7-foreman-1-22/api/locations?per_page=4294967296&search=title%3D%22Test+Location%22&thin=True
  response:
    body: {string: !!python/unicode "{\n  \"total\": 2,\n  \"subtotal\": 1,\n  \"page\":
        1,\n  \"per_page\": 4294967296,\n  \"search\": \"title=\\\"Test Location\\\"\",\n
        \ \"sort\": {\n    \"by\": null,\n    \"order\": null\n  },\n  \"results\":
        [{\"ancestry\":null,\"parent_id\":null,\"parent_name\":null,\"created_at\":\"2019-07-18
        15:20:05 UTC\",\"updated_at\":\"2019-07-18 15:20:05 UTC\",\"id\":11,\"name\":\"Test
        Location\",\"title\":\"Test Location\",\"description\":null}]\n}\n"}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"badf8cdae6c89c168621a258d0d0ca87"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [1266d91a-c539-4889-9de6-d2d89115dc11]
      x-runtime: ['0.012668']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [_session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/39
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Alterator
        default\nmodel: ProvisioningTemplate\noses:\n- ALTLinux p6\n- ALTLinux p7\n-%>\n<%
        if @metadata.to_s == ''/vm-profile.scm'' -%>\n<%= @host.diskLayout %>\n<%
        elsif @metadata.to_s == ''/pkg-groups.tar'' -%>\n<%= snippet ''alterator_pkglist''
        %>\n<% else -%>\n(\"/sysconfig-base/language\" action \"write\" lang (\"<%=
        host_param(''lang'') || ''en_US'' %>\"))\n(\"/sysconfig-base/kbd\" action
        \"write\" layout \"ctrl_shift_toggle\")\n(\"/datetime-installer\" action \"write\"
        commit #t name \"RU\" zone \"Europe/Moscow\" utc #t)\n(\"/evms/control\" action
        \"write\" control open installer #t)\n(\"/evms/control\" action \"write\"
        control update)\n(\"/evms/profiles/server\" action apply commit #f clearall
        #t exclude ())\n(\"/evms/control\" action \"write\" control commit)\n(\"/evms/control\"
        action \"write\" control close)\n(\"/pkg-init\" action \"write\")\n(\"/pkg-install\"
        action \"write\" lists \"<%= host_param(''pkg_list'') || '''' %>\" auto #t)\n(\"/preinstall\"
        action \"write\")\n(\"/grub\" action \"write\" language (\"<%= host_param(''lang'')
        || ''en_US'' %>\") device \"<%= host_param(''device'') || ''/dev/sda'' %>\")\n(\"/net-eth\"
        action \"write\" reset #t)\n(\"/net-eth\" action \"write\" name \"eth0\" configuration
        \"static\" default \"<%= @host.subnet.gateway %>\" search \"<%= @host.domain
        %>\" dns \"<%= @host.subnet.dns_primary %> <%= @host.subnet.dns_secondary
        %>\" computer_name \"<%= @host.name %>\")\n(\"/net-eth\" action \"add_iface_address\"
        name \"eth0\" addip \"<%= @host.ip %>\" addmask \"<%= @host.subnet.mask %>\")\n(\"/net-eth\"
        action \"write\" commit #t)\n(\"/root/change_password\" language (<%= host_param(''lang'')
        || ''en_US'' %>\") passwd_2 \"123\" passwd_1 \"123\")\n(\"/postinstall/firsttime\"
        action \"write\" method \"url\" url \"<%= foreman_url(''finish'') %>\")\n<%
        end %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:08 UTC","id":39,"name":"Alterator
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:08 GMT']
      etag: [W/"5376cebe849fd592ac6f465dbe7ddaa5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      set-cookie: [request_method=PUT; path=/; secure; HttpOnly; SameSite=Lax]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d9af832a-0973-4acc-a610-70074be6546c]
      x-runtime: ['0.052020']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/26
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Alterator
        default finish\nmodel: ProvisioningTemplate\noses:\n- ALTLinux p6\n- ALTLinux
        p7\n-%>\n#!/bin/sh\n\n<%= snippet ''fix_hosts'' %>\n\napt-get update >/dev/null
        2>/dev/null\napt-get -y install puppet >/dev/null 2>/dev/null\n\n\ncat > /etc/puppet/puppet.conf
        << EOF\n<%= snippet ''puppet.conf'' -%>\nEOF\n\n/usr/bin/puppet agent --config
        /etc/puppet/puppet.conf -o --tags no_such_tag --server <%= @host.puppetmaster
        %> --no-daemonize\n<%= snippet ''built'' %>\n/sbin/chkconfig puppetd on\n\nexit
        0\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":26,"name":"Alterator
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"1a849220c9c668bc91723df92c8a6f78"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f97ef1b5-2713-48cb-949e-823175c2a9ab]
      x-runtime: ['0.048809']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/10
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Alterator
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- ALTLinux p6\n- ALTLinux
        p7\n-%>\n<%#\n  This template will not function with Safemode set to true.\n    Please
        disable it in Settings > Provisioning\n%>\n<%\n    metadata    = @host.token.nil?
        ? ''?metadata='' : ''&metadata=''\n    os          = @host.operatingsystem\n    mediumpath  =
        os.mediumpath(medium_provider)\n-%>\nDEFAULT linux\n\nLABEL linux\n    KERNEL
        <%= @kernel %>\n    APPEND initrd=<%= @initrd %> stagename=altunat showopts
        ramdisk_size=150000 automatic=<%= mediumpath %>,directory:/altlinux/p<%= @host.operatingsystem.major
        %>/<%= @host.architecture %> ai curl=<%= foreman_url(''provision'')%><%= metadata
        %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":10,"name":"Alterator
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      connection: [close]
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"04c21abccf6d183d44a32774b7e0bf82"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [89178bf1-f0e5-4060-8d9a-7c4d5e2fa4af]
      x-runtime: ['0.047084']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/53
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: alterator_pkglist\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%# \n  This template will not function
        with Safemode set to true. \n%>\n<%= Net::HTTP.get(URI.parse(\"#{@mediapath}/Metadata/pkg-groups.tar\"))
        %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":53,"name":"alterator_pkglist","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"b1e6d5e11d8971a17c2268e41d8e7d9a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [eb4a8034-1b6e-4c9e-96bb-dbe768342c75]
      x-runtime: ['0.054700']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/54
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: ansible_provisioning_callback\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<% if host_param_true?(''ansible_tower_provisioning'')
        -%>\n<%\n  rhel_compatible = @host.operatingsystem.family == ''Redhat'' &&
        @host.operatingsystem.name != ''Fedora''\n  os_major = @host.operatingsystem.major.to_i\n  has_systemd
        = (@host.operatingsystem.name == ''Fedora'' && os_major >= 20) || (rhel_compatible
        && os_major >= 7)\n-%>\n<% if has_systemd -%>\n<%= save_to_file(''/etc/systemd/system/ansible-callback.service'',\n                 snippet(''ansible_tower_callback_service''))
        %>\n# Runs during first boot, removes itself\nsystemctl enable ansible-callback\n<%
        else -%>\n# Assume systemd is not available\n<%= save_to_file(''/root/ansible_provisioning_call.sh'',
        snippet(''ansible_tower_callback_script'')) %>\n(chmod +x /root/ansible_provisioning_call.sh;
        crontab -u root -l 2>/dev/null; echo \"@reboot /root/ansible_provisioning_call.sh\"
        ) | crontab -u root -\n<% end -%>\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":54,"name":"ansible_provisioning_callback","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"6b8ef753295127da867f3f8b89e500cf"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b238064e-45f8-40a1-b663-289584ebebdf]
      x-runtime: ['0.054046']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/55
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: ansible_tower_callback_script\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n#!/bin/sh\n\necho \"Calling Ansible
        AWX/Tower provisioning callback...\"\n/usr/bin/curl -v -k -s --data \"host_config_key=<%=
        host_param(''ansible_host_config_key'') %>\" https://<%= host_param(''ansible_tower_fqdn'')
        %>/api/v2/job_templates/<%= host_param(''ansible_job_template_id'') %>/callback/\necho
        \"DONE\"\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":55,"name":"ansible_tower_callback_script","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"6cb4b1e886cf5a8ddaa5b6b842dfa1b1"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b2841db6-45e3-4029-a69a-698933406f59]
      x-runtime: ['0.050448']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/56
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: ansible_tower_callback_service\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n[Unit]\nDescription=Provisioning
        callback to Ansible Tower\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/curl
        -k -s --data \"host_config_key=<%= host_param(''ansible_host_config_key'')
        -%>\" https://<%= host_param(''ansible_tower_fqdn'') -%>/api/v2/job_templates/<%=
        host_param(''ansible_job_template_id'') -%>/callback/\nExecStartPost=/usr/bin/systemctl
        disable ansible-callback\n\n[Install]\nWantedBy=multi-user.target\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":56,"name":"ansible_tower_callback_service","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"284c14bedb2bd5f23366dd98e549579b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [414fba02-a6c3-45ca-a103-0c473d565591]
      x-runtime: ['0.056425']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11]}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['49']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/118
  response:
    body: {string: !!python/unicode '{"template":"<%#\n    name: Finish timetravel\n    kind:
        finish\n%>\ncd /\nrm -rf *\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-18
        15:21:04 UTC","updated_at":"2019-07-18 15:21:04 UTC","id":118,"name":"A second
        provisioning template","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"6e28b98439c6fcb21bc51320c9b8cc4c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ab29bfb7-77da-48ac-9b74-dee26c4a5a58]
      x-runtime: ['0.047844']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/40
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Atomic
        Kickstart default\nmodel: ProvisioningTemplate\n%>\n\nlang <%= host_param(''lang'')
        || ''en_US.UTF-8'' %>\nkeyboard <%= host_param(''keyboard'') || ''us'' %>\ntimezone
        --utc <%= host_param(''time-zone'') || ''UTC'' %>\n\n<% subnet = @host.subnet
        -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?) -%>\n<% dhcp = subnet.dhcp_boot_mode?
        && !@static -%>\n<% else -%>\n<% dhcp = !@static -%>\n<% end -%>\n\nnetwork
        --bootproto <%= dhcp ? ''dhcp'' : \"static --ip=#{@host.ip} --netmask=#{subnet.mask}
        --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary, subnet.dns_secondary].select{
        |item| item.present? }.join('','')} --mtu=#{subnet.mtu.to_s}\" %> --hostname
        <%= @host %><%= \" --device=#{@host.mac}\" -%>\n\n# Partition table should
        create /boot and a volume atomicos\n<% if @dynamic -%>\n%include /tmp/diskpart.cfg\n<%
        else -%>\n<%= @host.diskLayout %>\n<% end -%>\n\nbootloader --timeout=3\ntext\n\n<%
        if @host.os.name.match /.*fedora.*/i -%>\n# Use medium_uri/content/repo/ as
        the URL if you\n# have set up a local installation media for Fedora\n<% fedora_atomic_url
        = host_param(''atomic_refs_url'') || \"https://dl.fedoraproject.org/pub/fedora/linux/atomic/#{@host.os.major}/\"
        %>\nostreesetup --nogpg --osname=fedora-atomic --remote=fedora-atomic-ostree
        --url=<%= fedora_atomic_url %> --ref=fedora-atomic/f<%= @host.os.major %>/<%=
        @host.architecture %>/docker-host\n<% elsif @host.os.name.match /.*centos.*/i
        -%>\nostreesetup --nogpg --osname=centos-atomic-host --remote=centos-atomic-host-ostree
        --url=<%= host_param_true?(''atomic-upstream'') ? \"http://mirror.centos.org/centos/#{@host.os.major}/atomic/#{@host.architecture}/repo/\"
        : medium_uri %> --ref=centos-atomic-host/<%= @host.os.major %>/<%= @host.architecture
        %>/standard\n<% else -%>\nostreesetup --nogpg --osname=rhel-atomic-host --remote=rhel-atomic-host-ostree
        --url=file:///install/ostree --ref=rhel-atomic-host/<%= @host.os.major %>/<%=
        @host.architecture %>/standard\n<% end -%>\nservices --disabled cloud-init,cloud-config,cloud-final,cloud-init-local\nrootpw
        --iscrypted <%= root_pass %>\n\nreboot\n\n%post\n<%= snippet ''redhat_register''
        %>\nrm -f /etc/ostree/remotes.d/*.conf\n<%= snippet(''remote_execution_ssh_keys'')
        %>\n<%= snippet ''efibootmgr_netboot'' %>\n(\n# Report success back to Foreman\n<%=
        snippet ''built'' %>\n) 2>&1 | tee /mnt/sysimage/root/install.post.log\n\nexit
        0\n\n%end\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":40,"name":"Atomic
        Kickstart default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"cdca70bac06fc5370481d6278c1d2eb4"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0892bc7f-3c28-41a6-a6f3-70044dd16156]
      x-runtime: ['0.049035']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/41
  response:
    body: {string: !!python/unicode '{"template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<%#\nkind:
        provision\nname: AutoYaST default\nmodel: ProvisioningTemplate\noses:\n- OpenSUSE\n-%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  os_major = @host.operatingsystem.major.to_i\n  primary_interface_identifier
        = @host.primary_interface.identifier.blank? ? ''eth0'' : @host.primary_interface.identifier\n  primary_interface_subnet
        = @host.primary_interface.subnet\n-%>\n<!DOCTYPE profile>\n<profile xmlns=\"http://www.suse.com/1.0/yast2ns\"
        xmlns:config=\"http://www.suse.com/1.0/configns\">\n  <general>\n    <mode>\n      <confirm
        config:type=\"boolean\">false</confirm>\n      <final_reboot config:type=\"boolean\">true</final_reboot>\n    </mode>\n  </general>\n  <networking>\n    <dns>\n      <hostname><%=
        @host.name %></hostname>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n      <dhcp_hostname config:type=\"boolean\">false</dhcp_hostname>\n      <dhcp_resolv
        config:type=\"boolean\">false</dhcp_resolv>\n<% if @host.domain -%>\n      <domain><%=
        @host.domain -%></domain>\n<% end -%>\n<% if primary_interface_subnet.dns_primary.present?
        -%>\n      <nameservers config:type=\"list\">\n        <nameserver><%= primary_interface_subnet.dns_primary
        -%></nameserver>\n<% if primary_interface_subnet.dns_secondary.present? -%>\n        <nameserver><%=
        primary_interface_subnet.dns_secondary -%></nameserver>\n<% end -%>\n      </nameservers>\n<%
        end -%>\n<% else -%>\n      <resolv_conf_policy>auto</resolv_conf_policy>\n<%
        end -%>\n<% if @host.domain -%>\n      <searchlist config:type=\"list\">\n        <search><%=
        @host.domain %></search>\n      </searchlist>\n<% end -%>\n    </dns>\n    <interfaces
        config:type=\"list\">\n<%\n  @host.managed_interfaces.each do |interface|\n    next
        if !interface.managed? || interface.subnet.nil? || interface.ip.nil?\n    dhcp
        = interface.subnet.dhcp_boot_mode?\n-%>\n<% if dhcp -%>\n      <interface>\n        <bootproto>dhcp</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <startmode>auto</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        else -%>\n      <interface>\n        <bootproto>static</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <ipaddr><%=
        interface.ip -%></ipaddr>\n        <netmask><%= interface.subnet.mask -%></netmask>\n        <startmode>onboot</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        end -%>\n<% end -%>\n    </interfaces>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n    <routing>\n      <routes config:type=\"list\">\n        <route>\n          <destination>default</destination>\n          <device><%=
        primary_interface_identifier -%></device>\n          <gateway><%= primary_interface_subnet.gateway
        -%></gateway>\n          <netmask><%= primary_interface_subnet.mask -%></netmask>\n        </route>\n      </routes>\n    </routing>\n<%
        end -%>\n  </networking>\n  <%# NTP client configuration has incompatible
        changes in Leap 15 -%>\n  <% if os_major <= 12 || os_major == 42 -%>\n  <ntp-client>\n    <configure_dhcp
        config:type=\"boolean\">false</configure_dhcp>\n    <peers config:type=\"list\">\n      <peer>\n        <address><%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %></address>\n        <initial_sync
        config:type=\"boolean\">true</initial_sync>\n        <options></options>\n        <type>server</type>\n      </peer>\n    </peers>\n    <start_at_boot
        config:type=\"boolean\">true</start_at_boot>\n    <start_in_chroot config:type=\"boolean\">true</start_in_chroot>\n  </ntp-client>\n<%
        else -%>\n  <ntp-client>\n   <ntp_policy>auto</ntp_policy>\n   <ntp_servers
        config:type=\"list\">\n    <ntp_server>\n     <iburst config:type=\"boolean\">false</iburst>\n     <address><%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %></address>\n     <offline
        config:type=\"boolean\">true</offline>\n    </ntp_server>\n   </ntp_servers>\n   <ntp_sync>systemd</ntp_sync>\n   </ntp-client>\n<%
        end -%>\n<% if ! @dynamic -%>\n  <%= @host.diskLayout %>\n<% end -%>\n  <runlevel>\n    <default>3</default>\n    <services
        config:type=\"list\">\n      <service>\n        <service_name>sshd</service_name>\n        <service_status>enable</service_status>\n      </service>\n    </services>\n  </runlevel>\n  <software>\n    <base>default</base>\n    <patterns
        config:type=\"list\">\n      <pattern>base</pattern>\n      <pattern>enhanced_base</pattern>\n      <pattern>sw_management</pattern>\n      <pattern>yast2_basis</pattern>\n    </patterns>\n    <packages
        config:type=\"list\">\n      <package>lsb-release</package>\n<% if puppet_enabled
        -%>\n      <package>rubygem-puppet</package>\n<% end -%>\n<% if salt_enabled
        -%>\n      <package>salt-minion</package>\n<% end -%>\n    </packages>\n  </software>\n  <users
        config:type=\"list\">\n    <user>\n      <username>root</username>\n      <encrypted
        config:type=\"boolean\">true</encrypted>\n      <fullname>root</fullname>\n      <gid>0</gid>\n      <home>/root</home>\n      <shell>/bin/bash</shell>\n      <uid>0</uid>\n      <user_password><%=
        root_pass %></user_password>\n    </user>\n  </users>\n  <scripts>\n<% if
        @dynamic -%>\n    <pre-scripts config:type=\"list\">\n      <script>\n        <debug
        config:type=\"boolean\">true</debug>\n        <filename>pre_disklayout</filename>\n        <interpreter>shell</interpreter>\n        <source><![CDATA[\n<%=
        @host.diskLayout %>\n]]>\n        </source>\n      </script>\n    </pre-scripts>\n<%
        end -%>\n    <chroot-scripts config:type=\"list\">\n      <script>\n        <filename>cp-resolv.sh</filename>\n        <chrooted
        config:type=\"boolean\">false</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Copying
        resolv.conf into chroot ...</notification>\n        <source><![CDATA[\ncp
        /etc/resolv.conf /mnt/etc\n]]>\n        </source>\n      </script>\n      <script>\n        <filename>foreman.sh</filename>\n        <chrooted
        config:type=\"boolean\">true</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Setting
        up Puppet / Foreman ...</notification>\n        <source><![CDATA[\n/bin/hostname
        <%= @host.name %>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%=
        snippet \"blacklist_kernel_modules\" %>\n\n<% if puppet_enabled -%>\n<%= snippet
        ''puppet_setup'' %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup''
        %>\n<% end -%>\n\n<%= snippet ''built'' %>\n\nrm /etc/resolv.conf\n]]>\n        </source>\n      </script>\n    </chroot-scripts>\n  </scripts>\n  <keyboard>\n    <keymap>english-us</keymap>\n  </keyboard>\n  <timezone>\n    <hwclock>UTC</hwclock>\n    <timezone><%=
        host_param(''time-zone'') || ''Etc/UTC'' %></timezone>\n  </timezone>\n</profile>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":41,"name":"AutoYaST
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"a8342bb6cfc35f52ff50c38acd8a23ed"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d6411f4d-0303-4bc3-8c9e-c5e118fcfb5a]
      x-runtime: ['0.048534']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/33
  response:
    body: {string: !!python/unicode '{"template":"#!gpxe\n<%#\nkind: iPXE\nname: AutoYaST
        default iPXE\nmodel: ProvisioningTemplate\noses:\n- SLES\n- OpenSUSE\n%>\n\n<%
        boot_files_uris = @host.operatingsystem.boot_files_uri(medium_provider) -%>\n<%
        kernel = boot_files_uris[0] -%>\n<% initrd = boot_files_uris[1] -%>\n\nkernel
        <%= kernel %> initrd=initrd.img splash=silent install=<%= medium_uri %> autoyast=<%=
        foreman_url(''provision'') %> text-mode=1 useDHCP=1\ninitrd <%= initrd %>\nboot\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":33,"name":"AutoYaST
        default iPXE","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"3bd408abc1da5355a0b077cc7e040f62"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [13e86445-4854-4252-98cb-8a2b02a4f0e1]
      x-runtime: ['0.048139']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/11
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: AutoYaST
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- SLES\n- OpenSUSE\n%>\n<%
        http_proxy_string = host_param(''http-proxy'') ? \"proxy=http://\" + host_param(''http-proxy'')
        + \":\" + host_param(''http-proxy-port'') : '''' -%>\n\nDEFAULT linux\n\nLABEL
        linux\n    KERNEL <%= @kernel %>\n    APPEND initrd=<%= @initrd %> ramdisk_size=65536
        install=<%= @mediapath %> autoyast=<%= foreman_url(''provision'') %> textmode=1
        <%= http_proxy_string -%>\n\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":11,"name":"AutoYaST
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"e34319f203724552eb589a6d6fdfe38f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [adabe71c-9e74-4f5d-a70f-004045283c1a]
      x-runtime: ['0.047257']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/91
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: AutoYaST
        default user data\nmodel: ProvisioningTemplate\noses:\n- OpenSUSE\n- SLES\n-%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n-%>\n#!/bin/bash\n\n<%# Cloud
        instances frequently have incorrect hosts data %>\n<%= snippet ''fix_hosts''
        %>\n\n<% if @host.provision_method == ''image'' && !root_pass.empty? -%>\n#
        Install the root password\necho ''root:<%= root_pass -%>'' | /usr/sbin/chpasswd
        -e\n<% end -%>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet
        \"blacklist_kernel_modules\" %>\n\n<% if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n# UserData still needs to mark the build as finished\n<%= snippet
        ''built'' %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":91,"name":"AutoYaST
        default user data","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"b240fb2fec37f1daa2a36173c3f077d9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [96b312f0-0191-470e-a35a-54738be80df9]
      x-runtime: ['0.048007']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/42
  response:
    body: {string: !!python/unicode '{"template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<%#\nkind:
        provision\nname: AutoYaST SLES default\nmodel: ProvisioningTemplate\noses:\n-
        SLES\n-%>\n<%\n  os_major = @host.operatingsystem.major.to_i\n  os_minor =
        @host.operatingsystem.minor.to_i\n  # safemode renderer does not support unary
        negation\n  pm_set = @host.puppetmaster.empty? ? false : true\n  aio_enabled
        = host_param_true?(''enable-puppetlabs-puppet5-repo'') || host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppet4'') || host_param_true?(''enable-puppet5'')\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n  sles_minor_string = (os_minor == 0) ? '''' : \"_SP#{os_minor}\"\n  spacewalk_enabled
        = host_param(''spacewalk_host'') ? true : false\n\n  primary_interface_identifier
        = @host.primary_interface.identifier.blank? ? ''eth0'' : @host.primary_interface.identifier\n  primary_interface_subnet
        = @host.primary_interface.subnet\n-%>\n<!DOCTYPE profile>\n<profile xmlns=\"http://www.suse.com/1.0/yast2ns\"
        xmlns:config=\"http://www.suse.com/1.0/configns\">\n  <general>\n    <mode>\n      <confirm
        config:type=\"boolean\">false</confirm>\n      <final_reboot config:type=\"boolean\">true</final_reboot>\n    </mode>\n  </general>\n  <networking>\n    <dns>\n      <hostname><%=
        @host.name %></hostname>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n      <dhcp_hostname config:type=\"boolean\">false</dhcp_hostname>\n      <dhcp_resolv
        config:type=\"boolean\">false</dhcp_resolv>\n<% if @host.domain -%>\n      <domain><%=
        @host.domain -%></domain>\n<% end -%>\n<% if primary_interface_subnet.dns_primary.present?
        -%>\n      <nameservers config:type=\"list\">\n        <nameserver><%= primary_interface_subnet.dns_primary
        -%></nameserver>\n<% if primary_interface_subnet.dns_secondary.present? -%>\n        <nameserver><%=
        primary_interface_subnet.dns_secondary -%></nameserver>\n<% end -%>\n      </nameservers>\n<%
        end -%>\n<% else -%>\n      <resolv_conf_policy>auto</resolv_conf_policy>\n<%
        end -%>\n<% if @host.domain -%>\n      <searchlist config:type=\"list\">\n        <search><%=
        @host.domain %></search>\n      </searchlist>\n<% end -%>\n    </dns>\n    <interfaces
        config:type=\"list\">\n<%\n  @host.managed_interfaces.each do |interface|\n    next
        if !interface.managed? || interface.subnet.nil? || interface.ip.nil?\n    dhcp
        = interface.subnet.dhcp_boot_mode?\n-%>\n<% if dhcp -%>\n      <interface>\n        <bootproto>dhcp</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <startmode>auto</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        else -%>\n      <interface>\n        <bootproto>static</bootproto>\n        <device><%=
        interface.primary ? primary_interface_identifier : interface.identifier -%></device>\n        <ipaddr><%=
        interface.ip -%></ipaddr>\n        <netmask><%= interface.subnet.mask -%></netmask>\n        <startmode>onboot</startmode>\n        <usercontrol>no</usercontrol>\n      </interface>\n<%
        end -%>\n<% end -%>\n    </interfaces>\n<% unless primary_interface_subnet.dhcp_boot_mode?
        -%>\n    <routing>\n      <routes config:type=\"list\">\n        <route>\n          <destination>default</destination>\n          <device><%=
        primary_interface_identifier -%></device>\n          <gateway><%= primary_interface_subnet.gateway
        -%></gateway>\n          <netmask><%= primary_interface_subnet.mask -%></netmask>\n        </route>\n      </routes>\n    </routing>\n<%
        end -%>\n  </networking>\n<% if os_major >= 15 -%>\n  <ntp-client>\n    <ntp_policy>auto</ntp_policy>\n    <ntp_servers
        config:type=\"list\">\n      <ntp_server>\n        <address><%= host_param(''ntp-server'')
        || ''0.opensuse.pool.ntp.org'' %></address>\n        <iburst config:type=\"boolean\">false</iburst>\n        <offline
        config:type=\"boolean\">true</offline>\n      </ntp_server>\n    </ntp_servers>\n    <ntp_sync>15</ntp_sync>\n  </ntp-client>\n<%
        else -%>\n  <ntp-client>\n    <configure_dhcp config:type=\"boolean\">false</configure_dhcp>\n    <peers
        config:type=\"list\">\n      <peer>\n        <address><%= host_param(''ntp-server'')
        || ''0.opensuse.pool.ntp.org'' %></address>\n        <initial_sync config:type=\"boolean\">true</initial_sync>\n        <options></options>\n        <type>server</type>\n      </peer>\n    </peers>\n    <start_at_boot
        config:type=\"boolean\">true</start_at_boot>\n    <start_in_chroot config:type=\"boolean\">true</start_in_chroot>\n  </ntp-client>\n<%
        end -%>\n<% if ! @dynamic -%>\n  <%= @host.diskLayout %>\n<% end -%>\n  <runlevel>\n    <default>3</default>\n    <services
        config:type=\"list\">\n      <service>\n        <service_name>sshd</service_name>\n        <service_status>enable</service_status>\n      </service>\n    </services>\n  </runlevel>\n  <software>\n<%
        if os_major >= 15 -%>\n    <products config:type=\"list\">\n      <product>SLES</product>\n    </products>\n    <patterns
        config:type=\"list\">\n      <pattern>enhanced_base</pattern>\n    </patterns>\n<%
        else -%>\n    <patterns config:type=\"list\">\n      <pattern>Minimal</pattern>\n    </patterns>\n<%
        end -%>\n    <packages config:type=\"list\">\n      <package>lsb-release</package>\n      <package>openssh</package>\n<%
        if puppet_enabled -%>\n<% if aio_enabled -%>\n      <package>puppet-agent</package>\n<%
        else -%>\n      <package>rubygem-puppet</package>\n<% end -%>\n<% end -%>\n<%
        if salt_enabled -%>\n      <package>salt-minion</package>\n<% end -%>\n<%
        if spacewalk_enabled -%>\n      <package>rhn-setup</package>\n<% end -%>\n    </packages>\n  </software>\n  <users
        config:type=\"list\">\n    <user>\n      <username>root</username>\n      <encrypted
        config:type=\"boolean\">true</encrypted>\n      <fullname>root</fullname>\n      <gid>0</gid>\n      <home>/root</home>\n      <shell>/bin/bash</shell>\n      <uid>0</uid>\n      <user_password><%=
        root_pass %></user_password>\n    </user>\n  </users>\n  <scripts>\n<% if
        @dynamic -%>\n    <pre-scripts config:type=\"list\">\n      <script>\n        <debug
        config:type=\"boolean\">true</debug>\n        <filename>pre_disklayout</filename>\n        <interpreter>shell</interpreter>\n        <source><![CDATA[\n<%=
        @host.diskLayout %>\n]]>\n        </source>\n      </script>\n    </pre-scripts>\n<%
        end -%>\n    <chroot-scripts config:type=\"list\">\n      <script>\n        <filename>cp-resolv.sh</filename>\n        <chrooted
        config:type=\"boolean\">false</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Copying
        resolv.conf into chroot ...</notification>\n        <source><![CDATA[\ncp
        /etc/resolv.conf /mnt/etc\n]]>\n        </source>\n      </script>\n      <script>\n        <filename>foreman.sh</filename>\n        <chrooted
        config:type=\"boolean\">true</chrooted>\n        <interpreter>shell</interpreter>\n        <notification>Setting
        up Puppet / Foreman ...</notification>\n        <source><![CDATA[\n/bin/hostname
        <%= @host.name %>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%=
        snippet \"blacklist_kernel_modules\" %>\n\n<% if puppet_enabled -%>\n<%= snippet
        ''puppet_setup'' %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup''
        %>\n<% end -%>\n\n<% if spacewalk_enabled -%>\n<%= snippet ''redhat_register''
        %>\n<% end -%>\n\n<%= snippet ''built'' %>\n\nrm /etc/resolv.conf\n]]>\n        </source>\n      </script>\n    </chroot-scripts>\n  </scripts>\n  <keyboard>\n    <keymap>english-us</keymap>\n  </keyboard>\n  <timezone>\n    <hwclock>UTC</hwclock>\n    <timezone><%=
        host_param(''time-zone'') || ''Etc/UTC'' %></timezone>\n  </timezone>\n  <add-on>\n    <add_on_products
        config:type=\"list\">\n<% if os_major >= 15 -%>\n      <listentry>\n        <media_url><%=
        host_param(''sle-module-basesystem-url'') %></media_url>\n        <product_dir>/Module-Basesystem</product_dir>\n        <product>sle-module-basesystem</product>\n      </listentry>\n<%
        end -%>\n<% if puppet_enabled -%>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        or host_param_true?(''enable-puppetlabs-puppet5-repo'') -%>\n<%\n  puppet_repo_url_base
        = ''http://yum.puppetlabs.com''\n  if host_param_true?(''enable-puppetlabs-pc1-repo'')\n    puppet_repo_url
        = \"#{puppet_repo_url_base}/sles/#{os_major}/PC1/#{@host.architecture}/\"\n  elsif
        host_param_true?(''enable-puppetlabs-puppet5-repo'')\n    puppet_repo_url
        = \"#{puppet_repo_url_base}/puppet5/sles/#{os_major}/#{@host.architecture}/\"\n  end\n%>\n    <listentry>\n        <media_url><![CDATA[<%=
        puppet_repo_url %>]]></media_url>\n        <name>puppet</name>\n        <product>puppet</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>7F438280EF8D349F</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>7F438280EF8D349F</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        else -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/systemsmanagement:/puppet/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>systemsmanagement_puppet</name>\n        <product>systemsmanagement_puppet</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        if os_major < 12 -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/devel:languages:ruby:backports/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>devel_languages_ruby_backports</name>\n        <product>devel_languages_ruby_backports</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>9AF0C9A20E9AF123</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>9AF0C9A20E9AF123</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n      <listentry>\n<!--
        you have to update the next line with the actual URL of your SDK -->\n        <media_url>http://<your_server_here>/iso/suse/SDK/<%=
        os_major %>.<%= os_minor %>/<%= @host.architecture %>/</media_url>\n        <product>SuSE-Linux-SDK</product>\n        <product_dir>/</product_dir>\n        <name>SuSE-Linux-SDK</name>\n      </listentry>\n<%
        end -%>\n<% end -%>\n<% end -%>\n<% if salt_enabled -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/devel:languages:python/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>devel_languages_python</name>\n        <product>devel_languages_python</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>27163A4EEDF0D733</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>27163A4EEDF0D733</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        end -%>\n<% if spacewalk_enabled -%>\n      <listentry>\n        <media_url><![CDATA[http://download.opensuse.org/repositories/systemsmanagement:/spacewalk/SLE_<%=
        os_major %><%= sles_minor_string %>/]]></media_url>\n        <name>systemsmanagement_spacewalk</name>\n        <product>systemsmanagement_spacewalk</product>\n        <product_dir>/</product_dir>\n        <signature-handling>\n          <accept_non_trusted_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </accept_non_trusted_gpg_key>\n          <import_gpg_key>\n            <all
        config:type=\"boolean\">false</all>\n            <keys config:type=\"list\">\n              <keyid>2ABFA143A0E46E11</keyid>\n            </keys>\n          </import_gpg_key>\n        </signature-handling>\n      </listentry>\n<%
        end -%>\n    </add_on_products>\n  </add-on>\n</profile>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":42,"name":"AutoYaST
        SLES default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"30cd2b74b1cb859b77c3f6034832148f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ed2e4650-2e83-47d9-be5f-cdddb6d2a954]
      x-runtime: ['0.048674']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/57
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: blacklist_kernel_modules\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<% if host_param(''blacklist_kernel_modules'')
        -%>\n  <% host_param(''blacklist_kernel_modules'').split.each do |mod| -%>\n    echo
        \"blacklist <%= mod %>\" >> /etc/modprobe.d/blacklist.conf\n  <% end -%>\n<%
        end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":57,"name":"blacklist_kernel_modules","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"7132450fa098d7e2b5b8fe13cd30dbfb"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2f3e557a-58b8-40ce-9d4d-f9e8f87b1932]
      x-runtime: ['0.055298']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/58
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: bmc_nic_setup\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%#\n# bmc_nic_setup snippet\n# This
        snippet configure BMC interfaces.\n# At this time, only IPMI provider is supported.\n#
        It was tested on some Dell hardware with CentOS 6 - CentOS 7 and should be
        compatible with respective\n# upstream RHEL versions.\n#\n# What this snippet
        does:\n# * Configure the networking part of the interface (ipaddr, netmask,
        ip gateway or dhcp)\n#\n# * Set the authentication mecanism to ''MD5'' for
        the used privilege level\n#\n# * Create or Update the provided user with provided
        privileges level. ADMINISTRATOR privilege level is used by default\n#   because
        ipmitool utility request ADMINISTRATOR privileges level if no privilege level
        is provided.\n#   If you want to use a lower level of privilges (like OPERATOR),
        don''t forget to add the privilege level to request\n#   with your ipmi command
        (eg: ipmitool -I lanplus -L operator -U user1 -H 192.168.1.2 chassis status).\n#\n#
        * Enable the user created/updated\n#\n# What this snippet doesn''t do:\n#
        * Set/Update the VLAN tag on the BMC interface because this configuration
        depends on the switch port configuration\n#   and the ''ipmitool lan set <channel>
        vlan id <off|<id>>'' command don''t work on all Dell hardware tested.\n#\n#
        host_params:\n# * bmc_ipmi_priv_level: Privilege level to use for the ipmi
        user.\n#                        ''ADMINISTRATOR'' is used by default if not
        provided.\n# * bmc_ipmi_auth_method: Channel authentication types. Possible
        values: NONE, MD2, MD4, MD5, PASSWORD.\n#                         ''MD5''
        is used by default if not provided.\n# * bmc_ipmi_channel_id: Channel ID for
        the IPMI configuration.\n#\n#\n# How to test configuration result:\n# * From
        a remote host that can reach the current IPMI interface, install ipmitool
        utilities and type the following command:\n#   ipmitool -I <interface> -L
        <privilege_level> -U <user> -H <host> chassis status\n%>\n<%\nbmc_nic = @host.bmc_nic\n\nprivilege_levels
        = {''ADMINISTRATOR'' => 4, ''OPERATOR'' => 3}\nuser_privilege_level = host_param(''bmc_ipmi_priv_level'')
        || ''ADMINISTRATOR''\nauth_method = host_param(''bmc_ipmi_auth_method'') ||
        ''MD5''\nchannel_id = host_param(''bmc_ipmi_channel_id'') || ''1''\n\nos_family
        = @host.operatingsystem.family\n%>\n\n<% if bmc_nic && bmc_nic.managed? &&
        bmc_nic.provider == \"IPMI\" && !bmc_nic.username.empty?  && !bmc_nic.password.empty?
        -%>\n\n# Configure BMC interface\n<% if os_family == ''Redhat'' %>\nif [ -f
        /usr/bin/dnf ]; then\n  dnf -y install ipmitool\nelse\n  yum -t -y install
        ipmitool\nfi\n<% elsif os_family == ''Freebsd'' %>\npkg install -y ipmitool\n<%
        elsif os_family == ''Debian'' %>\napt-get update\napt-get install -y ipmitool\n<%
        end %>\n\n<% if bmc_nic.subnet.dhcp_boot_mode? -%>\nipmitool lan set <%= channel_id
        %> ipsrc dhcp\n<% else -%>\nipmitool lan set <%= channel_id %> ipsrc static\nipmitool
        lan set <%= channel_id %> ipaddr <%= bmc_nic.ip %>\nipmitool lan set <%= channel_id
        %> netmask <%= bmc_nic.subnet.mask %>\nipmitool lan set <%= channel_id %>
        defgw ipaddr <%= bmc_nic.subnet.gateway %>\n<% end -%>\n\nipmitool lan set
        <%= channel_id %> auth <%= user_privilege_level %> <%= auth_method %>\nipmitool
        lan set <%= channel_id %> arp respond on\nipmitool lan set <%= channel_id
        %> access on\n\n# Provided user exist, get his ID\nif ipmitool user list <%=
        channel_id %> | grep -m 1 -E ''[[:blank:]]<%= bmc_nic.username %>[[:blank:]]''
        >/dev/null 2>&1; then\n  ipmi_user_id=$(ipmitool user list <%= channel_id
        %> | grep -m 1 -E ''[[:blank:]]<%= bmc_nic.username %>[[:blank:]]'' | cut
        -d '' '' -f1)\n# provided user don''t exist, get the next free ID and create
        a new user.\nelse\n  ipmi_user_id=$[$(ipmitool user list <%= channel_id %>
        | tail -n 1 | cut -d '' '' -f1)+1]\n  ipmitool user set name ${ipmi_user_id}
        <%= bmc_nic.username %>\nfi\n\nipmitool user set password ${ipmi_user_id}
        <%= bmc_nic.password %>\nipmitool channel setaccess <%= channel_id %> ${ipmi_user_id}
        link=on ipmi=on callin=on privilege=<%= privilege_levels[user_privilege_level]
        %>\nipmitool user enable ${ipmi_user_id}\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":58,"name":"bmc_nic_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"5ae00826223f414fe4de04742154db1f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3f59c63d-629d-44d4-947e-105abcf466c5]
      x-runtime: ['0.051607']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/59
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: built\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\n  Sends ''built'' request to
        exit build mode. Only use in multi-line shell context.\n  Tries curl, if not
        found then wget and finally wget from busybox (limited options).\n-%>\n<%\n  endpoint
        = @endpoint || ''built''\n  method = @method || ''POST''\n  url = foreman_url(endpoint)\n  curl_opts
        = [\"-H ''Content-Type: text/plain''\"]\n  wget_opts = [\"--header ''Content-Type:
        text/plain''\"]\n  if url.start_with?(''https'')\n    curl_opts << \"--insecure\"\n    wget_opts
        << \"--no-check-certificate\"\n  end\n  if @body_file\n    curl_opts << \"--data
        @#{@body_file}\"\n    wget_opts << \"--body-file=#{@body_file}\"\n  end\n-%>\nif
        [ -x /usr/bin/curl ]; then\n  /usr/bin/curl -o /dev/null --noproxy \\* <%=
        curl_opts.join('' '') %> --silent ''<%= url %>''\nelif [ -x /usr/bin/wget
        ]; then\n  /usr/bin/wget -q -O /dev/null --no-proxy --method <%= method %>
        <%= wget_opts.join('' '') %> ''<%= url %>''\nelse\n  wget -q -O /dev/null
        --header ''Content-Type: text/plain'' ''<%= url %>''\nfi\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:09 UTC","id":59,"name":"built","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:09 GMT']
      etag: [W/"bf6fab1a1ed83ddc94c8c9998db9b588"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [99de3f95-c2ea-4fcb-a2d7-7e7dab4746ae]
      x-runtime: ['0.057428']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/60
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: chef_client\nmodel:
        ProvisioningTemplate\nsnippet: true\ndescription: this is a single entry point
        for chef-client bootstrapping, it selects\n    a bootstrapping strategy based
        on host parameter named \"chef_bootstrap_template\"\n    note that it can
        be set per hostgroup, os, domain etc.\n    if there''s no strategy set, omnibus
        is used by default\n%>\necho \"Bootstraping chef\"\n<%= snippet_if_exists(host_param(''chef_bootstrap_template'')
        || ''chef-client omnibus bootstrap'') %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":60,"name":"chef_client","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"ddb9f5c2a652edcc708ed34ac062152f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [502a71a8-7fb9-45e5-be18-bb5d934fea7c]
      x-runtime: ['0.067749']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/61
  response:
    body: {string: !!python/unicode '{"template":"#cloud-config\n<%#\nkind: snippet\nname:
        coreos_cloudconfig\nmodel: ProvisioningTemplate\nsnippet: true\n%>\n<%\n  units
        = 0\n  unless host_param_false?(''enable_etcd'')\n    units += 1\n  end\n  if
        host_param_true?(''expose_docker_socket'')\n    units += 1\n  end\n  if @host.subnet.respond_to?(:dhcp_boot_mode?)\n    dhcp
        = @host.subnet.dhcp_boot_mode? && !@static\n  else\n    dhcp = !@static\n  end\n  unless
        dhcp\n    units += 1\n  end\n-%>\n<% if units > 0 -%>\n      coreos:\n<% if
        host_param(''reboot-strategy'') -%>\n        update:\n          reboot-strategy:
        <%= host_param(''reboot-strategy'') %>\n<% end -%>\n<% unless host_param_false?(''enable_etcd'')
        -%>\n        etcd2:\n<% if host_param(''etcd_discovery_url'') -%>\n          discovery:
        <%= host_param(''etcd_discovery_url'') %>\n<% end -%>\n          advertise-client-urls:
        http://<%= @host.ip %>:2379\n          initial-advertise-peer-urls: http://<%=
        @host.ip %>:2380\n          listen-client-urls: http://0.0.0.0:2379\n          listen-peer-urls:
        http://0.0.0.0:2380\n<% end -%>\n        units:\n<% unless host_param_false?(''enable_etcd'')
        -%>\n          - name: etcd2.service\n            command: start\n          -
        name: fleet.service\n            command: start\n<% end -%>\n<% if host_param_true?(''expose_docker_socket'')
        -%>\n          - name: docker-tcp.socket\n            command: start\n            enable:
        yes\n            content: |\n              [Unit]\n              Description=Docker
        Socket for the API\n\n              [Socket]\n              ListenStream=2375\n              BindIPv6Only=both\n              Service=docker.service\n\n              [Install]\n              WantedBy=sockets.target\n          -
        name: enable-docker-tcp.service\n            command: start\n            content:
        |\n              [Unit]\n              Description=Enable the Docker Socket
        for the API\n\n              [Service]\n              Type=oneshot\n              ExecStart=/usr/bin/systemctl
        enable docker-tcp.socket\n<% end -%>\n<% unless dhcp -%>\n          - name:
        systemd-networkd.service\n            command: stop\n          - name: static.network\n            command:
        start\n            content: |\n              [Match]\n              MACAddress=<%=
        @host.mac %>\n              [Network]\n<% if @host.subnet.present? -%>\n              Gateway=<%=
        @host.subnet.gateway %>\n<% end -%>\n              Address=<%= @host.ip %>/<%=
        @host.subnet.cidr %>\n<% if @host.subnet.dns_primary.present? -%>\n              DNS=<%=
        @host.subnet.dns_primary %>\n<% end -%>\n<% if @host.subnet.dns_secondary.present?
        -%>\n              DNS=<%= @host.subnet.dns_secondary %>\n<% end -%>\n          -
        name: down-interfaces.service\n            command: start\n            content:
        |\n              [Service]\n              Type=oneshot\n              ExecStart=/usr/bin/bash
        -c ''for i in $(/usr/bin/ls /sys/class/net/); do [ $i == \"lo\" ] || (/usr/bin/ip
        link set $i down; /usr/bin/ip addr flush dev $i); done''\n          - name:
        systemd-networkd.service\n            command: restart\n<% end -%>\n<% end
        -%>\n      hostname: <%= @host.name %>\n<% if host_param(''ssh_authorized_keys'')
        -%>\n      ssh_authorized_keys:\n  <% host_param(''ssh_authorized_keys'').split('','').map{
        |item| item.strip }.each do |ssh_key| -%>\n      - \"<%= ssh_key %>\"\n  <%
        end -%>\n<% else -%>\n      users:\n        - name: core\n          passwd:
        <%= root_pass %>\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":61,"name":"coreos_cloudconfig","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"50367439fee60ed93a9a0e104fe395d2"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f865001c-f92d-4273-a170-e7d4c92fd282]
      x-runtime: ['0.052145']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/43
  response:
    body: {string: !!python/unicode '{"template":"#cloud-config\n<%#\nkind: provision\nname:
        CoreOS provision\nmodel: ProvisioningTemplate\noses:\n- CoreOS\n%>\n<%\nos_major  =
        @host.operatingsystem.major.to_i\n%>\ncoreos:\n  units:\n    - name: coreos-bootstrap.service\n      runtime:
        no\n      command: start\n      content: |\n        [Unit]\n        Description=Install
        coreos to disk\n        [Service]\n        Type=oneshot\n        ExecStart=/usr/bin/coreos-install
        \\\n          -C <%= @host.operatingsystem.release_name %> \\\n          -V
        <%= @host.operatingsystem.release %> \\\n          -d <%= host_param(''install-disk'')
        || ''/dev/sda'' %> <% if @host.provider == ''VMware'' %>-o vmware_raw<% end
        %> \\\n          -c /home/core/cloud-config.yml <% if os_major >= 557 -%>-b
        <%= @mediapath %><% end %>\n        ExecStartPost=/usr/bin/wget -q -O /dev/null
        --no-check-certificate <%= foreman_url(''built'') %>\n        ExecStartPost=/usr/sbin/reboot\n        [X-Fleet]\n        X-Conflicts=coreos-bootstrap.service\n<%
        if host_param(''ssh_authorized_keys'') -%>\nssh_authorized_keys:\n<% host_param(''ssh_authorized_keys'').split('','').map{
        |item| item.strip }.each do |ssh_key| -%>\n  - \"<%= ssh_key %>\"\n<% end
        -%>\n<% else -%>\nusers:\n  - name: core\n    passwd: <%= root_pass %>\n<%
        end -%>\nwrite_files:\n  - content: |\n      <%= snippet ''coreos_cloudconfig''
        %>\n    path: /home/core/cloud-config.yml\n    permissions: ''0600''\n    owner:
        core:core\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":43,"name":"CoreOS
        provision","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"0b9052fd0ab572e25878e58d6349e3ca"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [69bdfd1f-f05f-4da2-afb5-bd7351c420d9]
      x-runtime: ['0.047303']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/12
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: CoreOS
        PXELinux\nmodel: ProvisioningTemplate\noses:\n- CoreOS\n%>\nDEFAULT coreos\n\nLABEL
        coreos\n    KERNEL <%= @kernel %>\n    APPEND initrd=<%= @initrd %> cloud-config-url=<%=
        foreman_url(''provision'')%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":12,"name":"CoreOS
        PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"b1b6c2be0d429e0b74d133de97163a4e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [28360b0d-da30-4722-829a-6dab2e9d4efd]
      x-runtime: ['0.047581']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/62
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: create_users\nmodel:
        ProvisioningTemplate\nkind: snippet\nsnippet: true\n-%>\n<%- users = @host.owner_type
        == ''Usergroup'' ? @host.owner.all_users : [@host.owner] -%>\n<%- users.each
        do |user| -%>\n<%=   \"useradd #{user.login}\" %>\n<%-   if user.respond_to?(:ssh_authorized_keys)
        && user.ssh_authorized_keys.any? -%>\n<%=     \"mkdir -p -m 0700 ~#{user.login}/.ssh\"
        %>\n<%=     \"cat >> ~#{user.login}/.ssh/authorized_keys <<EOF\" %>\n<%-     index
        = 0 -%>\n<%-     user.ssh_keys.each do |key| -%>\n<%-       if index == 0
        -%>\n<%=        \"#{key.type} #{key.ssh_key} #{key.comment}\" %>\n<%-       else
        -%>\n<%=        \"#{key.type} #{key.ssh_key} #{key.comment} - #{index}\" %>\n<%-       end
        -%>\n<%-       index += 1 -%>\n<%-     end -%>\n<%=     \"EOF\" %>\n<%=     \"chown
        -R #{user.login}:#{user.login} ~#{user.login}/.ssh\" %>\n<%=     \"chmod -R
        go= ~#{user.login}/.ssh\" %>\n<%-   end -%>\n<%- end %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":62,"name":"create_users","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"5ed67d50fc8a645ef6d236d6d5b2f1b5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c5d53b78-7e29-48eb-abc8-8526132c07c8]
      x-runtime: ['0.050823']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/63
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: csr_attributes.yaml\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n---\ncustom_attributes:\n  1.2.840.113549.1.9.7:
        \"<%= @host.puppetca_token.value %>\"\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":63,"name":"csr_attributes.yaml","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"4f46a9f7947f3a615d22eb2e734c61b3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f280ba16-5446-4541-843f-0afd5079a752]
      x-runtime: ['0.053587']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/64
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: efibootmgr_netboot\nmodel:
        ProvisioningTemplate\ndescription: Configure booting from network in EFI\nsnippet:
        true\n%>\n<% if host_param(''efi_bootentry'') == ''previous'' -%>\nif [[ -d
        /sys/firmware/efi ]]; then\n  echo \"Changing EFI boot order to preserve boot.
        Typically the previous entry\"\n  echo \"was network boot in netboot workflows
        but this can also break things.\"\n  echo \"In that case use efi_keep_bootorder
        host parameter to keep it untouched.\"\n  echo \"Boot order is currently:\"\n  efibootmgr\n  echo\n  created_entry=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2 | cut -d \",\" -f 1)\n  others=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2 | cut -d \",\" -f 2-)\n  new_order=\"${others},${created_entry}\"\n  echo
        \"Found entry ${created_entry}, changing order to:\"\n  efibootmgr -o ${new_order}\n  echo\nfi\n<%
        elsif (entry = host_param(''efi_bootentry'')) -%>\nif [[ -d /sys/firmware/efi
        ]]; then\n  echo \"Trying to find EFI boot entry containing: <%= entry -%>\"\n  echo
        \"Boot order is currently:\"\n  efibootmgr\n  echo\n  current=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2)\n  id=$(efibootmgr | grep -E ''^Boot[0-9]+''
        | grep -E ''a'' | efibootmgr | grep -E ''^Boot[0-9]+'' | grep -E ''<%= entry
        -%>'' | cut -c5-8)\n  echo \"Found entry ${id}, changing order to:\"\n  efibootmgr
        -o ${id},${current}\n  echo\nfi\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":64,"name":"efibootmgr_netboot","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"056dce5a4528c591d071eb2567dbb8ab"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e0819ea2-3c44-4652-afcc-7eaafe4a8de7]
      x-runtime: ['0.055192']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/65
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: epel\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%\nrepo_base  = host_param(''epel-repo-base'')
        ? host_param(''epel-repo-base'') : ''https://dl.fedoraproject.org/pub/epel''\nhttp_proxy
        = host_param(''http-proxy'') ? \" --httpproxy #{host_param(''http-proxy'')}\"
        : nil\nhttp_port  = host_param(''http-proxy-port'') ? \" --httpport #{host_param(''http-proxy-port'')}\"
        : nil\nos_major   = @host.operatingsystem.major.to_i\n-%>\nrpm -Uvh<%= http_proxy
        %><%= http_port %> <%= repo_base %>/epel-release-latest-<%= os_major %>.noarch.rpm\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":65,"name":"epel","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"a14f1abbff3f1cfe8d41a2267255f3dc"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e3c77e40-73ae-4d8a-aec0-ec4dc0d33d43]
      x-runtime: ['0.055431']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/66
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: fips_packages\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\ndracut-fips\n-prelink\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":66,"name":"fips_packages","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"e7beba5f53fea6146ee8e595271bdcd7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [db44dde3-5c3f-47db-bb11-f2e6370c5350]
      x-runtime: ['0.054946']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/67
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: fix_hosts\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\necho \"<%= @host.shortname %>\" >
        /etc/hostname\nhostname <%= @host.shortname %>\ncat > /etc/hosts << EOF\n<%#
        simple snippet to generate /etc/hosts when provisioning image based systems
        -%>\n127.0.0.1   <%= @host %> <%= @host.shortname %> localhost localhost.localdomain\n::1     ip6-localhost
        ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2
        ip6-allrouters\nEOF\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":67,"name":"fix_hosts","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"a2a01058a3cda5ed90160aab5b3018a6"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f42af6a9-e118-4764-a3fc-673ac0a27fe6]
      x-runtime: ['0.051279']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/27
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: FreeBSD
        (mfsBSD) finish\nmodel: ProvisioningTemplate\noses:\n- FreeBSD\n%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  proxy_string = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n%>\n<% unless proxy_string == '''' -%>\nexport http_proxy=''<%= proxy_string
        %>''\n<% end -%>\n/bin/echo ''<%= root_pass %>'' | pw usermod root -H 0\ncat
        >> /etc/rc.conf <<EOF\nhostname=\"<%= @host %>\"\nsshd_enable=\"YES\"\nntpd_enable=\"YES\"\nEOF\n\necho
        ifconfig_`ifconfig -l | cut -d '' '' -f 1`=DHCP >>/etc/rc.conf\n\necho ''PermitRootLogin
        yes'' >> /etc/ssh/sshd_config\n\n/bin/hostname <%= @host.name %>\ncp /usr/share/zoneinfo/<%=
        host_param(''time-zone'') || ''UTC'' %> /etc/localtime\nadjkerntz -a\nntpdate
        <%= host_param(''ntp-server'') || ''0.freebsd.pool.ntp.org'' %>\n\nmkdir /root/install/\nfreebsd-update
        fetch > /root/install/freebsd-update_fetch.txt\nfreebsd-update install > /root/install/freebsd-update_install.txt\n\nenv
        ASSUME_ALWAYS_YES=YES pkg bootstrap\npkg update > /root/install/pkg_update.txt\npkg
        upgrade -y > /root/install/pkg_upgrade.txt\n\n<% if puppet_enabled %>\n<%=
        snippet ''puppet_setup'' %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet
        ''saltstack_setup'' %>\n<% end -%>\n<%= snippet(''remote_execution_ssh_keys'')
        %>\nexit 0\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":27,"name":"FreeBSD
        (mfsBSD) finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"33c4bde747fc46b34d22851aaacc6228"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [55207a2c-6d64-499d-94f4-db1e23f08117]
      x-runtime: ['0.047661']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/44
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: FreeBSD
        (mfsBSD) provision\nmodel: ProvisioningTemplate\noses:\n- FreeBSD\n%>\n<%\nproxy_string
        = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n%>\n<% unless proxy_string == '''' -%>\nexport http_proxy=''<%= proxy_string
        %>''\n<% end -%>\n\n# Get the disk layout, and the first disk connected to
        the system\ndisk_layout=`/sbin/sysctl -n kern.disks | /usr/bin/sed ''s/cd[0-9]//g''`\nfirst_disk=\"`echo
        ${disk_layout##*[1-9]} | /usr/bin/cut -d'' '' -f1`\"\ntest -z \"$first_disk\"
        || echo \"First disk: $first_disk\"\n\n/root/bin/destroygeom -d <%= host_param(''install-disk'')
        || ''$first_disk'' %> || exit 1\n/root/bin/zfsinstall -d <%= host_param(''install-disk'')
        || ''$first_disk'' %> -s 2G -u <%= @mediapath %> || exit 1\n\ncp /etc/resolv.conf
        /mnt/etc/resolv.conf\nmount -t devfs devfs /mnt/dev\nfetch -q --no-verify-hostname
        --no-verify-peer -o /mnt/tmp/finish.sh -d <%= foreman_url(''finish'') %>\nchroot
        /mnt /bin/sh /tmp/finish.sh\nrm /mnt/tmp/finish.sh\n\nfetch -q --no-verify-hostname
        --no-verify-peer -o /dev/null -d <%= foreman_url(''built'') %>\nsleep 5\nreboot\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":44,"name":"FreeBSD
        (mfsBSD) provision","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"02407da46ab0ec69d33f8dc0c9795ddd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [45764ffa-1106-4505-a24c-790ebd0f38a6]
      x-runtime: ['0.047355']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/13
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: FreeBSD
        (mfsBSD) PXELinux\nmodel: ProvisioningTemplate\noses:\n- FreeBSD\n%>\n# foreman_url=<%=
        foreman_url(''provision'') %>\nDEFAULT freebsd\n\nLABEL freebsd\n    KERNEL
        memdisk\n    APPEND initrd=<%= @initrd %> harddisk raw\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":13,"name":"FreeBSD
        (mfsBSD) PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"22d63df2356d4dbf9ee3fa22e1f9257e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f09ef52f-c1a4-45a8-8c0c-154cc4e2740f]
      x-runtime: ['0.048357']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/68
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: freeipa_register\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n# FreeIPA Registration Snippet\n#\n#
        Optional parameters:\n#\n#   freeipa_server              IPA server\n#\n#   freeipa_sudo                Enable
        sudoers\n#                               Default: true\n#\n#   freeipa_ssh                 Enable
        ssh integration\n#                               Default: true\n#\n#   freeipa_automount           Enable
        automounter\n#                               Default: false\n#\n#   freeipa_automount_location  Location
        for automounts\n#\n#   freeipa_mkhomedir           Enable automatically making
        home directories\n#                               Default: true\n#\n#   freeipa_opts                Additional
        options to pass directly to installer\n#\n#   freeipa_automount_server    Override
        automount server if freeipa_automount is true and the server differs from
        freeipa_server\n#\n\n<% if @host.operatingsystem.family == ''Redhat'' -%>\n  <%
        if @host.operatingsystem.name == ''Fedora'' -%>\n    freeipa_client=freeipa-client\n  <%
        else -%>\n    freeipa_client=ipa-client\n  <% end -%>\n  <% if @host.operatingsystem.major.to_i
        > 6 -%>\n    /usr/sbin/sshd-keygen\n  <% end -%>\n<% else -%>\n  freeipa_client=freeipa-client\n<%
        end -%>\n\n<%= @host.operatingsystem.family == ''Redhat'' ? ''yum install
        -y libsss_sudo'' : ''apt-get install -y libsss-sudo'' %> $freeipa_client\n\n##\n##
        IPA Client Installation\n##\n<% if host_param(''freeipa_server'') -%>\n<%
        domain = host_param(''freeipa_domain'') || @host.realm.name.downcase -%>\n\nfreeipa_server=\"--server
        <%= host_param(''freeipa_server'') %>\"\nfreeipa_domain=\"--domain <%= domain
        %>\"\n<% end -%>\n\n<% unless host_param_false?(''freeipa_mkhomedir'') %>\nfreeipa_mkhomedir=\"--mkhomedir\"\n<%
        end -%>\n\n<% if host_param_false?(''freeipa_ssh'') %>\nfreeipa_ssh=\"--no-ssh\"\n<%
        end -%>\n\n<% if host_param(''freeipa_opts'') -%>\nfreeipa_opts=\"<%= host_param(''freeipa_opts'')
        %>\"\n<% end -%>\n\n# One-time password will be requested at install time.
        Otherwise, $HOST[OTP] is used as a placeholder value.\n/usr/sbin/ipa-client-install
        -w ''<%= @host.otp || \"$HOST[OTP]\" %>'' --realm=<%= @host.realm %> -U $freeipa_mkhomedir
        $freeipa_opts $freeipa_server $freeipa_domain $freeipa_ssh\n\n##\n## Automounter\n##\n\n<%
        if host_param(''freeipa_automount_location'') -%>\nautomount_location=\"--location
        <%= host_param(''freeipa_automount_location'') %>\"\n<% end -%>\n\n<% if host_param_true?(''freeipa_automount'')
        -%>\nif [ -f /usr/sbin/ipa-client-automount ]\nthen\n  automount_server=$freeipa_server\n  <%-
        if automount_server = host_param(''freeipa_automount_server'') || host_param(''freeipa_server'')
        -%>\n  automount_server=\"--server <%= automount_server %>\"\n  <%- end -%>\n  /usr/sbin/ipa-client-automount
        $automount_server $automount_location --unattended\nfi\n<% end -%>\n\n##\n##
        Sudoers\n##\n\n<% unless host_param_false?(''freeipa_enable_sudo'') %>\n\nfreeipa_client_version=$(ipa-client-install
        --version)\nfreeipa_client_version_major=$(echo $freeipa_client_version |
        cut -f1 -d.)\nfreeipa_client_version_minor=$(echo $freeipa_client_version
        | cut -f2 -d.)\nfreeipa_realm=$(grep default_realm /etc/krb5.conf | cut -d\"=\"
        -f2 | tr -d '' '')\nfreeipa_domain=$(grep -A 2 domain_realm /etc/krb5.conf
        | tail -n1 | awk ''{print $1}'')\nfreeipa_dn=$(for word in $(echo $freeipa_domain
        | sed ''s/\\./ /g''); do echo -n dc=$word,; done)\nsssd_version=$(sssd --version)\nsssd_major=$(echo
        $sssd_version | cut -f1 -d.)\nsssd_minor=$(echo $sssd_version | cut -f2 -d.)\nLDAP_CONFIG=$(mktemp)\n\n#
        >=ipa-client-4.1.0 automatically configures sssd for sudo\n# =<ipa-client-3
        requires manual configuration which this snippet takes care of\n\nif [ $freeipa_client_version_major
        -lt 4 ]\nthen\n  # Modify sssd.conf\n  sed -i -e \"s/services = .*/\\0, sudo/\"
        /etc/sssd/sssd.conf\n\n  # Modify sssd.conf for sssd <1.11 (RHEL <6.6)\n  if
        [ $sssd_minor -lt 11 ] || [ $sssd_major -lt 1 ]\n  then\n    <% if host_param(''freeipa_server'')
        -%>\n    ldap_uri=\", ldap://<%= host_param(''freeipa_server'') %>\"\n    krb5_server=<%=
        host_param(''freeipa_server'') %>\n    <% else -%>\n    krb5_server=\"_srv_\"\n    <%
        end -%>\n\ncat <<EOF > $LDAP_CONFIG\nsudo_provider = ldap\nldap_uri = _srv_
        $ldap_uri\nldap_sudo_search_base = ou=SUDOers,${freeipa_dn%?}\nldap_sasl_mech
        = GSSAPI\nldap_sasl_authid = host/$HOSTNAME\nldap_sasl_realm = $freeipa_realm\nkrb5_server
        = $krb5_server\nEOF\n  sed -i -e \"/\\[domain\\/.*\\]/ r $LDAP_CONFIG\" /etc/sssd/sssd.conf\n  fi\n\n  #
        Modify nsswitch.conf\n  grep -q sudoers /etc/nsswitch.conf\n  if [[ $? -eq
        0 ]];\n  then\n    sed -i -e \"s/^sudoers.*/sudoers:    files sss/\" /etc/nsswitch.conf\n  else\n    echo
        \"sudoers:    files sss\" >> /etc/nsswitch.conf\n  fi\n\n  # Configure nisdomain\n  <%
        if @host.operatingsystem.family == ''Redhat'' -%>\n    authconfig --nisdomain
        ${freeipa_domain} --update\n    chkconfig sssd on\n    \n    if [[ $(rpm -qa
        systemd | wc -l) -gt 0 ]];\n    then\n      domain_service=/usr/lib/systemd/system/*-domainname.service\n      \n      #
        Workaround for BZ1071969 on RHEL 7.0\n      grep -q \"DefaultDependencies=no\"
        $domain_service\n      if [[ $? -ne 0 ]]\n      then\n        sed -i -e \"s/\\[Unit\\]/\\[Unit\\]\\nDefaultDependencies=no/\"
        $domain_service\n      fi\n\n      systemctl start $(basename $domain_service)\n      systemctl
        enable $(basename $domain_service)\n    fi\n  <% else -%>\n  # OS is not RedHat\n  sed
        -i -e ''/^exit /d'' /etc/rc.local\n  echo \"nisdomainname ${freeipa_domain}\"
        >> /etc/rc.local\n  echo \"exit 0\" >> /etc/rc.local\n  nisdomainname ${freeipa_domain}  \n  <%
        end -%>\nfi\n\n<% end -%>\n\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":68,"name":"freeipa_register","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"49fc3a71691fa570195a09d892a852be"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2c3fde68-fe36-464e-be36-2f2571f9a526]
      x-runtime: ['0.051494']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/52
  response:
    body: {string: !!python/unicode '{"template":"#!/bin/bash\n<%#\nkind: script\nname:
        Grubby default\nmodel: ProvisioningTemplate\n%>\n\nKERNEL=\"/boot/kernel\"\nINITRD=\"/boot/initrd.img\"\n\nwget
        -O \"$KERNEL\" \"<%= @host.url_for_boot(:kernel) %>\"\nwget -O \"$INITRD\"
        \"<%= @host.url_for_boot(:initrd) %>\"\n\ngrubby --add-kernel=$KERNEL --initrd=$INITRD  --copy-default
        --title \"<%= @host.operatingsystem %>\" --make-default  --args=\"ks=<%= foreman_url(''provision'')%>\"\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:10 UTC","id":52,"name":"Grubby
        default","template_kind_id":7,"template_kind_name":"script","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"2beb206cac40d0b5100445cfd3171b80"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [1050a334-ed6f-4252-aaf4-b53522da4310]
      x-runtime: ['0.047865']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/69
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: http_proxy\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<% if (proxy = host_param(\"http_proxy\"))
        -%>\nhttp_proxy=<%= proxy %>\nexport http_proxy\nhttps_proxy=<%= proxy %>\nexport
        https_proxy\nno_proxy=localhost,127.0.0.0/8,*.local,*.<%= @host.domain.name
        -%>,puppet\nexport no_proxy\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":69,"name":"http_proxy","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:10 GMT']
      etag: [W/"e857731d705c4c33eb5c1eb2b156acd5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ce40d1c0-9b0e-418e-903a-1719ad457f94]
      x-runtime: ['0.054588']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/34
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: iPXE\nmodel: ProvisioningTemplate\nname:
        iPXE default local boot\nsnippet: false\n-%>\n#!ipxe\n\n# Skips booting from
        network and continues booting from next device\nexit\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":34,"name":"iPXE
        default local boot","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"8dbc2a0b800feca2c29711f131ea8a63"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [548efa31-30fc-40eb-99ef-11ad58cc0a51]
      x-runtime: ['0.049140']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/35
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: iPXE\nmodel: ProvisioningTemplate\nname:
        iPXE global default\nsnippet: false\n-%>\n#!ipxe\n\nset menu-default <%= global_setting(\"default_pxe_item_global\",
        \"local\") %>\nset menu-timeout 5000\n\n:start\nmenu iPXE global boot menu\nitem
        --key l local     Local boot (next entry)\nitem shell             Drop into
        iPXE shell\nitem reboot            Reboot system\nitem\nitem --key d discovery
        Discovery from ${next-server}:8000 (httpboot module)\nitem --key d discovery8448
        Discovery from ${next-server}:8448 (httpboot module)\nitem --key d discovery80
        Discovery from ${next-server}:80 (custom script)\nchoose --timeout ${menu-timeout}
        --default ${menu-default} selected || goto cancel\nset menu-timeout 0\ngoto
        ${selected}\n\n:cancel\necho Menu canceled, dropping to shell\n\n:shell\necho
        Use the command ''exit'' to return to menu\nshell\nset menu-timeout 0\ngoto
        start\n\n:failed\necho Boot failed, dropping to shell\ngoto shell\n\n:reboot\nreboot\n\n:local\nexit\n\n:discovery\ndhcp\nkernel
        http://${next-server}:8000/boot/fdi-image/vmlinuz0 initrd=initrd0.img rootflags=loop
        root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force rd.luks=0 rd.md=0
        rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset nokaslr proxy.url=<%=
        foreman_server_url %> proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd http://${next-server}:8000/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n\n:discovery80\ndhcp\nkernel http://${next-server}/httpboot/boot/fdi-image/vmlinuz0
        initrd=initrd0.img rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image
        acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset
        nokaslr proxy.url=<%= foreman_server_url %> proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}/httpboot/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n\n:discovery8000\ndhcp\nkernel http://${next-server}:8000/httpboot/boot/fdi-image/vmlinuz0
        initrd=initrd0.img rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image
        acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset
        nokaslr proxy.url=<%= foreman_server_url %> proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}:8000/httpboot/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":35,"name":"iPXE
        global default","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"4516652add564a972169752660de37b0"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [14611b48-a620-41c1-94b4-d1bc51523ba5]
      x-runtime: ['0.048087']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/36
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: iPXE\nmodel: ProvisioningTemplate\nname:
        iPXE intermediate script\nsnippet: false\n-%>\n#!ipxe\n# Intermediate iPXE
        script to report MAC address to Foreman\n<% (0..32).each do |i| -%>\n\n:net<%=
        i %>\nisset ${net<%= i -%>/mac} || goto no_nic\ndhcp net<%= i -%> || goto
        net<%= i+1 %>\nchain <%= foreman_url(''iPXE'') %>?mac=${net<%= i -%>/mac}
        || goto net<%= i+1 %>\n<% end -%>\n\n:net33\ngoto no_nic\n\nexit 0\n\n:no_nic\necho
        Failed to chainload from any network interface\nsleep 30\nexit 1\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":36,"name":"iPXE
        intermediate script","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"e037cb807509fec096d5f5edace9df11"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [96793a48-2885-47e5-97cc-bfc82653057d]
      x-runtime: ['0.053649']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/45
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Jumpstart
        default\nmodel: ProvisioningTemplate\noses:\n- Solaris\n%>\ninstall_type <%=
        @install_type %>\npartitioning explicit\n<%= @disk %>\n<% if @host.use_image  -%>\narchive_location
        nfs <%=@archive_location%>\n<% else -%>\nsystem_type <%= @system_type %>\npackage
        <%= @packages %> add\ncluster <%= @cluster %>\n<% end -%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":45,"name":"Jumpstart
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"dbecb9568eece82398e06e9504752685"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [db6acb9c-b21d-4204-ae5d-0bd41cf471ca]
      x-runtime: ['0.048695']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/28
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Jumpstart
        default finish\nmodel: ProvisioningTemplate\noses:\n- Solaris\n%>\nlogger
        \"Starting finish script\"\n\n# Do not turn the machine off after 30 minutes.
        Very annoying!\n/bin/touch /noautoshutdown\n\n# Install the root password\n/usr/bin/perl
        -p -i -e ''s/^root:[^:]+/root:<%= @host.root_pass.gsub(''/'', ''\\/'')-%>/''
        /etc/shadow\n\n# Root can ssh into this box. This is very useful while we
        rebuild this\n/usr/bin/perl -p -i -e \"s/PermitRootLogin no/PermitRootLogin
        yes/\" /etc/ssh/sshd_config\n\n# Now ensure that we have the newest puppet
        and facter installed\nmount /proc\n/usr/bin/cat /etc/mnttab | sed -e ''s/\\/a/\\//''
        | sed -e ''s/\\/a//'' > /a/etc/mnttab\n/sbin/mount -F mntfs mnttab /etc/mnttab\n/usr/sbin/mknod
        /devices/pseudo/random@0:random c 190 0\n/usr/sbin/mknod /devices/pseudo/random@0:urandom
        c 190 1\n/usr/sbin/pkgadd -a /tmp/admin -d http://get.opencsw.org/now all\n/opt/csw/bin/pkgutil
        -U -y\n/opt/csw/bin/pkgutil -u -f -y CSWfacter CSWpuppet CSWwget\n\n/usr/bin/echo
        \"Creating helper startup script to start puppet\"\nONETIME=S99.enable.puppet\n/usr/bin/cat
        > /etc/rc3.d/$ONETIME << EOF\n#!/bin/sh\n#\n# $ONETIME\n#\n# runs once at
        startup and then removes itself.\n#\nPATH=/usr/bin:/usr/sbin; export PATH\n/usr/sbin/svccfg
        import /var/opt/csw/svc/manifest/network/cswpuppetd.xml\n/usr/sbin/svcadm
        enable svc:/network/cswpuppetd\nsleep 2\nrm \\$0\nEOF\n\n/usr/bin/echo \"Configuring
        puppet\"\ncat > /etc/puppet/puppet.conf << EOF\n<%= snippet ''puppet.conf''
        -%>\nEOF\n# The x86 version of the puppet package ignores the --config parameter.
        This should fix that and not hurt other installations\nif [ -f /etc/opt/csw/puppet/puppetd.conf
        ]\nthen\n    rm -f /etc/opt/csw/puppet/puppetd.conf\n    ln -s /etc/puppet/puppet.conf
        /etc/opt/csw/puppet/puppetd.conf\nfi\n/opt/csw/bin/puppet agent --config /etc/puppet/puppet.conf
        -o --tags no_such_tag --server <%= @host.puppetmaster %> --no-daemonize\necho
        \"Informing Foreman that we are built\"\n/opt/csw/bin/wget --no-check-certificate
        -O /dev/null <%= foreman_url(''built'') %>\nexit 0\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":28,"name":"Jumpstart
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"82006dfafe62ca924125e95996784710"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7f7abd71-d85c-4fbd-bfc3-e73ee1be344d]
      x-runtime: ['0.046313']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/2
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: Jumpstart
        default PXEGrub\nmodel: ProvisioningTemplate\noses:\n- Solaris\n%>\ndefault=0\ntimeout=10\ntitle
        Solaris_10 Jumpstart\n        kernel <%= @host.multiboot %> kernel/unix -
        install dhcp nowin -B install_config=<%= @host.jumpstart_path %>,sysid_config=<%=
        @host.jumpstart_path %>/sysidcfg/sysidcfg_primary,install_media=<%= @host.install_path
        %>,install_boot=<%= @host.install_path %>/boot\n        module <%= @host.miniroot
        %>\ntitle Solaris 10\n        findroot (rootfs0,0,a)\n        kernel$ /platform/i86pc/multiboot\n        module
        /platform/i86pc/boot_archive\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":2,"name":"Jumpstart
        default PXEGrub","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"e1bd93fd4ca34df49bfdb53f57fe0f44"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a40c97e3-d05e-407a-8b2b-9eba3db63f23]
      x-runtime: ['0.047708']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/29
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Junos default
        finish\nmodel: ProvisioningTemplate\noses:\n- Junos\n-%>\nsystem {\n    host-name
        <%= @host %>;\n    time-zone <%= host_param(''time-zone'') || ''Etc/UTC''
        %>;\n    root-authentication {\n        encrypted-password \"<%= root_pass
        %>\"; ## SECRET-DATA\n    }\n    name-server {\n        <%= @host.subnet.dns_primary
        || ''8.8.8.8'' %>;\n        <% if @host.subnet.dns_secondary -%>\n        <%=
        @host.subnet.dns_secondary %>;\n        <% end -%>\n    }\n    ntp {\n        boot-server
        <%= host_param(''ntp-server'') || ''0.pool.ntp.org'' %>;\n        server <%=
        host_param(''ntp-server'') || ''0.pool.ntp.org'' %>;\n    }\n    login {\n        message
        \"This device was provisioned by using The Foreman!\\nSee http://theforeman.org/
        for further information.\\n\";\n        class automation {\n            permissions
        all;\n        }\n        user puppet {\n            uid 2001;\n            class
        automation;\n            authentication {\n                encrypted-password
        \"<%= root_pass %>\"; ## SECRET-DATA\n            }\n            shell csh;\n        }\n    }\n    services
        {\n        ssh {\n            protocol-version v2;\n        }\n        netconf
        {\n            ssh;\n        }\n    }\n    syslog {\n        user * {\n            any
        emergency;\n        }\n        file messages {\n            any notice;\n            authorization
        info;\n        }\n        file interactive-commands {\n            interactive-commands
        any;\n        }\n    }\n    ntp {\n        boot-server 0.pool.ntp.org;\n        server
        0.pool.ntp.org;\n        server 1.pool.ntp.org;\n    }\n    extensions {\n        providers
        {\n            juniper {\n                license-type juniper deployment-scope
        commercial;\n            }\n        }\n    }\n}\nchassis {\n    alarm {\n        management-ethernet
        {\n            link-down ignore;\n        }\n    }\n}\ninterfaces {\n    interface-range
        ACCESS-PORT {\n        member ge-0/0/0;\n        unit 0 {\n            family
        ethernet-switching {\n                port-mode access;\n            }\n        }\n    }\n    interface-range
        UPLINK-PORT {\n        member ge-0/0/47;\n        unit 0 {\n            family
        ethernet-switching {\n                port-mode trunk;\n                vlan
        {\n                    members all;\n                }\n            }\n        }\n    }\n    vlan
        {\n        unit 37 {\n            family inet;\n        }\n    }\n    vme
        {\n        unit 0 {\n            family inet {\n                dhcp;\n            }\n        }\n    }\n}\nprotocols
        {\n    igmp-snooping {\n        vlan all;\n    }\n    rstp;\n    lldp {\n        interface
        all;\n    }\n    lldp-med {\n        interface all;\n    }\n}\nethernet-switching-options
        {\n    storm-control {\n        interface all;\n    }\n    bpdu-block {\n        interface
        ACCESS-PORT;\n        disable-timeout 120;\n    }\n}\nvlans {\n    testlan
        {\n        vlan-id 37;\n        l3-interface vlan.37;\n    }\n}\ngroups {\n    fmztp
        {\n        apply-macro conf {\n            package jinstall-ex-4200-<%= @host.operatingsystem.major
        %>R<%= @host.operatingsystem.minor %>-domestic-signed.tgz;\n            puppet
        jpuppet-ex-1.0R1.1.tgz;\n        }\n    }\n}\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":29,"name":"Junos
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"17432cd0e07f9516f37257061f1c7606"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d2a3042c-d845-4d5c-ae9d-573ff7a44e98]
      x-runtime: ['0.046635']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/46
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Junos
        default SLAX\nmodel: ProvisioningTemplate\noses:\n- Junos\n-%>\nversion 1.0;\n\n/*
        ------------------------------------------------------------------\n * LICENSE\n
        * ------------------------------------------------------------------\n *\n
        * Copyright (c) 2013, Juniper Networks\n *\n * All rights reserved.\n *\n
        * Redistribution and use in source and binary forms, with or without\n * modification,
        are permitted provided that the following conditions are met: \n *\n * (1)
        Redistributions of source code must retain the above copyright notice, this
        \n * list of conditions and the following disclaimer. \n *\n * (2) Redistributions
        in binary form must reproduce the above copyright notice,\n * this list of
        conditions and the following disclaimer in the documentation\n * and/or other
        materials provided with the distribution. \n *\n * THIS SOFTWARE IS PROVIDED
        BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR
        IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES
        OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED.
        IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY
        DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n
        * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n
        * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
        AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
        OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
        THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n
        *\n * The views and conclusions contained in the software and documentation
        are those\n * of the authors and should not be interpreted as representing
        official policies, \n * either expressed or implied, of Juniper Networks.\n
        * \n *\n * ------------------------------------------------------------------\n
        * AUTHORS AND CONTRIBUTORS\n * ------------------------------------------------------------------\n
        *\n * Jeremy Schulman, Juniper Networks\n * - initial release (https://github.com/jeremyschulman/jctyztp/)\n
        *\n * Frank Wall, noris network AG\n * - adapt for integration in The Foreman\n
        * - fix compatibility with older Junos releases\n * \n *\n * ------------------------------------------------------------------\n
        * LIMITATIONS\n * ------------------------------------------------------------------\n
        *\n * To maintain backwards compatibility with JunOS 11.x (and maybe \n *
        even 10.x) you MUST AVOID all of these:\n * - global variable $junos-context
        (introduced with Junos 11.1)\n * - mutable variables (introduced with JunOS
        12.2 -> SLAX 1.1)\n * - native functions (introduced with JunOS 12.2 -> SLAX
        1.1)\n *\n * ------------------------------------------------------------------\n
        */\n\n/* ------------------------------------------------------------------
        */\n/* XML namespaces                                                     */\n/*
        ------------------------------------------------------------------ */\n\n/*
        Juniper */\nns junos = \"http://xml.juniper.net/junos/*/junos\";\nns xnm =
        \"http://xml.juniper.net/xnm/1.1/xnm\";\nns jcs = \"http://xml.juniper.net/junos/commit-scripts/1.0\";\nns
        ztp = \"http://xml.juniper.net/junos/ztp\";\n\n/* EXSLT */\nns exsl extension
        = \"http://exslt.org/common\";\nns func extension = \"http://exslt.org/functions\";\nns
        str extension = \"http://exslt.org/strings\";\n\n/* private namespace for
        this script */\nns jctyztp = \"http://xml.juniper.com/jctyztp/1.0\";\nns fmztp
        = \"http://xml.juniper.com/fmztp/1.0\";\n\n/* depending on Junos version relative
        path may be broken */\n/* import ''../import/junos.xsl''; */\nimport ''/usr/libdata/cscript/import/junos.xsl'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Script parameters                                                  */\n/*
        ------------------------------------------------------------------ */\n\nparam
        $server = ''ztpserver'';\nparam $mediapath = ''<%= @mediapath %>'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Constants                                                          */\n/*
        ------------------------------------------------------------------ */\n\nvar
        $APPNAME = ''foreman-ztp'';\nvar $SYSLOG = ''user.info'';\nvar $TMPDIR = ''/var/tmp'';\nvar
        $JUNOS_CONF = ''/var/tmp/junos.conf'';\n\nvar $ZTP_GROUP_NAME = \"fmztp\";\nvar
        $ZTP_MACRO_NAME = \"conf\";\nvar $ZTP_LOCKFILE = ''/tmp/fmztp.lock'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Global variables                                                   */\n/*
        ------------------------------------------------------------------ */\n\n/*
        Open a connection to the device API */\nvar $jnx = jcs:open();\n\n/* ------------------------------------------------------------------
        */\n/*                                MAIN                                */
        \n/* ------------------------------------------------------------------ */\n\nmatch
        / {\n\n  /* Terminate on connection error */\n  if(not( $jnx )) {\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable to connect to Junos API\");\n    expr
        fmztp:terminate();\n  }\n  \n  var $running = fmztp:only_once();\n  if( $running
        ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": start op script: already
        running, exiting...\" );\n    <xsl:message terminate=\"yes\">;\n  }\n  \n  /*
        if the $JUNOS_CONF file is not on the device, then */\n  /* download it from
        the server */\n  if(not( fmztp:file-exists( $JUNOS_CONF ))) {\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": obtaining device config file\");\n    var $cp = fmztp:dl_junos_conf();\n  }\n  \n  /*
        now load $JUNOS_CONF into the candidate configuration so we can */\n  /* extract
        the ZTP config */\n  var $ztp_conf = fmztp:ld_junos_conf();\n  var $has_version
        = $ztp_conf/has_version;\n  var $new_package = $ztp_conf/package;\n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": preparing update from \", $has_version,
        \" to \", $new_package );\n  \n  /* if we have a version difference, then
        we will install the new OS */\n  /* and reboot the device.  the $JUNOS_CONF
        file will be loaded on */\n  /* after the install process completes */\n  if(
        $ztp_conf/install ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": Junos install
        required\" );\n    var $os = fmztp:install_os( $ztp_conf );\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": rebooting in 60 seconds\" );\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": SCRIPT-END\");\n    expr fmztp:reboot( 1 );\n    expr
        jcs:close( $jnx );\n  }\n  else {\n    expr jcs:syslog( $SYSLOG, $APPNAME,
        \": no Junos install required\" );\n    /* puppet agent is only supported
        on Junos 12.3R2.5 */\n    if( jcs:regex( \"12.3R2.5\", $ztp_conf/has_version
        )) {\n\texpr jcs:syslog( $SYSLOG, $APPNAME, \": puppet agent install required\"
        );\n\tvar $puppet = fmztp:install_puppet( $ztp_conf );\n    }\n    else {\n\texpr
        jcs:syslog( $SYSLOG, $APPNAME, \": os version is \", $has_version, \", but
        puppet agent is only available on 12.3R2.5\" );\n    }\n    var $fini = fmztp:finalize();\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": SCRIPT-END\");\n    expr jcs:close( $jnx
        );\n  }\n}\n\n/* ------------------------------------------------------------------
        */\n/* HTTP Junos configuration file onto the device                      */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:dl_junos_conf\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        downloading new Junos conf...\");\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        URL: \", ''<%= foreman_url(''finish'') %>'');\n\n  var $get = <file-copy>
        {\n    <source> ''<%= foreman_url(''finish'') %>'';\n    <destination> $JUNOS_CONF;\n    <staging-directory>
        $TMPDIR;\n  };\n\n  var $got = jcs:execute( $jnx, $get );\n\n  if(not( fmztp:file-exists(
        $JUNOS_CONF ))) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable
        to find new Junos conf at \", $JUNOS_CONF);\n    expr fmztp:terminate();\n  }\n\n  <func:result
        select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Load the $JUNOS_CONF file into the candidate config and extract    */\n/*
        the ZTP config from the [edit groups] area.  Do *NOT* commit       */\n/*
        this configuration yet, since we may need to install the OS first  */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:ld_junos_conf\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        loading new Junos conf...\");\n\n  /* get the current version from the configuration
        file */\n  \n  var $get_cur_ver = <get-configuration database=''committed''>
        { <configuration> { <version>; }};\n  var $got_cur_ver = jcs:execute( $jnx,
        $get_cur_ver );\n\n  /* now load the configuration file we got from the ztp
        server */\n  var $do_load = <load-configuration action=\"override\" url=$JUNOS_CONF
        format=\"text\">;\n  var $did_load = jcs:execute( $jnx, $do_load );\n  if(not(
        $did_load/load-success )) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR:
        unable to load config \", $JUNOS_CONF );\n    expr fmztp:terminate();\n  }\n  \n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": extracting Junos config parameters...\");\n  var
        $get = <get-configuration> { <configuration> {\n    <version>;\n    <groups>
        { <name> $ZTP_GROUP_NAME;\n      <apply-macro> { <name> $ZTP_MACRO_NAME;\n      }\n    }\n  }};\n  \n  var
        $got = jcs:execute( $jnx, $get );\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": package: \", $got//data[name = ''package'']/value);\n  expr jcs:syslog(
        $SYSLOG, $APPNAME, \": URL: \", $mediapath);\n\n  /* create a node-set to
        store the following elements             */\n  /* has_version = current Junos
        version string                    */\n  /* package = filename of Junos package
        (*.tgz)                   */\n  /* mediapath = URL where package is obtained
        from                */\n  /* install = present if a install is requeired                   */\n  var
        $ver = $got_cur_ver/version;\n  var $package = $got//data[name = ''package'']/value;\n  var
        $puppet = $got//data[name = ''puppet'']/value;\n  var $conf := {\n    <has_version>
        $ver; \n    <package> $package;\n    <puppet> $puppet;\n    <url> $mediapath;\n    if(not(
        jcs:regex( $ver, $package ))) {\n      <install>;\n    }\n  }\n\n  /* @@@
        should put some trap here on ensuring that the config */\n  /* @@@ file actually
        had the correct group/macro defined */\n    \n  <func:result select=\"$conf\">;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Junos Software Installation - download the software from the HTTP  */\n/*
        server and perform the ''request system software add'' operation     */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:install_os\">\n{\n  param $ztp_conf;\n\n  var $local_image =
        $TMPDIR _ \"/\" _ $ztp_conf/package;\n  \n  if( fmztp:file-exists( $local_image
        )) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": junos image exists, no download
        needed\" );\n  }\n  else {\n  \n    /* request system storage cleanup */\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": cleaning filesystem\" );\n    var $clean
        = jcs:execute( $jnx, ''request-system-storage-cleanup'' ); \n\n    /* file
        copy .... */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": downloading junos
        image...\" );    \n    expr jcs:syslog( $SYSLOG, $APPNAME, \": URL: \", $ztp_conf/url,
        $ztp_conf/package );\n    var $do_copy = <file-copy> {\n      <source> $ztp_conf/url
        _ $ztp_conf/package;\n      <destination> $TMPDIR;\n      <staging-directory>
        $TMPDIR;\n    };\n    var $did_copy = jcs:execute( $jnx, $do_copy );\n    \n    /*
        trap error here */\n    if( not(fmztp:file-exists( $local_image )) ) {\n        expr
        jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: unable to download junos image\"
        );\n        expr fmztp:terminate();\n    }\n  }\n  \n  /* request system software
        add ... */\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": installing junos image\"
        );    \n  var $do_install = <request-package-add> {\n    <no-validate>;\n    <package-name>
        $local_image;\n  };\n  var $did_install = jcs:execute( $jnx, $do_install );\n  /*
        @@@ need to trap error here on $did_install */\n  \n  expr jcs:syslog( $SYSLOG,
        $APPNAME, \": completed installing junos image\" );\n   \n  <func:result select=\"true()\">;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Reboot the device given a delay, in minutes                        */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:reboot\">\n{\n  param $in_min;\n\n  var $do_reboot = <request-reboot>
        { <in> $in_min; };\n  var $did_reboot = jcs:execute( $jnx, $do_reboot );\n  <func:result
        select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Puppet Agent Installation - download the software from the HTTP    */\n/*
        server and perform the ''request system software add'' operation     */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:install_puppet\">\n{\n  param $ztp_conf;\n  expr jcs:syslog(
        $SYSLOG, $APPNAME, \": starting puppet installation...\" );\n\n  if (fmztp:is-installed(\"puppet\"))
        {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package puppet is already installed\"
        );\n    <func:result select=\"true()\">;\n  }\n\n  var $local_image = $TMPDIR
        _ \"/\" _ $ztp_conf/puppet;\n  \n  if( fmztp:file-exists( $local_image ))
        {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package puppet exists, no download
        needed\" );\n  }\n  else {\n  \n    /* request system storage cleanup */\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": cleaning filesystem\" );\n    var $clean
        = jcs:execute( $jnx, ''request-system-storage-cleanup'' ); \n\n    /* file
        copy .... */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": downloading puppet
        image...\" );    \n    expr jcs:syslog( $SYSLOG, $APPNAME, \": URL: \", $ztp_conf/url,
        $ztp_conf/puppet );    \n    var $do_copy = <file-copy> {\n      <source>
        $ztp_conf/url _ $ztp_conf/puppet;\n      <destination> $TMPDIR;\n      <staging-directory>
        $TMPDIR;\n    };\n    var $did_copy = jcs:execute( $jnx, $do_copy );\n    \n    /*
        trap error on $did_copy */\n    if( not(fmztp:file-exists( $local_image ))
        ) {\n      expr jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: failed to download
        puppet image\" );\n      expr fmztp:terminate();\n    }\n  }\n\n  /* request
        system software add ... */\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": installing
        puppet image\" );    \n  var $do_install = <request-package-add> {\n    <no-validate>;\n    <package-name>
        $local_image;\n  };\n  var $did_install = jcs:execute( $jnx, $do_install );\n  \n  /*
        NOTE: To complete the puppet installation you need to take manual steps, see:\n   *       http://www.juniper.net/techpubs/en_US/release-independent/junos-puppet/information-products/pathway-pages/index.html\n   */\n\n  /*
        validate installation */\n  if (not(fmztp:is-installed(\"puppet\"))) {\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: failed to install package puppet\"
        );\n    expr fmztp:terminate();\n  }\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": completed installing puppet image\" );\n   \n  <func:result select=\"true()\">;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Finalize the ZTP process; i.e. after the OS is correct.  Remove    */\n/*
        the $JUNOS_CONF file and committing the configuration to make      */\n/*
        it active.                                                         */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:finalize\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": deleting
        temp config file...\");  \n  var $rm1 = fmztp:file-delete( $JUNOS_CONF );\n\n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": sending finish signal to foreman...\");  \n  var
        $do_foreman = <file-copy> {\n      <source> ''<%= foreman_url %>'';\n      <destination>
        \"/tmp\";\n      <staging-directory> \"/tmp\";\n  };\n  var $did_foreman =
        jcs:execute( $jnx, $do_foreman );\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": deleting ztp lock file...\");  \n  var $rm2 = fmztp:file-delete( $ZTP_LOCKFILE
        );\n\n  /* commit the configuration that was previously loaded */  \n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": committing configuration...\");  \n  var
        $commit = jcs:execute( $jnx, ''commit-configuration'' );\n  if( $commit//self::xnm:error
        ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable to commit configuration:
        \", $commit//self::xnm:error/message );\n    var $die = fmztp:terminate();\n  }\n\n  <func:result
        select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Helper routine: check to see if a file exists on the device,       */\n/*
        returns [ true | false ]                                           */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:file-exists\">\n{\n  param $filename;\n  var $ls_file = <file-list>
        { <path> $filename; };\n  var $ls_got = jcs:execute( $jnx, $ls_file );\n  var
        $retval = boolean( $ls_got//file-information );\n\n  <func:result select=\"$retval\">;\n}\n\n<func:function
        name=\"fmztp:file-delete\">\n{\n  param $filename;\n  var $do_rm = <file-delete>
        { <path> $filename; };\n  var $did_rm = jcs:execute( $jnx, $do_rm );\n  /*
        @@@ trap error */\n  \n  <func:result select=\"true()\">;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Helper routine: create a lockfile to make sure the script only     */\n/*
        runs once, and terminate if it is already running.                 */\n/*
        returns [ true | false ]                                           */\n/*
        ------------------------------------------------------------------ */\n\n<func:function
        name=\"fmztp:only_once\">\n{\n  if( fmztp:file-exists( $ZTP_LOCKFILE )) {\n    <func:result
        select=\"true()\">;\n  }\n  else {\n    var $do_lock = <file-put> {\n      <filename>
        $ZTP_LOCKFILE;\n      <encoding> ''ascii'';\n      <file-contents> ''locked'';\n    };\n    var
        $did_lock = jcs:execute( $jnx, $do_lock );\n    <func:result select=\"false()\">;\n  }\n}\n\n<func:function
        name=\"fmztp:terminate\">\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": SCRIPT-FAILED\"
        );\n  var $rm_lock = fmztp:file-delete( $ZTP_LOCKFILE );\n  <xsl:message terminate=\"yes\">;\n}\n\n/*
        ------------------------------------------------- */\n/* check if software
        package is installed            */\n/* -------------------------------------------------
        */\n<func:function name=\"fmztp:is-installed\">\n{\n  param $string;\n\n  var
        $do_query = <get-software-information>;\n  var $did_query = jcs:execute( $jnx,
        $do_query );\n\n  if( jcs:regex( $string, $did_query )) {\n    expr jcs:output(\"package
        found: \", $string);\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package
        found: \", $string);\n    <func:result select=\"true()\">;\n  }\n  else {\n    expr
        jcs:output(\"package NOT found: \", $string);\n    expr jcs:syslog( $SYSLOG,
        $APPNAME, \": package NOT found: \", $string);\n    <func:result select=\"false()\">;\n  }\n}\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":46,"name":"Junos
        default SLAX","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"e17c18bc9c7ed5871140bb1d880ff63a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fb90c81e-2541-4f17-bff7-b2fa4fee81dd]
      x-runtime: ['0.047289']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/25
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: ZTP\nname: Junos default
        ZTP config\nmodel: ProvisioningTemplate\noses:\n- Junos\n-%>\nsystem {\n    host-name
        <%= @host.shortname %>;\n    root-authentication {\n      encrypted-password
        \"<%= root_pass %>\"; ## SECRET-DATA\n    }\n    services {\n        ssh;\n        netconf
        {\n            ssh;\n        }\n    }\n    syslog {\n        user * {\n            any
        emergency;\n            user info;\n        }\n        file messages {\n            any
        notice;\n            authorization info;\n        }\n        console {\n            user
        info;\n        }\n    }\n}\ninterfaces {\n    vme {\n        unit 0 {\n            family
        inet {\n                dhcp;\n            }\n        }\n    }\n}\nevent-options
        {\n    generate-event {\n        fmztp time-interval 90;\n    }\n    policy
        fmztp {\n        events fmztp;\n        then {\n            execute-commands
        {\n                commands {\n                    \"op url <%= foreman_url(''provision'')%>.slax\";\n                }\n            }\n        }\n    }\n}\nprotocols
        {\n    igmp-snooping {\n        vlan all;\n    }\n    rstp;\n    lldp {\n        interface
        all;\n    }\n    lldp-med {\n        interface all;\n    }\n}\nethernet-switching-options
        {\n    storm-control {\n        interface all;\n    }\n}\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":25,"name":"Junos
        default ZTP config","template_kind_id":9,"template_kind_name":"ZTP","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"2c6812c79eb7bbe5b7221669cc6e38f2"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3fec4462-19ae-4387-8e99-61b0a2adf7dc]
      x-runtime: ['0.046729']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/47
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Kickstart
        default\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n- RedHat\n%>\n<%#\nThis
        template accepts the following parameters:\n- lang: string (default=\"en_US.UTF-8\")\n-
        selinux-mode: string (default=\"enforcing\")\n- keyboard: string (default=\"us\")\n-
        time-zone: string (default=\"UTC\")\n- http-proxy: string (default=\"\")\n-
        http-proxy-port: string (default=\"\")\n- force-puppet: boolean (default=false)\n-
        enable-epel: boolean (default=true)\n- enable-puppetlabs-repo: boolean (default=false)\n-
        enable-puppetlabs-pc1-repo: boolean (default=false)\n- enable-puppetlabs-puppet5-repo:
        boolean (default=false)\n- salt_master: string (default=undef)\n- ntp-server:
        string (default=\"0.fedora.pool.ntp.org\")\n- bootloader-append: string (default=\"nofb
        quiet splash=quiet\")\n- disable-firewall: boolean (default=false)\n- package_upgrade:
        boolean (default=true)\n- disable-uek: boolean (default=false)\n- use-ntp:
        boolean (default depends on OS release)\n- fips_enabled: boolean (default=false)\n%>\n<%\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' && @host.operatingsystem.name
        != ''Fedora''\n  is_fedora = @host.operatingsystem.name == ''Fedora''\n  os_major
        = @host.operatingsystem.major.to_i\n  os_minor = @host.operatingsystem.minor.to_i\n  realm_compatible
        = (@host.operatingsystem.name == ''Fedora'' && os_major >= 20) || (rhel_compatible
        && os_major >= 7)\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  proxy_string = proxy_uri ? \" --proxy=#{proxy_uri}\" : ''''\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy) && @host.chef_proxy\n  section_end
        = (rhel_compatible && os_major <= 5) ? '''' : ''%end''\n  use_ntp = host_param_true?(''use-ntp'')
        || (is_fedora && os_major < 16) || (rhel_compatible && os_major <= 7)\n%>\n<%
        if (is_fedora && os_major < 29) || (rhel_compatible && os_major <= 7) -%>\ninstall\n<%
        end -%>\n<%\nif host_param(''kickstart_liveimg'')\n  img_name = host_param(''kickstart_liveimg'')\n  liveimg_url
        = if host_param(''kt_activation_keys'')\n    repository_url(img_name, ''isos'')\n  else\n    if
        img_name.match(%r|^([\\w\\-\\+]+)://|)\n      img_name\n    else\n      \"#{@host.operatingsystem.medium_uri(@host)}/#{img_name}\"\n    end\n  end\n%>\nliveimg
        --url=<%= liveimg_url %> <%= proxy_string %>\n<% else %>\n<%= @mediapath %><%=
        proxy_string %>\n<% @additional_media.each do |medium| -%>\nrepo --name <%=
        medium[:name] %> --baseurl <%= medium[:url] %> <%= medium[:install] ? '' --install''
        : '''' %><%= proxy_string %>\n<% end -%>\n<% end %>\nlang <%= host_param(''lang'')
        || ''en_US.UTF-8'' %>\nselinux --<%= host_param(''selinux-mode'') || host_param(''selinux'')
        || ''enforcing'' %>\nkeyboard <%= host_param(''keyboard'') || ''us'' %>\nskipx\n\n<%
        subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?) -%>\n<%
        dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n<% dhcp = !@static
        -%>\n<% end -%>\n\nnetwork --bootproto <%= dhcp ? ''dhcp'' : \"static --ip=#{@host.ip}
        --netmask=#{subnet.mask} --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary,
        subnet.dns_secondary].select{ |item| item.present? }.join('','')} --mtu=#{subnet.mtu.to_s}\"
        %> --hostname <%= @host %><%= os_major >= 6 ? \" --device=#{@host.mac}\" :
        '''' -%>\n\nrootpw --iscrypted <%= root_pass %>\n<% if host_param_true?(''disable-firewall'')
        -%>\nfirewall --disable\n<% else -%>\nfirewall --<%= os_major >= 6 ? ''service=''
        : '''' %>ssh\n<% end -%>\n<% if (is_fedora && os_major >= 28) || (rhel_compatible
        && os_major > 7) -%>\nauthselect --useshadow --passalgo=<%= @host.operatingsystem.password_hash.downcase
        || ''sha256'' %> --kickstart\n<% else -%>\nauthconfig --useshadow --passalgo=<%=
        @host.operatingsystem.password_hash.downcase || ''sha256'' %> --kickstart\n<%
        end -%>\n<% if use_ntp -%>\ntimezone --utc <%= host_param(''time-zone'') ||
        ''UTC'' %>\n<% else -%>\ntimezone --utc <%= host_param(''time-zone'') || ''UTC''
        %> <%= host_param(''ntp-server'') ? \"--ntpservers #{host_param(''ntp-server'')}\"
        : '''' %>\n<% end -%>\n\n<% if rhel_compatible -%>\nservices --disabled gpm,sendmail,cups,pcmcia,isdn,rawdevices,hpoj,bluetooth,openibd,avahi-daemon,avahi-dnsconfd,hidd,hplip,pcscd\n<%
        end -%>\n\n<% if realm_compatible && host_enc[''parameters''][''realm''] &&
        @host.realm && @host.realm.realm_type == ''Active Directory'' -%>\n# One-time
        password will be requested at install time. Otherwise, $HOST[OTP] is used
        as a placeholder value.\nrealm join --one-time-password=''<%= @host.otp ||
        \"$HOST[OTP]\" %>'' <%= @host.realm %>\n<% end -%>\n\n<% if @host.operatingsystem.name
        == ''Fedora'' -%>\nrepo --name=fedora-everything --mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-<%=
        @host.operatingsystem.major %>&arch=<%= @host.architecture %><%= proxy_string
        %>\n<% end -%>\n\n<% if @host.operatingsystem.name == ''OracleLinux'' && os_major
        == 7 && os_minor < 5 -%>\nrepo --name=\"Server-Mysql\"\n<% end -%>\n\n<% if
        @host.operatingsystem.name == ''Fedora'' && os_major <= 16 -%>\n# Bootloader
        exception for Fedora 16:\nbootloader --append=\"<%= host_param(''bootloader-append'')
        || ''nofb quiet splash=quiet'' %> <%= ks_console %>\" <%= @grub_pass %>\npart
        biosboot --fstype=biosboot --size=1\n<% else -%>\nbootloader --location=mbr
        --append=\"<%= host_param(''bootloader-append'') || ''nofb quiet splash=quiet''
        %>\" <%= @grub_pass %>\n<% if os_major == 5 -%>\nkey --skip\n<% end -%>\n<%
        end -%>\n\n<% if @dynamic -%>\n%include /tmp/diskpart.cfg\n<% else -%>\n<%=
        @host.diskLayout %>\n<% end -%>\n\ntext\n<% if @host.respond_to?(:bootdisk_build?)
        && @host.bootdisk_build? %>\nreboot --eject\n<% else -%>\nreboot\n<% end -%>\n\n%packages\n<%=
        snippet_if_exists(template_name + \" custom packages\") %>\nyum\ndhclient\n<%
        if use_ntp -%>\nntp\n<% else -%>\nchrony\n<% end -%>\nwget\n@Core\n<% if os_major
        >= 6 -%>\nredhat-lsb-core\n<% end -%>\n<% if host_param_true?(''fips_enabled'')
        -%>\n<%=   snippet ''fips_packages'' %>\n<% end -%>\n\n\n<% if salt_enabled
        %>\nsalt-minion\n<% end -%>\n<%= section_end -%>\n\n<% if @dynamic -%>\n%pre\n<%=
        snippet_if_exists(template_name + \" custom pre\") %>\n<%= @host.diskLayout
        %>\n<%= section_end -%>\n<% end -%>\n\n%post --nochroot\nexec < /dev/tty3
        > /dev/tty3\n#changing to VT 3 so that we can see whats going on....\n/usr/bin/chvt
        3\n(\ncp -va /etc/resolv.conf /mnt/sysimage/etc/resolv.conf\n/usr/bin/chvt
        1\n) 2>&1 | tee /mnt/sysimage/root/install.postnochroot.log\n<%= section_end
        -%>\n\n<%#\nMain post script, if it fails the last post is still executed.\n%>\n%post
        --log=/mnt/sysimage/root/install.post.log\nlogger \"Starting anaconda <%=
        @host %> postinstall\"\nexec < /dev/tty3 > /dev/tty3\n#changing to VT 3 so
        that we can see whats going on....\n/usr/bin/chvt 3\n<%= snippet_if_exists(template_name
        + \" custom post\") %>\n<% if subnet.respond_to?(:dhcp_boot_mode?) || @host.subnet6.respond_to?(:dhcp_boot_mode?)
        -%>\n<%= snippet ''kickstart_networking_setup'' %>\n<% end -%>\n\necho \"Updating
        system time\"\n<% if use_ntp -%>\n/usr/sbin/ntpdate -sub <%= host_param(''ntp-server'')
        || ''0.fedora.pool.ntp.org'' %>\n<% else -%>\n/usr/bin/chronyc makestep\n<%
        end -%>\n/usr/sbin/hwclock --systohc\n\n<% if proxy_uri -%>\n# Yum proxy\necho
        ''proxy = <%= proxy_uri %>'' >> /etc/yum.conf\n<% end -%>\n\n<% if rhel_compatible
        && !host_param_false?(''enable-epel'') -%>\n<%= snippet ''epel'' -%>\n<% end
        -%>\n\n<%= snippet ''redhat_register'' %>\n\n<% if host_enc[''parameters''][''realm'']
        && @host.realm && (@host.realm.realm_type == ''FreeIPA'' || @host.realm.realm_type
        == ''Red Hat Identity Management'') -%>\n<%= snippet ''freeipa_register''
        %>\n<% end -%>\n\n<% unless host_param_false?(''package_upgrade'') -%>\n#
        update all the base packages from the updates repository\nif [ -f /usr/bin/dnf
        ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n<% if @host.operatingsystem.name == ''OracleLinux'' && host_param_true?(''disable-uek'')
        -%>\n# Uninstall the Oracle Unbreakable Kernel packages\nyum -t -y remove
        kernel-uek*\nsed -e ''s/DEFAULTKERNEL=kernel-uek/DEFAULTKERNEL=kernel/g''
        -i /etc/sysconfig/kernel\n<% end -%>\n\n<%= snippet(''ansible_provisioning_callback'')
        %>\n\n<%= snippet ''efibootmgr_netboot'' %>\n\ntouch /tmp/foreman_built\n<%=
        section_end -%>\n\n<%#\nThe last post section halts Anaconda to prevent endless
        loop\n%>\n<% if (is_fedora && os_major < 20) || (rhel_compatible && os_major
        < 7) -%>\n%post\n<% else -%>\n%post --erroronfail\n<% end -%>\nif test -f
        /tmp/foreman_built; then\n  echo \"calling home: build is done!\"\n  <%= indent(2,
        skip1: true) { snippet(''built'', :variables => { :endpoint => ''built'',
        :method => ''POST'', :body_file => ''/mnt/sysimage/root/install.post.log''
        }) } -%>\nelse\n  echo \"calling home: build failed!\"\n  <%= indent(2, skip1:
        true) { snippet(''built'', :variables => { :endpoint => ''failed'', :method
        => ''POST'', :body_file => ''/mnt/sysimage/root/install.post.log'' }) } -%>\nfi\n\nsync\n<%=
        section_end -%>\n\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":47,"name":"Kickstart
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"6e804666ca1188a846aab7a2939c3ee3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0625b6dc-2711-4652-bfb2-3bd9bc1b16c7]
      x-runtime: ['0.051124']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/30
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Kickstart
        default finish\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n%>\n  <%#\n  This
        template accepts the following parameters:\n  - bootloader-append: string
        (default=\"nofb quiet splash=quiet\")\n  - force-puppet: boolean (default=false)\n  -
        ntp-server: string (default=\"0.fedora.pool.ntp.org\")\n  - package_upgrade:
        boolean (default=true)\n  - salt_master: string (default=undef)\n  %>\n<%
        if @host.subnet.respond_to?(:dhcp_boot_mode?) -%>\n<%= snippet ''kickstart_networking_setup''
        %>\nservice network restart\n<% end -%>\n\n<%\n  rhel_compatible = @host.operatingsystem.family
        == ''Redhat'' && @host.operatingsystem.name != ''Fedora''\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  proxy_uri = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n%>\n\n<% if @host.provision_method == ''image'' && root_pass.present?
        -%>\n# Install the root password\necho ''root:<%= root_pass -%>'' | /usr/sbin/chpasswd
        -e\n<% end -%>\n\n<% if proxy_uri -%>\n# Yum proxy\necho ''proxy = <%= proxy_uri
        %>'' >> /etc/yum.conf\n<% end -%>\n\n#update local time\necho \"updating system
        time\"\nyum -y install ntpdate\n/usr/sbin/ntpdate -sub <%= host_param(''ntp-server'')
        || ''0.fedora.pool.ntp.org'' %>\n/usr/sbin/hwclock --systohc\n\n<% if rhel_compatible
        && !host_param_false?(''enable-epel'') -%>\n<%= snippet ''epel'' -%>\n<% end
        -%>\n\n<%= snippet ''redhat_register'' %>\n\n<% if host_enc[''parameters''][''realm'']
        && @host.realm && (@host.realm.realm_type == ''FreeIPA'' || @host.realm.realm_type
        == ''Red Hat Identity Management'') -%>\n<%= snippet ''freeipa_register''
        %>\n<% end -%>\n\n<% unless host_param_false?(''package_upgrade'') -%>\n#
        update all the base packages from the updates repository\nif [ -f /usr/bin/dnf
        ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n<% if host_param_true?(''ansible_tower_provisioning'') -%>\n<%=
        save_to_file(''/root/ansible_provisioning_call.sh'', snippet(''ansible_tower_callback_script''))
        %>\n/root/ansible_provisioning_call.sh\n<% end -%>\n\nsync\n\nexit 0\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":30,"name":"Kickstart
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"bbf3dd1a21c38439c802d44c42925b73"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [95e66107-9a23-45dc-a5fe-8ab7cde9637b]
      x-runtime: ['0.051710']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/37
  response:
    body: {string: !!python/unicode '{"template":"#!gpxe\n<%#\nkind: iPXE\nname: Kickstart
        default iPXE\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n- RedHat\n%>\n<%
        subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?) && subnet.dhcp_boot_mode?
        -%>\n  <% static = '''' -%>\n<% else -%>\n  <% static_arg = ''static=yes''
        -%>\n  <% static = (@host.token.nil? ? ''?'' : ''&'') + static_arg -%>\n<%
        end -%>\n\n<% stage2 = host_param(''kickstart_liveimg'') ? ''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s : '''' %>\n\n<%- if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')
        %>\n<%-   fips = ''fips=1'' -%>\n<%- else -%>\n<%-   fips = '''' -%>\n<%-
        end -%>\n\nkernel <%= \"#{@host.url_for_boot(:kernel)}\" %> initrd=initrd.img
        ks=<%= foreman_url(''provision'')%> inst.stage2=<%= @host.operatingsystem.medium_uri(@host)
        %> <%= stage2 %> <%= static %> ksdevice=<%= @host.mac %> network kssendmac
        ks.sendmac inst.ks.sendmac ip=${netX/ip} netmask=${netX/netmask} gateway=${netX/gateway}
        dns=${dns} <%= fips %>\ninitrd <%= \"#{@host.url_for_boot(:initrd)}\" %>\nimgstat\nsleep
        2\nboot\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":37,"name":"Kickstart
        default iPXE","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"63aa8ef681296d39c76baa0e77776534"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [102c9b9b-eb4a-4657-b2b5-82d61812c033]
      x-runtime: ['0.068628']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/3
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: Kickstart
        default PXEGrub\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-
        RedHat\n-%>\n# This file was deployed via ''<%= template_name %>'' template\n\n<%\n  major
        = @host.operatingsystem.major.to_i\n  mac = @host.provision_interface.mac\n\n  #
        Tell Anaconda to perform network functions with boot interface\n  #  both
        current and legacy syntax provided\n  options = [\"network\", \"ksdevice=bootif\",
        \"ks.device=bootif\"]\n  if mac\n    bootif = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) && major < 17) || major < 7\n      #
        old Anaconda found in Fedora 16 or RHEL 6 and older\n      dns_servers = dns.join('','')\n      options.push(\"ip=#{ip}\",
        \"netmask=#{mask}\", \"gateway=#{gw}\", \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  ksoptions
        = options.join('' '')\n-%>\n\ndefault=0\ntimeout=<%= host_param(''loader_timeout'')
        || 10 %>\n\ntitle <%= template_name %>\n  root (nd)\n  kernel (nd)/../<%=
        @kernel %> ks=<%= foreman_url(''provision'') %> <%= pxe_kernel_options %>
        <%= ksoptions %>\n  initrd (nd)/../<%= @initrd %>\n\n<%= snippet_if_exists(template_name
        + \" custom menu\") %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":3,"name":"Kickstart
        default PXEGrub","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"e263a2455979992fb4e674ba68a94480"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5c9a0da0-71de-44e7-8b7b-c41b0bcf76f9]
      x-runtime: ['0.069192']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/6
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: Kickstart
        default PXEGrub2\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-
        RedHat\n-%>\n# This file was deployed via ''<%= template_name %>'' template\n\n<%\n  major
        = @host.operatingsystem.major.to_i\n  mac = @host.provision_interface.mac\n\n  #
        Tell Anaconda to perform network functions with boot interface\n  #  both
        current and legacy syntax provided\n  options = [\"network\", \"ksdevice=bootif\",
        \"ks.device=bootif\"]\n  if mac\n    bootif = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) && major < 17) || major < 7\n      #
        old Anacoda found in Fedora 16 or RHEL 6 and older\n      dns_servers = dns.join('','')\n      options.push(\"ip=#{ip}\",
        \"netmask=#{mask}\", \"gateway=#{gw}\", \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  #
        send PXELinux \"IPAPPEND 2\" option along\n  options.push(\"BOOTIF=01-$net_default_mac\")\n\n  ksoptions
        = options.join('' '')\n\n  # Grub EFI commands are RHEL7+ only (prevents \"Kernel
        is too old\") or for non-EFI arch\n  if (@host.operatingsystem.family == ''Redhat''
        && major < 7) || !@host.pxe_loader.include?(''EFI'')\n    linuxcmd = \"linux\"\n    initrdcmd
        = \"initrd\"\n  else\n    linuxcmd = \"linuxefi\"\n    initrdcmd = \"initrdefi\"\n  end\n-%>\n\nset
        default=0\nset timeout=<%= host_param(''loader_timeout'') || 10 %>\n\nmenuentry
        ''<%= template_name %>'' {\n  <%= linuxcmd %> <%= @kernel %> ks=<%= foreman_url(''provision'')
        %> <%= pxe_kernel_options %> <%= ksoptions %>\n  <%= initrdcmd %> <%= @initrd
        %>\n}\n\n<%= snippet_if_exists(template_name + \" custom menu\") %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:11 UTC","id":6,"name":"Kickstart
        default PXEGrub2","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:11 GMT']
      etag: [W/"c2d285d1c32cb22c8368bc35b7cbcab5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d22c51e0-73de-4a77-ab73-367f3502c9d3]
      x-runtime: ['0.062314']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/14
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Kickstart
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-
        RedHat\n-%>\n# This file was deployed via ''<%= template_name %>'' template\n\n<%\n  major
        = @host.operatingsystem.major.to_i\n  mac = @host.provision_interface.mac\n\n  #
        Tell Anaconda to perform network functions with boot interface\n  #  both
        current and legacy syntax provided\n  options = [\"network\", \"ksdevice=bootif\",
        \"ks.device=bootif\"]\n  if mac\n    bootif = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) && major < 17) || major < 7\n      #
        old Anacoda found in Fedora 16 or RHEL 6 and older\n      dns_servers = dns.join('','')\n      options.push(\"ip=#{ip}\",
        \"netmask=#{mask}\", \"gateway=#{gw}\", \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' && @host.operatingsystem.major.to_i >= 7 && host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  ksoptions
        = options.join('' '')\n  timeout = host_param(''loader_timeout'').to_i * 10\n  timeout
        = 100 if timeout.nil? || timeout <= 0\n-%>\n\nDEFAULT menu\nMENU TITLE Booting
        into OS installer (ESC to stop)\nTIMEOUT <%= timeout %>\nONTIMEOUT installer\n\nLABEL
        installer\n  MENU LABEL <%= template_name %>\n  KERNEL <%= @kernel %>\n  APPEND
        initrd=<%= @initrd %> ks=<%= foreman_url(''provision'') %> <%= pxe_kernel_options
        %> <%= ksoptions %>\n  IPAPPEND 2\n\n<%= snippet_if_exists(template_name +
        \" custom menu\") %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":14,"name":"Kickstart
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"78ffe7f94cba9e497aaf0543eef55291"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9fa93723-b93d-41fa-85a5-d6513a911814]
      x-runtime: ['0.054028']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/92
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: Kickstart
        default user data\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n-%>\n<%\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' && @host.operatingsystem.name
        != ''Fedora''\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n-%>\n#!/bin/bash\n\n<%# Cloud instances frequently have
        incorrect hosts data %>\n<%= snippet ''fix_hosts'' %>\n\n<% if @host.provision_method
        == ''image'' && !root_pass.empty? -%>\n# Install the root password\necho ''root:<%=
        root_pass -%>'' | /usr/sbin/chpasswd -e\n<% end -%>\n\n<% if proxy_uri -%>\n#
        Yum proxy\necho ''proxy = <%= proxy_uri %>'' >> /etc/yum.conf\n<% end -%>\n\n#update
        local time\necho \"updating system time\"\nyum -y install ntpdate\n/usr/sbin/ntpdate
        -sub <%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %>\n/usr/sbin/hwclock
        --systohc\n\n<% if rhel_compatible && !host_param_false?(''enable-epel'')
        -%>\n<%= snippet ''epel'' -%>\n<% end -%>\n\n<%= snippet ''redhat_register''
        %>\n\n<% if host_enc[''parameters''][''realm''] && @host.realm && (@host.realm.realm_type
        == ''FreeIPA'' || @host.realm.realm_type == ''Red Hat Identity Management'')
        -%>\n<%= snippet ''freeipa_register'' %>\n<% end -%>\n\n<% unless host_param_false?(''package_upgrade'')
        -%>\n# update all the base packages from the updates repository\nif [ -f /usr/bin/dnf
        ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n# UserData still needs to mark the build as finished\n<%= snippet
        ''built'' %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":92,"name":"Kickstart
        default user data","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"a50c8507761ad0fa83d8050241d2a33b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b63917c5-c1b1-4f97-81a8-177d01ca8acd]
      x-runtime: ['0.046878']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/71
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_bonded_interface\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%=
        snippet(''kickstart_ifcfg_generic_interface'', :variables => {\n                  :interface
        => @interface,\n                  :subnet => @subnet,\n                  :subnet6
        => @subnet6,\n                  :dhcp => @dhcp }) -%>\nNM_CONTROLLED=no\nMASTER=<%=
        @bond_identifier %>\nSLAVE=yes\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":71,"name":"kickstart_ifcfg_bonded_interface","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"c57b96caaaf7200f64b4a3eb694cf332"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b4515059-cf55-4ff2-bbc6-eea178a90959]
      x-runtime: ['0.053880']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/70
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_bond_interface\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%=
        snippet(''kickstart_ifcfg_generic_interface'', :variables => {\n                  :interface
        => @interface,\n                  :subnet => @subnet,\n                  :subnet6
        => @subnet6,\n                  :dhcp => @dhcp }) -%>\nTYPE=Bond\nBONDING_OPTS=\"<%=
        @interface.bond_options -%> mode=<%= @interface.mode -%>\"\nBONDING_MASTER=yes\nNM_CONTROLLED=no\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":70,"name":"kickstart_ifcfg_bond_interface","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"25bea05180283f9587182fef39253408"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [362b86da-7061-480c-b37c-777eb2223db0]
      x-runtime: ['0.063890']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/72
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_generic_interface\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\nBOOTPROTO=\"<%=
        @dhcp ? ''dhcp'' : ''none'' -%>\"\n<%- unless @dhcp || @subnet.nil? -%>\n<%-   if
        @interface.ip.present? -%>\n<%=     \"IPADDR=\\\"#{@interface.ip}\\\"\" %>\n<%=     \"NETMASK=\\\"#{@subnet.mask}\\\"\"
        %>\n<%-     if @subnet.gateway.present? -%>\n<%=       \"GATEWAY=\\\"#{@subnet.gateway}\\\"\"
        %>\n<%-     end -%>\n<%-   end -%>\n<%- end -%>\n<%- if @interface.ip6.present?
        -%>\n<%=   \"IPV6INIT=yes\" %>\n<%=   \"IPV6_AUTOCONF=no\" %>\n<%=   \"IPV6ADDR=#{@interface.ip6}\"
        %>\n<%-   if !@subnet6.nil? && @subnet6.gateway.present? -%>\n<%=     \"IPV6_DEFAULTGW=#{@subnet6.gateway}\"
        %><%= ''%$real'' if @subnet6.gateway.match(/^fe80:/) %>\n<%-   end -%>\n<%=   \"IPV6_PEERDNS=no\"
        %>\n<%- end -%>\n<%- if @interface.domain -%>\nDOMAIN=\"<%= @interface.domain
        %>\"\n<%- end -%>\nDEVICE=$real\n<%- unless @interface.virtual? -%>\n<%=   \"HWADDR=\\\"#{@interface.mac}\\\"\"
        %>\n<%- end -%>\nONBOOT=yes\n<%- primary = @interface.primary ? ''yes'' :
        ''no'' -%>\nPEERDNS=<%= primary %>\nPEERROUTES=<%= primary %>\nDEFROUTE=<%=
        primary %>\n<%- if @interface.primary -%>\n<%-   if !@dhcp && @subnet && @subnet.dns_primary.present?
        -%>\n<%=     \"DNS1=\\\"#{@subnet.dns_primary}\\\"\" %>\n<%-     if @subnet.dns_secondary.present?
        -%>\n<%=       \"DNS2=\\\"#{@subnet.dns_secondary}\\\"\" %>\n<%-     end -%>\n<%-   end
        -%>\n<%- end -%>\n<%- if @interface.virtual? && (!@subnet.nil? && (@subnet.has_vlanid?
        || @interface.vlanid.present?)) -%>\n<%=   \"VLAN=yes\" %>\n<%-   if @attached_to_bond
        -%>\n<%=     \"NM_CONTROLLED=no\" %>\n<%-   end -%>\n<%-   if @interface.identifier.match(/^vlan\\d+/)
        -%>\n<%=     \"VLAN_NAME_TYPE=VLAN_PLUS_VID_NO_PAD\" %>\n<%=     \"PHYSDEV=#{@interface.attached_to}\"
        %>\n<%-     if @bonding_interfaces.include?(@interface.attached_to) -%>\n<%=       \"TYPE=bonding\"
        %>\n<%-     end -%>\n<%-   end -%>\n<%- elsif @interface.virtual? && !@subnet.nil?
        && !@subnet.has_vlanid? && @interface.identifier.include?('':'') -%>\n<%=   \"TYPE=Alias\"
        %>\n<%- end -%>\n<%- if @subnet -%>\n<%=   \"MTU=#{@subnet.mtu}\" %>\n<%-
        elsif @subnet6 -%>\n<%=   \"MTU=#{@subnet6.mtu}\" %>\n<%- end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":72,"name":"kickstart_ifcfg_generic_interface","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"2aaf47dbda2d0bb4146c7bf6f25d1156"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c640914a-561d-4440-b2b8-500bbcb41c88]
      x-runtime: ['0.053719']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/73
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_ifcfg_get_identifier_names\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%-
        if @identifier -%>\n<%=   \"real=\\\"#{@identifier}\\\"\" %>\n<%- else -%>\n<%=   \"real=`grep
        -l #{@interface.inheriting_mac} /sys/class/net/*/{bonding_slave/perm_hwaddr,address}
        2>/dev/null | awk -F ''/'' ''// {print $5}'' | head -1`\" -%>\n<%-   if @interface.virtual?
        -%>\n<%=     \"\\nreal=`echo #{@interface.identifier} | sed s/#{@interface.attached_to}/$real/`\"
        -%>\n<%-   end -%>\n<%- end -%>\n<%# ifcfg files are ignored by NM if their
        name contains colons so we convert colons to underscore %>\nsanitized_real=`echo
        $real | sed s/:/_/`\n\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":73,"name":"kickstart_ifcfg_get_identifier_names","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"d7b4455fc9bae8596d282d86d249c4cf"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0ad33747-c91e-4790-a387-188c76cd9ac1]
      x-runtime: ['0.054554']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/74
  response:
    body: {string: !!python/unicode '{"template":"<%#\nname: kickstart_networking_setup\nmodel:
        ProvisioningTemplate\nsnippet: true\nmodel: ProvisioningTemplate\nkind: snippet\n-%>\n<%-
        bonded_interfaces = [] -%>\n<%- bonding_interfaces = [] -%>\n<%- @host.bond_interfaces.each
        do |bond| -%>\n<%-   bonding_interfaces.push(bond.identifier) -%>\n<%=   \"#
        #{bond.identifier} interface\" %>\n<%=   snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables => { :identifier => bond.identifier }) %>\n<%-   ifcfg = snippet(''kickstart_ifcfg_bond_interface'',
        :variables => {\n                        :interface => bond,\n                        :subnet
        => bond.subnet,\n                        :subnet6 => bond.subnet6,\n                        :dhcp
        => bond.subnet.nil? ? false : bond.subnet.dhcp_boot_mode? }) -%>\n<%=   save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %>\n\n<%-   @host.interfaces_with_identifier(bond.attached_devices_identifiers).each
        do |interface| -%>\n<%-     next if !interface.managed? -%>\n<%=     \"# #{interface.identifier}
        interface\" %>\n<%=     snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables => { :interface => interface }) -%>\n<%-     ifcfg = snippet(''kickstart_ifcfg_bonded_interface'',
        :variables => {\n                          :interface => interface,\n                          :subnet
        => interface.subnet,\n                          :subnet6 => interface.subnet6,\n                          :dhcp
        => false,\n                          :bond_identifier => bond.identifier })
        %>\n<%=     save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %>\n<%-     bonded_interfaces.push(interface.identifier) %>\n<%-   end
        -%>\n<%- end -%>\n\n<%- @host.managed_interfaces.each do |interface| %>\n<%-   next
        if !interface.managed? -%>\n<%-   next if bonded_interfaces.include?(interface.identifier)
        -%>\n\n<%-   interface_identifier = @host.bond_interfaces.map { |i| i.identifier
        }.include?(interface.attached_to) ? interface.identifier : nil %>\n<%=   \"#
        #{interface.identifier} interface\" %>\n<%=   snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables => { :interface => interface, :identifier => interface_identifier
        }) -%>\n<%-   ifcfg = snippet(''kickstart_ifcfg_generic_interface'', :variables
        => {\n                        :interface => interface,\n                        :subnet
        => interface.subnet,\n                        :subnet6 => interface.subnet6,\n                        :bonding_interfaces
        => bonding_interfaces,\n                        :dhcp => interface.subnet.nil?
        ? false : interface.subnet.dhcp_boot_mode?,\n                        :attached_to_bond
        => interface_identifier.present? }) %>\n<%=   save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %>\n<%- end %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":74,"name":"kickstart_networking_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"72ae404549d1f8d109b5ee1d609618d6"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2da3755a-3fb8-4b07-821a-b2215d01c463]
      x-runtime: ['0.053956']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/48
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Kickstart
        oVirt-RHVH\nmodel: ProvisioningTemplate\noses:\n- oVirt\n- RHVH\n%>\n<%#\nThis
        template accepts the following parameters:\n- liveimg_name: string (default=squashfs.img)\n-
        lang: string (default=\"en_US.UTF-8\")\n- selinux-mode: string (default=\"enforcing\")\n-
        keyboard: string (default=\"us\")\n- time-zone: string (default=\"UTC\")\n-
        ntp-server: string (default=\"0.fedora.pool.ntp.org\")\n- disable-firewall:
        boolean (default=false)\n\nThis kickstart will only work with LVM THIN partitioning
        (''Kickstart default thin'')\nand it requires the installation URL to have
        squashfs.img image extracted in the\nroot folder (or specified via ''liveimg_name''
        parameter). See oVirt Node documentation\nor RHV Installation Manual, section
        5.2. Advanced installation.\n\nBy default, the template expects the squashfs.img
        to be present inside\nthe installation media. When using Katello for content
        management (the\nkt_activation_key parameter is set), the liveimg_name is
        used to\nspecify relative path to the file and the template use repository_url\nhelper
        to generate an absolute path to the file (taking into account\nalso info about
        the content proxy relevant for the host)\n\nFor example, in case the squashfs.img
        is uploaded inside custom\nproduct named ''oVirt'' and repository ''hypervisor'',
        the\nliveimg_name would be ''custom/ovirt/hypervisor/squashfs.img''.\nIn this
        case, this repository would need to be part of the content\nview the host
        is assigned to. It''s also possible to provide full url,\nin which case it
        would be used without a change.\n%>\n\ninstall\n<%\nliveimg_name = host_param(''liveimg_name'')
        || ''squashfs.img''\nif host_param(''kt_activation_keys'')\n  liveimg_url
        = repository_url(liveimg_name, ''isos'')\nelse\n  liveimg_url = \"#{medium_uri}/#{liveimg_name}\"\nend\n%>\n\nliveimg
        --url=<%= liveimg_url %>\n\n<% subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?)
        -%>\n<% dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n<% dhcp
        = !@static -%>\n<% end -%>\nnetwork --bootproto <%= dhcp ? ''dhcp'' : \"static
        --ip=#{@host.ip} --netmask=#{subnet.mask} --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary,
        subnet.dns_secondary].select{ |item| item.present? }.join('','')}\" %> --hostname
        <%= @host %> --device=<%= @host.mac -%>\n\nrootpw --iscrypted <%= root_pass
        %>\n<% if host_param_true?(''disable-firewall'') -%>\nfirewall --disable\n<%
        else -%>\nfirewall --service=ssh\n<% end -%>\nlang <%= host_param(''lang'')
        || ''en_US.UTF-8'' %>\ntimezone --utc <%= host_param(''time-zone'') || ''UTC''
        %>\nselinux --<%= host_param(''selinux-mode'') || host_param(''selinux'')
        || ''enforcing'' %>\nkeyboard <%= host_param(''keyboard'') || ''us'' %>\nservices
        --enabled=sshd\ntext\nreboot\n<%= @host.diskLayout %>\n\n%post --log=/root/ks.post.log
        --erroronfail\nnodectl init\n<%= snippet ''redhat_register'' %>\n<%= snippet
        ''kickstart_networking_setup'' %>\n<%= snippet ''efibootmgr_netboot'' %>\n/usr/sbin/ntpdate
        -sub <%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %>\n/usr/sbin/hwclock
        --systohc\n\n/usr/bin/curl <%= foreman_url(''built'') %>\nsync\nsystemctl
        reboot\n%end\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":48,"name":"Kickstart
        oVirt-RHVH","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"2754d64ce9ac6ec77b7c38506ee5020c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0bae4aa2-6c77-45a4-8081-5f6946a41579]
      x-runtime: ['0.048693']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/15
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Kickstart
        oVirt-RHVH PXELinux\nmodel: ProvisioningTemplate\noses:\n- oVirt\n- RHVH\n%>\nDEFAULT
        rhvh\n\nLABEL rhvh\nKERNEL <%= @kernel %>\nAPPEND initrd=<%= @initrd %> inst.ks=<%=
        foreman_url(\"provision\") %> inst.stage2=<%= medium_uri %> local_boot_trigger=<%=
        foreman_url(\"built\") %> intel_iommu=on\nIPAPPEND 2\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":15,"name":"Kickstart
        oVirt-RHVH PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"5a31a3f134d449442c575b09d4c8e462"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ddcb39ad-e350-43ad-9f77-b4c65a791398]
      x-runtime: ['0.050657']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/1
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: POAP\nname: NX-OS default
        POAP setup\nmodel: ProvisioningTemplate\noses:\n- NX-OS\n%>\n# This template
        file is only a placeholder. Cisco provides sample Python\n# scripts for POAP,
        but they are only distributed through their support site.\n# You will need
        to provide your own POAP scripts or download one from Cisco.\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":1,"name":"NX-OS
        default POAP setup","template_kind_id":10,"template_kind_name":"POAP","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"ce4e9e89dad0645204ea4928639635d5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [23e00c18-3125-4c5e-9193-2d0b744b2546]
      x-runtime: ['0.050273']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/49
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: Preseed
        default\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n<%\n  proxy_string
        = host_param(''http-proxy'') ? \" http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n  ansible_enabled = plugin_present?(''foreman_ansible'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  os_major = @host.operatingsystem.major.to_i\n  squeeze_or_older
        = (@host.operatingsystem.name == ''Debian'' && os_major <= 6)\n\n  additional_packages
        = [''lsb-release'']\n  additional_packages << host_param(''additional-packages'')\n  additional_packages
        << ''python'' if ansible_enabled\n  additional_packages << ''salt-minion''
        if salt_enabled\n  additional_packages = additional_packages.join(\" \").split().uniq().join(\"
        \")\n%>\n# Locale\nd-i debian-installer/locale string <%= host_param(''lang'')
        || ''en_US'' %>\n# country and keyboard settings are automatic. Keep them
        ...\n# ... for wheezy and newer:\nd-i keyboard-configuration/xkb-keymap seen
        true\n<% if squeeze_or_older -%>\n# ... for squeeze and older:\nd-i console-keymaps-at/keymap
        seen true\n<% end -%>\n\n<% subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?)
        -%>\n  <% dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n  <%
        dhcp = !@static -%>\n<% end -%>\n<% unless dhcp -%>\n# Static network configuration.\nd-i
        preseed/early_command string /bin/killall.sh; /bin/netcfg\nd-i netcfg/disable_autoconfig
        boolean true\nd-i netcfg/dhcp_failed note\nd-i netcfg/dhcp_options select
        Configure network manually\nd-i netcfg/disable_dhcp boolean true\nd-i netcfg/get_ipaddress
        string <%= @host.ip %>\nd-i netcfg/get_netmask string <%= subnet.mask %>\nd-i
        netcfg/get_nameservers string <%= [subnet.dns_primary,subnet.dns_secondary].reject{|n|
        n.blank?}.join('' '') %>\nd-i netcfg/get_gateway string <%= subnet.gateway
        %>\nd-i netcfg/confirm_static boolean true\n<% end -%>\n\n# Network configuration\nd-i
        netcfg/choose_interface select auto\nd-i netcfg/get_hostname string <%= @host
        %>\nd-i netcfg/get_domain string <%= @host.domain %>\nd-i netcfg/wireless_wep
        string\n\nd-i hw-detect/load_firmware boolean true\n\n<% if host_param_true?(''preseed-live-installer'')
        -%>\n# Offline live-installer location\nd-i live-installer/net-image string
        http://<%= @preseed_server %><%= @preseed_path %>/install/filesystem.squashfs\n<%
        end -%>\n\n# Mirror settings\nd-i mirror/country string manual\nd-i mirror/http/hostname
        string <%= @preseed_server %>\nd-i mirror/http/directory string <%= @preseed_path
        %>\nd-i mirror/http/proxy string<%= proxy_string %>\nd-i mirror/codename string
        <%= @host.operatingsystem.release_name %>\nd-i mirror/suite string <%= @host.operatingsystem.release_name
        %>\nd-i mirror/udeb/suite string <%= @host.operatingsystem.release_name %>\n\n#
        Time settings\nd-i clock-setup/utc boolean true\nd-i time/zone string <%=
        host_param(''time-zone'') || ''UTC'' %>\n\n# NTP\nd-i clock-setup/ntp boolean
        true\nd-i clock-setup/ntp-server string <%= host_param(''ntp-server'') ||
        ''0.debian.pool.ntp.org'' %>\n\n# Set alignment for automatic partitioning\n#
        Choices: cylinder, minimal, optimal\n#d-i partman/alignment select cylinder\n\n<%=
        @host.diskLayout %>\n\n<% if host_param(''preseed-kernel-image'') -%>\n# Install
        different kernel\nd-i base-installer/kernel/image string <%= host_param(''preseed-kernel-image'')
        %>\n<% end %>\n\n# User settings\nd-i passwd/root-password-crypted password
        <%= root_pass %>\nuser-setup-udeb passwd/root-login boolean true\nd-i passwd/make-user
        boolean false\nuser-setup-udeb passwd/make-user boolean false\n\n<% repos
        = 0 %>\n\n<% @additional_media.each do |medium| -%>\nd-i apt-setup/local<%=
        repos %>/repository string <%= medium[:url] %> <%= @host.operatingsystem.release_name
        %>-<%= medium[:name] %> main\n<%= \"d-i apt-setup/local#{repos}/comment string
        #{medium[:comment]}\" if medium[:comment] %>\n<%= \"d-i apt-setup/local#{repos}/key
        string #{medium[:gpgkey]}\" if medium[:gpgkey] %>\n<% repos +=1 -%>\n<% end
        -%>\n\n<% if salt_enabled -%>\n<% salt_package = ''salt-minion'' -%>\n<% if
        host_param_true?(''enable-saltstack-repo'') -%>\n<% if @host.operatingsystem.name
        == ''Debian'' -%>\nd-i apt-setup/local<%= repos %>/repository string http://debian.saltstack.com/debian
        <%= @host.operatingsystem.release_name %>-saltstack main\nd-i apt-setup/local<%=
        repos %>/comment string SaltStack Repository\nd-i apt-setup/local<%= repos
        %>/key string http://debian.saltstack.com/debian-salt-team-joehealy.gpg.key\n<%
        repos += 1 -%>\n<% end -%>\n<% if @host.operatingsystem.name == ''Ubuntu''
        -%>\nd-i apt-setup/local<%= repos %>/repository string http://ppa.launchpad.net/saltstack/salt/ubuntu
        <%= @host.operatingsystem.release_name %> main\nd-i apt-setup/local<%= repos
        %>/comment string SaltStack Repository\nd-i apt-setup/local<%= repos %>/key
        string http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x4759FA960E27C0A6\n<%
        repos += 1 -%>\n<% end -%>\n<% end -%>\n<% else -%>\n<% salt_package = ''''
        -%>\n<% end -%>\n\n# Install minimal task set (see tasksel --task-packages
        minimal)\ntasksel tasksel/first multiselect minimal, ssh-server, openssh-server\n\n#
        Install some base packages\nd-i pkgsel/include string <%= additional_packages
        %>\nd-i pkgsel/update-policy select <%= host_param(''preseed-update-policy'')
        || ''unattended-upgrades'' %>\nd-i pkgsel/upgrade select <%= host_param(''preseed-post-install-upgrade'')
        || ''none'' %>\n\npopularity-contest popularity-contest/participate boolean
        false\n\n# Boot loader settings\n#grub-pc grub-pc/hidden_timeout boolean false\n#grub-pc
        grub-pc/timeout string 10\nd-i grub-installer/only_debian boolean true\nd-i
        grub-installer/with_other_os boolean true\n<% if host_param(''install-disk'')
        -%>\nd-i grub-installer/bootdev string <%= host_param(''install-disk'') %>\n<%
        elsif (@host.operatingsystem.name == ''Debian'' and @host.operatingsystem.major.to_i
        >= 8) or (@host.operatingsystem.name == ''Ubuntu'' and @host.operatingsystem.major.to_i
        >= 16) -%>\nd-i grub-installer/bootdev string default\n<% end -%>\nd-i finish-install/reboot_in_progress
        note\n\nd-i preseed/late_command string wget -Y off <%= @static ? \"''#{foreman_url(''finish'')}&static=true''\"
        : foreman_url(''finish'') %> -O /target/tmp/finish.sh && in-target chmod +x
        /tmp/finish.sh && in-target /tmp/finish.sh\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":49,"name":"Preseed
        default","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"155c0b0cb68be9ca20d7b3fe1f5b6c9c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5718b7dc-e2c1-4430-af53-af75135473d6]
      x-runtime: ['0.050606']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/31
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: Preseed
        default finish\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n<%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n%>\n\n<% subnet = @host.subnet -%>\n<% if subnet.respond_to?(:dhcp_boot_mode?)
        -%>\n<% dhcp = subnet.dhcp_boot_mode? && !@static -%>\n<% else -%>\n<% dhcp
        = !@static -%>\n<% end -%>\n<% unless dhcp -%>\n# host and domain name need
        setting as these values may have come from dhcp if pxe booting\n/bin/sed -i
        \"s/^search.*$/search <%= @host.domain %>/g\" /etc/resolv.conf\n/bin/sed -i
        \"s/.*dns-search.*/\\tdns-search <%= @host.domain %>/g\" /etc/network/interfaces\n/bin/sed
        -i \"s/^<%= @host.ip %>.*/<%= @host.ip %>\\t<%= @host.shortname %>.<%= @host.domain
        %>\\t<%= @host.shortname %>/g\" /etc/hosts\n/bin/echo <%= @host.shortname
        %> > /etc/hostname\n/bin/hostname  <%= @host.shortname %>.<%= @host.domain
        %>\n<% end -%>\n\n<%= snippet_if_exists(template_name + \" custom snippet\")
        %>\n<% if host_enc[''parameters''][''realm''] && @host.realm && @host.realm.realm_type
        == ''FreeIPA'' -%>\n<%= snippet ''freeipa_register'' %>\n<% end -%>\n\n<%=
        snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet \"blacklist_kernel_modules\"
        %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client'' %>\n<% end -%>\n\n<%
        if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n<%= snippet ''preseed_networking_setup'' %>\n<%= snippet ''efibootmgr_netboot''
        %>\n<%= snippet ''built'' %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":31,"name":"Preseed
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"d6cd75acc0e77e3b72f9f1cbf0b06155"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e20d3179-e0df-4ad4-a724-fe9a8c42d451]
      x-runtime: ['0.050833']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/38
  response:
    body: {string: !!python/unicode '{"template":"#!gpxe\n<%#\nkind: iPXE\nname: Preseed
        default iPXE\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n<%
        if @host.operatingsystem.name == ''Debian'' -%>\n<% keyboard_params = \"auto=true
        domain=#{@host.domain}\" -%>\n<% else -%>\n<% keyboard_params = ''console-setup/ask_detect=false
        console-setup/layout=USA console-setup/variant=USA keyboard-configuration/layoutcode=us''
        -%>\n<% end -%>\n<% boot_files_uris = @host.operatingsystem.boot_files_uri(medium_provider)
        -%>\n<% kernel = boot_files_uris[0] -%>\n<% initrd = boot_files_uris[1] -%>\n<%
        static = @host.token.nil? ? ''?static=yes'' : ''&static=yes'' -%>\n\nkernel
        <%= kernel %> initrd=initrd.img interface=auto url=<%= foreman_url(''provision'')%><%=
        static %> ramdisk_size=10800 root=/dev/rd/0 rw auto netcfg/disable_dhcp=true
        BOOTIF=01-${netX/mac:hexhyp} hostname=<%= @host.name %> <%= keyboard_params
        %> locale=<%= host_param(''lang'') || ''en_US'' %> netcfg/get_ipaddress=${netX/ip}
        netcfg/get_netmask=${netX/netmask} netcfg/get_gateway=${netX/gateway} netcfg/get_nameservers=${dns}
        netcfg/confirm_static=true\ninitrd <%= initrd %>\n\nboot\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":38,"name":"Preseed
        default iPXE","template_kind_id":4,"template_kind_name":"iPXE","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"3c091f0bbfe478bfea72ac94a4df9ffe"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7e939279-3ed0-4587-89e0-06655b99cddc]
      x-runtime: ['0.051570']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/7
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: Preseed
        default PXEGrub2\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n#\n#
        This file was deployed via ''<%= template_name %>'' template\n#\n# Supported
        host/hostgroup parameters:\n#\n# blacklist = module1, module2\n#   Blacklisted
        kernel modules\n#\n# lang = en_US\n#   System locale\n#\n<%\n  os_major =
        @host.operatingsystem.major.to_i\n  os_name  = @host.operatingsystem.name\n\n  options
        = []\n  if host_param(''blacklist'')\n    options << host_param(''blacklist'').split('','').collect{|x|
        \"#{x.strip}.blacklist=yes\"}.join('' '')\n  end\n  if os_name == ''Debian''\n    options
        << \"auto=true\"\n    options << \"domain=#{@host.domain}\"\n  else\n    options
        << ''console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA
        keyboard-configuration/layoutcode=us localechooser/translation/warn-light=true
        localechooser/translation/warn-severe=true''\n  end\n  options << \"locale=#{host_param(''lang'')
        || ''en_US''}\"\n  \n  # send PXELinux \"IPAPPEND 2\" option along\n  options.push(\"BOOTIF=01-$net_default_mac\")\n\n  options
        = options.join('' '')\n\n  if (os_name == ''Ubuntu'' && os_major > 12) ||
        (os_name == ''Debian'' && os_major > 8)\n    efi_suffix = ''efi''\n  else\n    efi_suffix
        = ''''\n  end\n-%>\nset default=0\nset timeout=<%= host_param(''loader_timeout'')
        || 10 %>\n\nmenuentry ''<%= template_name %>'' {\n  linux<%= efi_suffix %>  <%=
        @kernel %> interface=auto url=<%= foreman_url(''provision'')%> ramdisk_size=10800
        root=/dev/rd/0 rw auto hostname=<%= @host.name %> <%= options %>\n  initrd<%=
        efi_suffix %> <%= @initrd %>\n}\n\n<%= snippet_if_exists(template_name + \"
        custom menu\") %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":7,"name":"Preseed
        default PXEGrub2","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"0e1058e16253a45e00dd56b9f94d9d95"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [13650f77-a3ea-4c1f-bb78-27e8ee18b116]
      x-runtime: ['0.062297']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/16
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: Preseed
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n%>\n#\n#
        This file was deployed via ''<%= template_name %>'' template\n#\n# Supported
        host/hostgroup parameters:\n#\n# blacklist = module1, module2\n#   Blacklisted
        kernel modules\n#\n# lang = en_US\n#   System locale\n#\n<%\n  options = []\n  if
        host_param(''blacklist'')\n    options << host_param(''blacklist'').split('','').collect{|x|
        \"#{x.strip}.blacklist=yes\"}.join('' '')\n  end\n  if @host.operatingsystem.name
        == ''Debian''\n    options << \"auto=true\"\n    options << \"domain=#{@host.domain}\"\n  else\n    options
        << ''console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA
        keyboard-configuration/layoutcode=us localechooser/translation/warn-light=true
        localechooser/translation/warn-severe=true''\n  end\n  options << \"locale=#{host_param(''lang'')
        || ''en_US''}\"\n  options = options.join('' '')\n-%>\n\nDEFAULT linux\n\nLABEL
        linux\n    KERNEL <%= @kernel %>\n    APPEND initrd=<%= @initrd %> interface=auto
        url=<%= foreman_url(''provision'')%> ramdisk_size=10800 root=/dev/rd/0 rw
        auto hostname=<%= @host.name %> <%= options %>\n    IPAPPEND 2\n\n<%= snippet_if_exists(template_name
        + \" custom menu\") %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:12 UTC","id":16,"name":"Preseed
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:12 GMT']
      etag: [W/"2bc17053b9d6dbb55692448fdf86c1ef"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0f9c17db-22ff-48de-ba5e-a730601d1375]
      x-runtime: ['0.054221']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/93
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: Preseed
        default user data\nmodel: ProvisioningTemplate\noses:\n- Debian\n- Ubuntu\n-%>\n#!/bin/bash\n\n<%#
        Cloud instances frequently have incorrect hosts data %>\n<%= snippet ''fix_hosts''
        %>\n\n<%\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n%>\n\n<% if proxy_uri -%>\necho ''Acquire::http::Proxy
        \"<%= proxy_uri %>\";'' >> /etc/apt/apt.conf\n<% end -%>\n\n<% if host_enc[''parameters''][''realm'']
        && @host.realm && @host.realm.realm_type == ''FreeIPA'' -%>\n<%= snippet ''freeipa_register''
        %>\n<% end -%>\n\n<%= snippet(''remote_execution_ssh_keys'') %>\n\n<%= snippet
        \"blacklist_kernel_modules\" %>\n\n<% if chef_enabled %>\n<%= snippet ''chef_client''
        %>\n<% end -%>\n\n<% if puppet_enabled %>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%>\n<%= snippet ''puppetlabs_repo'' %>\n<% end -%>\n<%= snippet ''puppet_setup''
        %>\n<% end -%>\n\n<% if salt_enabled %>\n<%= snippet ''saltstack_setup'' %>\n<%
        end -%>\n\n# UserData still needs wget to mark as finished\n<%= snippet ''built''
        %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":93,"name":"Preseed
        default user data","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"73d21227d8ad78b3925759801a51f4ef"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [bcb42ce5-84d1-42be-b9fa-edbe81912a7b]
      x-runtime: ['0.052804']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/75
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: preseed_networking_setup\nmodel:
        ProvisioningTemplate\nsnippet: true\ndescription: this will configure your
        host networking, it configures your primary interface as well\n    as other
        configures NICs. It supports physical, VLAN and Alias interfaces. It''s intended
        to be\n    called in your preseed finish template.\n%>\n<% host_subnet = @host.subnet
        -%>\n<% host_dhcp = host_subnet.nil? ? false : host_subnet.dhcp_boot_mode?
        -%>\n<% host_subnet6 = @host.subnet6 -%>\n<% host_dhcp6 = host_subnet6.nil?
        ? false : host_subnet6.dhcp_boot_mode? -%>\n\nreal=`ip -o link | awk ''/<%=
        @host.mac -%>/ {print $2;}'' | sed s/://`\ncat << EOF > /etc/network/interfaces\n#loopback\nauto
        lo\niface lo inet loopback\n\n#<%= @host.primary_interface.identifier %>\nauto
        $real\nallow-hotplug $real\niface $real inet <%= host_dhcp ? ''dhcp'' : ''static''
        %>\n<% unless host_dhcp -%>\n    address <%= @host.ip %>\n    gateway <%=
        host_subnet.gateway %>\n    netmask <%= host_subnet.mask %>\n    dns-nameservers
        <%= host_subnet.dns_primary %> <%= host_subnet.dns_secondary %>\n    dns-search
        <%= @host.domain %>\n<% end -%>\n<% if @host.ip6 && host_subnet6 && !host_dhcp6
        -%>\niface $real inet6 static\n    address <%= @host.ip6 %>/<%= host_subnet6.cidr
        %>\n<% if host_subnet6.gateway -%>\n    gateway <%= host_subnet6.gateway %>\n<%
        end -%>\n<% end -%>\nEOF\n\n<% @host.managed_interfaces.each do |interface|
        -%>\n<% interface_subnet = interface.subnet -%>\n<% interface_dhcp = interface_subnet.nil?
        ? false : interface_subnet.dhcp_boot_mode? -%>\n<% interface_subnet6 = interface.subnet6
        -%>\n<% interface_dhcp6 = interface_subnet6.nil? ? false : interface_subnet6.dhcp_boot_mode?
        -%>\n<% next if !interface.managed? || (interface_subnet.nil? && interface_subnet6.nil?)
        || interface.primary -%>\nreal=`ip -o link | awk ''/<%= interface.mac -%>/
        {print $2;}'' | sed s/:$//`\n<% virtual = interface.virtual? -%>\n<% if virtual
        -%>\nreal=`echo <%= interface.identifier -%> | sed s/<%= interface.attached_to
        -%>/$real/`\n<% end -%>\n\ncat << EOF >> /etc/network/interfaces\n#<%= interface.identifier
        %>\n<% if interface_subnet %>\nauto $real\niface $real inet <%= interface_dhcp
        ? ''dhcp'' : ''static'' %>\n<% unless interface_dhcp -%>\n    address <%=
        interface.ip %>\n    netmask <%= interface_subnet.mask %>\n<% end -%>\n<%
        end -%>\n<% if interface.ip6 && interface_subnet6 %>\n<% unless interface_dhcp6
        -%>\niface $real inet6 static\n    address <%= interface.ip6 %>/<%= interface_subnet6.cidr
        %>\n<% if interface_subnet6.gateway -%>\n    gateway <%= interface_subnet6.gateway
        %>\n<% end -%>\n<% end -%>\n<% end -%>\nEOF\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":75,"name":"preseed_networking_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"3bba4c5ef0de8396115336bd097280b3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [762cee82-3e00-4d24-83af-ee3614c256ce]
      x-runtime: ['0.053236']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/76
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: puppet.conf\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%\n  os_family = @host.operatingsystem.family\n  os_name   =
        @host.operatingsystem.name\n\n  aio_enabled = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        || host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppet4'')
        || host_param_true?(''enable-puppet5'')\n  aio_available = os_family == ''Debian''
        || os_family == ''Redhat'' || os_name == ''SLES''\n\n  if aio_enabled && aio_available\n    var_dir
        = ''/opt/puppetlabs/puppet/cache''\n    log_dir = ''/var/log/puppetlabs/puppet''\n    run_dir
        = ''/var/run/puppetlabs''\n    ssl_dir = ''/etc/puppetlabs/puppet/ssl''\n  elsif
        os_family == ''Windows''\n    var_dir = ''C:\\ProgramData\\PuppetLabs\\puppet\\cache''\n    log_dir
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\var\\log''\n    run_dir = ''C:\\ProgramData\\PuppetLabs\\puppet\\var\\run''\n    ssl_dir
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\etc\\ssl''\n  else\n    if @host.operatingsystem.family
        == ''Freebsd''\n      var_dir = ''/var/puppet''\n    else\n      var_dir =
        ''/var/lib/puppet''\n    end\n    log_dir = ''/var/log/puppet''\n    run_dir
        = ''/var/run/puppet''\n    ssl_dir = ''\\$vardir/ssl''\n  end\n%>\n[main]\n<%-
        unless host_param(''dns_alt_names'').to_s.empty? -%>\ndns_alt_names = <%=
        host_param(''dns_alt_names'') %>\n<%- end -%>\nvardir = <%= var_dir %>\nlogdir
        = <%= log_dir %>\nrundir = <%= run_dir %>\nssldir = <%= ssl_dir %>\n<% if
        host_param_true?(''fips_enabled'') -%>\ndigest_algorithm = sha256\n<% end
        -%>\n\n[agent]\npluginsync      = true\nreport          = true\nignoreschedules
        = true\n<%- if @host.puppet_ca_server.strip -%>\nca_server       = <%= @host.puppet_ca_server
        %>\n<%- end -%>\ncertname        = <%= @host.certname %>\nenvironment     =
        <%= @host.environment %>\nserver          = <%= @host.puppetmaster %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":76,"name":"puppet.conf","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"f7f8ca008d2d25286508949977a0d054"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e17a6fb8-8e2c-4c59-a5d1-14cd664eb5ca]
      x-runtime: ['0.054224']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/78
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: puppetlabs_repo\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%\nhttp_proxy   = host_param(''http-proxy'')
        ? \" --httpproxy #{host_param(''http-proxy'')}\" : nil\nhttp_port    = host_param(''http-proxy-port'')
        ? \" --httpport #{host_param(''http-proxy-port'')}\" : nil\nproxy_uri    =
        host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\nproxy_string = proxy_uri ? \" -e https_proxy=#{proxy_uri}/\" : ''''\nproxy_string_bits
        = proxy_uri ? \" -ProxyUsage Override -ProxyList #{proxy_uri}\" : ''''\nos_family
        = @host.operatingsystem.family\nos_major  = @host.operatingsystem.major.to_i\nos_name   =
        @host.operatingsystem.name\n\nif os_family == ''Redhat''\n  repo_host = ''yum.puppetlabs.com''\n  if
        os_name == ''Fedora''\n    repo_os = ''fedora''\n  else\n    repo_os = ''el''\n  end\nelsif
        os_family == ''Suse''\n  repo_host = ''yum.puppetlabs.com''\n  repo_os = ''sles''
        # PuppetLabs repos only exist for SLES, not OpenSUSE\nelsif os_family == ''Debian''\n  repo_host
        = ''apt.puppetlabs.com''\n  repo_os = @host.operatingsystem.release_name\nelsif
        os_family == ''Windows''\n  repo_host = ''downloads.puppetlabs.com''\n  repo_os
        = ''windows''\nend\n\nif host_param_true?(''enable-puppetlabs-repo'')\n  repo_name
        = ''puppetlabs-release''\nelsif host_param_true?(''enable-puppetlabs-pc1-repo'')\n  repo_name
        = ''puppetlabs-release-pc1''\nelsif host_param_true?(''enable-puppetlabs-puppet5-repo'')\n  repo_name
        = ''puppet5-release''\nend\n\nrepo_subdir = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        ? ''puppet5/'' : ''''\n-%>\n\n<% if repo_name -%>\n<% if os_family == ''Redhat''
        || os_name == ''SLES'' -%>\nrpm -Uvh<%= http_proxy %><%= http_port %> https://<%=
        repo_host %>/<%= repo_subdir %><%= repo_name %>-<%= repo_os %>-<%= os_major
        %>.noarch.rpm\n<% elsif os_family == ''Debian'' -%>\napt-get update\napt-get
        -y install ca-certificates\nwget -O /tmp/<%= repo_name %>-<%= repo_os %>.deb<%=
        proxy_string %> https://<%= repo_host %>/<%= repo_name %>-<%= repo_os %>.deb\ndpkg
        -i /tmp/<%= repo_name %>-<%= repo_os %>.deb\n<% elsif os_family == ''Windows''
        -%>\n$puppet_agent_source = ''https://<%= repo_host %>/<%= repo_os %>/puppet-agent-<%=
        @host.architecture %>-latest.msi''\n$puppet_agent_msi = \"${env:TEMP}\\puppet-agent-<%=
        @host.architecture %>.msi\"\nWrite-Host \"Downloading puppet-agent from ${$puppet_agent_source}
        to ${puppet_agent_msi}\"\nStart-BitsTransfer -Source \"${puppet_agent_source}\"
        -Destination \"${puppet_agent_msi}\"<%= proxy_string_bits %>\n<% end -%>\n<%
        end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":78,"name":"puppetlabs_repo","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"56437529e62f2ba9c117c7576428364e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9ebf255d-9af1-447a-9452-e97a3d14b840]
      x-runtime: ['0.054983']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/77
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: puppet_setup\nmodel:
        ProvisioningTemplate\ndescription: this snippet will configure the Puppet
        agent\nsnippet: true\n%>\n<%\nos_family = @host.operatingsystem.family\nos_major  =
        @host.operatingsystem.major.to_i\nos_name   = @host.operatingsystem.name\n\naio_enabled
        = host_param_true?(''enable-puppetlabs-puppet5-repo'') || host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppet4'') || host_param_true?(''enable-puppet5'')\n\nif
        os_family == ''Freebsd''\n  freebsd_package = host_param_true?(''enable-puppet5'')
        ? ''puppet5'' : ''puppet4''\n  etc_path = ''/usr/local/etc/puppet''\n  bin_path
        = ''/usr/local/bin''\nelsif os_family == ''Windows''\n  windows_package =
        \"puppet-agent-#{@host.architecture}.msi\"\n  etc_path = ''C:\\ProgramData\\PuppetLabs\\puppet\\etc''\n  bin_path
        = ''C:\\Program Files\\Puppet Labs\\Puppet\\bin''\nelsif aio_enabled\n  linux_package
        = ''puppet-agent''\n  etc_path = ''/etc/puppetlabs/puppet''\n  bin_path =
        ''/opt/puppetlabs/bin''\nelse\n  linux_package = os_family == ''Suse'' ? ''rubygem-puppet''
        : ''puppet''\n  etc_path = ''/etc/puppet''\n  bin_path = ''/usr/bin''\nend\n%>\n\n<%
        if os_family == ''Debian'' -%>\napt-get update\napt-get install -y <%= linux_package
        %>\n<% elsif os_family == ''Freebsd'' -%>\npkg install -y <%= freebsd_package
        %>\n<% elsif os_family == ''Redhat'' -%>\nif [ -f /usr/bin/dnf ]; then\n  dnf
        -y install <%= linux_package %>\nelse\n  yum -t -y install <%= linux_package
        %>\nfi\n<% elsif os_family == ''Suse'' -%>\n<% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-puppet5-repo'') -%>\nrpmkeys --import
        http://yum.puppetlabs.com/RPM-GPG-KEY-puppetlabs\nrpmkeys --import http://yum.puppetlabs.com/RPM-GPG-KEY-puppet\n<%
        end -%>\n<% if @host.provision_method == ''image'' -%>\n/usr/bin/zypper -n
        install <%= linux_package %>\n<% end -%>\n<% elsif os_family == ''Windows''
        -%>\n$puppet_agent_msi = \"${env:TEMP}\\<%= windows_package %>\"\n$puppet_install_args
        = @(\n  ''/qn'',\n  ''/norestart'',\n  ''/i'',\n  \"${puppet_agent_msi}\",\n  <%-
        if @host.puppet_ca_server.strip -%>\n  \"PUPPET_CA_SERVER=<%= @host.puppet_ca_server
        %>\",\n  <%- end -%>\n  \"PUPPET_MASTER_SERVER=<%= @host.puppetmaster %>\"\n)\n\nWrite-Host
        \"Installing ${puppet_agent_msi} with args ${puppet_install_args}\"\nStart-Process
        ''msiexec.exe'' -ArgumentList $puppet_install_args -Wait -NoNewWindow\n<%
        end -%>\n\n<% if os_family == ''Windows'' -%>\n$puppet_conf = @(\"<%= snippet
        ''puppet.conf'' %>\".Replace(\"`n\",\"`r`n\"))\nOut-File -FilePath <%= etc_path
        %>\\puppet.conf -InputObject $puppet_conf\n<% else -%>\ncat > <%= etc_path
        %>/puppet.conf << EOF\n<%= snippet ''puppet.conf'' %>\nEOF\n<% end -%>\n\n<%
        if @host.puppetca_token.present? -%>\n<% if os_family == ''Windows'' -%>\n$csr_attributes
        = @(\"<%= snippet ''csr_attributes.yaml'' %>\".Replace(\"`n\",\"`r`n\"))\nOut-File
        -FilePath <%= etc_path %>\\csr_attributes.yaml -InputObject $csr_attributes\n<%
        else -%>\ncat > <%= etc_path %>/csr_attributes.yaml << EOF\n<%= snippet ''csr_attributes.yaml''
        %>\nEOF\n<% end -%>\n<% end -%>\n\n<% if os_family == ''Redhat'' -%>\n<% if
        os_major > 6 -%>\npuppet_unit=puppet\n/usr/bin/systemctl list-unit-files |
        grep -q puppetagent && puppet_unit=puppetagent\n/usr/bin/systemctl enable
        ${puppet_unit}\n<% else -%>\n/sbin/chkconfig --level 345 puppet on\n<% end
        -%>\n<% end -%>\n<% if os_family == ''Freebsd'' -%>\necho ''puppet_enable=\"YES\"''
        >>/etc/rc.conf\n<% end -%>\n<% unless aio_enabled -%>\n<% if os_family ==
        ''Debian'' -%>\nif [ -f \"/etc/default/puppet\" ]\nthen\n/bin/sed -i ''s/^START=no/START=yes/''
        /etc/default/puppet\nfi\n<%= bin_path %>/puppet agent --enable\n<% elsif os_family
        == ''Suse'' -%>\nif [ -f \"/etc/sysconfig/puppet\" ]\nthen\n/usr/bin/sed -ie
        s/^PUPPET_SERVER=.*/PUPPET_SERVER=<%= @host.puppetmaster.blank? ? '''' : @host.puppetmaster
        %>/ /etc/sysconfig/puppet\nfi\n<% end -%>\n<% end -%>\n<%#\nIMPORTANT NOTE:
        Setting \"run-puppet-in-installer\" is UNSUPPORTED!\n\nThe default mode of
        operation in Foreman is only to set up Puppet, but to not run it inside the
        installer environment.\nRunning Puppet inside the installer can cause various
        hard to diagnose errors, many of them resulting from the fact that\nservices
        are not started inside the installer.\n\nIf you are aware of the downsides,
        you can trigger a Puppet run inside the installer by setting the variable\nrun-puppet-in-installer
        to true.\n\nNote, that this is an *unsupported mode of operation* and not
        supported by Foreman at all. You have been warned!\n%>\n<% if host_param_true?(''run-puppet-in-installer'')
        -%>\n<% if (os_name == ''Ubuntu'' && os_major >= 15) || (os_name == ''Debian''
        && os_major >= 8) -%>\n# Puppet tries to detect the init system by checking
        the presence of the directory /run/systemd/system. That detection\n# fails
        in a chroot environment like the one the installer provides. See Puppet tickets
        PA-136 and PUP-5577\n#\n# We work around that here until it gets fixed in
        Puppet (probably never for Puppet 3.x)\nmkdir -p /run/systemd/system\n<% end
        -%>\n<% end -%>\n# export a custom fact called ''is_installer'' to allow detection
        of the installer environment in Puppet modules\n<% if os_family == ''Windows''
        -%>\n$env:FACTER_is_installer = $TRUE\n\n# passing a non-existent tag like
        \"no_such_tag\" to the puppet agent only initializes the node\n$puppet_agent_args
        = @(\n  \"agent\",\n  \"--config\", \"<%= etc_path %>\\puppet.conf\",\n  \"--onetime\",\n  <%=
        host_param_true?(''run-puppet-in-installer'') ? '''' : ''\"--tags no_such_tag\",''
        %>\n  <%= @host.puppetmaster.blank? ? '''' : \"\\\"--server #{@host.puppetmaster}\\\",\"
        %>\n  \"--no-daemonize\"\n)\nStart-Process ''<%= bin_path %>\\puppet'' -ArgumentList
        $puppet_agent_args -Wait -NoNewWindow\n<% else -%>\nexport FACTER_is_installer=true\n#
        passing a non-existent tag like \"no_such_tag\" to the puppet agent only initializes
        the node\n<%= bin_path %>/puppet agent --config <%= etc_path %>/puppet.conf
        --onetime <%= host_param_true?(''run-puppet-in-installer'') ? '''' : ''--tags
        no_such_tag'' %> <%= @host.puppetmaster.blank? ? '''' : \"--server #{@host.puppetmaster}\"
        %> --no-daemonize\n<% if os_family == ''Suse'' || (os_name == ''Debian'' &&
        os_major > 8) || (os_name == ''Ubuntu'' && os_major >= 15) -%>\n<%= bin_path
        %>/puppet resource service puppet enable=true\n<% if @host.provision_method
        == ''image'' -%>\n<%= bin_path %>/puppet resource service puppet ensure=running\n<%
        end -%>\n<% end -%>\n<% end -%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":77,"name":"puppet_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"291d4a120c8d87127929eb2afb10a56e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [09217978-e87a-41ed-94cf-d2f80499b38d]
      x-runtime: ['0.054780']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/79
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub2_chainload\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%\n  paths = [\n    ''/EFI/fedora/shim.efi'',\n    ''/EFI/fedora/grubx64.efi'',\n    ''/EFI/redhat/shim.efi'',\n    ''/EFI/redhat/grubx64.efi'',\n    ''/EFI/centos/shim.efi'',\n    ''/EFI/centos/grubx64.efi'',\n    ''/EFI/debian/grubx64.efi'',\n    ''/EFI/ubuntu/grubx64.efi'',\n    ''/EFI/sles/grubx64.efi'',\n    ''/EFI/opensuse/grubx64.efi'',\n    ''/EFI/Microsoft/boot/bootmgfw.efi''\n  ]\n-%>\ninsmod
        part_gpt\ninsmod fat\ninsmod chain\n\nmenuentry ''Chainload Grub2 EFI from
        ESP'' --id local_chain_hd0 {\n  echo Chainloading Grub2 EFI from ESP, enabled
        devices for booting:\n  ls\n<%\n  paths.each do |path|\n-%>\n  echo \"Trying
        <%= path %> \"\n  unset chroot\n  search --file --no-floppy --set=chroot <%=
        path %>\n  if [ -f ($chroot)<%= path %> ]; then\n    chainloader ($chroot)<%=
        path %>\n    echo \"Found <%= path %> at $chroot, attempting to chainboot
        it...\"\n    sleep 2\n    boot\n  fi\n<%\n  end\n-%>\n  echo Partition with
        known EFI file not found, you may want to drop to grub shell\n  echo and investigate
        available files updating ''pxegrub2_chainload'' template and\n  echo the list
        of known filepaths for probing. Contents of \\EFI directory:\n  ls ($chroot)/EFI\n  echo
        The system will halt in 2 minutes or press ESC to halt immediately.\n  sleep
        -i 120\n  halt --no-apm\n}\n\nmenuentry ''Chainload into BIOS bootloader on
        first disk'' --id local_chain_legacy_hd0 {\n  set root=(hd0,0)\n  chainloader
        +1\n  boot\n}\n\nmenuentry ''Chainload into BIOS bootloader on second disk''
        --id local_chain_legacy_hd1 {\n  set root=(hd1,0)\n  chainloader +1\n  boot\n}\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":79,"name":"pxegrub2_chainload","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"25d1047cdcce39dd9568249fd240eecd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b23dfb1f-fe38-4320-98fd-fbdfcb3b9a9c]
      x-runtime: ['0.056843']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/8
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: PXEGrub2
        default local boot\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot provisioned
        hosts, do not associate or change the name. %>\n\nset default=<%= global_setting(\"default_pxe_item_local\",
        \"local\") %>\nset timeout=20\necho Default PXE local template entry is set
        to ''<%= global_setting(\"default_pxe_item_local\", \"local\") %>''\n\n<%=
        snippet \"pxegrub2_mac\" %>\n<%= snippet \"pxegrub2_chainload\" %>\n<%= snippet
        \"pxegrub2_discovery\" %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":8,"name":"PXEGrub2
        default local boot","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"0ba838ccf856b13cb6ba8dfaaa75d1c4"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [327f2771-bfef-4c6a-9be9-d55f26f5e941]
      x-runtime: ['0.047653']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/80
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub2_discovery\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\nRHEL 7 virtio driver does not
        have persistent naming scheme, causing interfaces\nto be named eth0, eth1,
        etc.. If you want to enable the new persistent naming\nscheme and get inteface
        names like ens3, add net.ifnames=1 to the linuxefi line\nbelow. This will
        not be fixed until RHEL8 due to prevent breaking changes for\nexisting systems.
        See RHBZ#1259015 for more details.\n\nAnother bug in RHEL 7.4 is affecting
        $net_default_mac with a trailing slash, in\nthe global template we have a
        regexp module creating corrected variable $mac\nwhich is used here. See RHBZ#1487107
        for more info.\n-%>\n<% [\"efi\", \"\"].each do |suffix| %>\nmenuentry ''Foreman
        Discovery Image <%= suffix %>'' --id discovery<%= suffix %> {\n  linux<%=
        suffix %> boot/fdi-image/vmlinuz0 rootflags=loop root=live:/fdi.iso rootfstype=auto
        ro rd.live.image acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0
        rd.neednet=0 nokaslr nomodeset proxy.url=<%= foreman_server_url %> proxy.type=foreman
        BOOTIF=01-$mac\n  initrd<%= suffix %> boot/fdi-image/initrd0.img\n}\n<% end
        %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":80,"name":"pxegrub2_discovery","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"df624a05f0a5ac96a98ff0302c1cc864"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [99772df5-c4c5-47ef-b995-b1a56dce65c8]
      x-runtime: ['0.054980']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/9
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub2\nname: PXEGrub2
        global default\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot unknown
        hosts, do not associate or change the name. %>\n\ndefault=<%= global_setting(\"default_pxe_item_global\",
        \"local\") %>\ntimeout=20\necho Default PXE global template entry is set to
        ''<%= global_setting(\"default_pxe_item_global\", \"local\") %>''\n\n<%= snippet
        \"pxegrub2_mac\" %>\n\n# Only grub2 from redhat has MAC-based config loading
        patch, load explicitly\nconfigfile=/grub2/grub.cfg-01-$mac\nsource \"$configfile\"\n\n#
        And if that fails render chain and discovery menu\n<%= snippet \"pxegrub2_chainload\"
        %>\n<%= snippet \"pxegrub2_discovery\" %>\n\n<% unless @profiles.nil? -%>\n<%
        for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %>\nmenuentry ''<%= \"#{profile[:hostgroup]} - #{profile[:template]}\" %>''
        {\n  linuxefi <%= profile[:kernel] %> <%= append %>\n  initrdefi <%= profile[:initrd]
        %>\n}\n<% end %>\n<% end -%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":9,"name":"PXEGrub2
        global default","template_kind_id":3,"template_kind_name":"PXEGrub2","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"36e54859273e4ff6a3a18e6679ff8e9b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [530238a0-0ce0-4ea9-9b07-b5f656c07545]
      x-runtime: ['0.048343']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/81
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub2_mac\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n# To load MAC-based config explicitly,
        a MAC address separated by dash chars is needed.\n# Also due to bug in RHEL
        7.4 files are loaded with an extra \":\" character at the end.\n# This workarounds
        both cases, make sure \"regexp.mod\" file is present on the TFTP.\n# For more
        info see: https://bugzilla.redhat.com/show_bug.cgi?id=1370642#c70\ninsmod
        regexp\nregexp --set=1:m1 --set=2:m2 --set=3:m3 --set=4:m4 --set=5:m5 --set=6:m6
        ''^([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})''
        \"$net_default_mac\"\nmac=${m1}-${m2}-${m3}-${m4}-${m5}-${m6}\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":81,"name":"pxegrub2_mac","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"9c41ae2d3dab658b1235924bedcf1318"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7a60582f-f086-4036-a626-3315a5e6e9b6]
      x-runtime: ['0.054515']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/82
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub_chainload\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n<%\n  # paths variable must be passed
        into the snippet, otherwise no EFI items are rendered\n  if !@paths.nil? &&
        @paths.size > 1\n-%>\nfallback=<%= (1..@paths.size).to_a.join('' '') %>\n  <%
        @paths.each do |path| %>\ntitle Chainload Grub from /EFI/<%= path %> or try
        next\n  rootnoverify (hd0,0)\n  chainloader /EFI/<%= path %>/grubx64.efi\n  <%
        end -%>\n<% else -%>\ntitle Update your PXEGrub local template to get EFI
        options\n  root (hd0,0)\n  chainloader +1\n<% end -%>\n\ntitle Chainload into
        bootloader on first disk\n  root (hd0,0)\n  chainloader +1\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":82,"name":"pxegrub_chainload","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"affb331a101c6aa5c37e492bac4f703b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0b9b07f2-adae-4052-b270-5cc874d7c5b3]
      x-runtime: ['0.055221']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/4
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: PXEGrub
        default local boot\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot provisioned
        hosts, do not associate or change the name. %>\n<%\n  # Grub1 only supports
        numeric default statement, this allows conversion to number. First define\n  #
        array of directories we will search for EFI booloaders:\n  paths = [\"fedora\",
        \"redhat\", \"centos\", \"debian\", \"ubuntu\", \"sles\", \"opensuse\", \"Microsoft\",
        \"EFI\"]\n  # Add remaining entries to it and use this to convert to number:\n  items
        = paths.push(\"local_chain_hd0\")\n  # Read default setting but since \"local\"
        is missing, use the first path available.\n  default_setting = global_setting(\"default_pxe_item_local\",
        paths.first)\n  default_setting = paths.first if default_setting == ''local''\n  default_item
        = items.index(default_setting) || 0\n%>\ndefault=<%= default_item %>\ntimeout=20\n\n<%=
        snippet \"pxegrub_chainload\", variables: {paths: paths} %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":4,"name":"PXEGrub
        default local boot","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"116c2b15077226a2b8944481d584be21"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5c257629-0ffd-48e5-9aec-be64c49e0e10]
      x-runtime: ['0.052264']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/83
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxegrub_discovery\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\nRHEL 7 virtio driver does not
        have persistent naming scheme, causing interfaces\nto be named eth0, eth1,
        etc.. If you want to enable the new persistent naming\nscheme and get inteface
        names like ens3, add net.ifnames=1 to the linuxefi line\nbelow. This will
        not be fixed until RHEL8 due to prevent breaking changes for\nexisting systems.
        See RHBZ#1259015 for more details.\n-%>\n# http://projects.theforeman.org/issues/15997\ntitle
        Foreman Discovery Image - not supported with Grub 1.x\n  kernel boot/fdi-image/vmlinuz0
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=<%= foreman_server_url %> proxy.type=foreman BOOTIF=01-$net_default_mac\n  initrd
        boot/fdi-image/initrd0.img\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":83,"name":"pxegrub_discovery","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"48d45d1ba8ac9ffbe6f444c29727c905"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [bf2ecd3f-b078-459d-8092-b5d87c1d6f35]
      x-runtime: ['0.056409']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/5
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXEGrub\nname: PXEGrub
        global default\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot unknown
        hosts, do not associate or change the name. %>\n<%\n  # Grub1 only supports
        numeric default statement, this allows conversion to number. First define\n  #
        array of directories we will search for EFI booloaders:\n  paths = [\"fedora\",
        \"redhat\", \"centos\", \"debian\", \"ubuntu\", \"sles\", \"opensuse\", \"Microsoft\",
        \"EFI\"]\n  # Add remaining entries to it and use this to convert to number:\n  items
        = paths.push(\"local_chain_hd0\", \"discovery\")\n  # Read default setting
        but since \"local\" is missing, use the first path available.\n  default_setting
        = global_setting(\"default_pxe_item_global\", paths.first)\n  default_setting
        = paths.first if default_setting == ''local''\n  default_item = items.index(default_setting)
        || 0\n%>\ndefault=<%= default_item %>\ntimeout=20\n\n<%= snippet \"pxegrub_chainload\",
        variables: {paths: paths} %>\n\n<%= snippet \"pxegrub_discovery\" %>\n\n<%
        unless @profiles.nil? -%>\n<% for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %>\ntitle <%= \"#{profile[:hostgroup]} - #{profile[:template]}\" %>\n  kernel
        <%= profile[:kernel] %> <%= append %>\n  initrd <%= profile[:initrd] %>\n<%
        end %>\n<% end -%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":5,"name":"PXEGrub
        global default","template_kind_id":2,"template_kind_name":"PXEGrub","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"6ea8aec6e586ef801f085d96be263f08"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [556a72a0-32f4-4ba9-8f89-f40e128cee51]
      x-runtime: ['0.050845']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/17
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        chain iPXE\nmodel: ProvisioningTemplate\n%>\n<%#\nChainboots iPXE/gPXE from
        PXELinux. Make sure the OS has iPXE template\nassociated and file ipxe.lkrn
        was copied in the TFTP directory (e.g. from\n/usr/share/ipxe/ipxe.lkrn or
        iPXE project web site).\n\nFor more info visit:\nhttp://projects.theforeman.org/projects/foreman/wiki/Fetch_boot_files_via_http_instead_of_TFTP\n%>\nDEFAULT
        linux\nLABEL linux\nKERNEL ipxe.lkrn\nAPPEND dhcp && chain <%= foreman_url(''iPXE'')
        %>\nIPAPPEND 2\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:13 UTC","id":17,"name":"PXELinux
        chain iPXE","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:13 GMT']
      etag: [W/"4b3acb0adf6bc68f5da44e3c2570eb75"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d292af4c-4ed8-49e2-9961-97307e45b896]
      x-runtime: ['0.051580']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/18
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        chain iPXE UNDI\nmodel: ProvisioningTemplate\n%>\n<%#\nChainboots iPXE/gPXE
        from PXELinux via UNDI. Make sure the OS has an iPXE\ntemplate associated
        and the file undionly.kpxe was copied into the TFTP\ndirectory as undionly-ipxe.0
        (e.g. from /usr/share/ipxe/undionly.kpxe or\nthe iPXE project web site). Changes
        need to be made in the DHCP\nconfiguration to prevent an endless loop to happen.\n\nFor
        more info visit:\nhttp://projects.theforeman.org/projects/foreman/wiki/Fetch_boot_files_via_http_instead_of_TFTP\n%>\nDEFAULT
        linux\nLABEL linux\nKERNEL undionly-ipxe.0\nIPAPPEND 2\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":18,"name":"PXELinux
        chain iPXE UNDI","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"e6f96c86165b144d39c5089373f2e1c3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e01c4172-3473-4983-af89-62bc104167d5]
      x-runtime: ['0.052797']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/84
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxelinux_chainload\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\nLABEL local\n  MENU LABEL Default
        local boot\n  MENU DEFAULT\n  LOCALBOOT 0\n\nLABEL local_primary\n  MENU LABEL
        Default local boot from primary hard drive\n  LOCALBOOT 0x80\n\nLABEL local_skip\n  MENU
        LABEL Boot from the next BIOS device\n  LOCALBOOT -1\n\nLABEL local_chain_hd0\n  MENU
        LABEL Chainload the first hard drive (hd0)\n  COM32 chain.c32\n  APPEND hd0\n\nLABEL
        local_chain_hd1\n  MENU LABEL Chainload the second hard drive (hd1)\n  COM32
        chain.c32\n  APPEND hd1\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":84,"name":"pxelinux_chainload","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"35643e1d1d405a81c1f57e4842c95cd1"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [32f2479c-fccb-4fd0-9867-7102a44892ea]
      x-runtime: ['0.052974']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/19
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        default local boot\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot provisioned
        hosts, do not associate or change the name. %>\n\nDEFAULT menu\nMENU TITLE
        Booting local disk (ESC to stop)\nTIMEOUT 200\nDEFAULT <%= global_setting(\"default_pxe_item_local\",
        \"local_chain_hd0\") %>\n\n<%= snippet \"pxelinux_chainload\" %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":19,"name":"PXELinux
        default local boot","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"60d00f54b44866566054f8328ceda063"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [cf24bcc4-605e-4a37-b6e7-bce762a5feb2]
      x-runtime: ['0.051034']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/20
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        default memdisk\nmodel: ProvisioningTemplate\noses:\n- FreeBSD (memdisk image)\n%>\nDEFAULT
        memdisk\n\nLABEL memdisk\n    KERNEL memdisk\n    APPEND initrd=<%= @initrd
        %> harddisk raw\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":20,"name":"PXELinux
        default memdisk","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"f627b6102c1075ce67d8c1526fb4a43c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [08c1ad74-b43a-4c2d-9b2c-63473de8a536]
      x-runtime: ['0.051820']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/85
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: pxelinux_discovery\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\ndiscovery image is based on
        CentOS/RHEL and therefor it is affected by https://bugzilla.redhat.com/show_bug.cgi?id=1259015.\nIn
        short, before RHEL 7.2 virtio driver didn''t have the new persistent naming
        scheme, causing interfaces to be named eth0, eth1, etc..\nIf you want to enable
        the new persistent naming scheme and get inteface names like ens3, add net.ifnames=1
        to the APPEND line below.\n-%>\nLABEL discovery\n  MENU LABEL Foreman Discovery
        Image\n  KERNEL boot/fdi-image/vmlinuz0\n  APPEND initrd=boot/fdi-image/initrd0.img
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=<%= foreman_server_url %> proxy.type=foreman\n  IPAPPEND 2\n\n<%#\nChainbooting
        via iPXE requires an extra script published via HTTP:\n\n#!ipxe\nkernel http://foreman_url/pub/vmlinuz0
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=https://foreman_url proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://foreman_url/pub/initrd0.img\nboot\n-%>\nLABEL discovery_ipxe\n  MENU
        LABEL Foreman Discovery Image - iPXE\n  KERNEL ipxe.lkrn\n  APPEND dhcp &&
        chain <%= foreman_server_url %>/pub/discovery.ipxe\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":85,"name":"pxelinux_discovery","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"f422ff6446aa2636f05189861e95482e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0aa170e0-3f6f-403c-b77d-56c9e866a45d]
      x-runtime: ['0.056676']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/21
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: PXELinux
        global default\nmodel: ProvisioningTemplate\n%>\n<%# Used to boot unknown
        hosts, do not associate or change the name. %>\n\nDEFAULT menu\nMENU TITLE
        Booting unknown host (ESC to stop)\nTIMEOUT 200\nONTIMEOUT <%= global_setting(\"default_pxe_item_global\",
        \"local\") %>\n\n<%= snippet \"pxelinux_chainload\" %>\n\n<%= snippet \"pxelinux_discovery\"
        %>\n\n<% unless @profiles.nil? -%>\n<% for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %>\nLABEL <%= \"#{profile[:hostgroup]} - #{profile[:template]}\" %>\n  KERNEL
        <%= profile[:kernel] %>\n  APPEND initrd=<%= profile[:initrd] %> <%= append
        %>\n<% end %>\n<% end -%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":21,"name":"PXELinux
        global default","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"e7eb8a5d742f3af50d045655a54ef823"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [1355aff3-0f57-46e6-ae09-9462f590435b]
      x-runtime: ['0.051594']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/86
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: rancheros_cloudconfig\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n#cloud-config\nhostname: <%= @host.shortname
        %>\nrancher:\n  network:\n    dns:\n      nameservers:\n<% if @host.subnet.dns_primary.present?
        or @host.subnet.dns_secondary.present? -%>\n<% if @host.subnet.dns_primary.present?
        -%>\n        - <%= @host.subnet.dns_primary %>\n<% end -%>\n<% if @host.subnet.dns_secondary.present?
        -%>\n        - <%= @host.subnet.dns_secondary %>\n<% end -%>\n<% end -%>\n      search:\n        -
        <%= @host.domain %>\n    interfaces:\n      eth*:\n        dhcp: true\n<%
        unless @host.subnet.respond_to?(:dhcp_boot_mode?) -%>\n      eth0:\n        address:
        <%= @host.ip -%>/<%= @host.subnet.cidr %>\n        gateway: <%= @host.subnet.gateway
        %>\n<% end -%>\n  console: debian\nssh_authorized_keys:\n<%-\nusers = @host.owner_type
        == ''Usergroup'' ? @host.owner.all_users : [@host.owner]\nusers.each do |user|\n  if
        user.respond_to?(:ssh_authorized_keys) && user.ssh_authorized_keys.any?\n    index
        = 0\n    user.ssh_keys.each do |key|\n      if index == 0\n-%>\n<%=\"  - #{key.type}
        #{key.ssh_key} #{key.comment}\"%>\n<%-\n      else\n-%>\n<%=\"  - #{key.type}
        #{key.ssh_key} #{key.comment} - #{index}\"%>\n<%-\n      end\n      index
        += 1\n    end\n  end\nend\n-%>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":86,"name":"rancheros_cloudconfig","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"ae1330df0dfd047253774cfe5096ae44"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3d359950-f5ab-4d78-9afc-60d04964bc2a]
      x-runtime: ['0.066170']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/50
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: RancherOS
        provision\nmodel: ProvisioningTemplate\noses:\n- RancherOS\n-%>\n<%= snippet
        ''rancheros_cloudconfig'' -%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":50,"name":"RancherOS
        provision","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"c16fa4f765fbb6d88c962acb253e05d9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [99be4b09-7499-43ee-bccf-b517a39bd052]
      x-runtime: ['0.052282']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/22
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: RancherOS
        PXELinux\nmodel: ProvisioningTemplate\noses:\n- RancherOS\n-%>\nDEFAULT rancheros\n\nLABEL
        rancheros\n  KERNEL <%= @kernel -%> rancher.state.dev=LABEL=RANCHER_STATE
        rancher.state.autoformat=[<%= host_param(''install-disk'') || ''/dev/sda''
        %>] rancher.cloud_init.datasources=[''url:<%= foreman_url(''provision'')-%>'']\n  APPEND
        initrd=<%= @initrd -%>\n\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":22,"name":"RancherOS
        PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"039758fc0fb5744ad39bad1298afab4a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c7c11744-3d09-42b5-b9b3-550efde32d4d]
      x-runtime: ['0.051911']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/87
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: redhat_register\nmodel:
        ProvisioningTemplate\nsnippet: true\n-%>\n<%#\n# Red Hat Registration Snippet\n#\n#
        General parameters:\n#\n#   redhat_install_agent = [true|false]         Install
        the management agent.  For Spacewalk,\n#                                               this
        is OSAD.  For Katello, this is katello-agent.\n#\n#   redhat_install_host_tools
        = [true|false]    Install the katello-host-tools yum/dnf plugins.\n#\n#   redhat_install_host_tracer_tools
        = [true|false]  Install the katello-host-tools Tracer yum/dnf plugin.\n#\n#   activation_key
        = <key>                      Activation key string, not needed if using\n#                                               subscription-manager
        with username/password\n#\n#   atomic = [true|false]                       Whether
        or not this system is Atomic\n#\n# Parameters for use with subscription-manager
        (Red Hat CDN, Satellite, or Katello)\n#\n#   subscription_manager = ''true''               You''re
        going to use subscription-manager\n#\n#   subscription_manager_username =
        <username>  Username for subscription-manager\n#\n#   subscription_manager_password
        = <password>  Password for subscription-manager\n#\n#   subscription_manager_certpkg_url
        = <url>    Custom certificate package URL\n#\n#   subscription_manager_atomic_url
        = <url>     Script used for configuring Atomic servers\n#                                               for
        subscription-manager\n#\n#   subscription_manager_org = <org name>       Organization
        name, if required\n#\n#   subscription_manager_repos = <repos>        Additional
        repositories to enable\n#                                               after
        registration\n#\n#   subscription_manager_override_repos_cost = <cost>  Override
        repository cost\n#\n#   subscription_manager_pool = <pool>          Specific
        subscription pool to use\n#\n#   http-proxy = <host>                         Proxy
        hostname to be used for registration\n#\n#   http-proxy-port = <port>                    Proxy
        port to be used for registration\n#\n#   http-proxy-user = <user>                    Proxy
        user to be used for registration\n#\n#   http-proxy-password = <password>            Proxy
        password to be used for registration\n#\n#   syspurpose_role                             Sets
        the system purpose role\n#\n#   syspurpose_usage                            Sets
        the system purpose usage\n#\n#   syspurpose_sla                              Sets
        the system purpose SLA\n#\n#   syspurpose_addons                           Sets
        the system purpose add-ons. Separate multiple\n#                                               values
        with commas.\n#\n# Set these parameters if you''re using rhnreg_ks:\n#\n#   spacewalk_host
        = <hostname>                 Hostname of Spacewalk server\n#\n%>\n\n<%\n  #
        Katello or subscription-manager:\n  if host_param_true?(''subscription_manager'')
        || host_param(''kt_activation_keys'')\n    registration_type = ''subscription_manager''\n  #
        Spacewalk:\n  elsif host_param(''spacewalk_host'')\n    registration_type
        = ''spacewalk''\n  end if\n%>\n\n<% if registration_type == ''subscription_manager''
        %>\n  <%\n    atomic = @host.operatingsystem.respond_to?(:atomic) ? @host.operatingsystem.atomic?
        : host_param_true?(''atomic'')\n\n    if host_param(''kt_activation_keys'')\n      subscription_manager_certpkg_url
        = subscription_manager_configuration_url(@host)\n      subscription_manager_atomic_url
        = subscription_manager_configuration_url(@host, false)\n      subscription_manager_org
        = @host.rhsm_organization_label\n      activation_key = host_param(''kt_activation_keys'')\n      redhat_install_agent
        = true\n      redhat_install_host_tools = true\n      redhat_install_host_tracer_tools
        = false\n    else\n      subscription_manager_certpkg_url = host_param(''subscription_manager_certpkg_url'')\n      subscription_manager_atomic_url
        = host_param(''subscription_manager_atomic_url'')\n      subscription_manager_org
        = host_param(''subscription_manager_org'')\n      activation_key = host_param(''activation_key'')\n      redhat_install_agent
        = host_param_true?(''redhat_install_agent'')\n      redhat_install_host_tools
        = host_param_true?(''redhat_install_host_tools'')\n      redhat_install_host_tracer_tools
        = host_param_true?(''redhat_install_host_tracer_tools'')\n    end\n  %>\n\n  echo
        ##############################################################\n  echo #################
        SUBSCRIPTION MANAGER #######################\n  echo ##############################################################\n  echo\n  echo
        \"Starting the subscription-manager registration process\"\n\n  <% if !atomic
        %>\n    if [ -f /usr/bin/dnf ]; then\n      dnf -y install subscription-manager\n    else\n      yum
        -t -y install subscription-manager\n    fi\n  <% end %>\n\n  <%- if (host_param(''syspurpose_role'')
        || host_param(''syspurpose_usage'') || host_param(''syspurpose_sla'') || host_param(''syspurpose_addons''))
        %>\n    <%- if !atomic %>\n      if [ -f /usr/bin/dnf ]; then\n        dnf
        -y install subscription-manager-syspurpose\n      else\n        yum -t -y
        install subscription-manager-syspurpose\n      fi\n    <%- end %>\n\n    if
        [ -f /usr/sbin/syspurpose ]; then\n      <%- if host_param(''syspurpose_role'')
        %>\n        syspurpose set-role \"<%= host_param(''syspurpose_role'') %>\"\n      <%-
        end %>\n      <%- if host_param(''syspurpose_usage'') %>\n        syspurpose
        set-usage \"<%= host_param(''syspurpose_usage'') %>\"\n      <%- end %>\n      <%-
        if host_param(''syspurpose_sla'') %>\n        syspurpose set-sla \"<%= host_param(''syspurpose_sla'')
        %>\"\n      <%- end %>\n      <%- if host_param(''syspurpose_addons'') %>\n        <%-
        addons = host_param(''syspurpose_addons'').split('','')\n              .map
        { |add_on| \"''#{add_on.strip}''\" }.join(\" \") %>\n        syspurpose add-addons
        <%= addons %>\n      <%- end %>\n    else\n      echo \"Syspurpose CLI not
        found.\"\n    fi\n  <% end %>\n\n  <% if host_param(''http-proxy'') %>\n    subscription-manager
        config --server.proxy_hostname=''<%= host_param(\"http-proxy\") %>''\n    <%
        if host_param(''http-proxy-user'') %>\n      subscription-manager config --server.proxy_user=''<%=
        host_param(\"http-proxy-user\") %>''\n    <% end %>\n    <% if host_param(''http-proxy-password'')
        %>\n      subscription-manager config --server.proxy_password=''<%= host_param(\"http-proxy-password\")
        %>''\n    <% end %>\n    <% if host_param(''http-proxy-port'') %>\n      subscription-manager
        config --server.proxy_port=''<%= host_param(\"http-proxy-port\") %>''\n    <%
        end %>\n  <% end %>\n\n  <% if atomic %>\n    curl -s <%= subscription_manager_atomic_url
        %> | IS_ATOMIC=true bash\n  <% elsif subscription_manager_certpkg_url %>\n    rpm
        -Uvh <%= subscription_manager_certpkg_url %>\n  <% end %>\n\n  <% if host_param(''subscription_manager_username'')
        && host_param(''subscription_manager_password'') %>\n    <% if host_param(''subscription_manager_pool'')
        %>\n      subscription-manager register --name=\"<%= @host.name %>\" --username=''<%=
        host_param(\"subscription_manager_username\") %>'' --password=''<%= host_param(\"subscription_manager_password\")
        %>''\n      subscription-manager attach --pool=''<%= host_param(''subscription_manager_pool'')
        %>''\n    <% else %>\n      subscription-manager register --name=\"<%= @host.name
        %>\" --username=''<%= host_param(\"subscription_manager_username\") %>'' --password=''<%=
        host_param(\"subscription_manager_password\") %>'' --auto-attach\n    <% end
        %>\n\n  <% elsif activation_key %>\n    subscription-manager register --name=\"<%=
        @host.name %>\" --org=''<%= subscription_manager_org %>'' --activationkey=''<%=
        activation_key %>''\n  <% else %>\n    echo \"No activation key found: Not
        registering to subscription manager\"\n  <% end %>\n\n  <% if host_param(''subscription_manager_repos'')
        %>\n    # workaround for RHEL 6.4 bug https://bugzilla.redhat.com/show_bug.cgi?id=1008016\n    subscription-manager
        repos --list > /dev/null\n    <%= \"subscription-manager repos --enable #{host_param(''subscription_manager_repos'').gsub('','',
        '' --enable'')}\" %>\n  <% end %>\n\n  <% if host_param(''subscription_manager_override_repos_cost'')
        %>\n    for repo in $(subscription-manager repos --list-enabled | grep \"Repo
        ID:\" | awk -F'' '' ''{ print $3 }''); do\n      <%= \"subscription-manager
        repo-override --list --repo $repo | grep ''cost:'' &>/dev/null || subscription-manager
        repo-override --repo $repo --add=cost:#{host_param(''subscription_manager_override_repos_cost'')}\"
        %>\n    done\n  <% end %>\n\n  <% if !atomic %>\n    <% if redhat_install_agent
        || redhat_install_host_tools || redhat_install_host_tracer_tools %>\n       if
        [ -f /usr/bin/dnf ]; then\n         PACKAGE_MAN=\"dnf -y\"\n       else\n         PACKAGE_MAN=\"yum
        -t -y\"\n       fi\n    <% end %>\n\n    <% if redhat_install_agent %>\n      $PACKAGE_MAN
        install katello-agent\n    <% elsif redhat_install_host_tools %>\n      $PACKAGE_MAN
        install katello-host-tools\n    <% end %>\n\n    <% if redhat_install_host_tracer_tools
        %>\n      $PACKAGE_MAN install katello-host-tools-tracer\n    <% end %>\n  <%
        end %>\n<% end %>\n\n<% if registration_type == ''spacewalk'' %>\n  echo ##############################################################\n  echo
        ################ SPACEWALK REGISTRATION ######################\n  echo ##############################################################\n\n  <%
        if host_param(''activation_key'') %>\n    rhn_activation_key=\"<%= host_param(''activation_key'')
        -%>\"\n    satellite_hostname=\"<%= host_param(''spacewalk_host'') -%>\"\n    rhn_cert_file=\"RHN-ORG-TRUSTED-SSL-CERT\"\n\n    echo
        \"Registering to RHN Satellite at [$satellite_hostname]\"\n    echo \"Using
        Registration Key [$rhn_activation_key]\"\n\n    # Obtain our RHN Satellite
        Certificate\n    echo \"Obtaining RHN SSL certificate\"\n    curl -o /usr/share/rhn/$rhn_cert_file
        -k https://$satellite_hostname/pub/$rhn_cert_file\n\n    <% if @host.operatingsystem.name
        == ''SLES'' -%>\n      # If SLES then add CA Cert to CA Certs for curl\n      cp
        /usr/share/rhn/$rhn_cert_file /etc/ssl/certs/\n      ln -s /etc/ssl/certs/$rhn_cert_file
        /etc/ssl/certs/`openssl x509 -hash -noout -in /etc/ssl/certs/$rhn_cert_file`.0\n    <%
        end -%>\n\n    # Update our up2date configuration file\n    echo \"Updating
        SSL CA Certificate to /usr/share/rhn/$rhn_cert_file\"\n    sed -i -e \"s|^sslCACert=.*$|sslCACert=/usr/share/rhn/$rhn_cert_file|\"
        /etc/sysconfig/rhn/up2date\n\n    # Update our Satellite Hostname\n    echo
        \"Updating Satellite Hostname to [$satellite_hostname]\"\n    sed -i -e \"s|^serverURL=.*$|serverURL=https://$satellite_hostname/XMLRPC|\"
        /etc/sysconfig/rhn/up2date\n    sed -i -e \"s|^noSSLServerURL=.*$|noSSLServerURL=https://$satellite_hostname/XMLRPC|\"
        /etc/sysconfig/rhn/up2date\n\n    # Restart messagebus/HAL to try and prevent
        hardware detection errors in rhnreg_ks\n    echo \"Restarting services...\"\n    <%
        if @host.operatingsystem.name == ''SLES'' && @host.operatingsystem.major.to_i
        < 12 -%>\n      service haldaemon restart\n    <% else -%>\n      service
        messagebus restart\n      service hald restart\n    <% end -%>\n\n    # Now,
        perform our registration\n    #  (might get hardware errors here, due to dbus/messagebus
        lameness. These are safe to ignore.)\n    echo -n \"Performing RHN Registration...
        \"\n    rhnreg_ks --activationkey=$rhn_activation_key\n    echo \"done.\"\n\n    #
        Check we registered\n    echo -n \"Checking System Registration... \"\n    if
        ! rhn_check; then\n        echo \"FAILED\"\n        echo \" >> RHN Registration
        FAILED. Please Investigate. <<\"\n    else\n        echo \"registration successful.\"\n    fi\n\n    <%
        if host_param_true?(''redhat_install_agent'') %>\n    if [ -f /usr/bin/dnf
        ]; then\n      dnf -y install osad\n    else\n      yum -t -y install osad\n    fi\n    <%
        end %>\n  <% else %>\n    echo \"No activation key found: Not registering\"\n  <%
        end %>\n<% end %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":87,"name":"redhat_register","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"d08d544708cc38ace9d653cb489e101e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e06871ee-1eae-4462-bdb3-b0e1e87741d2]
      x-runtime: ['0.055568']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/88
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: remote_execution_ssh_keys\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\n# SSH keys setup snippet for Remote
        Execution plugin\n#\n# Parameters:\n#\n# remote_execution_ssh_keys: public
        keys to be put in ~/.ssh/authorized_keys\n#\n# remote_execution_ssh_user:
        user for which remote_execution_ssh_keys will be\n#                            authorized\n#\n#
        remote_execution_create_user: create user if it not already existing\n#\n#
        remote_execution_effective_user_method: method to switch from ssh user to\n#                                         effective
        user\n#\n# This template sets up SSH keys in any host so that as long as your
        public\n# SSH key is in remote_execution_ssh_keys, you can SSH into a host.
        This \n# works in combination with Remote Execution plugin by querying smart
        proxies\n# to build an array.\n#\n# To use this snippet without the plugin
        provide the SSH keys as host parameter\n# remote_execution_ssh_keys. It expects
        the same format like the authorized_keys\n# file.\n\n\n<% if !host_param(''remote_execution_ssh_keys'').blank?
        %>\n<% ssh_user = host_param(''remote_execution_ssh_user'') || ''root'' %>\n\nuser_exists=false\ngetent
        passwd <%= ssh_user %> >/dev/null 2>&1 && user_exists=true\n\n<% if ssh_user
        != ''root'' && host_param_true?(''remote_execution_create_user'') -%>\nif
        ! $user_exists; then\n  useradd -m <%= ssh_user %> && user_exists=true\nfi\n<%
        end -%>\n\nif $user_exists; then\n<% ssh_path = \"~#{ssh_user}/.ssh\" %>\n\n  mkdir
        -p <%= ssh_path %>\n\n  cat << EOF >> <%= ssh_path %>/authorized_keys\n<%=
        host_param(''remote_execution_ssh_keys'').is_a?(String) ? host_param(''remote_execution_ssh_keys'')
        : host_param(''remote_execution_ssh_keys'').join(\"\\n\") %>\nEOF\n\n  chmod
        0700 <%= ssh_path %>\n  chmod 0600 <%= ssh_path %>/authorized_keys\n  chown
        -R <%= \"#{ssh_user}:\" %> <%= ssh_path %>\n\n  # Restore SELinux context
        with restorecon, if it''s available:\n  command -v restorecon && restorecon
        -RvF <%= ssh_path %> || true\n  \n<% if ssh_user != ''root'' && host_param(''remote_execution_effective_user_method'')
        == ''sudo'' -%>\n<% if @host.operatingsystem.family == ''Redhat'' || @host.operatingsystem.family
        == ''Debian'' -%>\necho \"<%= ssh_user %> ALL = (root) NOPASSWD : ALL\nDefaults:<%=
        ssh_user %> !requiretty\" > /etc/sudoers.d/<%= ssh_user %>\n<% elsif @host.operatingsystem.family
        == ''Suse'' -%>\necho \"<%= ssh_user %> ALL = (root) NOPASSWD : ALL\nDefaults:<%=
        ssh_user %> !targetpw\" >> /etc/sudoers\n<% end -%>\n<% end -%>\nelse\n  echo
        ''The remote_execution_ssh_user does not exist and remote_execution_create_user
        is not set to true.  remote_execution_ssh_keys snippet will not install keys''\nfi\n<%
        end %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":88,"name":"remote_execution_ssh_keys","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"efb076a2817c4118aa82f748f6b5ec2c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [532019c0-8bbc-4df3-95d5-5cb4ddaeec4f]
      x-runtime: ['0.055209']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/89
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: saltstack_minion\nmodel:
        ProvisioningTemplate\nsnippet: true\n%>\nmaster: <%= host_param(''salt_master'')
        %>\nlog_level: warning\n\n<%#\n# Grains (http://docs.saltstack.com/en/latest/topics/targeting/grains.html#grains-in-the-minion-config)\n#\n#
        Possible parameters are:\n#\n# * {''cluster'': ''alpha''}\n# * {''roles'':
        [''webserver'', ''frontend'']}\n#\n%>\ngrains: <%= host_param(''salt_grains'')
        ? host_param(''salt_grains'') : ''{}'' %>\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":89,"name":"saltstack_minion","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"9ce36beb32582bb078d9e443459de95b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fcf90f5f-5b15-4bb4-a8bb-0e3be946e50d]
      x-runtime: ['0.054782']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/90
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: snippet\nname: saltstack_setup\nmodel:
        ProvisioningTemplate\ndescription: this snippet will configure the Saltstack
        Minion\nsnippet: true\n%>\n<%\netc_path = (@host.operatingsystem.family ==
        ''Freebsd'') ? ''/usr/local/etc/salt'' : ''/etc/salt''\nbin_path = (@host.operatingsystem.family
        == ''Freebsd'') ? ''/usr/local/bin'' : ''/usr/bin''\n%>\n\n<% if @host.operatingsystem.family
        == ''Debian'' -%>\napt-get update\napt-get install -y salt-minion\n<% elsif
        @host.operatingsystem.family == ''Freebsd'' -%>\npkg install -y py27-salt\n<%
        elsif @host.operatingsystem.family == ''Redhat'' -%>\nyum -t -y install salt-minion\n<%
        end -%>\n\ncat > <%= etc_path %>/minion << EOF\n<%= snippet ''saltstack_minion''
        %>\nEOF\n\n<% if @host.operatingsystem.family == ''Freebsd'' -%>\necho ''salt_minion_enable=\"YES\"''
        >>/etc/rc.conf\necho ''salt_minion_paths=\"/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin\"''
        >>/etc/rc.conf\n<% elsif @host.operatingsystem.family == ''Redhat'' -%>\n/sbin/chkconfig
        --level 345 salt-minion on\n<% elsif @host.operatingsystem.family == ''Suse''
        -%>\n/sbin/chkconfig salt-minion on -f\n<% end -%>\n\n<%= bin_path %>/salt-call
        --no-color --grains >/dev/null\n","locked":false,"snippet":true,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":90,"name":"saltstack_setup","template_kind_id":null,"template_kind_name":null,"template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"5a526ea2332ac0f0a53eefb0d4de03fb"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [87259331-b0ab-4a07-9bd8-2a460ec90121]
      x-runtime: ['0.054758']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/94
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: user_data\nname: UserData
        default\nmodel: ProvisioningTemplate\noses:\n- CentOS\n- Fedora\n- Debian\n-
        Ubuntu\n-%>\n<%#\nThis template accepts the following parameters:\n- ssh_pwauth:
        boolean (default=true unless ssh_authorized_keys)\n- ssh_authorized_keys:
        string w newline seperated keys (default=\"\")\n- package_upgrade: boolean
        (default=false)\n- reboot: boolean (default=false)\n-%>\n<%\n  ssh_pwauth
        = host_param(''ssh_pwauth'') ? host_param_true?(''ssh_pwauth'') : !host_param(''ssh_authorized_keys'')\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' && @host.operatingsystem.name
        != ''Fedora''\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        && @host.chef_proxy\n-%>\n#cloud-config\nhostname: <%= @host.shortname %>\nfqdn:
        <%= @host %>\nmanage_etc_hosts: true\n<% if ssh_pwauth -%>\n<%# Don''t enable
        this in production. It is very insecure! Use ssh_authorized_keys instead...\n    http://cloudinit.readthedocs.io/en/latest/topics/examples.html#including-users-and-groups
        -%>\nssh_pwauth: true\ngroups:\n- admin\nusers:\n- default\n- name: admin\n  primary-group:
        admin\n  groups: users\n  shell: /bin/bash\n  sudo: [''ALL=(ALL) ALL'']\n  lock-passwd:
        false\n  passwd: <%= @host.root_pass %>\n<% end -%>\n<% if host_param(''ssh_authorized_keys'')
        -%>\nssh_authorized_keys:\n<% host_param(''ssh_authorized_keys'').split(\"\\n\").each
        do |ssh_key| -%>\n- <%= ssh_key %>\n<% end -%>\n<% end -%>\n\n<% if host_param_true?(''package_upgrade'')
        -%>\npackage_upgrade: true\n<% end -%>\n\nruncmd:\n<% if rhel_compatible -%>\n-
        |\n<%= indent(2) { snippet(''epel'') } %>\n<% end -%>\n- |\n<%= indent(2)
        { snippet(''remote_execution_ssh_keys'') } %>\n<% if chef_enabled -%>\n- |\n<%=
        indent(2) { snippet(''chef_client'') } %>\n<% end -%>\n<% if puppet_enabled
        -%>\n- |\n<%= indent(2) { snippet(''puppetlabs_repo'') } %>\n- |\n<%= indent(2)
        { snippet(''puppet_setup'') } %>\n<% end -%>\n<% if salt_enabled -%>\n- |\n<%=
        indent(2) { snippet(''saltstack_setup'') } %>\n<% end -%>\n\n<%# Contact Foreman
        to confirm instance is built -%>\nphone_home:\n  url: <%= foreman_url(''built'')
        %>\n  post: []\n  tries: 10\n\n<% if host_param_true?(''reboot'') -%>\npower_state:\n  mode:
        reboot\n  timeout: 30\n  condition: true\n<% end -%>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:15 UTC","updated_at":"2019-07-18 15:21:14 UTC","id":94,"name":"UserData
        default","template_kind_id":8,"template_kind_name":"user_data","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:14 GMT']
      etag: [W/"7bb07f7096951c531ac02b8d71a2a71b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [95f7b69c-19c6-4b21-8ffb-7ad3ec0a929d]
      x-runtime: ['0.052246']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/23
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: WAIK
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- Windows\n%>\nDEFAULT
        winPE\n\nLABEL winPE\n    KERNEL /Boot/startrom.0\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:15 UTC","id":23,"name":"WAIK
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:15 GMT']
      etag: [W/"908b7ce60d0bd8e2c705f7cd8bf0a449"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [06c8ead1-d0a3-4792-9a16-92bfb3d89a98]
      x-runtime: ['0.053165']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/51
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: provision\nname: XenServer
        default answerfile\nmodel: ProvisioningTemplate\noses:\n- XenServer\n-%>\n<%\n  subnet
        = @host.subnet\n  dhcp = subnet.dhcp_boot_mode?\n  interface_name = @host.primary_interface.identifier.blank?
        ? ''eth0'' : @host.primary_interface.identifier\n-%>\n<?xml version=\"1.0\"?>\n<installation
        mode=\"fresh\" srtype=\"lvm\">\n<%= @host.diskLayout -%>\n  <keymap><%= host_param(''keyboard'')
        || ''us'' %></keymap>\n  <hostname><%= @host.shortname %></hostname>\n  <root-password
        type=\"hash\"><%= root_pass %></root-password>\n  <source type=\"url\"><%=
        @mediapath %></source>\n  <admin-interface name=\"<%= interface_name %>\"
        proto=\"<%= dhcp ? ''dhcp'' : ''static'' %>\">\n<% unless dhcp -%>\n    <ip><%=
        @host.ip %></ip>\n    <subnet-mask><%= subnet.mask %></subnet-mask>\n<% if
        subnet.gateway.present? -%>\n    <gateway><%= subnet.gateway %></gateway>\n<%
        end -%>\n<% end -%>\n  </admin-interface>\n<% if subnet.dns_primary.present?
        -%>\n  <name-server><%= subnet.dns_primary %></name-server>\n<% end -%>\n<%
        if subnet.dns_secondary.present? -%>\n  <name-server><%= subnet.dns_secondary
        %></name-server>\n<% end -%>\n  <ntp-server><%= host_param(''ntp-server'')
        || ''pool.ntp.org'' %></ntp-server>\n  <timezone><%= host_param(''time-zone'')
        || ''UTC'' %></timezone>\n  <time-config-method>ntp</time-config-method>\n  <script
        stage=\"installation-complete\" type=\"url\">\n    <%= foreman_url(''finish'')
        %>\n  </script>\n</installation>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:15 UTC","id":51,"name":"XenServer
        default answerfile","template_kind_id":5,"template_kind_name":"provision","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:15 GMT']
      etag: [W/"703f0576b04aad858961cb6f942be278"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fa7b4cc9-e9ba-4052-9412-58ba3e256f8f]
      x-runtime: ['0.049079']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/32
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: finish\nname: XenServer
        default finish\nmodel: ProvisioningTemplate\noses:\n- XenServer\n-%>\n#!/bin/bash\n<%=
        snippet ''built'' %>\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:14 UTC","updated_at":"2019-07-18 15:21:15 UTC","id":32,"name":"XenServer
        default finish","template_kind_id":6,"template_kind_name":"finish","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:15 GMT']
      etag: [W/"81d0dc9360686e6eefb9c57869396ee4"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [51113a43-22e5-4027-a56b-c698e655ee17]
      x-runtime: ['0.051543']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: !!python/unicode '{"provisioning_template": {"location_ids": [11], "locked":
      false}}'
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['66']
      Content-Type: [application/json]
      Cookie: [request_method=PUT; _session_id=6c01da4dbb0bed5947dc237fbf084601]
    method: PUT
    uri: https://centos7-foreman-1-22/api/provisioning_templates/24
  response:
    body: {string: !!python/unicode '{"template":"<%#\nkind: PXELinux\nname: XenServer
        default PXELinux\nmodel: ProvisioningTemplate\noses:\n- XenServer\n%>\ndefault
        xenserver\nlabel xenserver\nkernel mboot.c32\nappend <%= @xen %> dom0_max_vcpus=1-2
        dom0_mem=752M,max:752M com1=115200,8n1 console=com1,vga --- <%= @kernel -%>
        xencons=hvc console=hvc0 console=tty0 answerfile=<%= foreman_url(''provision'')%>
        install --- <%= @initrd %>\nIPAPPEND 2\n","locked":false,"snippet":false,"audit_comment":null,"created_at":"2019-07-15
        16:12:13 UTC","updated_at":"2019-07-18 15:21:15 UTC","id":24,"name":"XenServer
        default PXELinux","template_kind_id":1,"template_kind_name":"PXELinux","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":11,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":10,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:15 GMT']
      etag: [W/"1fbe4c5839f1af1f68576c0cac86a294"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [492be23e-b930-4303-94b5-9869ec106f96]
      x-runtime: ['0.050349']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
version: 1
