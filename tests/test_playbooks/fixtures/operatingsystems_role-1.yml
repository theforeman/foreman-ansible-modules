interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/status
  response:
    body:
      string: '{"result":"ok","status":200,"version":"2.5.4","api_version":2}'
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=100
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '62'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/template_kinds?search=name%3D%22cloud-init%22&per_page=4294967296
  response:
    body:
      string: "{\n  \"total\": 13,\n  \"subtotal\": 1,\n  \"page\": 1,\n  \"per_page\":
        4294967296,\n  \"search\": \"name=\\\"cloud-init\\\"\",\n  \"sort\": {\n    \"by\":
        null,\n    \"order\": null\n  },\n  \"results\": [{\"created_at\":\"2021-11-15
        13:19:48 UTC\",\"updated_at\":\"2021-11-15 13:19:48 UTC\",\"name\":\"cloud-init\",\"id\":12}]\n}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=99
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '284'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/provisioning_templates?search=name%3D%22CloudInit+default%22&per_page=4294967296
  response:
    body:
      string: "{\n  \"total\": 110,\n  \"subtotal\": 1,\n  \"page\": 1,\n  \"per_page\":
        4294967296,\n  \"search\": \"name=\\\"CloudInit default\\\"\",\n  \"sort\":
        {\n    \"by\": null,\n    \"order\": null\n  },\n  \"results\": [{\"snippet\":false,\"description\":null,\"created_at\":\"2021-11-15
        13:19:48 UTC\",\"updated_at\":\"2021-11-15 13:19:48 UTC\",\"id\":27,\"name\":\"CloudInit
        default\",\"template_kind_id\":12,\"template_kind_name\":\"cloud-init\"}]\n}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=98
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '390'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/provisioning_templates/27
  response:
    body:
      string: '{"template":"<%#\nkind: cloud-init\nname: CloudInit default\nmodel:
        ProvisioningTemplate\noses:\n- AlmaLinux\n- CentOS\n- Fedora\n- Rocky\n- Debian\n-
        Ubuntu\n-%>\n<%#\nThis template accepts the following parameters:\n- force-puppet:
        boolean (default=false)\n- enable-puppetlabs-repo: boolean (default=false)\n-
        enable-puppetlabs-puppet5-repo: boolean (default=false)\n- enable-puppetlabs-puppet6-repo:
        boolean (default=false)\n-%>\n<%\n  rhel_compatible = @host.operatingsystem.family
        == ''Redhat'' && @host.operatingsystem.name != ''Fedora''\n  proxy_uri = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = host_puppet_server.present? || host_param_true?(''force-puppet'')\n  chef_enabled
        = @host.respond_to?(:chef_proxy) && @host.chef_proxy\n-%>\n\n#cloud-config\nhostname:
        <%= @host.name %>\nfqdn: <%= @host %>\nmanage_etc_hosts: true\nusers: {}\nruncmd:\n-
        |\n<%= indent(2) { snippet ''fix_hosts'' } -%>\n- |\n<%= indent(2) { snippet
        ''yum_proxy'' } -%>\n- |\n<%= indent(2) { snippet ''ntp'' } -%>\n- |\n<% if
        rhel_compatible && !host_param_false?(''enable-epel'') -%>\n<%= indent(2)
        { snippet ''epel'' } -%>\n<% end -%>\n- |\n<%= indent(2) { snippet ''redhat_register''
        } -%>\n- |\n<% if host_enc[''parameters''][''realm''] && @host.realm && (@host.realm.realm_type
        == ''FreeIPA'' || @host.realm.realm_type == ''Red Hat Identity Management'')
        -%>\n<%= indent(2) { snippet ''freeipa_register'' } %>\n<% end -%>\n- |\n<%=
        indent(2) { snippet ''remote_execution_ssh_keys'' } %>\n- |\n<%= indent(2)
        { snippet ''blacklist_kernel_modules'' } %>\n- |\n<% if chef_enabled %>\n<%=
        indent(2) { snippet ''chef_client'' } %>\n<% end -%>\n- |\n<%=\n  if puppet_enabled
        && (host_param_true?(''enable-puppetlabs-repo'') ||\n    host_param_true?(''enable-puppetlabs-puppet6-repo'')
        ||\n    host_param_true?(''enable-puppetlabs-puppet5-repo''))\n    indent(2)
        { snippet ''puppetlabs_repo'' }\n  elsif puppet_enabled\n    indent(2) { snippet(''puppet_setup'',
        :variables => { :full_puppet_run => true }) }\n  else\n    ''''\n  end\n-%>\nphone_home:\n  url:
        <%= foreman_url(''built'') %>\n  post: []\n  tries: 10\n","locked":true,"snippet":false,"description":null,"created_at":"2021-11-15
        13:19:48 UTC","updated_at":"2021-11-15 13:19:48 UTC","id":27,"name":"CloudInit
        default","template_kind_id":12,"template_kind_name":"cloud-init","template_combinations":[],"operatingsystems":[],"os_default_templates":[],"locations":[{"id":2,"name":"Default
        Location","title":"Default Location","description":null},{"id":26,"name":"Test
        Location","title":"Test Location","description":null}],"organizations":[{"id":1,"name":"Default
        Organization","title":"Default Organization","description":null},{"id":25,"name":"Test
        Organization","title":"Test Organization","description":"A test organization"}]}'
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=97
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '2802'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/operatingsystems?search=title%3D%22RedHat+8.5%22&per_page=4294967296
  response:
    body:
      string: "{\n  \"total\": 7,\n  \"subtotal\": 1,\n  \"page\": 1,\n  \"per_page\":
        4294967296,\n  \"search\": \"title=\\\"RedHat 8.5\\\"\",\n  \"sort\": {\n
        \   \"by\": null,\n    \"order\": null\n  },\n  \"results\": [{\"description\":null,\"major\":\"8\",\"minor\":\"5\",\"family\":\"Redhat\",\"release_name\":null,\"password_hash\":\"SHA256\",\"created_at\":\"2021-11-22
        11:59:09 UTC\",\"updated_at\":\"2021-11-22 11:59:09 UTC\",\"id\":11,\"name\":\"RedHat\",\"title\":\"RedHat
        8.5\"}]\n}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=96
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '407'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: GET
    uri: https://foreman.example.org/api/operatingsystems/11/os_default_templates?per_page=4294967296
  response:
    body:
      string: "{\n  \"total\": 8,\n  \"subtotal\": 8,\n  \"page\": 1,\n  \"per_page\":
        4294967296,\n  \"search\": null,\n  \"sort\": {\n    \"by\": null,\n    \"order\":
        null\n  },\n  \"results\": [{\"id\":82,\"provisioning_template_id\":36,\"provisioning_template_name\":\"Linux
        host_init_config default\",\"template_kind_id\":1,\"template_kind_name\":\"host_init_config\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":83,\"provisioning_template_id\":14,\"provisioning_template_name\":\"Kickstart
        default PXELinux\",\"template_kind_id\":2,\"template_kind_name\":\"PXELinux\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":84,\"provisioning_template_id\":3,\"provisioning_template_name\":\"Kickstart
        default PXEGrub\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":85,\"provisioning_template_id\":6,\"provisioning_template_name\":\"Kickstart
        default PXEGrub2\",\"template_kind_id\":4,\"template_kind_name\":\"PXEGrub2\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":86,\"provisioning_template_id\":41,\"provisioning_template_name\":\"Kickstart
        default iPXE\",\"template_kind_id\":5,\"template_kind_name\":\"iPXE\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":87,\"provisioning_template_id\":52,\"provisioning_template_name\":\"Kickstart
        default\",\"template_kind_id\":6,\"template_kind_name\":\"provision\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":88,\"provisioning_template_id\":32,\"provisioning_template_name\":\"Kickstart
        default finish\",\"template_kind_id\":7,\"template_kind_name\":\"finish\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"},{\"id\":89,\"provisioning_template_id\":107,\"provisioning_template_name\":\"Kickstart
        default user data\",\"template_kind_id\":9,\"template_kind_name\":\"user_data\",\"operatingsystem_id\":11,\"operatingsystem_name\":\"RedHat
        8.5\"}]\n}\n"
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=95
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
      content-length:
      - '1837'
    status:
      code: 200
      message: OK
- request:
    body: '{"os_default_template": {"template_kind_id": 12, "provisioning_template_id":
      27}}'
    headers:
      Accept:
      - application/json;version=2
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '81'
      Content-Type:
      - application/json
      User-Agent:
      - apypie (https://github.com/Apipie/apypie)
    method: POST
    uri: https://foreman.example.org/api/operatingsystems/11/os_default_templates
  response:
    body:
      string: '{"id":90,"provisioning_template_id":27,"provisioning_template_name":"CloudInit
        default","template_kind_id":12,"template_kind_name":"cloud-init","operatingsystem_id":11,"operatingsystem_name":"RedHat
        8.5"}'
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Connection:
      - Keep-Alive
      Content-Security-Policy:
      - 'default-src ''self''; child-src ''self''; connect-src ''self'' ws: wss:;
        img-src ''self'' data:; script-src ''unsafe-eval'' ''unsafe-inline'' ''self'';
        style-src ''unsafe-inline'' ''self'''
      Content-Type:
      - application/json; charset=utf-8
      Foreman_api_version:
      - '2'
      Foreman_current_location:
      - ; ANY
      Foreman_current_organization:
      - ; ANY
      Foreman_version:
      - 2.5.4
      Keep-Alive:
      - timeout=15, max=94
      Strict-Transport-Security:
      - max-age=631139040; includeSubdomains
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - sameorigin
      X-Permitted-Cross-Domain-Policies:
      - none
      X-XSS-Protection:
      - 1; mode=block
    status:
      code: 201
      message: Created
version: 1
