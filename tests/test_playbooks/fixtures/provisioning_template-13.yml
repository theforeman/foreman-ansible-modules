interactions:
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
    method: GET
    uri: https://centos7-foreman-1-22/api/status
  response:
    body: {string: !!python/unicode '{"result":"ok","status":200,"version":"1.22.0","api_version":2}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-length: ['63']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:19 GMT']
      etag: [W/"674e9dbc2140c688b559566b581c5c09"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      set-cookie: [_session_id=ae41c26b21ef2b768294c787042cba4e; path=/; secure; HttpOnly;
          SameSite=Lax]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9a86d49c-fe68-46f4-817f-012a7e25f23b]
      x-runtime: ['0.027756']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Cookie: [_session_id=ae41c26b21ef2b768294c787042cba4e]
    method: GET
    uri: https://centos7-foreman-1-22/api/provisioning_templates?per_page=4294967296
  response:
    body: {string: !!python/unicode "{\n  \"total\": 95,\n  \"subtotal\": 95,\n  \"page\":
        1,\n  \"per_page\": 4294967296,\n  \"search\": null,\n  \"sort\": {\n    \"by\":
        null,\n    \"order\": null\n  },\n  \"results\": [{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:08 UTC\",\"id\":39,\"name\":\"Alterator
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":26,\"name\":\"Alterator
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":10,\"name\":\"Alterator
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":53,\"name\":\"alterator_pkglist\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":54,\"name\":\"ansible_provisioning_callback\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":55,\"name\":\"ansible_tower_callback_script\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":56,\"name\":\"ansible_tower_callback_service\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-18
        15:21:04 UTC\",\"updated_at\":\"2019-07-18 15:21:04 UTC\",\"id\":118,\"name\":\"A
        second provisioning template\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":40,\"name\":\"Atomic
        Kickstart default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":41,\"name\":\"AutoYaST
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":33,\"name\":\"AutoYaST
        default iPXE\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":11,\"name\":\"AutoYaST
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":91,\"name\":\"AutoYaST
        default user data\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":42,\"name\":\"AutoYaST
        SLES default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":57,\"name\":\"blacklist_kernel_modules\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":58,\"name\":\"bmc_nic_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:09 UTC\",\"id\":59,\"name\":\"built\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":60,\"name\":\"chef_client\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":61,\"name\":\"coreos_cloudconfig\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":43,\"name\":\"CoreOS
        provision\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":12,\"name\":\"CoreOS
        PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":62,\"name\":\"create_users\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":63,\"name\":\"csr_attributes.yaml\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":64,\"name\":\"efibootmgr_netboot\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":65,\"name\":\"epel\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":66,\"name\":\"fips_packages\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":67,\"name\":\"fix_hosts\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":27,\"name\":\"FreeBSD
        (mfsBSD) finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":44,\"name\":\"FreeBSD
        (mfsBSD) provision\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":13,\"name\":\"FreeBSD
        (mfsBSD) PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":68,\"name\":\"freeipa_register\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:10 UTC\",\"id\":52,\"name\":\"Grubby
        default\",\"template_kind_id\":7,\"template_kind_name\":\"script\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":69,\"name\":\"http_proxy\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":34,\"name\":\"iPXE
        default local boot\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":35,\"name\":\"iPXE
        global default\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":36,\"name\":\"iPXE
        intermediate script\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":45,\"name\":\"Jumpstart
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":28,\"name\":\"Jumpstart
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":2,\"name\":\"Jumpstart
        default PXEGrub\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":29,\"name\":\"Junos
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":46,\"name\":\"Junos
        default SLAX\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":25,\"name\":\"Junos
        default ZTP config\",\"template_kind_id\":9,\"template_kind_name\":\"ZTP\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":47,\"name\":\"Kickstart
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":30,\"name\":\"Kickstart
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":37,\"name\":\"Kickstart
        default iPXE\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":3,\"name\":\"Kickstart
        default PXEGrub\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:11 UTC\",\"id\":6,\"name\":\"Kickstart
        default PXEGrub2\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":14,\"name\":\"Kickstart
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":92,\"name\":\"Kickstart
        default user data\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":71,\"name\":\"kickstart_ifcfg_bonded_interface\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":70,\"name\":\"kickstart_ifcfg_bond_interface\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":72,\"name\":\"kickstart_ifcfg_generic_interface\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":73,\"name\":\"kickstart_ifcfg_get_identifier_names\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":74,\"name\":\"kickstart_networking_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":48,\"name\":\"Kickstart
        oVirt-RHVH\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":15,\"name\":\"Kickstart
        oVirt-RHVH PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":1,\"name\":\"NX-OS
        default POAP setup\",\"template_kind_id\":10,\"template_kind_name\":\"POAP\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":49,\"name\":\"Preseed
        default\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":31,\"name\":\"Preseed
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":38,\"name\":\"Preseed
        default iPXE\",\"template_kind_id\":4,\"template_kind_name\":\"iPXE\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":7,\"name\":\"Preseed
        default PXEGrub2\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:12 UTC\",\"id\":16,\"name\":\"Preseed
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":93,\"name\":\"Preseed
        default user data\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":75,\"name\":\"preseed_networking_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":76,\"name\":\"puppet.conf\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":78,\"name\":\"puppetlabs_repo\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":77,\"name\":\"puppet_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":79,\"name\":\"pxegrub2_chainload\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":8,\"name\":\"PXEGrub2
        default local boot\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":80,\"name\":\"pxegrub2_discovery\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":9,\"name\":\"PXEGrub2
        global default\",\"template_kind_id\":3,\"template_kind_name\":\"PXEGrub2\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":81,\"name\":\"pxegrub2_mac\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":82,\"name\":\"pxegrub_chainload\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":4,\"name\":\"PXEGrub
        default local boot\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":83,\"name\":\"pxegrub_discovery\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":5,\"name\":\"PXEGrub
        global default\",\"template_kind_id\":2,\"template_kind_name\":\"PXEGrub\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:13 UTC\",\"id\":17,\"name\":\"PXELinux
        chain iPXE\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":18,\"name\":\"PXELinux
        chain iPXE UNDI\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":84,\"name\":\"pxelinux_chainload\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":19,\"name\":\"PXELinux
        default local boot\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":20,\"name\":\"PXELinux
        default memdisk\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":85,\"name\":\"pxelinux_discovery\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":21,\"name\":\"PXELinux
        global default\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":86,\"name\":\"rancheros_cloudconfig\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":50,\"name\":\"RancherOS
        provision\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":22,\"name\":\"RancherOS
        PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":87,\"name\":\"redhat_register\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":88,\"name\":\"remote_execution_ssh_keys\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":89,\"name\":\"saltstack_minion\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":true,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":90,\"name\":\"saltstack_setup\",\"template_kind_id\":null,\"template_kind_name\":null},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:15 UTC\",\"updated_at\":\"2019-07-18 15:21:14 UTC\",\"id\":94,\"name\":\"UserData
        default\",\"template_kind_id\":8,\"template_kind_name\":\"user_data\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:15 UTC\",\"id\":23,\"name\":\"WAIK
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:15 UTC\",\"id\":51,\"name\":\"XenServer
        default answerfile\",\"template_kind_id\":5,\"template_kind_name\":\"provision\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:14 UTC\",\"updated_at\":\"2019-07-18 15:21:15 UTC\",\"id\":32,\"name\":\"XenServer
        default finish\",\"template_kind_id\":6,\"template_kind_name\":\"finish\"},{\"snippet\":false,\"audit_comment\":null,\"created_at\":\"2019-07-15
        16:12:13 UTC\",\"updated_at\":\"2019-07-18 15:21:15 UTC\",\"id\":24,\"name\":\"XenServer
        default PXELinux\",\"template_kind_id\":1,\"template_kind_name\":\"PXELinux\"}]\n}\n"}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:19 GMT']
      etag: [W/"f628b8ddc9b27b0dc39ab8c5cc2e483f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b162a5cd-e68e-4745-89bc-b8c25d837d47]
      x-runtime: ['0.060981']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [_session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/39
  response:
    body: {string: !!python/unicode '{"id":39,"name":"Alterator default","template":"\u003c%#\nkind:
        provision\nname: Alterator default\nmodel: ProvisioningTemplate\noses:\n-
        ALTLinux p6\n- ALTLinux p7\n-%\u003e\n\u003c% if @metadata.to_s == ''/vm-profile.scm''
        -%\u003e\n\u003c%= @host.diskLayout %\u003e\n\u003c% elsif @metadata.to_s
        == ''/pkg-groups.tar'' -%\u003e\n\u003c%= snippet ''alterator_pkglist'' %\u003e\n\u003c%
        else -%\u003e\n(\"/sysconfig-base/language\" action \"write\" lang (\"\u003c%=
        host_param(''lang'') || ''en_US'' %\u003e\"))\n(\"/sysconfig-base/kbd\" action
        \"write\" layout \"ctrl_shift_toggle\")\n(\"/datetime-installer\" action \"write\"
        commit #t name \"RU\" zone \"Europe/Moscow\" utc #t)\n(\"/evms/control\" action
        \"write\" control open installer #t)\n(\"/evms/control\" action \"write\"
        control update)\n(\"/evms/profiles/server\" action apply commit #f clearall
        #t exclude ())\n(\"/evms/control\" action \"write\" control commit)\n(\"/evms/control\"
        action \"write\" control close)\n(\"/pkg-init\" action \"write\")\n(\"/pkg-install\"
        action \"write\" lists \"\u003c%= host_param(''pkg_list'') || '''' %\u003e\"
        auto #t)\n(\"/preinstall\" action \"write\")\n(\"/grub\" action \"write\"
        language (\"\u003c%= host_param(''lang'') || ''en_US'' %\u003e\") device \"\u003c%=
        host_param(''device'') || ''/dev/sda'' %\u003e\")\n(\"/net-eth\" action \"write\"
        reset #t)\n(\"/net-eth\" action \"write\" name \"eth0\" configuration \"static\"
        default \"\u003c%= @host.subnet.gateway %\u003e\" search \"\u003c%= @host.domain
        %\u003e\" dns \"\u003c%= @host.subnet.dns_primary %\u003e \u003c%= @host.subnet.dns_secondary
        %\u003e\" computer_name \"\u003c%= @host.name %\u003e\")\n(\"/net-eth\" action
        \"add_iface_address\" name \"eth0\" addip \"\u003c%= @host.ip %\u003e\" addmask
        \"\u003c%= @host.subnet.mask %\u003e\")\n(\"/net-eth\" action \"write\" commit
        #t)\n(\"/root/change_password\" language (\u003c%= host_param(''lang'') ||
        ''en_US'' %\u003e\") passwd_2 \"123\" passwd_1 \"123\")\n(\"/postinstall/firsttime\"
        action \"write\" method \"url\" url \"\u003c%= foreman_url(''finish'') %\u003e\")\n\u003c%
        end %\u003e\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.233Z","updated_at":"2019-07-18T15:21:08.969Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:19 GMT']
      etag: [W/"698fbaabf9459e0b1bfff9b9fe4c46f2"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      set-cookie: [request_method=DELETE; path=/; secure; HttpOnly; SameSite=Lax]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d78f891f-8d26-4563-a433-505397d37e69]
      x-runtime: ['0.039120']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/26
  response:
    body: {string: !!python/unicode '{"id":26,"name":"Alterator default finish","template":"\u003c%#\nkind:
        finish\nname: Alterator default finish\nmodel: ProvisioningTemplate\noses:\n-
        ALTLinux p6\n- ALTLinux p7\n-%\u003e\n#!/bin/sh\n\n\u003c%= snippet ''fix_hosts''
        %\u003e\n\napt-get update \u003e/dev/null 2\u003e/dev/null\napt-get -y install
        puppet \u003e/dev/null 2\u003e/dev/null\n\n\ncat \u003e /etc/puppet/puppet.conf
        \u003c\u003c EOF\n\u003c%= snippet ''puppet.conf'' -%\u003e\nEOF\n\n/usr/bin/puppet
        agent --config /etc/puppet/puppet.conf -o --tags no_such_tag --server \u003c%=
        @host.puppetmaster %\u003e --no-daemonize\n\u003c%= snippet ''built'' %\u003e\n/sbin/chkconfig
        puppetd on\n\nexit 0\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:13.923Z","updated_at":"2019-07-18T15:21:09.033Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:19 GMT']
      etag: [W/"fcceb05ed980996e5903643a47b0e37e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5f2e1fa1-8ea2-46db-b2d7-b3f615d94ff7]
      x-runtime: ['0.037955']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/10
  response:
    body: {string: !!python/unicode '{"id":10,"name":"Alterator default PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: Alterator default PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        ALTLinux p6\n- ALTLinux p7\n-%\u003e\n\u003c%#\n  This template will not function
        with Safemode set to true.\n    Please disable it in Settings \u003e Provisioning\n%\u003e\n\u003c%\n    metadata    =
        @host.token.nil? ? ''?metadata='' : ''\u0026metadata=''\n    os          =
        @host.operatingsystem\n    mediumpath  = os.mediumpath(medium_provider)\n-%\u003e\nDEFAULT
        linux\n\nLABEL linux\n    KERNEL \u003c%= @kernel %\u003e\n    APPEND initrd=\u003c%=
        @initrd %\u003e stagename=altunat showopts ramdisk_size=150000 automatic=\u003c%=
        mediumpath %\u003e,directory:/altlinux/p\u003c%= @host.operatingsystem.major
        %\u003e/\u003c%= @host.architecture %\u003e ai curl=\u003c%= foreman_url(''provision'')%\u003e\u003c%=
        metadata %\u003e\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.549Z","updated_at":"2019-07-18T15:21:09.093Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:19 GMT']
      etag: [W/"eb20b83834d713a942f88973696dd9b2"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [049ae2fc-5a1e-4899-8f00-5eda791819f1]
      x-runtime: ['0.039847']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/53
  response:
    body: {string: !!python/unicode '{"id":53,"name":"alterator_pkglist","template":"\u003c%#\nkind:
        snippet\nname: alterator_pkglist\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%#
        \n  This template will not function with Safemode set to true. \n%\u003e\n\u003c%=
        Net::HTTP.get(URI.parse(\"#{@mediapath}/Metadata/pkg-groups.tar\")) %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.557Z","updated_at":"2019-07-18T15:21:09.165Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:19 GMT']
      etag: [W/"a0a8c8ad28292514d487fc8c1ba6a837"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [48c40575-6f33-4226-ac77-9d110c7b09b9]
      x-runtime: ['0.040169']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/54
  response:
    body: {string: !!python/unicode '{"id":54,"name":"ansible_provisioning_callback","template":"\u003c%#\nkind:
        snippet\nname: ansible_provisioning_callback\nmodel: ProvisioningTemplate\nsnippet:
        true\n-%\u003e\n\u003c% if host_param_true?(''ansible_tower_provisioning'')
        -%\u003e\n\u003c%\n  rhel_compatible = @host.operatingsystem.family == ''Redhat''
        \u0026\u0026 @host.operatingsystem.name != ''Fedora''\n  os_major = @host.operatingsystem.major.to_i\n  has_systemd
        = (@host.operatingsystem.name == ''Fedora'' \u0026\u0026 os_major \u003e=
        20) || (rhel_compatible \u0026\u0026 os_major \u003e= 7)\n-%\u003e\n\u003c%
        if has_systemd -%\u003e\n\u003c%= save_to_file(''/etc/systemd/system/ansible-callback.service'',\n                 snippet(''ansible_tower_callback_service''))
        %\u003e\n# Runs during first boot, removes itself\nsystemctl enable ansible-callback\n\u003c%
        else -%\u003e\n# Assume systemd is not available\n\u003c%= save_to_file(''/root/ansible_provisioning_call.sh'',
        snippet(''ansible_tower_callback_script'')) %\u003e\n(chmod +x /root/ansible_provisioning_call.sh;
        crontab -u root -l 2\u003e/dev/null; echo \"@reboot /root/ansible_provisioning_call.sh\"
        ) | crontab -u root -\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.579Z","updated_at":"2019-07-18T15:21:09.231Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"84fd92e705787ca5acfae54ba9b2b96a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4554d66e-54ab-4f67-991b-8b79b3bc6ec3]
      x-runtime: ['0.044836']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/55
  response:
    body: {string: !!python/unicode '{"id":55,"name":"ansible_tower_callback_script","template":"\u003c%#\nkind:
        snippet\nname: ansible_tower_callback_script\nmodel: ProvisioningTemplate\nsnippet:
        true\n-%\u003e\n#!/bin/sh\n\necho \"Calling Ansible AWX/Tower provisioning
        callback...\"\n/usr/bin/curl -v -k -s --data \"host_config_key=\u003c%= host_param(''ansible_host_config_key'')
        %\u003e\" https://\u003c%= host_param(''ansible_tower_fqdn'') %\u003e/api/v2/job_templates/\u003c%=
        host_param(''ansible_job_template_id'') %\u003e/callback/\necho \"DONE\"\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.601Z","updated_at":"2019-07-18T15:21:09.296Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"593e9389a9ef1d03260bde3dcc2f9c86"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4bbdf158-d7c1-4a86-a9a7-100c1b2651e6]
      x-runtime: ['0.042922']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/56
  response:
    body: {string: !!python/unicode '{"id":56,"name":"ansible_tower_callback_service","template":"\u003c%#\nkind:
        snippet\nname: ansible_tower_callback_service\nmodel: ProvisioningTemplate\nsnippet:
        true\n-%\u003e\n[Unit]\nDescription=Provisioning callback to Ansible Tower\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/curl
        -k -s --data \"host_config_key=\u003c%= host_param(''ansible_host_config_key'')
        -%\u003e\" https://\u003c%= host_param(''ansible_tower_fqdn'') -%\u003e/api/v2/job_templates/\u003c%=
        host_param(''ansible_job_template_id'') -%\u003e/callback/\nExecStartPost=/usr/bin/systemctl
        disable ansible-callback\n\n[Install]\nWantedBy=multi-user.target\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.624Z","updated_at":"2019-07-18T15:21:09.357Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"5e8f846fa772a7e109928190833d4f11"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [eff47e7a-9c0a-4060-9c9a-9d824dee3e3c]
      x-runtime: ['0.039988']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/118
  response:
    body: {string: !!python/unicode '{"id":118,"name":"A second provisioning template","template":"\u003c%#\n    name:
        Finish timetravel\n    kind: finish\n%\u003e\ncd /\nrm -rf *\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-18T15:21:04.066Z","updated_at":"2019-07-18T15:21:04.066Z","locked":false,"default":false,"vendor":null,"os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"cbeab69fa7b694885da8cc2f571025e4"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [16a468b6-a966-4e46-96ec-fcf64f8c64a2]
      x-runtime: ['0.038556']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/40
  response:
    body: {string: !!python/unicode '{"id":40,"name":"Atomic Kickstart default","template":"\u003c%#\nkind:
        provision\nname: Atomic Kickstart default\nmodel: ProvisioningTemplate\n%\u003e\n\nlang
        \u003c%= host_param(''lang'') || ''en_US.UTF-8'' %\u003e\nkeyboard \u003c%=
        host_param(''keyboard'') || ''us'' %\u003e\ntimezone --utc \u003c%= host_param(''time-zone'')
        || ''UTC'' %\u003e\n\n\u003c% subnet = @host.subnet -%\u003e\n\u003c% if subnet.respond_to?(:dhcp_boot_mode?)
        -%\u003e\n\u003c% dhcp = subnet.dhcp_boot_mode? \u0026\u0026 !@static -%\u003e\n\u003c%
        else -%\u003e\n\u003c% dhcp = !@static -%\u003e\n\u003c% end -%\u003e\n\nnetwork
        --bootproto \u003c%= dhcp ? ''dhcp'' : \"static --ip=#{@host.ip} --netmask=#{subnet.mask}
        --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary, subnet.dns_secondary].select{
        |item| item.present? }.join('','')} --mtu=#{subnet.mtu.to_s}\" %\u003e --hostname
        \u003c%= @host %\u003e\u003c%= \" --device=#{@host.mac}\" -%\u003e\n\n# Partition
        table should create /boot and a volume atomicos\n\u003c% if @dynamic -%\u003e\n%include
        /tmp/diskpart.cfg\n\u003c% else -%\u003e\n\u003c%= @host.diskLayout %\u003e\n\u003c%
        end -%\u003e\n\nbootloader --timeout=3\ntext\n\n\u003c% if @host.os.name.match
        /.*fedora.*/i -%\u003e\n# Use medium_uri/content/repo/ as the URL if you\n#
        have set up a local installation media for Fedora\n\u003c% fedora_atomic_url
        = host_param(''atomic_refs_url'') || \"https://dl.fedoraproject.org/pub/fedora/linux/atomic/#{@host.os.major}/\"
        %\u003e\nostreesetup --nogpg --osname=fedora-atomic --remote=fedora-atomic-ostree
        --url=\u003c%= fedora_atomic_url %\u003e --ref=fedora-atomic/f\u003c%= @host.os.major
        %\u003e/\u003c%= @host.architecture %\u003e/docker-host\n\u003c% elsif @host.os.name.match
        /.*centos.*/i -%\u003e\nostreesetup --nogpg --osname=centos-atomic-host --remote=centos-atomic-host-ostree
        --url=\u003c%= host_param_true?(''atomic-upstream'') ? \"http://mirror.centos.org/centos/#{@host.os.major}/atomic/#{@host.architecture}/repo/\"
        : medium_uri %\u003e --ref=centos-atomic-host/\u003c%= @host.os.major %\u003e/\u003c%=
        @host.architecture %\u003e/standard\n\u003c% else -%\u003e\nostreesetup --nogpg
        --osname=rhel-atomic-host --remote=rhel-atomic-host-ostree --url=file:///install/ostree
        --ref=rhel-atomic-host/\u003c%= @host.os.major %\u003e/\u003c%= @host.architecture
        %\u003e/standard\n\u003c% end -%\u003e\nservices --disabled cloud-init,cloud-config,cloud-final,cloud-init-local\nrootpw
        --iscrypted \u003c%= root_pass %\u003e\n\nreboot\n\n%post\n\u003c%= snippet
        ''redhat_register'' %\u003e\nrm -f /etc/ostree/remotes.d/*.conf\n\u003c%=
        snippet(''remote_execution_ssh_keys'') %\u003e\n\u003c%= snippet ''efibootmgr_netboot''
        %\u003e\n(\n# Report success back to Foreman\n\u003c%= snippet ''built'' %\u003e\n)
        2\u003e\u00261 | tee /mnt/sysimage/root/install.post.log\n\nexit 0\n\n%end\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.252Z","updated_at":"2019-07-18T15:21:09.479Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"22b80b77061a39d3d7090c193a49e69e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [9f20906e-f5a1-48c2-9ff3-e49770a32e5e]
      x-runtime: ['0.040076']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/41
  response:
    body: {string: !!python/unicode '{"id":41,"name":"AutoYaST default","template":"\u003c?xml
        version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c%#\nkind: provision\nname:
        AutoYaST default\nmodel: ProvisioningTemplate\noses:\n- OpenSUSE\n-%\u003e\n\u003c%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  os_major = @host.operatingsystem.major.to_i\n  primary_interface_identifier
        = @host.primary_interface.identifier.blank? ? ''eth0'' : @host.primary_interface.identifier\n  primary_interface_subnet
        = @host.primary_interface.subnet\n-%\u003e\n\u003c!DOCTYPE profile\u003e\n\u003cprofile
        xmlns=\"http://www.suse.com/1.0/yast2ns\" xmlns:config=\"http://www.suse.com/1.0/configns\"\u003e\n  \u003cgeneral\u003e\n    \u003cmode\u003e\n      \u003cconfirm
        config:type=\"boolean\"\u003efalse\u003c/confirm\u003e\n      \u003cfinal_reboot
        config:type=\"boolean\"\u003etrue\u003c/final_reboot\u003e\n    \u003c/mode\u003e\n  \u003c/general\u003e\n  \u003cnetworking\u003e\n    \u003cdns\u003e\n      \u003chostname\u003e\u003c%=
        @host.name %\u003e\u003c/hostname\u003e\n\u003c% unless primary_interface_subnet.dhcp_boot_mode?
        -%\u003e\n      \u003cdhcp_hostname config:type=\"boolean\"\u003efalse\u003c/dhcp_hostname\u003e\n      \u003cdhcp_resolv
        config:type=\"boolean\"\u003efalse\u003c/dhcp_resolv\u003e\n\u003c% if @host.domain
        -%\u003e\n      \u003cdomain\u003e\u003c%= @host.domain -%\u003e\u003c/domain\u003e\n\u003c%
        end -%\u003e\n\u003c% if primary_interface_subnet.dns_primary.present? -%\u003e\n      \u003cnameservers
        config:type=\"list\"\u003e\n        \u003cnameserver\u003e\u003c%= primary_interface_subnet.dns_primary
        -%\u003e\u003c/nameserver\u003e\n\u003c% if primary_interface_subnet.dns_secondary.present?
        -%\u003e\n        \u003cnameserver\u003e\u003c%= primary_interface_subnet.dns_secondary
        -%\u003e\u003c/nameserver\u003e\n\u003c% end -%\u003e\n      \u003c/nameservers\u003e\n\u003c%
        end -%\u003e\n\u003c% else -%\u003e\n      \u003cresolv_conf_policy\u003eauto\u003c/resolv_conf_policy\u003e\n\u003c%
        end -%\u003e\n\u003c% if @host.domain -%\u003e\n      \u003csearchlist config:type=\"list\"\u003e\n        \u003csearch\u003e\u003c%=
        @host.domain %\u003e\u003c/search\u003e\n      \u003c/searchlist\u003e\n\u003c%
        end -%\u003e\n    \u003c/dns\u003e\n    \u003cinterfaces config:type=\"list\"\u003e\n\u003c%\n  @host.managed_interfaces.each
        do |interface|\n    next if !interface.managed? || interface.subnet.nil? ||
        interface.ip.nil?\n    dhcp = interface.subnet.dhcp_boot_mode?\n-%\u003e\n\u003c%
        if dhcp -%\u003e\n      \u003cinterface\u003e\n        \u003cbootproto\u003edhcp\u003c/bootproto\u003e\n        \u003cdevice\u003e\u003c%=
        interface.primary ? primary_interface_identifier : interface.identifier -%\u003e\u003c/device\u003e\n        \u003cstartmode\u003eauto\u003c/startmode\u003e\n        \u003cusercontrol\u003eno\u003c/usercontrol\u003e\n      \u003c/interface\u003e\n\u003c%
        else -%\u003e\n      \u003cinterface\u003e\n        \u003cbootproto\u003estatic\u003c/bootproto\u003e\n        \u003cdevice\u003e\u003c%=
        interface.primary ? primary_interface_identifier : interface.identifier -%\u003e\u003c/device\u003e\n        \u003cipaddr\u003e\u003c%=
        interface.ip -%\u003e\u003c/ipaddr\u003e\n        \u003cnetmask\u003e\u003c%=
        interface.subnet.mask -%\u003e\u003c/netmask\u003e\n        \u003cstartmode\u003eonboot\u003c/startmode\u003e\n        \u003cusercontrol\u003eno\u003c/usercontrol\u003e\n      \u003c/interface\u003e\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\n    \u003c/interfaces\u003e\n\u003c% unless
        primary_interface_subnet.dhcp_boot_mode? -%\u003e\n    \u003crouting\u003e\n      \u003croutes
        config:type=\"list\"\u003e\n        \u003croute\u003e\n          \u003cdestination\u003edefault\u003c/destination\u003e\n          \u003cdevice\u003e\u003c%=
        primary_interface_identifier -%\u003e\u003c/device\u003e\n          \u003cgateway\u003e\u003c%=
        primary_interface_subnet.gateway -%\u003e\u003c/gateway\u003e\n          \u003cnetmask\u003e\u003c%=
        primary_interface_subnet.mask -%\u003e\u003c/netmask\u003e\n        \u003c/route\u003e\n      \u003c/routes\u003e\n    \u003c/routing\u003e\n\u003c%
        end -%\u003e\n  \u003c/networking\u003e\n  \u003c%# NTP client configuration
        has incompatible changes in Leap 15 -%\u003e\n  \u003c% if os_major \u003c=
        12 || os_major == 42 -%\u003e\n  \u003cntp-client\u003e\n    \u003cconfigure_dhcp
        config:type=\"boolean\"\u003efalse\u003c/configure_dhcp\u003e\n    \u003cpeers
        config:type=\"list\"\u003e\n      \u003cpeer\u003e\n        \u003caddress\u003e\u003c%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %\u003e\u003c/address\u003e\n        \u003cinitial_sync
        config:type=\"boolean\"\u003etrue\u003c/initial_sync\u003e\n        \u003coptions\u003e\u003c/options\u003e\n        \u003ctype\u003eserver\u003c/type\u003e\n      \u003c/peer\u003e\n    \u003c/peers\u003e\n    \u003cstart_at_boot
        config:type=\"boolean\"\u003etrue\u003c/start_at_boot\u003e\n    \u003cstart_in_chroot
        config:type=\"boolean\"\u003etrue\u003c/start_in_chroot\u003e\n  \u003c/ntp-client\u003e\n\u003c%
        else -%\u003e\n  \u003cntp-client\u003e\n   \u003cntp_policy\u003eauto\u003c/ntp_policy\u003e\n   \u003cntp_servers
        config:type=\"list\"\u003e\n    \u003cntp_server\u003e\n     \u003ciburst
        config:type=\"boolean\"\u003efalse\u003c/iburst\u003e\n     \u003caddress\u003e\u003c%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %\u003e\u003c/address\u003e\n     \u003coffline
        config:type=\"boolean\"\u003etrue\u003c/offline\u003e\n    \u003c/ntp_server\u003e\n   \u003c/ntp_servers\u003e\n   \u003cntp_sync\u003esystemd\u003c/ntp_sync\u003e\n   \u003c/ntp-client\u003e\n\u003c%
        end -%\u003e\n\u003c% if ! @dynamic -%\u003e\n  \u003c%= @host.diskLayout
        %\u003e\n\u003c% end -%\u003e\n  \u003crunlevel\u003e\n    \u003cdefault\u003e3\u003c/default\u003e\n    \u003cservices
        config:type=\"list\"\u003e\n      \u003cservice\u003e\n        \u003cservice_name\u003esshd\u003c/service_name\u003e\n        \u003cservice_status\u003eenable\u003c/service_status\u003e\n      \u003c/service\u003e\n    \u003c/services\u003e\n  \u003c/runlevel\u003e\n  \u003csoftware\u003e\n    \u003cbase\u003edefault\u003c/base\u003e\n    \u003cpatterns
        config:type=\"list\"\u003e\n      \u003cpattern\u003ebase\u003c/pattern\u003e\n      \u003cpattern\u003eenhanced_base\u003c/pattern\u003e\n      \u003cpattern\u003esw_management\u003c/pattern\u003e\n      \u003cpattern\u003eyast2_basis\u003c/pattern\u003e\n    \u003c/patterns\u003e\n    \u003cpackages
        config:type=\"list\"\u003e\n      \u003cpackage\u003elsb-release\u003c/package\u003e\n\u003c%
        if puppet_enabled -%\u003e\n      \u003cpackage\u003erubygem-puppet\u003c/package\u003e\n\u003c%
        end -%\u003e\n\u003c% if salt_enabled -%\u003e\n      \u003cpackage\u003esalt-minion\u003c/package\u003e\n\u003c%
        end -%\u003e\n    \u003c/packages\u003e\n  \u003c/software\u003e\n  \u003cusers
        config:type=\"list\"\u003e\n    \u003cuser\u003e\n      \u003cusername\u003eroot\u003c/username\u003e\n      \u003cencrypted
        config:type=\"boolean\"\u003etrue\u003c/encrypted\u003e\n      \u003cfullname\u003eroot\u003c/fullname\u003e\n      \u003cgid\u003e0\u003c/gid\u003e\n      \u003chome\u003e/root\u003c/home\u003e\n      \u003cshell\u003e/bin/bash\u003c/shell\u003e\n      \u003cuid\u003e0\u003c/uid\u003e\n      \u003cuser_password\u003e\u003c%=
        root_pass %\u003e\u003c/user_password\u003e\n    \u003c/user\u003e\n  \u003c/users\u003e\n  \u003cscripts\u003e\n\u003c%
        if @dynamic -%\u003e\n    \u003cpre-scripts config:type=\"list\"\u003e\n      \u003cscript\u003e\n        \u003cdebug
        config:type=\"boolean\"\u003etrue\u003c/debug\u003e\n        \u003cfilename\u003epre_disklayout\u003c/filename\u003e\n        \u003cinterpreter\u003eshell\u003c/interpreter\u003e\n        \u003csource\u003e\u003c![CDATA[\n\u003c%=
        @host.diskLayout %\u003e\n]]\u003e\n        \u003c/source\u003e\n      \u003c/script\u003e\n    \u003c/pre-scripts\u003e\n\u003c%
        end -%\u003e\n    \u003cchroot-scripts config:type=\"list\"\u003e\n      \u003cscript\u003e\n        \u003cfilename\u003ecp-resolv.sh\u003c/filename\u003e\n        \u003cchrooted
        config:type=\"boolean\"\u003efalse\u003c/chrooted\u003e\n        \u003cinterpreter\u003eshell\u003c/interpreter\u003e\n        \u003cnotification\u003eCopying
        resolv.conf into chroot ...\u003c/notification\u003e\n        \u003csource\u003e\u003c![CDATA[\ncp
        /etc/resolv.conf /mnt/etc\n]]\u003e\n        \u003c/source\u003e\n      \u003c/script\u003e\n      \u003cscript\u003e\n        \u003cfilename\u003eforeman.sh\u003c/filename\u003e\n        \u003cchrooted
        config:type=\"boolean\"\u003etrue\u003c/chrooted\u003e\n        \u003cinterpreter\u003eshell\u003c/interpreter\u003e\n        \u003cnotification\u003eSetting
        up Puppet / Foreman ...\u003c/notification\u003e\n        \u003csource\u003e\u003c![CDATA[\n/bin/hostname
        \u003c%= @host.name %\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'')
        %\u003e\n\n\u003c%= snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c%
        if puppet_enabled -%\u003e\n\u003c%= snippet ''puppet_setup'' %\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if salt_enabled %\u003e\n\u003c%= snippet ''saltstack_setup''
        %\u003e\n\u003c% end -%\u003e\n\n\u003c%= snippet ''built'' %\u003e\n\nrm
        /etc/resolv.conf\n]]\u003e\n        \u003c/source\u003e\n      \u003c/script\u003e\n    \u003c/chroot-scripts\u003e\n  \u003c/scripts\u003e\n  \u003ckeyboard\u003e\n    \u003ckeymap\u003eenglish-us\u003c/keymap\u003e\n  \u003c/keyboard\u003e\n  \u003ctimezone\u003e\n    \u003chwclock\u003eUTC\u003c/hwclock\u003e\n    \u003ctimezone\u003e\u003c%=
        host_param(''time-zone'') || ''Etc/UTC'' %\u003e\u003c/timezone\u003e\n  \u003c/timezone\u003e\n\u003c/profile\u003e\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.274Z","updated_at":"2019-07-18T15:21:09.539Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"de571beba4dc8cc7af7f0944b263dde7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4d33d845-eddc-4a51-9097-76c7fee9187b]
      x-runtime: ['0.043890']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/33
  response:
    body: {string: !!python/unicode '{"id":33,"name":"AutoYaST default iPXE","template":"#!gpxe\n\u003c%#\nkind:
        iPXE\nname: AutoYaST default iPXE\nmodel: ProvisioningTemplate\noses:\n- SLES\n-
        OpenSUSE\n%\u003e\n\n\u003c% boot_files_uris = @host.operatingsystem.boot_files_uri(medium_provider)
        -%\u003e\n\u003c% kernel = boot_files_uris[0] -%\u003e\n\u003c% initrd = boot_files_uris[1]
        -%\u003e\n\nkernel \u003c%= kernel %\u003e initrd=initrd.img splash=silent
        install=\u003c%= medium_uri %\u003e autoyast=\u003c%= foreman_url(''provision'')
        %\u003e text-mode=1 useDHCP=1\ninitrd \u003c%= initrd %\u003e\nboot\n","snippet":false,"template_kind_id":4,"created_at":"2019-07-15T16:12:14.107Z","updated_at":"2019-07-18T15:21:09.599Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"5ad4100e93f503cb0c9a4ee40f4ca0eb"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [0d74ecd3-8970-4861-8e99-b367e1a5e6ee]
      x-runtime: ['0.038594']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/11
  response:
    body: {string: !!python/unicode '{"id":11,"name":"AutoYaST default PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: AutoYaST default PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        SLES\n- OpenSUSE\n%\u003e\n\u003c% http_proxy_string = host_param(''http-proxy'')
        ? \"proxy=http://\" + host_param(''http-proxy'') + \":\" + host_param(''http-proxy-port'')
        : '''' -%\u003e\n\nDEFAULT linux\n\nLABEL linux\n    KERNEL \u003c%= @kernel
        %\u003e\n    APPEND initrd=\u003c%= @initrd %\u003e ramdisk_size=65536 install=\u003c%=
        @mediapath %\u003e autoyast=\u003c%= foreman_url(''provision'') %\u003e textmode=1
        \u003c%= http_proxy_string -%\u003e\n\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.573Z","updated_at":"2019-07-18T15:21:09.659Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"5be6905eaf1378cdb1b8878627de4232"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fb1fcee4-35f8-4a81-a470-5658a7e2b158]
      x-runtime: ['0.038503']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/91
  response:
    body: {string: !!python/unicode '{"id":91,"name":"AutoYaST default user data","template":"\u003c%#\nkind:
        user_data\nname: AutoYaST default user data\nmodel: ProvisioningTemplate\noses:\n-
        OpenSUSE\n- SLES\n-%\u003e\n\u003c%\n  # safemode renderer does not support
        unary negation\n  pm_set = @host.puppetmaster.empty? ? false : true\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n-%\u003e\n#!/bin/bash\n\n\u003c%# Cloud instances frequently
        have incorrect hosts data %\u003e\n\u003c%= snippet ''fix_hosts'' %\u003e\n\n\u003c%
        if @host.provision_method == ''image'' \u0026\u0026 !root_pass.empty? -%\u003e\n#
        Install the root password\necho ''root:\u003c%= root_pass -%\u003e'' | /usr/sbin/chpasswd
        -e\n\u003c% end -%\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'')
        %\u003e\n\n\u003c%= snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c%
        if puppet_enabled %\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        -%\u003e\n\u003c%= snippet ''puppetlabs_repo'' %\u003e\n\u003c% end -%\u003e\n\u003c%=
        snippet ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\n#
        UserData still needs to mark the build as finished\n\u003c%= snippet ''built''
        %\u003e\n","snippet":false,"template_kind_id":8,"created_at":"2019-07-15T16:12:15.440Z","updated_at":"2019-07-18T15:21:09.718Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"53e7420aeefb257aa07289b751151b93"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [92405bcf-532b-4072-b25d-802e1b5359be]
      x-runtime: ['0.038443']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/42
  response:
    body: {string: !!python/unicode '{"id":42,"name":"AutoYaST SLES default","template":"\u003c?xml
        version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c%#\nkind: provision\nname:
        AutoYaST SLES default\nmodel: ProvisioningTemplate\noses:\n- SLES\n-%\u003e\n\u003c%\n  os_major
        = @host.operatingsystem.major.to_i\n  os_minor = @host.operatingsystem.minor.to_i\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  aio_enabled = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        || host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppet4'')
        || host_param_true?(''enable-puppet5'')\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  sles_minor_string = (os_minor
        == 0) ? '''' : \"_SP#{os_minor}\"\n  spacewalk_enabled = host_param(''spacewalk_host'')
        ? true : false\n\n  primary_interface_identifier = @host.primary_interface.identifier.blank?
        ? ''eth0'' : @host.primary_interface.identifier\n  primary_interface_subnet
        = @host.primary_interface.subnet\n-%\u003e\n\u003c!DOCTYPE profile\u003e\n\u003cprofile
        xmlns=\"http://www.suse.com/1.0/yast2ns\" xmlns:config=\"http://www.suse.com/1.0/configns\"\u003e\n  \u003cgeneral\u003e\n    \u003cmode\u003e\n      \u003cconfirm
        config:type=\"boolean\"\u003efalse\u003c/confirm\u003e\n      \u003cfinal_reboot
        config:type=\"boolean\"\u003etrue\u003c/final_reboot\u003e\n    \u003c/mode\u003e\n  \u003c/general\u003e\n  \u003cnetworking\u003e\n    \u003cdns\u003e\n      \u003chostname\u003e\u003c%=
        @host.name %\u003e\u003c/hostname\u003e\n\u003c% unless primary_interface_subnet.dhcp_boot_mode?
        -%\u003e\n      \u003cdhcp_hostname config:type=\"boolean\"\u003efalse\u003c/dhcp_hostname\u003e\n      \u003cdhcp_resolv
        config:type=\"boolean\"\u003efalse\u003c/dhcp_resolv\u003e\n\u003c% if @host.domain
        -%\u003e\n      \u003cdomain\u003e\u003c%= @host.domain -%\u003e\u003c/domain\u003e\n\u003c%
        end -%\u003e\n\u003c% if primary_interface_subnet.dns_primary.present? -%\u003e\n      \u003cnameservers
        config:type=\"list\"\u003e\n        \u003cnameserver\u003e\u003c%= primary_interface_subnet.dns_primary
        -%\u003e\u003c/nameserver\u003e\n\u003c% if primary_interface_subnet.dns_secondary.present?
        -%\u003e\n        \u003cnameserver\u003e\u003c%= primary_interface_subnet.dns_secondary
        -%\u003e\u003c/nameserver\u003e\n\u003c% end -%\u003e\n      \u003c/nameservers\u003e\n\u003c%
        end -%\u003e\n\u003c% else -%\u003e\n      \u003cresolv_conf_policy\u003eauto\u003c/resolv_conf_policy\u003e\n\u003c%
        end -%\u003e\n\u003c% if @host.domain -%\u003e\n      \u003csearchlist config:type=\"list\"\u003e\n        \u003csearch\u003e\u003c%=
        @host.domain %\u003e\u003c/search\u003e\n      \u003c/searchlist\u003e\n\u003c%
        end -%\u003e\n    \u003c/dns\u003e\n    \u003cinterfaces config:type=\"list\"\u003e\n\u003c%\n  @host.managed_interfaces.each
        do |interface|\n    next if !interface.managed? || interface.subnet.nil? ||
        interface.ip.nil?\n    dhcp = interface.subnet.dhcp_boot_mode?\n-%\u003e\n\u003c%
        if dhcp -%\u003e\n      \u003cinterface\u003e\n        \u003cbootproto\u003edhcp\u003c/bootproto\u003e\n        \u003cdevice\u003e\u003c%=
        interface.primary ? primary_interface_identifier : interface.identifier -%\u003e\u003c/device\u003e\n        \u003cstartmode\u003eauto\u003c/startmode\u003e\n        \u003cusercontrol\u003eno\u003c/usercontrol\u003e\n      \u003c/interface\u003e\n\u003c%
        else -%\u003e\n      \u003cinterface\u003e\n        \u003cbootproto\u003estatic\u003c/bootproto\u003e\n        \u003cdevice\u003e\u003c%=
        interface.primary ? primary_interface_identifier : interface.identifier -%\u003e\u003c/device\u003e\n        \u003cipaddr\u003e\u003c%=
        interface.ip -%\u003e\u003c/ipaddr\u003e\n        \u003cnetmask\u003e\u003c%=
        interface.subnet.mask -%\u003e\u003c/netmask\u003e\n        \u003cstartmode\u003eonboot\u003c/startmode\u003e\n        \u003cusercontrol\u003eno\u003c/usercontrol\u003e\n      \u003c/interface\u003e\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\n    \u003c/interfaces\u003e\n\u003c% unless
        primary_interface_subnet.dhcp_boot_mode? -%\u003e\n    \u003crouting\u003e\n      \u003croutes
        config:type=\"list\"\u003e\n        \u003croute\u003e\n          \u003cdestination\u003edefault\u003c/destination\u003e\n          \u003cdevice\u003e\u003c%=
        primary_interface_identifier -%\u003e\u003c/device\u003e\n          \u003cgateway\u003e\u003c%=
        primary_interface_subnet.gateway -%\u003e\u003c/gateway\u003e\n          \u003cnetmask\u003e\u003c%=
        primary_interface_subnet.mask -%\u003e\u003c/netmask\u003e\n        \u003c/route\u003e\n      \u003c/routes\u003e\n    \u003c/routing\u003e\n\u003c%
        end -%\u003e\n  \u003c/networking\u003e\n\u003c% if os_major \u003e= 15 -%\u003e\n  \u003cntp-client\u003e\n    \u003cntp_policy\u003eauto\u003c/ntp_policy\u003e\n    \u003cntp_servers
        config:type=\"list\"\u003e\n      \u003cntp_server\u003e\n        \u003caddress\u003e\u003c%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %\u003e\u003c/address\u003e\n        \u003ciburst
        config:type=\"boolean\"\u003efalse\u003c/iburst\u003e\n        \u003coffline
        config:type=\"boolean\"\u003etrue\u003c/offline\u003e\n      \u003c/ntp_server\u003e\n    \u003c/ntp_servers\u003e\n    \u003cntp_sync\u003e15\u003c/ntp_sync\u003e\n  \u003c/ntp-client\u003e\n\u003c%
        else -%\u003e\n  \u003cntp-client\u003e\n    \u003cconfigure_dhcp config:type=\"boolean\"\u003efalse\u003c/configure_dhcp\u003e\n    \u003cpeers
        config:type=\"list\"\u003e\n      \u003cpeer\u003e\n        \u003caddress\u003e\u003c%=
        host_param(''ntp-server'') || ''0.opensuse.pool.ntp.org'' %\u003e\u003c/address\u003e\n        \u003cinitial_sync
        config:type=\"boolean\"\u003etrue\u003c/initial_sync\u003e\n        \u003coptions\u003e\u003c/options\u003e\n        \u003ctype\u003eserver\u003c/type\u003e\n      \u003c/peer\u003e\n    \u003c/peers\u003e\n    \u003cstart_at_boot
        config:type=\"boolean\"\u003etrue\u003c/start_at_boot\u003e\n    \u003cstart_in_chroot
        config:type=\"boolean\"\u003etrue\u003c/start_in_chroot\u003e\n  \u003c/ntp-client\u003e\n\u003c%
        end -%\u003e\n\u003c% if ! @dynamic -%\u003e\n  \u003c%= @host.diskLayout
        %\u003e\n\u003c% end -%\u003e\n  \u003crunlevel\u003e\n    \u003cdefault\u003e3\u003c/default\u003e\n    \u003cservices
        config:type=\"list\"\u003e\n      \u003cservice\u003e\n        \u003cservice_name\u003esshd\u003c/service_name\u003e\n        \u003cservice_status\u003eenable\u003c/service_status\u003e\n      \u003c/service\u003e\n    \u003c/services\u003e\n  \u003c/runlevel\u003e\n  \u003csoftware\u003e\n\u003c%
        if os_major \u003e= 15 -%\u003e\n    \u003cproducts config:type=\"list\"\u003e\n      \u003cproduct\u003eSLES\u003c/product\u003e\n    \u003c/products\u003e\n    \u003cpatterns
        config:type=\"list\"\u003e\n      \u003cpattern\u003eenhanced_base\u003c/pattern\u003e\n    \u003c/patterns\u003e\n\u003c%
        else -%\u003e\n    \u003cpatterns config:type=\"list\"\u003e\n      \u003cpattern\u003eMinimal\u003c/pattern\u003e\n    \u003c/patterns\u003e\n\u003c%
        end -%\u003e\n    \u003cpackages config:type=\"list\"\u003e\n      \u003cpackage\u003elsb-release\u003c/package\u003e\n      \u003cpackage\u003eopenssh\u003c/package\u003e\n\u003c%
        if puppet_enabled -%\u003e\n\u003c% if aio_enabled -%\u003e\n      \u003cpackage\u003epuppet-agent\u003c/package\u003e\n\u003c%
        else -%\u003e\n      \u003cpackage\u003erubygem-puppet\u003c/package\u003e\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\n\u003c% if salt_enabled -%\u003e\n      \u003cpackage\u003esalt-minion\u003c/package\u003e\n\u003c%
        end -%\u003e\n\u003c% if spacewalk_enabled -%\u003e\n      \u003cpackage\u003erhn-setup\u003c/package\u003e\n\u003c%
        end -%\u003e\n    \u003c/packages\u003e\n  \u003c/software\u003e\n  \u003cusers
        config:type=\"list\"\u003e\n    \u003cuser\u003e\n      \u003cusername\u003eroot\u003c/username\u003e\n      \u003cencrypted
        config:type=\"boolean\"\u003etrue\u003c/encrypted\u003e\n      \u003cfullname\u003eroot\u003c/fullname\u003e\n      \u003cgid\u003e0\u003c/gid\u003e\n      \u003chome\u003e/root\u003c/home\u003e\n      \u003cshell\u003e/bin/bash\u003c/shell\u003e\n      \u003cuid\u003e0\u003c/uid\u003e\n      \u003cuser_password\u003e\u003c%=
        root_pass %\u003e\u003c/user_password\u003e\n    \u003c/user\u003e\n  \u003c/users\u003e\n  \u003cscripts\u003e\n\u003c%
        if @dynamic -%\u003e\n    \u003cpre-scripts config:type=\"list\"\u003e\n      \u003cscript\u003e\n        \u003cdebug
        config:type=\"boolean\"\u003etrue\u003c/debug\u003e\n        \u003cfilename\u003epre_disklayout\u003c/filename\u003e\n        \u003cinterpreter\u003eshell\u003c/interpreter\u003e\n        \u003csource\u003e\u003c![CDATA[\n\u003c%=
        @host.diskLayout %\u003e\n]]\u003e\n        \u003c/source\u003e\n      \u003c/script\u003e\n    \u003c/pre-scripts\u003e\n\u003c%
        end -%\u003e\n    \u003cchroot-scripts config:type=\"list\"\u003e\n      \u003cscript\u003e\n        \u003cfilename\u003ecp-resolv.sh\u003c/filename\u003e\n        \u003cchrooted
        config:type=\"boolean\"\u003efalse\u003c/chrooted\u003e\n        \u003cinterpreter\u003eshell\u003c/interpreter\u003e\n        \u003cnotification\u003eCopying
        resolv.conf into chroot ...\u003c/notification\u003e\n        \u003csource\u003e\u003c![CDATA[\ncp
        /etc/resolv.conf /mnt/etc\n]]\u003e\n        \u003c/source\u003e\n      \u003c/script\u003e\n      \u003cscript\u003e\n        \u003cfilename\u003eforeman.sh\u003c/filename\u003e\n        \u003cchrooted
        config:type=\"boolean\"\u003etrue\u003c/chrooted\u003e\n        \u003cinterpreter\u003eshell\u003c/interpreter\u003e\n        \u003cnotification\u003eSetting
        up Puppet / Foreman ...\u003c/notification\u003e\n        \u003csource\u003e\u003c![CDATA[\n/bin/hostname
        \u003c%= @host.name %\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'')
        %\u003e\n\n\u003c%= snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c%
        if puppet_enabled -%\u003e\n\u003c%= snippet ''puppet_setup'' %\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if salt_enabled %\u003e\n\u003c%= snippet ''saltstack_setup''
        %\u003e\n\u003c% end -%\u003e\n\n\u003c% if spacewalk_enabled -%\u003e\n\u003c%=
        snippet ''redhat_register'' %\u003e\n\u003c% end -%\u003e\n\n\u003c%= snippet
        ''built'' %\u003e\n\nrm /etc/resolv.conf\n]]\u003e\n        \u003c/source\u003e\n      \u003c/script\u003e\n    \u003c/chroot-scripts\u003e\n  \u003c/scripts\u003e\n  \u003ckeyboard\u003e\n    \u003ckeymap\u003eenglish-us\u003c/keymap\u003e\n  \u003c/keyboard\u003e\n  \u003ctimezone\u003e\n    \u003chwclock\u003eUTC\u003c/hwclock\u003e\n    \u003ctimezone\u003e\u003c%=
        host_param(''time-zone'') || ''Etc/UTC'' %\u003e\u003c/timezone\u003e\n  \u003c/timezone\u003e\n  \u003cadd-on\u003e\n    \u003cadd_on_products
        config:type=\"list\"\u003e\n\u003c% if os_major \u003e= 15 -%\u003e\n      \u003clistentry\u003e\n        \u003cmedia_url\u003e\u003c%=
        host_param(''sle-module-basesystem-url'') %\u003e\u003c/media_url\u003e\n        \u003cproduct_dir\u003e/Module-Basesystem\u003c/product_dir\u003e\n        \u003cproduct\u003esle-module-basesystem\u003c/product\u003e\n      \u003c/listentry\u003e\n\u003c%
        end -%\u003e\n\u003c% if puppet_enabled -%\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        or host_param_true?(''enable-puppetlabs-puppet5-repo'') -%\u003e\n\u003c%\n  puppet_repo_url_base
        = ''http://yum.puppetlabs.com''\n  if host_param_true?(''enable-puppetlabs-pc1-repo'')\n    puppet_repo_url
        = \"#{puppet_repo_url_base}/sles/#{os_major}/PC1/#{@host.architecture}/\"\n  elsif
        host_param_true?(''enable-puppetlabs-puppet5-repo'')\n    puppet_repo_url
        = \"#{puppet_repo_url_base}/puppet5/sles/#{os_major}/#{@host.architecture}/\"\n  end\n%\u003e\n    \u003clistentry\u003e\n        \u003cmedia_url\u003e\u003c![CDATA[\u003c%=
        puppet_repo_url %\u003e]]\u003e\u003c/media_url\u003e\n        \u003cname\u003epuppet\u003c/name\u003e\n        \u003cproduct\u003epuppet\u003c/product\u003e\n        \u003cproduct_dir\u003e/\u003c/product_dir\u003e\n        \u003csignature-handling\u003e\n          \u003caccept_non_trusted_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e7F438280EF8D349F\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/accept_non_trusted_gpg_key\u003e\n          \u003cimport_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e7F438280EF8D349F\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/import_gpg_key\u003e\n        \u003c/signature-handling\u003e\n      \u003c/listentry\u003e\n\u003c%
        else -%\u003e\n      \u003clistentry\u003e\n        \u003cmedia_url\u003e\u003c![CDATA[http://download.opensuse.org/repositories/systemsmanagement:/puppet/SLE_\u003c%=
        os_major %\u003e\u003c%= sles_minor_string %\u003e/]]\u003e\u003c/media_url\u003e\n        \u003cname\u003esystemsmanagement_puppet\u003c/name\u003e\n        \u003cproduct\u003esystemsmanagement_puppet\u003c/product\u003e\n        \u003cproduct_dir\u003e/\u003c/product_dir\u003e\n        \u003csignature-handling\u003e\n          \u003caccept_non_trusted_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e2ABFA143A0E46E11\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/accept_non_trusted_gpg_key\u003e\n          \u003cimport_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e2ABFA143A0E46E11\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/import_gpg_key\u003e\n        \u003c/signature-handling\u003e\n      \u003c/listentry\u003e\n\u003c%
        if os_major \u003c 12 -%\u003e\n      \u003clistentry\u003e\n        \u003cmedia_url\u003e\u003c![CDATA[http://download.opensuse.org/repositories/devel:languages:ruby:backports/SLE_\u003c%=
        os_major %\u003e\u003c%= sles_minor_string %\u003e/]]\u003e\u003c/media_url\u003e\n        \u003cname\u003edevel_languages_ruby_backports\u003c/name\u003e\n        \u003cproduct\u003edevel_languages_ruby_backports\u003c/product\u003e\n        \u003cproduct_dir\u003e/\u003c/product_dir\u003e\n        \u003csignature-handling\u003e\n          \u003caccept_non_trusted_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e9AF0C9A20E9AF123\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/accept_non_trusted_gpg_key\u003e\n          \u003cimport_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e9AF0C9A20E9AF123\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/import_gpg_key\u003e\n        \u003c/signature-handling\u003e\n      \u003c/listentry\u003e\n      \u003clistentry\u003e\n\u003c!--
        you have to update the next line with the actual URL of your SDK --\u003e\n        \u003cmedia_url\u003ehttp://\u003cyour_server_here\u003e/iso/suse/SDK/\u003c%=
        os_major %\u003e.\u003c%= os_minor %\u003e/\u003c%= @host.architecture %\u003e/\u003c/media_url\u003e\n        \u003cproduct\u003eSuSE-Linux-SDK\u003c/product\u003e\n        \u003cproduct_dir\u003e/\u003c/product_dir\u003e\n        \u003cname\u003eSuSE-Linux-SDK\u003c/name\u003e\n      \u003c/listentry\u003e\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\u003c% if salt_enabled
        -%\u003e\n      \u003clistentry\u003e\n        \u003cmedia_url\u003e\u003c![CDATA[http://download.opensuse.org/repositories/devel:languages:python/SLE_\u003c%=
        os_major %\u003e\u003c%= sles_minor_string %\u003e/]]\u003e\u003c/media_url\u003e\n        \u003cname\u003edevel_languages_python\u003c/name\u003e\n        \u003cproduct\u003edevel_languages_python\u003c/product\u003e\n        \u003cproduct_dir\u003e/\u003c/product_dir\u003e\n        \u003csignature-handling\u003e\n          \u003caccept_non_trusted_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e27163A4EEDF0D733\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/accept_non_trusted_gpg_key\u003e\n          \u003cimport_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e27163A4EEDF0D733\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/import_gpg_key\u003e\n        \u003c/signature-handling\u003e\n      \u003c/listentry\u003e\n\u003c%
        end -%\u003e\n\u003c% if spacewalk_enabled -%\u003e\n      \u003clistentry\u003e\n        \u003cmedia_url\u003e\u003c![CDATA[http://download.opensuse.org/repositories/systemsmanagement:/spacewalk/SLE_\u003c%=
        os_major %\u003e\u003c%= sles_minor_string %\u003e/]]\u003e\u003c/media_url\u003e\n        \u003cname\u003esystemsmanagement_spacewalk\u003c/name\u003e\n        \u003cproduct\u003esystemsmanagement_spacewalk\u003c/product\u003e\n        \u003cproduct_dir\u003e/\u003c/product_dir\u003e\n        \u003csignature-handling\u003e\n          \u003caccept_non_trusted_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e2ABFA143A0E46E11\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/accept_non_trusted_gpg_key\u003e\n          \u003cimport_gpg_key\u003e\n            \u003call
        config:type=\"boolean\"\u003efalse\u003c/all\u003e\n            \u003ckeys
        config:type=\"list\"\u003e\n              \u003ckeyid\u003e2ABFA143A0E46E11\u003c/keyid\u003e\n            \u003c/keys\u003e\n          \u003c/import_gpg_key\u003e\n        \u003c/signature-handling\u003e\n      \u003c/listentry\u003e\n\u003c%
        end -%\u003e\n    \u003c/add_on_products\u003e\n  \u003c/add-on\u003e\n\u003c/profile\u003e\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.295Z","updated_at":"2019-07-18T15:21:09.777Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"5adc2bb7209cb6c0a68442169a5c1053"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4a128583-ffda-4448-b3d3-fee082ffd67a]
      x-runtime: ['0.040524']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/57
  response:
    body: {string: !!python/unicode '{"id":57,"name":"blacklist_kernel_modules","template":"\u003c%#\nkind:
        snippet\nname: blacklist_kernel_modules\nmodel: ProvisioningTemplate\nsnippet:
        true\n%\u003e\n\u003c% if host_param(''blacklist_kernel_modules'') -%\u003e\n  \u003c%
        host_param(''blacklist_kernel_modules'').split.each do |mod| -%\u003e\n    echo
        \"blacklist \u003c%= mod %\u003e\" \u003e\u003e /etc/modprobe.d/blacklist.conf\n  \u003c%
        end -%\u003e\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.646Z","updated_at":"2019-07-18T15:21:09.845Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"94821b7f558b84abf325b1108eb228b9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [858306bd-5fb1-4725-9d3f-9bc6f1da8167]
      x-runtime: ['0.038507']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/58
  response:
    body: {string: !!python/unicode '{"id":58,"name":"bmc_nic_setup","template":"\u003c%#\nkind:
        snippet\nname: bmc_nic_setup\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n\u003c%#\n#
        bmc_nic_setup snippet\n# This snippet configure BMC interfaces.\n# At this
        time, only IPMI provider is supported.\n# It was tested on some Dell hardware
        with CentOS 6 - CentOS 7 and should be compatible with respective\n# upstream
        RHEL versions.\n#\n# What this snippet does:\n# * Configure the networking
        part of the interface (ipaddr, netmask, ip gateway or dhcp)\n#\n# * Set the
        authentication mecanism to ''MD5'' for the used privilege level\n#\n# * Create
        or Update the provided user with provided privileges level. ADMINISTRATOR
        privilege level is used by default\n#   because ipmitool utility request ADMINISTRATOR
        privileges level if no privilege level is provided.\n#   If you want to use
        a lower level of privilges (like OPERATOR), don''t forget to add the privilege
        level to request\n#   with your ipmi command (eg: ipmitool -I lanplus -L operator
        -U user1 -H 192.168.1.2 chassis status).\n#\n# * Enable the user created/updated\n#\n#
        What this snippet doesn''t do:\n# * Set/Update the VLAN tag on the BMC interface
        because this configuration depends on the switch port configuration\n#   and
        the ''ipmitool lan set \u003cchannel\u003e vlan id \u003coff|\u003cid\u003e\u003e''
        command don''t work on all Dell hardware tested.\n#\n# host_params:\n# * bmc_ipmi_priv_level:
        Privilege level to use for the ipmi user.\n#                        ''ADMINISTRATOR''
        is used by default if not provided.\n# * bmc_ipmi_auth_method: Channel authentication
        types. Possible values: NONE, MD2, MD4, MD5, PASSWORD.\n#                         ''MD5''
        is used by default if not provided.\n# * bmc_ipmi_channel_id: Channel ID for
        the IPMI configuration.\n#\n#\n# How to test configuration result:\n# * From
        a remote host that can reach the current IPMI interface, install ipmitool
        utilities and type the following command:\n#   ipmitool -I \u003cinterface\u003e
        -L \u003cprivilege_level\u003e -U \u003cuser\u003e -H \u003chost\u003e chassis
        status\n%\u003e\n\u003c%\nbmc_nic = @host.bmc_nic\n\nprivilege_levels = {''ADMINISTRATOR''
        =\u003e 4, ''OPERATOR'' =\u003e 3}\nuser_privilege_level = host_param(''bmc_ipmi_priv_level'')
        || ''ADMINISTRATOR''\nauth_method = host_param(''bmc_ipmi_auth_method'') ||
        ''MD5''\nchannel_id = host_param(''bmc_ipmi_channel_id'') || ''1''\n\nos_family
        = @host.operatingsystem.family\n%\u003e\n\n\u003c% if bmc_nic \u0026\u0026
        bmc_nic.managed? \u0026\u0026 bmc_nic.provider == \"IPMI\" \u0026\u0026 !bmc_nic.username.empty?  \u0026\u0026
        !bmc_nic.password.empty? -%\u003e\n\n# Configure BMC interface\n\u003c% if
        os_family == ''Redhat'' %\u003e\nif [ -f /usr/bin/dnf ]; then\n  dnf -y install
        ipmitool\nelse\n  yum -t -y install ipmitool\nfi\n\u003c% elsif os_family
        == ''Freebsd'' %\u003e\npkg install -y ipmitool\n\u003c% elsif os_family ==
        ''Debian'' %\u003e\napt-get update\napt-get install -y ipmitool\n\u003c% end
        %\u003e\n\n\u003c% if bmc_nic.subnet.dhcp_boot_mode? -%\u003e\nipmitool lan
        set \u003c%= channel_id %\u003e ipsrc dhcp\n\u003c% else -%\u003e\nipmitool
        lan set \u003c%= channel_id %\u003e ipsrc static\nipmitool lan set \u003c%=
        channel_id %\u003e ipaddr \u003c%= bmc_nic.ip %\u003e\nipmitool lan set \u003c%=
        channel_id %\u003e netmask \u003c%= bmc_nic.subnet.mask %\u003e\nipmitool
        lan set \u003c%= channel_id %\u003e defgw ipaddr \u003c%= bmc_nic.subnet.gateway
        %\u003e\n\u003c% end -%\u003e\n\nipmitool lan set \u003c%= channel_id %\u003e
        auth \u003c%= user_privilege_level %\u003e \u003c%= auth_method %\u003e\nipmitool
        lan set \u003c%= channel_id %\u003e arp respond on\nipmitool lan set \u003c%=
        channel_id %\u003e access on\n\n# Provided user exist, get his ID\nif ipmitool
        user list \u003c%= channel_id %\u003e | grep -m 1 -E ''[[:blank:]]\u003c%=
        bmc_nic.username %\u003e[[:blank:]]'' \u003e/dev/null 2\u003e\u00261; then\n  ipmi_user_id=$(ipmitool
        user list \u003c%= channel_id %\u003e | grep -m 1 -E ''[[:blank:]]\u003c%=
        bmc_nic.username %\u003e[[:blank:]]'' | cut -d '' '' -f1)\n# provided user
        don''t exist, get the next free ID and create a new user.\nelse\n  ipmi_user_id=$[$(ipmitool
        user list \u003c%= channel_id %\u003e | tail -n 1 | cut -d '' '' -f1)+1]\n  ipmitool
        user set name ${ipmi_user_id} \u003c%= bmc_nic.username %\u003e\nfi\n\nipmitool
        user set password ${ipmi_user_id} \u003c%= bmc_nic.password %\u003e\nipmitool
        channel setaccess \u003c%= channel_id %\u003e ${ipmi_user_id} link=on ipmi=on
        callin=on privilege=\u003c%= privilege_levels[user_privilege_level] %\u003e\nipmitool
        user enable ${ipmi_user_id}\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.667Z","updated_at":"2019-07-18T15:21:09.913Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"cbe96e81f4d03f01b9503a5b7d4ac43c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f3464d4a-0c9e-4091-9871-064c89b0a8a1]
      x-runtime: ['0.038496']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/59
  response:
    body: {string: !!python/unicode '{"id":59,"name":"built","template":"\u003c%#\nkind:
        snippet\nname: built\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%#\n  Sends
        ''built'' request to exit build mode. Only use in multi-line shell context.\n  Tries
        curl, if not found then wget and finally wget from busybox (limited options).\n-%\u003e\n\u003c%\n  endpoint
        = @endpoint || ''built''\n  method = @method || ''POST''\n  url = foreman_url(endpoint)\n  curl_opts
        = [\"-H ''Content-Type: text/plain''\"]\n  wget_opts = [\"--header ''Content-Type:
        text/plain''\"]\n  if url.start_with?(''https'')\n    curl_opts \u003c\u003c
        \"--insecure\"\n    wget_opts \u003c\u003c \"--no-check-certificate\"\n  end\n  if
        @body_file\n    curl_opts \u003c\u003c \"--data @#{@body_file}\"\n    wget_opts
        \u003c\u003c \"--body-file=#{@body_file}\"\n  end\n-%\u003e\nif [ -x /usr/bin/curl
        ]; then\n  /usr/bin/curl -o /dev/null --noproxy \\* \u003c%= curl_opts.join(''
        '') %\u003e --silent ''\u003c%= url %\u003e''\nelif [ -x /usr/bin/wget ];
        then\n  /usr/bin/wget -q -O /dev/null --no-proxy --method \u003c%= method
        %\u003e \u003c%= wget_opts.join('' '') %\u003e ''\u003c%= url %\u003e''\nelse\n  wget
        -q -O /dev/null --header ''Content-Type: text/plain'' ''\u003c%= url %\u003e''\nfi\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.690Z","updated_at":"2019-07-18T15:21:09.977Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"a034df8c74817cb4374948f412fdb846"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8dddaa61-af3c-47bf-96c4-9251fa77c6da]
      x-runtime: ['0.037772']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/60
  response:
    body: {string: !!python/unicode '{"id":60,"name":"chef_client","template":"\u003c%#\nkind:
        snippet\nname: chef_client\nmodel: ProvisioningTemplate\nsnippet: true\ndescription:
        this is a single entry point for chef-client bootstrapping, it selects\n    a
        bootstrapping strategy based on host parameter named \"chef_bootstrap_template\"\n    note
        that it can be set per hostgroup, os, domain etc.\n    if there''s no strategy
        set, omnibus is used by default\n%\u003e\necho \"Bootstraping chef\"\n\u003c%=
        snippet_if_exists(host_param(''chef_bootstrap_template'') || ''chef-client
        omnibus bootstrap'') %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.712Z","updated_at":"2019-07-18T15:21:10.055Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"fe6cdc1becb8e4eba28fbec229b9b533"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fe14a565-6955-453e-8a5f-2502f3e60f4e]
      x-runtime: ['0.038273']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/61
  response:
    body: {string: !!python/unicode '{"id":61,"name":"coreos_cloudconfig","template":"#cloud-config\n\u003c%#\nkind:
        snippet\nname: coreos_cloudconfig\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n\u003c%\n  units
        = 0\n  unless host_param_false?(''enable_etcd'')\n    units += 1\n  end\n  if
        host_param_true?(''expose_docker_socket'')\n    units += 1\n  end\n  if @host.subnet.respond_to?(:dhcp_boot_mode?)\n    dhcp
        = @host.subnet.dhcp_boot_mode? \u0026\u0026 !@static\n  else\n    dhcp = !@static\n  end\n  unless
        dhcp\n    units += 1\n  end\n-%\u003e\n\u003c% if units \u003e 0 -%\u003e\n      coreos:\n\u003c%
        if host_param(''reboot-strategy'') -%\u003e\n        update:\n          reboot-strategy:
        \u003c%= host_param(''reboot-strategy'') %\u003e\n\u003c% end -%\u003e\n\u003c%
        unless host_param_false?(''enable_etcd'') -%\u003e\n        etcd2:\n\u003c%
        if host_param(''etcd_discovery_url'') -%\u003e\n          discovery: \u003c%=
        host_param(''etcd_discovery_url'') %\u003e\n\u003c% end -%\u003e\n          advertise-client-urls:
        http://\u003c%= @host.ip %\u003e:2379\n          initial-advertise-peer-urls:
        http://\u003c%= @host.ip %\u003e:2380\n          listen-client-urls: http://0.0.0.0:2379\n          listen-peer-urls:
        http://0.0.0.0:2380\n\u003c% end -%\u003e\n        units:\n\u003c% unless
        host_param_false?(''enable_etcd'') -%\u003e\n          - name: etcd2.service\n            command:
        start\n          - name: fleet.service\n            command: start\n\u003c%
        end -%\u003e\n\u003c% if host_param_true?(''expose_docker_socket'') -%\u003e\n          -
        name: docker-tcp.socket\n            command: start\n            enable: yes\n            content:
        |\n              [Unit]\n              Description=Docker Socket for the API\n\n              [Socket]\n              ListenStream=2375\n              BindIPv6Only=both\n              Service=docker.service\n\n              [Install]\n              WantedBy=sockets.target\n          -
        name: enable-docker-tcp.service\n            command: start\n            content:
        |\n              [Unit]\n              Description=Enable the Docker Socket
        for the API\n\n              [Service]\n              Type=oneshot\n              ExecStart=/usr/bin/systemctl
        enable docker-tcp.socket\n\u003c% end -%\u003e\n\u003c% unless dhcp -%\u003e\n          -
        name: systemd-networkd.service\n            command: stop\n          - name:
        static.network\n            command: start\n            content: |\n              [Match]\n              MACAddress=\u003c%=
        @host.mac %\u003e\n              [Network]\n\u003c% if @host.subnet.present?
        -%\u003e\n              Gateway=\u003c%= @host.subnet.gateway %\u003e\n\u003c%
        end -%\u003e\n              Address=\u003c%= @host.ip %\u003e/\u003c%= @host.subnet.cidr
        %\u003e\n\u003c% if @host.subnet.dns_primary.present? -%\u003e\n              DNS=\u003c%=
        @host.subnet.dns_primary %\u003e\n\u003c% end -%\u003e\n\u003c% if @host.subnet.dns_secondary.present?
        -%\u003e\n              DNS=\u003c%= @host.subnet.dns_secondary %\u003e\n\u003c%
        end -%\u003e\n          - name: down-interfaces.service\n            command:
        start\n            content: |\n              [Service]\n              Type=oneshot\n              ExecStart=/usr/bin/bash
        -c ''for i in $(/usr/bin/ls /sys/class/net/); do [ $i == \"lo\" ] || (/usr/bin/ip
        link set $i down; /usr/bin/ip addr flush dev $i); done''\n          - name:
        systemd-networkd.service\n            command: restart\n\u003c% end -%\u003e\n\u003c%
        end -%\u003e\n      hostname: \u003c%= @host.name %\u003e\n\u003c% if host_param(''ssh_authorized_keys'')
        -%\u003e\n      ssh_authorized_keys:\n  \u003c% host_param(''ssh_authorized_keys'').split('','').map{
        |item| item.strip }.each do |ssh_key| -%\u003e\n      - \"\u003c%= ssh_key
        %\u003e\"\n  \u003c% end -%\u003e\n\u003c% else -%\u003e\n      users:\n        -
        name: core\n          passwd: \u003c%= root_pass %\u003e\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.734Z","updated_at":"2019-07-18T15:21:10.126Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"1678a41a8b9f7d7e24d2bc61cce58d97"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f3326c70-5c48-4ee9-9ae1-ead97ea261bf]
      x-runtime: ['0.048083']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/43
  response:
    body: {string: !!python/unicode '{"id":43,"name":"CoreOS provision","template":"#cloud-config\n\u003c%#\nkind:
        provision\nname: CoreOS provision\nmodel: ProvisioningTemplate\noses:\n- CoreOS\n%\u003e\n\u003c%\nos_major  =
        @host.operatingsystem.major.to_i\n%\u003e\ncoreos:\n  units:\n    - name:
        coreos-bootstrap.service\n      runtime: no\n      command: start\n      content:
        |\n        [Unit]\n        Description=Install coreos to disk\n        [Service]\n        Type=oneshot\n        ExecStart=/usr/bin/coreos-install
        \\\n          -C \u003c%= @host.operatingsystem.release_name %\u003e \\\n          -V
        \u003c%= @host.operatingsystem.release %\u003e \\\n          -d \u003c%= host_param(''install-disk'')
        || ''/dev/sda'' %\u003e \u003c% if @host.provider == ''VMware'' %\u003e-o
        vmware_raw\u003c% end %\u003e \\\n          -c /home/core/cloud-config.yml
        \u003c% if os_major \u003e= 557 -%\u003e-b \u003c%= @mediapath %\u003e\u003c%
        end %\u003e\n        ExecStartPost=/usr/bin/wget -q -O /dev/null --no-check-certificate
        \u003c%= foreman_url(''built'') %\u003e\n        ExecStartPost=/usr/sbin/reboot\n        [X-Fleet]\n        X-Conflicts=coreos-bootstrap.service\n\u003c%
        if host_param(''ssh_authorized_keys'') -%\u003e\nssh_authorized_keys:\n\u003c%
        host_param(''ssh_authorized_keys'').split('','').map{ |item| item.strip }.each
        do |ssh_key| -%\u003e\n  - \"\u003c%= ssh_key %\u003e\"\n\u003c% end -%\u003e\n\u003c%
        else -%\u003e\nusers:\n  - name: core\n    passwd: \u003c%= root_pass %\u003e\n\u003c%
        end -%\u003e\nwrite_files:\n  - content: |\n      \u003c%= snippet ''coreos_cloudconfig''
        %\u003e\n    path: /home/core/cloud-config.yml\n    permissions: ''0600''\n    owner:
        core:core\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.317Z","updated_at":"2019-07-18T15:21:10.184Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"ef4e7f6ca0f63c7b457d1b44133e19e7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a57e97f0-615d-46de-bae2-f549a5d14671]
      x-runtime: ['0.039000']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/12
  response:
    body: {string: !!python/unicode '{"id":12,"name":"CoreOS PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: CoreOS PXELinux\nmodel: ProvisioningTemplate\noses:\n- CoreOS\n%\u003e\nDEFAULT
        coreos\n\nLABEL coreos\n    KERNEL \u003c%= @kernel %\u003e\n    APPEND initrd=\u003c%=
        @initrd %\u003e cloud-config-url=\u003c%= foreman_url(''provision'')%\u003e\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.595Z","updated_at":"2019-07-18T15:21:10.243Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"64d19a716109999e463ea7885247af0c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [50d82920-b267-446a-908e-6d57a2f1e630]
      x-runtime: ['0.038297']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/62
  response:
    body: {string: !!python/unicode '{"id":62,"name":"create_users","template":"\u003c%#\nname:
        create_users\nmodel: ProvisioningTemplate\nkind: snippet\nsnippet: true\n-%\u003e\n\u003c%-
        users = @host.owner_type == ''Usergroup'' ? @host.owner.all_users : [@host.owner]
        -%\u003e\n\u003c%- users.each do |user| -%\u003e\n\u003c%=   \"useradd #{user.login}\"
        %\u003e\n\u003c%-   if user.respond_to?(:ssh_authorized_keys) \u0026\u0026
        user.ssh_authorized_keys.any? -%\u003e\n\u003c%=     \"mkdir -p -m 0700 ~#{user.login}/.ssh\"
        %\u003e\n\u003c%=     \"cat \u003e\u003e ~#{user.login}/.ssh/authorized_keys
        \u003c\u003cEOF\" %\u003e\n\u003c%-     index = 0 -%\u003e\n\u003c%-     user.ssh_keys.each
        do |key| -%\u003e\n\u003c%-       if index == 0 -%\u003e\n\u003c%=        \"#{key.type}
        #{key.ssh_key} #{key.comment}\" %\u003e\n\u003c%-       else -%\u003e\n\u003c%=        \"#{key.type}
        #{key.ssh_key} #{key.comment} - #{index}\" %\u003e\n\u003c%-       end -%\u003e\n\u003c%-       index
        += 1 -%\u003e\n\u003c%-     end -%\u003e\n\u003c%=     \"EOF\" %\u003e\n\u003c%=     \"chown
        -R #{user.login}:#{user.login} ~#{user.login}/.ssh\" %\u003e\n\u003c%=     \"chmod
        -R go= ~#{user.login}/.ssh\" %\u003e\n\u003c%-   end -%\u003e\n\u003c%- end
        %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.757Z","updated_at":"2019-07-18T15:21:10.309Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"36a9d30da7928ddf79bbac096fe1708c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fd4d9515-2ecb-48a7-a34b-b436991450f9]
      x-runtime: ['0.038056']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/63
  response:
    body: {string: !!python/unicode '{"id":63,"name":"csr_attributes.yaml","template":"\u003c%#\nkind:
        snippet\nname: csr_attributes.yaml\nmodel: ProvisioningTemplate\nsnippet:
        true\n%\u003e\n---\ncustom_attributes:\n  1.2.840.113549.1.9.7: \"\u003c%=
        @host.puppetca_token.value %\u003e\"\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.779Z","updated_at":"2019-07-18T15:21:10.372Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"80fab3d52e955289aff4b42610cb9cd3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b06c616e-b54b-4c5f-9e46-fe37b01a9ac0]
      x-runtime: ['0.037311']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/64
  response:
    body: {string: !!python/unicode '{"id":64,"name":"efibootmgr_netboot","template":"\u003c%#\nkind:
        snippet\nname: efibootmgr_netboot\nmodel: ProvisioningTemplate\ndescription:
        Configure booting from network in EFI\nsnippet: true\n%\u003e\n\u003c% if
        host_param(''efi_bootentry'') == ''previous'' -%\u003e\nif [[ -d /sys/firmware/efi
        ]]; then\n  echo \"Changing EFI boot order to preserve boot. Typically the
        previous entry\"\n  echo \"was network boot in netboot workflows but this
        can also break things.\"\n  echo \"In that case use efi_keep_bootorder host
        parameter to keep it untouched.\"\n  echo \"Boot order is currently:\"\n  efibootmgr\n  echo\n  created_entry=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2 | cut -d \",\" -f 1)\n  others=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2 | cut -d \",\" -f 2-)\n  new_order=\"${others},${created_entry}\"\n  echo
        \"Found entry ${created_entry}, changing order to:\"\n  efibootmgr -o ${new_order}\n  echo\nfi\n\u003c%
        elsif (entry = host_param(''efi_bootentry'')) -%\u003e\nif [[ -d /sys/firmware/efi
        ]]; then\n  echo \"Trying to find EFI boot entry containing: \u003c%= entry
        -%\u003e\"\n  echo \"Boot order is currently:\"\n  efibootmgr\n  echo\n  current=$(efibootmgr
        | grep \"BootOrder\" | cut -d \" \" -f 2)\n  id=$(efibootmgr | grep -E ''^Boot[0-9]+''
        | grep -E ''a'' | efibootmgr | grep -E ''^Boot[0-9]+'' | grep -E ''\u003c%=
        entry -%\u003e'' | cut -c5-8)\n  echo \"Found entry ${id}, changing order
        to:\"\n  efibootmgr -o ${id},${current}\n  echo\nfi\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.800Z","updated_at":"2019-07-18T15:21:10.438Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"406c883268e16baeee4c112957d95cd5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3ec8c661-a226-4830-8c0e-c2686e0453c9]
      x-runtime: ['0.037894']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/65
  response:
    body: {string: !!python/unicode '{"id":65,"name":"epel","template":"\u003c%#\nkind:
        snippet\nname: epel\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%\nrepo_base  =
        host_param(''epel-repo-base'') ? host_param(''epel-repo-base'') : ''https://dl.fedoraproject.org/pub/epel''\nhttp_proxy
        = host_param(''http-proxy'') ? \" --httpproxy #{host_param(''http-proxy'')}\"
        : nil\nhttp_port  = host_param(''http-proxy-port'') ? \" --httpport #{host_param(''http-proxy-port'')}\"
        : nil\nos_major   = @host.operatingsystem.major.to_i\n-%\u003e\nrpm -Uvh\u003c%=
        http_proxy %\u003e\u003c%= http_port %\u003e \u003c%= repo_base %\u003e/epel-release-latest-\u003c%=
        os_major %\u003e.noarch.rpm\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.823Z","updated_at":"2019-07-18T15:21:10.506Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:20 GMT']
      etag: [W/"a9dcb3b88fa0cb29dd8738332c7a3df7"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [66e88850-ce83-49bb-8d33-d14ab6d18a8a]
      x-runtime: ['0.037883']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/66
  response:
    body: {string: !!python/unicode '{"id":66,"name":"fips_packages","template":"\u003c%#\nkind:
        snippet\nname: fips_packages\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\ndracut-fips\n-prelink\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.859Z","updated_at":"2019-07-18T15:21:10.573Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"f3f8118078fa88d66461d4b9cc892518"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fa4e76ba-817b-471e-8724-2b5e3d45571d]
      x-runtime: ['0.039834']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/67
  response:
    body: {string: !!python/unicode '{"id":67,"name":"fix_hosts","template":"\u003c%#\nkind:
        snippet\nname: fix_hosts\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\necho
        \"\u003c%= @host.shortname %\u003e\" \u003e /etc/hostname\nhostname \u003c%=
        @host.shortname %\u003e\ncat \u003e /etc/hosts \u003c\u003c EOF\n\u003c%#
        simple snippet to generate /etc/hosts when provisioning image based systems
        -%\u003e\n127.0.0.1   \u003c%= @host %\u003e \u003c%= @host.shortname %\u003e
        localhost localhost.localdomain\n::1     ip6-localhost ip6-loopback\nfe00::0
        ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\nEOF\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.881Z","updated_at":"2019-07-18T15:21:10.640Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"5446eb2345806c0a471e5451f54e6238"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4dd3b45f-a031-4906-a1f8-a9ad159c1462]
      x-runtime: ['0.038611']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/27
  response:
    body: {string: !!python/unicode '{"id":27,"name":"FreeBSD (mfsBSD) finish","template":"\u003c%#\nkind:
        finish\nname: FreeBSD (mfsBSD) finish\nmodel: ProvisioningTemplate\noses:\n-
        FreeBSD\n%\u003e\n\u003c%\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  proxy_string = host_param(''http-proxy'')
        ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n%\u003e\n\u003c% unless proxy_string == '''' -%\u003e\nexport http_proxy=''\u003c%=
        proxy_string %\u003e''\n\u003c% end -%\u003e\n/bin/echo ''\u003c%= root_pass
        %\u003e'' | pw usermod root -H 0\ncat \u003e\u003e /etc/rc.conf \u003c\u003cEOF\nhostname=\"\u003c%=
        @host %\u003e\"\nsshd_enable=\"YES\"\nntpd_enable=\"YES\"\nEOF\n\necho ifconfig_`ifconfig
        -l | cut -d '' '' -f 1`=DHCP \u003e\u003e/etc/rc.conf\n\necho ''PermitRootLogin
        yes'' \u003e\u003e /etc/ssh/sshd_config\n\n/bin/hostname \u003c%= @host.name
        %\u003e\ncp /usr/share/zoneinfo/\u003c%= host_param(''time-zone'') || ''UTC''
        %\u003e /etc/localtime\nadjkerntz -a\nntpdate \u003c%= host_param(''ntp-server'')
        || ''0.freebsd.pool.ntp.org'' %\u003e\n\nmkdir /root/install/\nfreebsd-update
        fetch \u003e /root/install/freebsd-update_fetch.txt\nfreebsd-update install
        \u003e /root/install/freebsd-update_install.txt\n\nenv ASSUME_ALWAYS_YES=YES
        pkg bootstrap\npkg update \u003e /root/install/pkg_update.txt\npkg upgrade
        -y \u003e /root/install/pkg_upgrade.txt\n\n\u003c% if puppet_enabled %\u003e\n\u003c%=
        snippet ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\u003c%=
        snippet(''remote_execution_ssh_keys'') %\u003e\nexit 0\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:13.955Z","updated_at":"2019-07-18T15:21:10.698Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"22631351aba1ccafb779b5805a06576d"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5fc12de7-5d99-4e67-9c18-0c5b8f736f38]
      x-runtime: ['0.038564']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/44
  response:
    body: {string: !!python/unicode '{"id":44,"name":"FreeBSD (mfsBSD) provision","template":"\u003c%#\nkind:
        provision\nname: FreeBSD (mfsBSD) provision\nmodel: ProvisioningTemplate\noses:\n-
        FreeBSD\n%\u003e\n\u003c%\nproxy_string = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n%\u003e\n\u003c% unless proxy_string == '''' -%\u003e\nexport http_proxy=''\u003c%=
        proxy_string %\u003e''\n\u003c% end -%\u003e\n\n# Get the disk layout, and
        the first disk connected to the system\ndisk_layout=`/sbin/sysctl -n kern.disks
        | /usr/bin/sed ''s/cd[0-9]//g''`\nfirst_disk=\"`echo ${disk_layout##*[1-9]}
        | /usr/bin/cut -d'' '' -f1`\"\ntest -z \"$first_disk\" || echo \"First disk:
        $first_disk\"\n\n/root/bin/destroygeom -d \u003c%= host_param(''install-disk'')
        || ''$first_disk'' %\u003e || exit 1\n/root/bin/zfsinstall -d \u003c%= host_param(''install-disk'')
        || ''$first_disk'' %\u003e -s 2G -u \u003c%= @mediapath %\u003e || exit 1\n\ncp
        /etc/resolv.conf /mnt/etc/resolv.conf\nmount -t devfs devfs /mnt/dev\nfetch
        -q --no-verify-hostname --no-verify-peer -o /mnt/tmp/finish.sh -d \u003c%=
        foreman_url(''finish'') %\u003e\nchroot /mnt /bin/sh /tmp/finish.sh\nrm /mnt/tmp/finish.sh\n\nfetch
        -q --no-verify-hostname --no-verify-peer -o /dev/null -d \u003c%= foreman_url(''built'')
        %\u003e\nsleep 5\nreboot\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.339Z","updated_at":"2019-07-18T15:21:10.758Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"df4b5f7d88854134c12229a2c6d1e617"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ddb84c96-8e01-452e-87f5-f8843efd88f1]
      x-runtime: ['0.037112']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/13
  response:
    body: {string: !!python/unicode '{"id":13,"name":"FreeBSD (mfsBSD) PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: FreeBSD (mfsBSD) PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        FreeBSD\n%\u003e\n# foreman_url=\u003c%= foreman_url(''provision'') %\u003e\nDEFAULT
        freebsd\n\nLABEL freebsd\n    KERNEL memdisk\n    APPEND initrd=\u003c%= @initrd
        %\u003e harddisk raw\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.617Z","updated_at":"2019-07-18T15:21:10.818Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"a149a109c02b2de3b0653e7cfd849eea"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [882db36a-cb4e-4e82-afb9-ae142a6f6b7b]
      x-runtime: ['0.036943']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/68
  response:
    body: {string: !!python/unicode '{"id":68,"name":"freeipa_register","template":"\u003c%#\nkind:
        snippet\nname: freeipa_register\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n#
        FreeIPA Registration Snippet\n#\n# Optional parameters:\n#\n#   freeipa_server              IPA
        server\n#\n#   freeipa_sudo                Enable sudoers\n#                               Default:
        true\n#\n#   freeipa_ssh                 Enable ssh integration\n#                               Default:
        true\n#\n#   freeipa_automount           Enable automounter\n#                               Default:
        false\n#\n#   freeipa_automount_location  Location for automounts\n#\n#   freeipa_mkhomedir           Enable
        automatically making home directories\n#                               Default:
        true\n#\n#   freeipa_opts                Additional options to pass directly
        to installer\n#\n#   freeipa_automount_server    Override automount server
        if freeipa_automount is true and the server differs from freeipa_server\n#\n\n\u003c%
        if @host.operatingsystem.family == ''Redhat'' -%\u003e\n  \u003c% if @host.operatingsystem.name
        == ''Fedora'' -%\u003e\n    freeipa_client=freeipa-client\n  \u003c% else
        -%\u003e\n    freeipa_client=ipa-client\n  \u003c% end -%\u003e\n  \u003c%
        if @host.operatingsystem.major.to_i \u003e 6 -%\u003e\n    /usr/sbin/sshd-keygen\n  \u003c%
        end -%\u003e\n\u003c% else -%\u003e\n  freeipa_client=freeipa-client\n\u003c%
        end -%\u003e\n\n\u003c%= @host.operatingsystem.family == ''Redhat'' ? ''yum
        install -y libsss_sudo'' : ''apt-get install -y libsss-sudo'' %\u003e $freeipa_client\n\n##\n##
        IPA Client Installation\n##\n\u003c% if host_param(''freeipa_server'') -%\u003e\n\u003c%
        domain = host_param(''freeipa_domain'') || @host.realm.name.downcase -%\u003e\n\nfreeipa_server=\"--server
        \u003c%= host_param(''freeipa_server'') %\u003e\"\nfreeipa_domain=\"--domain
        \u003c%= domain %\u003e\"\n\u003c% end -%\u003e\n\n\u003c% unless host_param_false?(''freeipa_mkhomedir'')
        %\u003e\nfreeipa_mkhomedir=\"--mkhomedir\"\n\u003c% end -%\u003e\n\n\u003c%
        if host_param_false?(''freeipa_ssh'') %\u003e\nfreeipa_ssh=\"--no-ssh\"\n\u003c%
        end -%\u003e\n\n\u003c% if host_param(''freeipa_opts'') -%\u003e\nfreeipa_opts=\"\u003c%=
        host_param(''freeipa_opts'') %\u003e\"\n\u003c% end -%\u003e\n\n# One-time
        password will be requested at install time. Otherwise, $HOST[OTP] is used
        as a placeholder value.\n/usr/sbin/ipa-client-install -w ''\u003c%= @host.otp
        || \"$HOST[OTP]\" %\u003e'' --realm=\u003c%= @host.realm %\u003e -U $freeipa_mkhomedir
        $freeipa_opts $freeipa_server $freeipa_domain $freeipa_ssh\n\n##\n## Automounter\n##\n\n\u003c%
        if host_param(''freeipa_automount_location'') -%\u003e\nautomount_location=\"--location
        \u003c%= host_param(''freeipa_automount_location'') %\u003e\"\n\u003c% end
        -%\u003e\n\n\u003c% if host_param_true?(''freeipa_automount'') -%\u003e\nif
        [ -f /usr/sbin/ipa-client-automount ]\nthen\n  automount_server=$freeipa_server\n  \u003c%-
        if automount_server = host_param(''freeipa_automount_server'') || host_param(''freeipa_server'')
        -%\u003e\n  automount_server=\"--server \u003c%= automount_server %\u003e\"\n  \u003c%-
        end -%\u003e\n  /usr/sbin/ipa-client-automount $automount_server $automount_location
        --unattended\nfi\n\u003c% end -%\u003e\n\n##\n## Sudoers\n##\n\n\u003c% unless
        host_param_false?(''freeipa_enable_sudo'') %\u003e\n\nfreeipa_client_version=$(ipa-client-install
        --version)\nfreeipa_client_version_major=$(echo $freeipa_client_version |
        cut -f1 -d.)\nfreeipa_client_version_minor=$(echo $freeipa_client_version
        | cut -f2 -d.)\nfreeipa_realm=$(grep default_realm /etc/krb5.conf | cut -d\"=\"
        -f2 | tr -d '' '')\nfreeipa_domain=$(grep -A 2 domain_realm /etc/krb5.conf
        | tail -n1 | awk ''{print $1}'')\nfreeipa_dn=$(for word in $(echo $freeipa_domain
        | sed ''s/\\./ /g''); do echo -n dc=$word,; done)\nsssd_version=$(sssd --version)\nsssd_major=$(echo
        $sssd_version | cut -f1 -d.)\nsssd_minor=$(echo $sssd_version | cut -f2 -d.)\nLDAP_CONFIG=$(mktemp)\n\n#
        \u003e=ipa-client-4.1.0 automatically configures sssd for sudo\n# =\u003cipa-client-3
        requires manual configuration which this snippet takes care of\n\nif [ $freeipa_client_version_major
        -lt 4 ]\nthen\n  # Modify sssd.conf\n  sed -i -e \"s/services = .*/\\0, sudo/\"
        /etc/sssd/sssd.conf\n\n  # Modify sssd.conf for sssd \u003c1.11 (RHEL \u003c6.6)\n  if
        [ $sssd_minor -lt 11 ] || [ $sssd_major -lt 1 ]\n  then\n    \u003c% if host_param(''freeipa_server'')
        -%\u003e\n    ldap_uri=\", ldap://\u003c%= host_param(''freeipa_server'')
        %\u003e\"\n    krb5_server=\u003c%= host_param(''freeipa_server'') %\u003e\n    \u003c%
        else -%\u003e\n    krb5_server=\"_srv_\"\n    \u003c% end -%\u003e\n\ncat
        \u003c\u003cEOF \u003e $LDAP_CONFIG\nsudo_provider = ldap\nldap_uri = _srv_
        $ldap_uri\nldap_sudo_search_base = ou=SUDOers,${freeipa_dn%?}\nldap_sasl_mech
        = GSSAPI\nldap_sasl_authid = host/$HOSTNAME\nldap_sasl_realm = $freeipa_realm\nkrb5_server
        = $krb5_server\nEOF\n  sed -i -e \"/\\[domain\\/.*\\]/ r $LDAP_CONFIG\" /etc/sssd/sssd.conf\n  fi\n\n  #
        Modify nsswitch.conf\n  grep -q sudoers /etc/nsswitch.conf\n  if [[ $? -eq
        0 ]];\n  then\n    sed -i -e \"s/^sudoers.*/sudoers:    files sss/\" /etc/nsswitch.conf\n  else\n    echo
        \"sudoers:    files sss\" \u003e\u003e /etc/nsswitch.conf\n  fi\n\n  # Configure
        nisdomain\n  \u003c% if @host.operatingsystem.family == ''Redhat'' -%\u003e\n    authconfig
        --nisdomain ${freeipa_domain} --update\n    chkconfig sssd on\n    \n    if
        [[ $(rpm -qa systemd | wc -l) -gt 0 ]];\n    then\n      domain_service=/usr/lib/systemd/system/*-domainname.service\n      \n      #
        Workaround for BZ1071969 on RHEL 7.0\n      grep -q \"DefaultDependencies=no\"
        $domain_service\n      if [[ $? -ne 0 ]]\n      then\n        sed -i -e \"s/\\[Unit\\]/\\[Unit\\]\\nDefaultDependencies=no/\"
        $domain_service\n      fi\n\n      systemctl start $(basename $domain_service)\n      systemctl
        enable $(basename $domain_service)\n    fi\n  \u003c% else -%\u003e\n  # OS
        is not RedHat\n  sed -i -e ''/^exit /d'' /etc/rc.local\n  echo \"nisdomainname
        ${freeipa_domain}\" \u003e\u003e /etc/rc.local\n  echo \"exit 0\" \u003e\u003e
        /etc/rc.local\n  nisdomainname ${freeipa_domain}  \n  \u003c% end -%\u003e\nfi\n\n\u003c%
        end -%\u003e\n\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.903Z","updated_at":"2019-07-18T15:21:10.886Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"c6188ea5854b3b9e4d06413142fccae9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f4237aa7-58a2-40f0-9a78-25e227bc66c6]
      x-runtime: ['0.037897']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/52
  response:
    body: {string: !!python/unicode '{"id":52,"name":"Grubby default","template":"#!/bin/bash\n\u003c%#\nkind:
        script\nname: Grubby default\nmodel: ProvisioningTemplate\n%\u003e\n\nKERNEL=\"/boot/kernel\"\nINITRD=\"/boot/initrd.img\"\n\nwget
        -O \"$KERNEL\" \"\u003c%= @host.url_for_boot(:kernel) %\u003e\"\nwget -O \"$INITRD\"
        \"\u003c%= @host.url_for_boot(:initrd) %\u003e\"\n\ngrubby --add-kernel=$KERNEL
        --initrd=$INITRD  --copy-default --title \"\u003c%= @host.operatingsystem
        %\u003e\" --make-default  --args=\"ks=\u003c%= foreman_url(''provision'')%\u003e\"\n","snippet":false,"template_kind_id":7,"created_at":"2019-07-15T16:12:14.525Z","updated_at":"2019-07-18T15:21:10.943Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"c7800095c4ae7addf9c7bc9cbba496ab"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [82507073-f224-4b7f-ae06-b40f28ea2692]
      x-runtime: ['0.037316']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/69
  response:
    body: {string: !!python/unicode '{"id":69,"name":"http_proxy","template":"\u003c%#\nkind:
        snippet\nname: http_proxy\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n\u003c%
        if (proxy = host_param(\"http_proxy\")) -%\u003e\nhttp_proxy=\u003c%= proxy
        %\u003e\nexport http_proxy\nhttps_proxy=\u003c%= proxy %\u003e\nexport https_proxy\nno_proxy=localhost,127.0.0.0/8,*.local,*.\u003c%=
        @host.domain.name -%\u003e,puppet\nexport no_proxy\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.927Z","updated_at":"2019-07-18T15:21:11.010Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"e7cbf6422f7e99a6e8484488af4117d5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [c883ef08-9a09-4428-928b-fc1dcf887b15]
      x-runtime: ['0.041633']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/34
  response:
    body: {string: !!python/unicode '{"id":34,"name":"iPXE default local boot","template":"\u003c%#\nkind:
        iPXE\nmodel: ProvisioningTemplate\nname: iPXE default local boot\nsnippet:
        false\n-%\u003e\n#!ipxe\n\n# Skips booting from network and continues booting
        from next device\nexit\n","snippet":false,"template_kind_id":4,"created_at":"2019-07-15T16:12:14.129Z","updated_at":"2019-07-18T15:21:11.071Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"f7f51233c43e4587986a2b061866c753"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8271ecd7-0e21-4a15-9397-d7e956012bbc]
      x-runtime: ['0.041572']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/35
  response:
    body: {string: !!python/unicode '{"id":35,"name":"iPXE global default","template":"\u003c%#\nkind:
        iPXE\nmodel: ProvisioningTemplate\nname: iPXE global default\nsnippet: false\n-%\u003e\n#!ipxe\n\nset
        menu-default \u003c%= global_setting(\"default_pxe_item_global\", \"local\")
        %\u003e\nset menu-timeout 5000\n\n:start\nmenu iPXE global boot menu\nitem
        --key l local     Local boot (next entry)\nitem shell             Drop into
        iPXE shell\nitem reboot            Reboot system\nitem\nitem --key d discovery
        Discovery from ${next-server}:8000 (httpboot module)\nitem --key d discovery8448
        Discovery from ${next-server}:8448 (httpboot module)\nitem --key d discovery80
        Discovery from ${next-server}:80 (custom script)\nchoose --timeout ${menu-timeout}
        --default ${menu-default} selected || goto cancel\nset menu-timeout 0\ngoto
        ${selected}\n\n:cancel\necho Menu canceled, dropping to shell\n\n:shell\necho
        Use the command ''exit'' to return to menu\nshell\nset menu-timeout 0\ngoto
        start\n\n:failed\necho Boot failed, dropping to shell\ngoto shell\n\n:reboot\nreboot\n\n:local\nexit\n\n:discovery\ndhcp\nkernel
        http://${next-server}:8000/boot/fdi-image/vmlinuz0 initrd=initrd0.img rootflags=loop
        root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force rd.luks=0 rd.md=0
        rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset nokaslr proxy.url=\u003c%=
        foreman_server_url %\u003e proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}:8000/boot/fdi-image/initrd0.img\nimgstat\nsleep 2\nboot
        || goto failed\ngoto start\n\n:discovery80\ndhcp\nkernel http://${next-server}/httpboot/boot/fdi-image/vmlinuz0
        initrd=initrd0.img rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image
        acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset
        nokaslr proxy.url=\u003c%= foreman_server_url %\u003e proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}/httpboot/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n\n:discovery8000\ndhcp\nkernel http://${next-server}:8000/httpboot/boot/fdi-image/vmlinuz0
        initrd=initrd0.img rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image
        acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nomodeset
        nokaslr proxy.url=\u003c%= foreman_server_url %\u003e proxy.type=foreman BOOTIF=01-${net0/mac}\ninitrd
        http://${next-server}:8000/httpboot/boot/fdi-image/initrd0.img\nimgstat\nsleep
        2\nboot || goto failed\ngoto start\n","snippet":false,"template_kind_id":4,"created_at":"2019-07-15T16:12:14.149Z","updated_at":"2019-07-18T15:21:11.133Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"82bc581552afe5d9f5d4d548cd18a2db"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3d4c3306-c472-4428-87a1-5b62ecf3e442]
      x-runtime: ['0.039812']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/36
  response:
    body: {string: !!python/unicode '{"id":36,"name":"iPXE intermediate script","template":"\u003c%#\nkind:
        iPXE\nmodel: ProvisioningTemplate\nname: iPXE intermediate script\nsnippet:
        false\n-%\u003e\n#!ipxe\n# Intermediate iPXE script to report MAC address
        to Foreman\n\u003c% (0..32).each do |i| -%\u003e\n\n:net\u003c%= i %\u003e\nisset
        ${net\u003c%= i -%\u003e/mac} || goto no_nic\ndhcp net\u003c%= i -%\u003e
        || goto net\u003c%= i+1 %\u003e\nchain \u003c%= foreman_url(''iPXE'') %\u003e?mac=${net\u003c%=
        i -%\u003e/mac} || goto net\u003c%= i+1 %\u003e\n\u003c% end -%\u003e\n\n:net33\ngoto
        no_nic\n\nexit 0\n\n:no_nic\necho Failed to chainload from any network interface\nsleep
        30\nexit 1\n","snippet":false,"template_kind_id":4,"created_at":"2019-07-15T16:12:14.169Z","updated_at":"2019-07-18T15:21:11.194Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"978eca31c02624dcc5e85ed4ba605a1d"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [718dbf10-d6d3-452b-afe5-4f0f4821ae67]
      x-runtime: ['0.038288']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/45
  response:
    body: {string: !!python/unicode '{"id":45,"name":"Jumpstart default","template":"\u003c%#\nkind:
        provision\nname: Jumpstart default\nmodel: ProvisioningTemplate\noses:\n-
        Solaris\n%\u003e\ninstall_type \u003c%= @install_type %\u003e\npartitioning
        explicit\n\u003c%= @disk %\u003e\n\u003c% if @host.use_image  -%\u003e\narchive_location
        nfs \u003c%=@archive_location%\u003e\n\u003c% else -%\u003e\nsystem_type \u003c%=
        @system_type %\u003e\npackage \u003c%= @packages %\u003e add\ncluster \u003c%=
        @cluster %\u003e\n\u003c% end -%\u003e\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.366Z","updated_at":"2019-07-18T15:21:11.262Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"b9ce051584f7367502bf7cc9077c2d39"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8f76d50a-4f9f-4f65-8148-4597c1da4626]
      x-runtime: ['0.037664']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/28
  response:
    body: {string: !!python/unicode '{"id":28,"name":"Jumpstart default finish","template":"\u003c%#\nkind:
        finish\nname: Jumpstart default finish\nmodel: ProvisioningTemplate\noses:\n-
        Solaris\n%\u003e\nlogger \"Starting finish script\"\n\n# Do not turn the machine
        off after 30 minutes. Very annoying!\n/bin/touch /noautoshutdown\n\n# Install
        the root password\n/usr/bin/perl -p -i -e ''s/^root:[^:]+/root:\u003c%= @host.root_pass.gsub(''/'',
        ''\\/'')-%\u003e/'' /etc/shadow\n\n# Root can ssh into this box. This is very
        useful while we rebuild this\n/usr/bin/perl -p -i -e \"s/PermitRootLogin no/PermitRootLogin
        yes/\" /etc/ssh/sshd_config\n\n# Now ensure that we have the newest puppet
        and facter installed\nmount /proc\n/usr/bin/cat /etc/mnttab | sed -e ''s/\\/a/\\//''
        | sed -e ''s/\\/a//'' \u003e /a/etc/mnttab\n/sbin/mount -F mntfs mnttab /etc/mnttab\n/usr/sbin/mknod
        /devices/pseudo/random@0:random c 190 0\n/usr/sbin/mknod /devices/pseudo/random@0:urandom
        c 190 1\n/usr/sbin/pkgadd -a /tmp/admin -d http://get.opencsw.org/now all\n/opt/csw/bin/pkgutil
        -U -y\n/opt/csw/bin/pkgutil -u -f -y CSWfacter CSWpuppet CSWwget\n\n/usr/bin/echo
        \"Creating helper startup script to start puppet\"\nONETIME=S99.enable.puppet\n/usr/bin/cat
        \u003e /etc/rc3.d/$ONETIME \u003c\u003c EOF\n#!/bin/sh\n#\n# $ONETIME\n#\n#
        runs once at startup and then removes itself.\n#\nPATH=/usr/bin:/usr/sbin;
        export PATH\n/usr/sbin/svccfg import /var/opt/csw/svc/manifest/network/cswpuppetd.xml\n/usr/sbin/svcadm
        enable svc:/network/cswpuppetd\nsleep 2\nrm \\$0\nEOF\n\n/usr/bin/echo \"Configuring
        puppet\"\ncat \u003e /etc/puppet/puppet.conf \u003c\u003c EOF\n\u003c%= snippet
        ''puppet.conf'' -%\u003e\nEOF\n# The x86 version of the puppet package ignores
        the --config parameter. This should fix that and not hurt other installations\nif
        [ -f /etc/opt/csw/puppet/puppetd.conf ]\nthen\n    rm -f /etc/opt/csw/puppet/puppetd.conf\n    ln
        -s /etc/puppet/puppet.conf /etc/opt/csw/puppet/puppetd.conf\nfi\n/opt/csw/bin/puppet
        agent --config /etc/puppet/puppet.conf -o --tags no_such_tag --server \u003c%=
        @host.puppetmaster %\u003e --no-daemonize\necho \"Informing Foreman that we
        are built\"\n/opt/csw/bin/wget --no-check-certificate -O /dev/null \u003c%=
        foreman_url(''built'') %\u003e\nexit 0\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:13.978Z","updated_at":"2019-07-18T15:21:11.323Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"8f2d83bb978b55f7660ed9046ee68495"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [30b84515-4ed8-42b3-b613-18cbfe3f7d2a]
      x-runtime: ['0.037403']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/2
  response:
    body: {string: !!python/unicode '{"id":2,"name":"Jumpstart default PXEGrub","template":"\u003c%#\nkind:
        PXEGrub\nname: Jumpstart default PXEGrub\nmodel: ProvisioningTemplate\noses:\n-
        Solaris\n%\u003e\ndefault=0\ntimeout=10\ntitle Solaris_10 Jumpstart\n        kernel
        \u003c%= @host.multiboot %\u003e kernel/unix - install dhcp nowin -B install_config=\u003c%=
        @host.jumpstart_path %\u003e,sysid_config=\u003c%= @host.jumpstart_path %\u003e/sysidcfg/sysidcfg_primary,install_media=\u003c%=
        @host.install_path %\u003e,install_boot=\u003c%= @host.install_path %\u003e/boot\n        module
        \u003c%= @host.miniroot %\u003e\ntitle Solaris 10\n        findroot (rootfs0,0,a)\n        kernel$
        /platform/i86pc/multiboot\n        module /platform/i86pc/boot_archive\n","snippet":false,"template_kind_id":2,"created_at":"2019-07-15T16:12:13.366Z","updated_at":"2019-07-18T15:21:11.382Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"a0f7dc46c34b22fd7ff96f8541460d5b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [d0edfb7c-59ac-4a36-9e04-5f251aa3793e]
      x-runtime: ['0.037803']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/29
  response:
    body: {string: !!python/unicode '{"id":29,"name":"Junos default finish","template":"\u003c%#\nkind:
        finish\nname: Junos default finish\nmodel: ProvisioningTemplate\noses:\n-
        Junos\n-%\u003e\nsystem {\n    host-name \u003c%= @host %\u003e;\n    time-zone
        \u003c%= host_param(''time-zone'') || ''Etc/UTC'' %\u003e;\n    root-authentication
        {\n        encrypted-password \"\u003c%= root_pass %\u003e\"; ## SECRET-DATA\n    }\n    name-server
        {\n        \u003c%= @host.subnet.dns_primary || ''8.8.8.8'' %\u003e;\n        \u003c%
        if @host.subnet.dns_secondary -%\u003e\n        \u003c%= @host.subnet.dns_secondary
        %\u003e;\n        \u003c% end -%\u003e\n    }\n    ntp {\n        boot-server
        \u003c%= host_param(''ntp-server'') || ''0.pool.ntp.org'' %\u003e;\n        server
        \u003c%= host_param(''ntp-server'') || ''0.pool.ntp.org'' %\u003e;\n    }\n    login
        {\n        message \"This device was provisioned by using The Foreman!\\nSee
        http://theforeman.org/ for further information.\\n\";\n        class automation
        {\n            permissions all;\n        }\n        user puppet {\n            uid
        2001;\n            class automation;\n            authentication {\n                encrypted-password
        \"\u003c%= root_pass %\u003e\"; ## SECRET-DATA\n            }\n            shell
        csh;\n        }\n    }\n    services {\n        ssh {\n            protocol-version
        v2;\n        }\n        netconf {\n            ssh;\n        }\n    }\n    syslog
        {\n        user * {\n            any emergency;\n        }\n        file messages
        {\n            any notice;\n            authorization info;\n        }\n        file
        interactive-commands {\n            interactive-commands any;\n        }\n    }\n    ntp
        {\n        boot-server 0.pool.ntp.org;\n        server 0.pool.ntp.org;\n        server
        1.pool.ntp.org;\n    }\n    extensions {\n        providers {\n            juniper
        {\n                license-type juniper deployment-scope commercial;\n            }\n        }\n    }\n}\nchassis
        {\n    alarm {\n        management-ethernet {\n            link-down ignore;\n        }\n    }\n}\ninterfaces
        {\n    interface-range ACCESS-PORT {\n        member ge-0/0/0;\n        unit
        0 {\n            family ethernet-switching {\n                port-mode access;\n            }\n        }\n    }\n    interface-range
        UPLINK-PORT {\n        member ge-0/0/47;\n        unit 0 {\n            family
        ethernet-switching {\n                port-mode trunk;\n                vlan
        {\n                    members all;\n                }\n            }\n        }\n    }\n    vlan
        {\n        unit 37 {\n            family inet;\n        }\n    }\n    vme
        {\n        unit 0 {\n            family inet {\n                dhcp;\n            }\n        }\n    }\n}\nprotocols
        {\n    igmp-snooping {\n        vlan all;\n    }\n    rstp;\n    lldp {\n        interface
        all;\n    }\n    lldp-med {\n        interface all;\n    }\n}\nethernet-switching-options
        {\n    storm-control {\n        interface all;\n    }\n    bpdu-block {\n        interface
        ACCESS-PORT;\n        disable-timeout 120;\n    }\n}\nvlans {\n    testlan
        {\n        vlan-id 37;\n        l3-interface vlan.37;\n    }\n}\ngroups {\n    fmztp
        {\n        apply-macro conf {\n            package jinstall-ex-4200-\u003c%=
        @host.operatingsystem.major %\u003eR\u003c%= @host.operatingsystem.minor %\u003e-domestic-signed.tgz;\n            puppet
        jpuppet-ex-1.0R1.1.tgz;\n        }\n    }\n}\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:14.001Z","updated_at":"2019-07-18T15:21:11.443Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"915ba27c4e0efd60e91ea64888ba4c9d"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [67896051-45a6-485e-b9c8-24dee2c796df]
      x-runtime: ['0.038095']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/46
  response:
    body: {string: !!python/unicode '{"id":46,"name":"Junos default SLAX","template":"\u003c%#\nkind:
        provision\nname: Junos default SLAX\nmodel: ProvisioningTemplate\noses:\n-
        Junos\n-%\u003e\nversion 1.0;\n\n/* ------------------------------------------------------------------\n
        * LICENSE\n * ------------------------------------------------------------------\n
        *\n * Copyright (c) 2013, Juniper Networks\n *\n * All rights reserved.\n
        *\n * Redistribution and use in source and binary forms, with or without\n
        * modification, are permitted provided that the following conditions are met:
        \n *\n * (1) Redistributions of source code must retain the above copyright
        notice, this \n * list of conditions and the following disclaimer. \n *\n
        * (2) Redistributions in binary form must reproduce the above copyright notice,\n
        * this list of conditions and the following disclaimer in the documentation\n
        * and/or other materials provided with the distribution. \n *\n * THIS SOFTWARE
        IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY
        EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n
        * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n
        * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
        FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
        DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
        OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
        HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
        LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
        WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
        OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software
        and documentation are those\n * of the authors and should not be interpreted
        as representing official policies, \n * either expressed or implied, of Juniper
        Networks.\n * \n *\n * ------------------------------------------------------------------\n
        * AUTHORS AND CONTRIBUTORS\n * ------------------------------------------------------------------\n
        *\n * Jeremy Schulman, Juniper Networks\n * - initial release (https://github.com/jeremyschulman/jctyztp/)\n
        *\n * Frank Wall, noris network AG\n * - adapt for integration in The Foreman\n
        * - fix compatibility with older Junos releases\n * \n *\n * ------------------------------------------------------------------\n
        * LIMITATIONS\n * ------------------------------------------------------------------\n
        *\n * To maintain backwards compatibility with JunOS 11.x (and maybe \n *
        even 10.x) you MUST AVOID all of these:\n * - global variable $junos-context
        (introduced with Junos 11.1)\n * - mutable variables (introduced with JunOS
        12.2 -\u003e SLAX 1.1)\n * - native functions (introduced with JunOS 12.2
        -\u003e SLAX 1.1)\n *\n * ------------------------------------------------------------------\n
        */\n\n/* ------------------------------------------------------------------
        */\n/* XML namespaces                                                     */\n/*
        ------------------------------------------------------------------ */\n\n/*
        Juniper */\nns junos = \"http://xml.juniper.net/junos/*/junos\";\nns xnm =
        \"http://xml.juniper.net/xnm/1.1/xnm\";\nns jcs = \"http://xml.juniper.net/junos/commit-scripts/1.0\";\nns
        ztp = \"http://xml.juniper.net/junos/ztp\";\n\n/* EXSLT */\nns exsl extension
        = \"http://exslt.org/common\";\nns func extension = \"http://exslt.org/functions\";\nns
        str extension = \"http://exslt.org/strings\";\n\n/* private namespace for
        this script */\nns jctyztp = \"http://xml.juniper.com/jctyztp/1.0\";\nns fmztp
        = \"http://xml.juniper.com/fmztp/1.0\";\n\n/* depending on Junos version relative
        path may be broken */\n/* import ''../import/junos.xsl''; */\nimport ''/usr/libdata/cscript/import/junos.xsl'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Script parameters                                                  */\n/*
        ------------------------------------------------------------------ */\n\nparam
        $server = ''ztpserver'';\nparam $mediapath = ''\u003c%= @mediapath %\u003e'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Constants                                                          */\n/*
        ------------------------------------------------------------------ */\n\nvar
        $APPNAME = ''foreman-ztp'';\nvar $SYSLOG = ''user.info'';\nvar $TMPDIR = ''/var/tmp'';\nvar
        $JUNOS_CONF = ''/var/tmp/junos.conf'';\n\nvar $ZTP_GROUP_NAME = \"fmztp\";\nvar
        $ZTP_MACRO_NAME = \"conf\";\nvar $ZTP_LOCKFILE = ''/tmp/fmztp.lock'';\n\n/*
        ------------------------------------------------------------------ */\n/*
        Global variables                                                   */\n/*
        ------------------------------------------------------------------ */\n\n/*
        Open a connection to the device API */\nvar $jnx = jcs:open();\n\n/* ------------------------------------------------------------------
        */\n/*                                MAIN                                */
        \n/* ------------------------------------------------------------------ */\n\nmatch
        / {\n\n  /* Terminate on connection error */\n  if(not( $jnx )) {\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable to connect to Junos API\");\n    expr
        fmztp:terminate();\n  }\n  \n  var $running = fmztp:only_once();\n  if( $running
        ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": start op script: already
        running, exiting...\" );\n    \u003cxsl:message terminate=\"yes\"\u003e;\n  }\n  \n  /*
        if the $JUNOS_CONF file is not on the device, then */\n  /* download it from
        the server */\n  if(not( fmztp:file-exists( $JUNOS_CONF ))) {\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": obtaining device config file\");\n    var $cp = fmztp:dl_junos_conf();\n  }\n  \n  /*
        now load $JUNOS_CONF into the candidate configuration so we can */\n  /* extract
        the ZTP config */\n  var $ztp_conf = fmztp:ld_junos_conf();\n  var $has_version
        = $ztp_conf/has_version;\n  var $new_package = $ztp_conf/package;\n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": preparing update from \", $has_version,
        \" to \", $new_package );\n  \n  /* if we have a version difference, then
        we will install the new OS */\n  /* and reboot the device.  the $JUNOS_CONF
        file will be loaded on */\n  /* after the install process completes */\n  if(
        $ztp_conf/install ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": Junos install
        required\" );\n    var $os = fmztp:install_os( $ztp_conf );\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": rebooting in 60 seconds\" );\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": SCRIPT-END\");\n    expr fmztp:reboot( 1 );\n    expr
        jcs:close( $jnx );\n  }\n  else {\n    expr jcs:syslog( $SYSLOG, $APPNAME,
        \": no Junos install required\" );\n    /* puppet agent is only supported
        on Junos 12.3R2.5 */\n    if( jcs:regex( \"12.3R2.5\", $ztp_conf/has_version
        )) {\n\texpr jcs:syslog( $SYSLOG, $APPNAME, \": puppet agent install required\"
        );\n\tvar $puppet = fmztp:install_puppet( $ztp_conf );\n    }\n    else {\n\texpr
        jcs:syslog( $SYSLOG, $APPNAME, \": os version is \", $has_version, \", but
        puppet agent is only available on 12.3R2.5\" );\n    }\n    var $fini = fmztp:finalize();\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": SCRIPT-END\");\n    expr jcs:close( $jnx
        );\n  }\n}\n\n/* ------------------------------------------------------------------
        */\n/* HTTP Junos configuration file onto the device                      */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:dl_junos_conf\"\u003e\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": downloading new Junos conf...\");\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": URL: \", ''\u003c%= foreman_url(''finish'') %\u003e'');\n\n  var $get
        = \u003cfile-copy\u003e {\n    \u003csource\u003e ''\u003c%= foreman_url(''finish'')
        %\u003e'';\n    \u003cdestination\u003e $JUNOS_CONF;\n    \u003cstaging-directory\u003e
        $TMPDIR;\n  };\n\n  var $got = jcs:execute( $jnx, $get );\n\n  if(not( fmztp:file-exists(
        $JUNOS_CONF ))) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \":ERROR: unable
        to find new Junos conf at \", $JUNOS_CONF);\n    expr fmztp:terminate();\n  }\n\n  \u003cfunc:result
        select=\"true()\"\u003e;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Load the $JUNOS_CONF file into the candidate config and extract    */\n/*
        the ZTP config from the [edit groups] area.  Do *NOT* commit       */\n/*
        this configuration yet, since we may need to install the OS first  */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:ld_junos_conf\"\u003e\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": loading new Junos conf...\");\n\n  /* get the current version from the
        configuration file */\n  \n  var $get_cur_ver = \u003cget-configuration database=''committed''\u003e
        { \u003cconfiguration\u003e { \u003cversion\u003e; }};\n  var $got_cur_ver
        = jcs:execute( $jnx, $get_cur_ver );\n\n  /* now load the configuration file
        we got from the ztp server */\n  var $do_load = \u003cload-configuration action=\"override\"
        url=$JUNOS_CONF format=\"text\"\u003e;\n  var $did_load = jcs:execute( $jnx,
        $do_load );\n  if(not( $did_load/load-success )) {\n    expr jcs:syslog( $SYSLOG,
        $APPNAME, \":ERROR: unable to load config \", $JUNOS_CONF );\n    expr fmztp:terminate();\n  }\n  \n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": extracting Junos config parameters...\");\n  var
        $get = \u003cget-configuration\u003e { \u003cconfiguration\u003e {\n    \u003cversion\u003e;\n    \u003cgroups\u003e
        { \u003cname\u003e $ZTP_GROUP_NAME;\n      \u003capply-macro\u003e { \u003cname\u003e
        $ZTP_MACRO_NAME;\n      }\n    }\n  }};\n  \n  var $got = jcs:execute( $jnx,
        $get );\n\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": package: \", $got//data[name
        = ''package'']/value);\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": URL: \",
        $mediapath);\n\n  /* create a node-set to store the following elements             */\n  /*
        has_version = current Junos version string                    */\n  /* package
        = filename of Junos package (*.tgz)                   */\n  /* mediapath =
        URL where package is obtained from                */\n  /* install = present
        if a install is requeired                   */\n  var $ver = $got_cur_ver/version;\n  var
        $package = $got//data[name = ''package'']/value;\n  var $puppet = $got//data[name
        = ''puppet'']/value;\n  var $conf := {\n    \u003chas_version\u003e $ver;
        \n    \u003cpackage\u003e $package;\n    \u003cpuppet\u003e $puppet;\n    \u003curl\u003e
        $mediapath;\n    if(not( jcs:regex( $ver, $package ))) {\n      \u003cinstall\u003e;\n    }\n  }\n\n  /*
        @@@ should put some trap here on ensuring that the config */\n  /* @@@ file
        actually had the correct group/macro defined */\n    \n  \u003cfunc:result
        select=\"$conf\"\u003e;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Junos Software Installation - download the software from the HTTP  */\n/*
        server and perform the ''request system software add'' operation     */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:install_os\"\u003e\n{\n  param $ztp_conf;\n\n  var $local_image
        = $TMPDIR _ \"/\" _ $ztp_conf/package;\n  \n  if( fmztp:file-exists( $local_image
        )) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": junos image exists, no download
        needed\" );\n  }\n  else {\n  \n    /* request system storage cleanup */\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": cleaning filesystem\" );\n    var $clean
        = jcs:execute( $jnx, ''request-system-storage-cleanup'' ); \n\n    /* file
        copy .... */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": downloading junos
        image...\" );    \n    expr jcs:syslog( $SYSLOG, $APPNAME, \": URL: \", $ztp_conf/url,
        $ztp_conf/package );\n    var $do_copy = \u003cfile-copy\u003e {\n      \u003csource\u003e
        $ztp_conf/url _ $ztp_conf/package;\n      \u003cdestination\u003e $TMPDIR;\n      \u003cstaging-directory\u003e
        $TMPDIR;\n    };\n    var $did_copy = jcs:execute( $jnx, $do_copy );\n    \n    /*
        trap error here */\n    if( not(fmztp:file-exists( $local_image )) ) {\n        expr
        jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: unable to download junos image\"
        );\n        expr fmztp:terminate();\n    }\n  }\n  \n  /* request system software
        add ... */\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": installing junos image\"
        );    \n  var $do_install = \u003crequest-package-add\u003e {\n    \u003cno-validate\u003e;\n    \u003cpackage-name\u003e
        $local_image;\n  };\n  var $did_install = jcs:execute( $jnx, $do_install );\n  /*
        @@@ need to trap error here on $did_install */\n  \n  expr jcs:syslog( $SYSLOG,
        $APPNAME, \": completed installing junos image\" );\n   \n  \u003cfunc:result
        select=\"true()\"\u003e;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Reboot the device given a delay, in minutes                        */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:reboot\"\u003e\n{\n  param $in_min;\n\n  var $do_reboot = \u003crequest-reboot\u003e
        { \u003cin\u003e $in_min; };\n  var $did_reboot = jcs:execute( $jnx, $do_reboot
        );\n  \u003cfunc:result select=\"true()\"\u003e;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Puppet Agent Installation - download the software from the HTTP    */\n/*
        server and perform the ''request system software add'' operation     */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:install_puppet\"\u003e\n{\n  param $ztp_conf;\n  expr jcs:syslog(
        $SYSLOG, $APPNAME, \": starting puppet installation...\" );\n\n  if (fmztp:is-installed(\"puppet\"))
        {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package puppet is already installed\"
        );\n    \u003cfunc:result select=\"true()\"\u003e;\n  }\n\n  var $local_image
        = $TMPDIR _ \"/\" _ $ztp_conf/puppet;\n  \n  if( fmztp:file-exists( $local_image
        )) {\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": package puppet exists, no
        download needed\" );\n  }\n  else {\n  \n    /* request system storage cleanup
        */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": cleaning filesystem\" );\n    var
        $clean = jcs:execute( $jnx, ''request-system-storage-cleanup'' ); \n\n    /*
        file copy .... */\n    expr jcs:syslog( $SYSLOG, $APPNAME, \": downloading
        puppet image...\" );    \n    expr jcs:syslog( $SYSLOG, $APPNAME, \": URL:
        \", $ztp_conf/url, $ztp_conf/puppet );    \n    var $do_copy = \u003cfile-copy\u003e
        {\n      \u003csource\u003e $ztp_conf/url _ $ztp_conf/puppet;\n      \u003cdestination\u003e
        $TMPDIR;\n      \u003cstaging-directory\u003e $TMPDIR;\n    };\n    var $did_copy
        = jcs:execute( $jnx, $do_copy );\n    \n    /* trap error on $did_copy */\n    if(
        not(fmztp:file-exists( $local_image )) ) {\n      expr jcs:syslog( $SYSLOG,
        $APPNAME, \": ERROR: failed to download puppet image\" );\n      expr fmztp:terminate();\n    }\n  }\n\n  /*
        request system software add ... */\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": installing puppet image\" );    \n  var $do_install = \u003crequest-package-add\u003e
        {\n    \u003cno-validate\u003e;\n    \u003cpackage-name\u003e $local_image;\n  };\n  var
        $did_install = jcs:execute( $jnx, $do_install );\n  \n  /* NOTE: To complete
        the puppet installation you need to take manual steps, see:\n   *       http://www.juniper.net/techpubs/en_US/release-independent/junos-puppet/information-products/pathway-pages/index.html\n   */\n\n  /*
        validate installation */\n  if (not(fmztp:is-installed(\"puppet\"))) {\n    expr
        jcs:syslog( $SYSLOG, $APPNAME, \": ERROR: failed to install package puppet\"
        );\n    expr fmztp:terminate();\n  }\n\n  expr jcs:syslog( $SYSLOG, $APPNAME,
        \": completed installing puppet image\" );\n   \n  \u003cfunc:result select=\"true()\"\u003e;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Finalize the ZTP process; i.e. after the OS is correct.  Remove    */\n/*
        the $JUNOS_CONF file and committing the configuration to make      */\n/*
        it active.                                                         */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:finalize\"\u003e\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        deleting temp config file...\");  \n  var $rm1 = fmztp:file-delete( $JUNOS_CONF
        );\n\n  expr jcs:syslog( $SYSLOG, $APPNAME, \": sending finish signal to foreman...\");  \n  var
        $do_foreman = \u003cfile-copy\u003e {\n      \u003csource\u003e ''\u003c%=
        foreman_url %\u003e'';\n      \u003cdestination\u003e \"/tmp\";\n      \u003cstaging-directory\u003e
        \"/tmp\";\n  };\n  var $did_foreman = jcs:execute( $jnx, $do_foreman );\n\n  expr
        jcs:syslog( $SYSLOG, $APPNAME, \": deleting ztp lock file...\");  \n  var
        $rm2 = fmztp:file-delete( $ZTP_LOCKFILE );\n\n  /* commit the configuration
        that was previously loaded */  \n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        committing configuration...\");  \n  var $commit = jcs:execute( $jnx, ''commit-configuration''
        );\n  if( $commit//self::xnm:error ) {\n    expr jcs:syslog( $SYSLOG, $APPNAME,
        \":ERROR: unable to commit configuration: \", $commit//self::xnm:error/message
        );\n    var $die = fmztp:terminate();\n  }\n\n  \u003cfunc:result select=\"true()\"\u003e;\n}\n\n/*
        ------------------------------------------------------------------ */\n/*
        Helper routine: check to see if a file exists on the device,       */\n/*
        returns [ true | false ]                                           */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:file-exists\"\u003e\n{\n  param $filename;\n  var $ls_file =
        \u003cfile-list\u003e { \u003cpath\u003e $filename; };\n  var $ls_got = jcs:execute(
        $jnx, $ls_file );\n  var $retval = boolean( $ls_got//file-information );\n\n  \u003cfunc:result
        select=\"$retval\"\u003e;\n}\n\n\u003cfunc:function name=\"fmztp:file-delete\"\u003e\n{\n  param
        $filename;\n  var $do_rm = \u003cfile-delete\u003e { \u003cpath\u003e $filename;
        };\n  var $did_rm = jcs:execute( $jnx, $do_rm );\n  /* @@@ trap error */\n  \n  \u003cfunc:result
        select=\"true()\"\u003e;\n}\n\n/* ------------------------------------------------------------------
        */\n/* Helper routine: create a lockfile to make sure the script only     */\n/*
        runs once, and terminate if it is already running.                 */\n/*
        returns [ true | false ]                                           */\n/*
        ------------------------------------------------------------------ */\n\n\u003cfunc:function
        name=\"fmztp:only_once\"\u003e\n{\n  if( fmztp:file-exists( $ZTP_LOCKFILE
        )) {\n    \u003cfunc:result select=\"true()\"\u003e;\n  }\n  else {\n    var
        $do_lock = \u003cfile-put\u003e {\n      \u003cfilename\u003e $ZTP_LOCKFILE;\n      \u003cencoding\u003e
        ''ascii'';\n      \u003cfile-contents\u003e ''locked'';\n    };\n    var $did_lock
        = jcs:execute( $jnx, $do_lock );\n    \u003cfunc:result select=\"false()\"\u003e;\n  }\n}\n\n\u003cfunc:function
        name=\"fmztp:terminate\"\u003e\n{\n  expr jcs:syslog( $SYSLOG, $APPNAME, \":
        SCRIPT-FAILED\" );\n  var $rm_lock = fmztp:file-delete( $ZTP_LOCKFILE );\n  \u003cxsl:message
        terminate=\"yes\"\u003e;\n}\n\n/* -------------------------------------------------
        */\n/* check if software package is installed            */\n/* -------------------------------------------------
        */\n\u003cfunc:function name=\"fmztp:is-installed\"\u003e\n{\n  param $string;\n\n  var
        $do_query = \u003cget-software-information\u003e;\n  var $did_query = jcs:execute(
        $jnx, $do_query );\n\n  if( jcs:regex( $string, $did_query )) {\n    expr
        jcs:output(\"package found: \", $string);\n    expr jcs:syslog( $SYSLOG, $APPNAME,
        \": package found: \", $string);\n    \u003cfunc:result select=\"true()\"\u003e;\n  }\n  else
        {\n    expr jcs:output(\"package NOT found: \", $string);\n    expr jcs:syslog(
        $SYSLOG, $APPNAME, \": package NOT found: \", $string);\n    \u003cfunc:result
        select=\"false()\"\u003e;\n  }\n}\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.391Z","updated_at":"2019-07-18T15:21:11.503Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"b0af49882985bb4243ce2c630088c6f9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f0cd9254-9bf2-4af3-bd6a-9c3a51d6a175]
      x-runtime: ['0.046735']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/25
  response:
    body: {string: !!python/unicode '{"id":25,"name":"Junos default ZTP config","template":"\u003c%#\nkind:
        ZTP\nname: Junos default ZTP config\nmodel: ProvisioningTemplate\noses:\n-
        Junos\n-%\u003e\nsystem {\n    host-name \u003c%= @host.shortname %\u003e;\n    root-authentication
        {\n      encrypted-password \"\u003c%= root_pass %\u003e\"; ## SECRET-DATA\n    }\n    services
        {\n        ssh;\n        netconf {\n            ssh;\n        }\n    }\n    syslog
        {\n        user * {\n            any emergency;\n            user info;\n        }\n        file
        messages {\n            any notice;\n            authorization info;\n        }\n        console
        {\n            user info;\n        }\n    }\n}\ninterfaces {\n    vme {\n        unit
        0 {\n            family inet {\n                dhcp;\n            }\n        }\n    }\n}\nevent-options
        {\n    generate-event {\n        fmztp time-interval 90;\n    }\n    policy
        fmztp {\n        events fmztp;\n        then {\n            execute-commands
        {\n                commands {\n                    \"op url \u003c%= foreman_url(''provision'')%\u003e.slax\";\n                }\n            }\n        }\n    }\n}\nprotocols
        {\n    igmp-snooping {\n        vlan all;\n    }\n    rstp;\n    lldp {\n        interface
        all;\n    }\n    lldp-med {\n        interface all;\n    }\n}\nethernet-switching-options
        {\n    storm-control {\n        interface all;\n    }\n}\n","snippet":false,"template_kind_id":9,"created_at":"2019-07-15T16:12:13.901Z","updated_at":"2019-07-18T15:21:11.563Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"966db607bf1ea8422d9a4289004b67ab"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [efd76e65-ed8d-420f-b781-5e6c9ba1c915]
      x-runtime: ['0.045929']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/47
  response:
    body: {string: !!python/unicode '{"id":47,"name":"Kickstart default","template":"\u003c%#\nkind:
        provision\nname: Kickstart default\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n- RedHat\n%\u003e\n\u003c%#\nThis template accepts the following
        parameters:\n- lang: string (default=\"en_US.UTF-8\")\n- selinux-mode: string
        (default=\"enforcing\")\n- keyboard: string (default=\"us\")\n- time-zone:
        string (default=\"UTC\")\n- http-proxy: string (default=\"\")\n- http-proxy-port:
        string (default=\"\")\n- force-puppet: boolean (default=false)\n- enable-epel:
        boolean (default=true)\n- enable-puppetlabs-repo: boolean (default=false)\n-
        enable-puppetlabs-pc1-repo: boolean (default=false)\n- enable-puppetlabs-puppet5-repo:
        boolean (default=false)\n- salt_master: string (default=undef)\n- ntp-server:
        string (default=\"0.fedora.pool.ntp.org\")\n- bootloader-append: string (default=\"nofb
        quiet splash=quiet\")\n- disable-firewall: boolean (default=false)\n- package_upgrade:
        boolean (default=true)\n- disable-uek: boolean (default=false)\n- use-ntp:
        boolean (default depends on OS release)\n- fips_enabled: boolean (default=false)\n%\u003e\n\u003c%\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' \u0026\u0026 @host.operatingsystem.name
        != ''Fedora''\n  is_fedora = @host.operatingsystem.name == ''Fedora''\n  os_major
        = @host.operatingsystem.major.to_i\n  os_minor = @host.operatingsystem.minor.to_i\n  realm_compatible
        = (@host.operatingsystem.name == ''Fedora'' \u0026\u0026 os_major \u003e=
        20) || (rhel_compatible \u0026\u0026 os_major \u003e= 7)\n  # safemode renderer
        does not support unary negation\n  pm_set = @host.puppetmaster.empty? ? false
        : true\n  proxy_uri = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  proxy_string = proxy_uri ? \" --proxy=#{proxy_uri}\" : ''''\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy) \u0026\u0026
        @host.chef_proxy\n  section_end = (rhel_compatible \u0026\u0026 os_major \u003c=
        5) ? '''' : ''%end''\n  use_ntp = host_param_true?(''use-ntp'') || (is_fedora
        \u0026\u0026 os_major \u003c 16) || (rhel_compatible \u0026\u0026 os_major
        \u003c= 7)\n%\u003e\n\u003c% if (is_fedora \u0026\u0026 os_major \u003c 29)
        || (rhel_compatible \u0026\u0026 os_major \u003c= 7) -%\u003e\ninstall\n\u003c%
        end -%\u003e\n\u003c%\nif host_param(''kickstart_liveimg'')\n  img_name =
        host_param(''kickstart_liveimg'')\n  liveimg_url = if host_param(''kt_activation_keys'')\n    repository_url(img_name,
        ''isos'')\n  else\n    if img_name.match(%r|^([\\w\\-\\+]+)://|)\n      img_name\n    else\n      \"#{@host.operatingsystem.medium_uri(@host)}/#{img_name}\"\n    end\n  end\n%\u003e\nliveimg
        --url=\u003c%= liveimg_url %\u003e \u003c%= proxy_string %\u003e\n\u003c%
        else %\u003e\n\u003c%= @mediapath %\u003e\u003c%= proxy_string %\u003e\n\u003c%
        @additional_media.each do |medium| -%\u003e\nrepo --name \u003c%= medium[:name]
        %\u003e --baseurl \u003c%= medium[:url] %\u003e \u003c%= medium[:install]
        ? '' --install'' : '''' %\u003e\u003c%= proxy_string %\u003e\n\u003c% end
        -%\u003e\n\u003c% end %\u003e\nlang \u003c%= host_param(''lang'') || ''en_US.UTF-8''
        %\u003e\nselinux --\u003c%= host_param(''selinux-mode'') || host_param(''selinux'')
        || ''enforcing'' %\u003e\nkeyboard \u003c%= host_param(''keyboard'') || ''us''
        %\u003e\nskipx\n\n\u003c% subnet = @host.subnet -%\u003e\n\u003c% if subnet.respond_to?(:dhcp_boot_mode?)
        -%\u003e\n\u003c% dhcp = subnet.dhcp_boot_mode? \u0026\u0026 !@static -%\u003e\n\u003c%
        else -%\u003e\n\u003c% dhcp = !@static -%\u003e\n\u003c% end -%\u003e\n\nnetwork
        --bootproto \u003c%= dhcp ? ''dhcp'' : \"static --ip=#{@host.ip} --netmask=#{subnet.mask}
        --gateway=#{subnet.gateway} --nameserver=#{[subnet.dns_primary, subnet.dns_secondary].select{
        |item| item.present? }.join('','')} --mtu=#{subnet.mtu.to_s}\" %\u003e --hostname
        \u003c%= @host %\u003e\u003c%= os_major \u003e= 6 ? \" --device=#{@host.mac}\"
        : '''' -%\u003e\n\nrootpw --iscrypted \u003c%= root_pass %\u003e\n\u003c%
        if host_param_true?(''disable-firewall'') -%\u003e\nfirewall --disable\n\u003c%
        else -%\u003e\nfirewall --\u003c%= os_major \u003e= 6 ? ''service='' : ''''
        %\u003essh\n\u003c% end -%\u003e\n\u003c% if (is_fedora \u0026\u0026 os_major
        \u003e= 28) || (rhel_compatible \u0026\u0026 os_major \u003e 7) -%\u003e\nauthselect
        --useshadow --passalgo=\u003c%= @host.operatingsystem.password_hash.downcase
        || ''sha256'' %\u003e --kickstart\n\u003c% else -%\u003e\nauthconfig --useshadow
        --passalgo=\u003c%= @host.operatingsystem.password_hash.downcase || ''sha256''
        %\u003e --kickstart\n\u003c% end -%\u003e\n\u003c% if use_ntp -%\u003e\ntimezone
        --utc \u003c%= host_param(''time-zone'') || ''UTC'' %\u003e\n\u003c% else
        -%\u003e\ntimezone --utc \u003c%= host_param(''time-zone'') || ''UTC'' %\u003e
        \u003c%= host_param(''ntp-server'') ? \"--ntpservers #{host_param(''ntp-server'')}\"
        : '''' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if rhel_compatible -%\u003e\nservices
        --disabled gpm,sendmail,cups,pcmcia,isdn,rawdevices,hpoj,bluetooth,openibd,avahi-daemon,avahi-dnsconfd,hidd,hplip,pcscd\n\u003c%
        end -%\u003e\n\n\u003c% if realm_compatible \u0026\u0026 host_enc[''parameters''][''realm'']
        \u0026\u0026 @host.realm \u0026\u0026 @host.realm.realm_type == ''Active Directory''
        -%\u003e\n# One-time password will be requested at install time. Otherwise,
        $HOST[OTP] is used as a placeholder value.\nrealm join --one-time-password=''\u003c%=
        @host.otp || \"$HOST[OTP]\" %\u003e'' \u003c%= @host.realm %\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if @host.operatingsystem.name == ''Fedora'' -%\u003e\nrepo
        --name=fedora-everything --mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-\u003c%=
        @host.operatingsystem.major %\u003e\u0026arch=\u003c%= @host.architecture
        %\u003e\u003c%= proxy_string %\u003e\n\u003c% end -%\u003e\n\n\u003c% if @host.operatingsystem.name
        == ''OracleLinux'' \u0026\u0026 os_major == 7 \u0026\u0026 os_minor \u003c
        5 -%\u003e\nrepo --name=\"Server-Mysql\"\n\u003c% end -%\u003e\n\n\u003c%
        if @host.operatingsystem.name == ''Fedora'' \u0026\u0026 os_major \u003c=
        16 -%\u003e\n# Bootloader exception for Fedora 16:\nbootloader --append=\"\u003c%=
        host_param(''bootloader-append'') || ''nofb quiet splash=quiet'' %\u003e \u003c%=
        ks_console %\u003e\" \u003c%= @grub_pass %\u003e\npart biosboot --fstype=biosboot
        --size=1\n\u003c% else -%\u003e\nbootloader --location=mbr --append=\"\u003c%=
        host_param(''bootloader-append'') || ''nofb quiet splash=quiet'' %\u003e\"
        \u003c%= @grub_pass %\u003e\n\u003c% if os_major == 5 -%\u003e\nkey --skip\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\n\n\u003c% if @dynamic -%\u003e\n%include
        /tmp/diskpart.cfg\n\u003c% else -%\u003e\n\u003c%= @host.diskLayout %\u003e\n\u003c%
        end -%\u003e\n\ntext\n\u003c% if @host.respond_to?(:bootdisk_build?) \u0026\u0026
        @host.bootdisk_build? %\u003e\nreboot --eject\n\u003c% else -%\u003e\nreboot\n\u003c%
        end -%\u003e\n\n%packages\n\u003c%= snippet_if_exists(template_name + \" custom
        packages\") %\u003e\nyum\ndhclient\n\u003c% if use_ntp -%\u003e\nntp\n\u003c%
        else -%\u003e\nchrony\n\u003c% end -%\u003e\nwget\n@Core\n\u003c% if os_major
        \u003e= 6 -%\u003e\nredhat-lsb-core\n\u003c% end -%\u003e\n\u003c% if host_param_true?(''fips_enabled'')
        -%\u003e\n\u003c%=   snippet ''fips_packages'' %\u003e\n\u003c% end -%\u003e\n\n\n\u003c%
        if salt_enabled %\u003e\nsalt-minion\n\u003c% end -%\u003e\n\u003c%= section_end
        -%\u003e\n\n\u003c% if @dynamic -%\u003e\n%pre\n\u003c%= snippet_if_exists(template_name
        + \" custom pre\") %\u003e\n\u003c%= @host.diskLayout %\u003e\n\u003c%= section_end
        -%\u003e\n\u003c% end -%\u003e\n\n%post --nochroot\nexec \u003c /dev/tty3
        \u003e /dev/tty3\n#changing to VT 3 so that we can see whats going on....\n/usr/bin/chvt
        3\n(\ncp -va /etc/resolv.conf /mnt/sysimage/etc/resolv.conf\n/usr/bin/chvt
        1\n) 2\u003e\u00261 | tee /mnt/sysimage/root/install.postnochroot.log\n\u003c%=
        section_end -%\u003e\n\n\u003c%#\nMain post script, if it fails the last post
        is still executed.\n%\u003e\n%post --log=/mnt/sysimage/root/install.post.log\nlogger
        \"Starting anaconda \u003c%= @host %\u003e postinstall\"\nexec \u003c /dev/tty3
        \u003e /dev/tty3\n#changing to VT 3 so that we can see whats going on....\n/usr/bin/chvt
        3\n\u003c%= snippet_if_exists(template_name + \" custom post\") %\u003e\n\u003c%
        if subnet.respond_to?(:dhcp_boot_mode?) || @host.subnet6.respond_to?(:dhcp_boot_mode?)
        -%\u003e\n\u003c%= snippet ''kickstart_networking_setup'' %\u003e\n\u003c%
        end -%\u003e\n\necho \"Updating system time\"\n\u003c% if use_ntp -%\u003e\n/usr/sbin/ntpdate
        -sub \u003c%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %\u003e\n\u003c%
        else -%\u003e\n/usr/bin/chronyc makestep\n\u003c% end -%\u003e\n/usr/sbin/hwclock
        --systohc\n\n\u003c% if proxy_uri -%\u003e\n# Yum proxy\necho ''proxy = \u003c%=
        proxy_uri %\u003e'' \u003e\u003e /etc/yum.conf\n\u003c% end -%\u003e\n\n\u003c%
        if rhel_compatible \u0026\u0026 !host_param_false?(''enable-epel'') -%\u003e\n\u003c%=
        snippet ''epel'' -%\u003e\n\u003c% end -%\u003e\n\n\u003c%= snippet ''redhat_register''
        %\u003e\n\n\u003c% if host_enc[''parameters''][''realm''] \u0026\u0026 @host.realm
        \u0026\u0026 (@host.realm.realm_type == ''FreeIPA'' || @host.realm.realm_type
        == ''Red Hat Identity Management'') -%\u003e\n\u003c%= snippet ''freeipa_register''
        %\u003e\n\u003c% end -%\u003e\n\n\u003c% unless host_param_false?(''package_upgrade'')
        -%\u003e\n# update all the base packages from the updates repository\nif [
        -f /usr/bin/dnf ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n\u003c%
        end -%\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'') %\u003e\n\n\u003c%=
        snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c% if chef_enabled %\u003e\n\u003c%=
        snippet ''chef_client'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if puppet_enabled
        %\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppetlabs-repo'')
        || host_param_true?(''enable-puppetlabs-puppet5-repo'') -%\u003e\n\u003c%=
        snippet ''puppetlabs_repo'' %\u003e\n\u003c% end -%\u003e\n\u003c%= snippet
        ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c%
        if @host.operatingsystem.name == ''OracleLinux'' \u0026\u0026 host_param_true?(''disable-uek'')
        -%\u003e\n# Uninstall the Oracle Unbreakable Kernel packages\nyum -t -y remove
        kernel-uek*\nsed -e ''s/DEFAULTKERNEL=kernel-uek/DEFAULTKERNEL=kernel/g''
        -i /etc/sysconfig/kernel\n\u003c% end -%\u003e\n\n\u003c%= snippet(''ansible_provisioning_callback'')
        %\u003e\n\n\u003c%= snippet ''efibootmgr_netboot'' %\u003e\n\ntouch /tmp/foreman_built\n\u003c%=
        section_end -%\u003e\n\n\u003c%#\nThe last post section halts Anaconda to
        prevent endless loop\n%\u003e\n\u003c% if (is_fedora \u0026\u0026 os_major
        \u003c 20) || (rhel_compatible \u0026\u0026 os_major \u003c 7) -%\u003e\n%post\n\u003c%
        else -%\u003e\n%post --erroronfail\n\u003c% end -%\u003e\nif test -f /tmp/foreman_built;
        then\n  echo \"calling home: build is done!\"\n  \u003c%= indent(2, skip1:
        true) { snippet(''built'', :variables =\u003e { :endpoint =\u003e ''built'',
        :method =\u003e ''POST'', :body_file =\u003e ''/mnt/sysimage/root/install.post.log''
        }) } -%\u003e\nelse\n  echo \"calling home: build failed!\"\n  \u003c%= indent(2,
        skip1: true) { snippet(''built'', :variables =\u003e { :endpoint =\u003e ''failed'',
        :method =\u003e ''POST'', :body_file =\u003e ''/mnt/sysimage/root/install.post.log''
        }) } -%\u003e\nfi\n\nsync\n\u003c%= section_end -%\u003e\n\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.414Z","updated_at":"2019-07-18T15:21:11.623Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"2feb3ab6a5f299b9a1c8f3e337044701"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [6768ca56-f5ca-4727-9df5-760acc821f92]
      x-runtime: ['0.039174']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/30
  response:
    body: {string: !!python/unicode '{"id":30,"name":"Kickstart default finish","template":"\u003c%#\nkind:
        finish\nname: Kickstart default finish\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n%\u003e\n  \u003c%#\n  This template accepts the following
        parameters:\n  - bootloader-append: string (default=\"nofb quiet splash=quiet\")\n  -
        force-puppet: boolean (default=false)\n  - ntp-server: string (default=\"0.fedora.pool.ntp.org\")\n  -
        package_upgrade: boolean (default=true)\n  - salt_master: string (default=undef)\n  %\u003e\n\u003c%
        if @host.subnet.respond_to?(:dhcp_boot_mode?) -%\u003e\n\u003c%= snippet ''kickstart_networking_setup''
        %\u003e\nservice network restart\n\u003c% end -%\u003e\n\n\u003c%\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' \u0026\u0026 @host.operatingsystem.name
        != ''Fedora''\n  pm_set = @host.puppetmaster.empty? ? false : true\n  proxy_uri
        = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        \u0026\u0026 @host.chef_proxy\n%\u003e\n\n\u003c% if @host.provision_method
        == ''image'' \u0026\u0026 root_pass.present? -%\u003e\n# Install the root
        password\necho ''root:\u003c%= root_pass -%\u003e'' | /usr/sbin/chpasswd -e\n\u003c%
        end -%\u003e\n\n\u003c% if proxy_uri -%\u003e\n# Yum proxy\necho ''proxy =
        \u003c%= proxy_uri %\u003e'' \u003e\u003e /etc/yum.conf\n\u003c% end -%\u003e\n\n#update
        local time\necho \"updating system time\"\nyum -y install ntpdate\n/usr/sbin/ntpdate
        -sub \u003c%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %\u003e\n/usr/sbin/hwclock
        --systohc\n\n\u003c% if rhel_compatible \u0026\u0026 !host_param_false?(''enable-epel'')
        -%\u003e\n\u003c%= snippet ''epel'' -%\u003e\n\u003c% end -%\u003e\n\n\u003c%=
        snippet ''redhat_register'' %\u003e\n\n\u003c% if host_enc[''parameters''][''realm'']
        \u0026\u0026 @host.realm \u0026\u0026 (@host.realm.realm_type == ''FreeIPA''
        || @host.realm.realm_type == ''Red Hat Identity Management'') -%\u003e\n\u003c%=
        snippet ''freeipa_register'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% unless
        host_param_false?(''package_upgrade'') -%\u003e\n# update all the base packages
        from the updates repository\nif [ -f /usr/bin/dnf ]; then\n  dnf -y update\nelse\n  yum
        -t -y update\nfi\n\u003c% end -%\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'')
        %\u003e\n\n\u003c%= snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c%
        if chef_enabled %\u003e\n\u003c%= snippet ''chef_client'' %\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if puppet_enabled %\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%\u003e\n\u003c%= snippet ''puppetlabs_repo'' %\u003e\n\u003c% end -%\u003e\n\u003c%=
        snippet ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c%
        if host_param_true?(''ansible_tower_provisioning'') -%\u003e\n\u003c%= save_to_file(''/root/ansible_provisioning_call.sh'',
        snippet(''ansible_tower_callback_script'')) %\u003e\n/root/ansible_provisioning_call.sh\n\u003c%
        end -%\u003e\n\nsync\n\nexit 0\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:14.028Z","updated_at":"2019-07-18T15:21:11.689Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"5b4d2dfbf949f0c5b654df8f3a97ca97"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [cda04566-7181-4b17-8e60-836f6013a138]
      x-runtime: ['0.037873']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/37
  response:
    body: {string: !!python/unicode '{"id":37,"name":"Kickstart default iPXE","template":"#!gpxe\n\u003c%#\nkind:
        iPXE\nname: Kickstart default iPXE\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n- RedHat\n%\u003e\n\u003c% subnet = @host.subnet -%\u003e\n\u003c%
        if subnet.respond_to?(:dhcp_boot_mode?) \u0026\u0026 subnet.dhcp_boot_mode?
        -%\u003e\n  \u003c% static = '''' -%\u003e\n\u003c% else -%\u003e\n  \u003c%
        static_arg = ''static=yes'' -%\u003e\n  \u003c% static = (@host.token.nil?
        ? ''?'' : ''\u0026'') + static_arg -%\u003e\n\u003c% end -%\u003e\n\n\u003c%
        stage2 = host_param(''kickstart_liveimg'') ? ''inst.stage2='' + @host.operatingsystem.medium_uri(@host).to_s
        : '''' %\u003e\n\n\u003c%- if @host.operatingsystem.name != ''Fedora'' \u0026\u0026
        @host.operatingsystem.major.to_i \u003e= 7 \u0026\u0026 host_param_true?(''fips_enabled'')
        %\u003e\n\u003c%-   fips = ''fips=1'' -%\u003e\n\u003c%- else -%\u003e\n\u003c%-   fips
        = '''' -%\u003e\n\u003c%- end -%\u003e\n\nkernel \u003c%= \"#{@host.url_for_boot(:kernel)}\"
        %\u003e initrd=initrd.img ks=\u003c%= foreman_url(''provision'')%\u003e inst.stage2=\u003c%=
        @host.operatingsystem.medium_uri(@host) %\u003e \u003c%= stage2 %\u003e \u003c%=
        static %\u003e ksdevice=\u003c%= @host.mac %\u003e network kssendmac ks.sendmac
        inst.ks.sendmac ip=${netX/ip} netmask=${netX/netmask} gateway=${netX/gateway}
        dns=${dns} \u003c%= fips %\u003e\ninitrd \u003c%= \"#{@host.url_for_boot(:initrd)}\"
        %\u003e\nimgstat\nsleep 2\nboot\n","snippet":false,"template_kind_id":4,"created_at":"2019-07-15T16:12:14.191Z","updated_at":"2019-07-18T15:21:11.753Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:21 GMT']
      etag: [W/"eac45c08116c0745a1168ee3ce0d5d1b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f399a205-4407-4289-b1c9-97638d32d04c]
      x-runtime: ['0.037555']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/3
  response:
    body: {string: !!python/unicode '{"id":3,"name":"Kickstart default PXEGrub","template":"\u003c%#\nkind:
        PXEGrub\nname: Kickstart default PXEGrub\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n- RedHat\n-%\u003e\n# This file was deployed via ''\u003c%=
        template_name %\u003e'' template\n\n\u003c%\n  major = @host.operatingsystem.major.to_i\n  mac
        = @host.provision_interface.mac\n\n  # Tell Anaconda to perform network functions
        with boot interface\n  #  both current and legacy syntax provided\n  options
        = [\"network\", \"ksdevice=bootif\", \"ks.device=bootif\"]\n  if mac\n    bootif
        = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) \u0026\u0026 major \u003c 17)
        || major \u003c 7\n      # old Anaconda found in Fedora 16 or RHEL 6 and older\n      dns_servers
        = dns.join('','')\n      options.push(\"ip=#{ip}\", \"netmask=#{mask}\", \"gateway=#{gw}\",
        \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' \u0026\u0026 @host.operatingsystem.major.to_i \u003e= 7 \u0026\u0026
        host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  ksoptions
        = options.join('' '')\n-%\u003e\n\ndefault=0\ntimeout=\u003c%= host_param(''loader_timeout'')
        || 10 %\u003e\n\ntitle \u003c%= template_name %\u003e\n  root (nd)\n  kernel
        (nd)/../\u003c%= @kernel %\u003e ks=\u003c%= foreman_url(''provision'') %\u003e
        \u003c%= pxe_kernel_options %\u003e \u003c%= ksoptions %\u003e\n  initrd (nd)/../\u003c%=
        @initrd %\u003e\n\n\u003c%= snippet_if_exists(template_name + \" custom menu\")
        %\u003e\n","snippet":false,"template_kind_id":2,"created_at":"2019-07-15T16:12:13.392Z","updated_at":"2019-07-18T15:21:11.865Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"984abb27adcdb0b4e0ec752849d0212b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [3bb29635-3a2a-43fa-b094-66154c5c30b2]
      x-runtime: ['0.042156']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/6
  response:
    body: {string: !!python/unicode '{"id":6,"name":"Kickstart default PXEGrub2","template":"\u003c%#\nkind:
        PXEGrub2\nname: Kickstart default PXEGrub2\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n- RedHat\n-%\u003e\n# This file was deployed via ''\u003c%=
        template_name %\u003e'' template\n\n\u003c%\n  major = @host.operatingsystem.major.to_i\n  mac
        = @host.provision_interface.mac\n\n  # Tell Anaconda to perform network functions
        with boot interface\n  #  both current and legacy syntax provided\n  options
        = [\"network\", \"ksdevice=bootif\", \"ks.device=bootif\"]\n  if mac\n    bootif
        = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) \u0026\u0026 major \u003c 17)
        || major \u003c 7\n      # old Anacoda found in Fedora 16 or RHEL 6 and older\n      dns_servers
        = dns.join('','')\n      options.push(\"ip=#{ip}\", \"netmask=#{mask}\", \"gateway=#{gw}\",
        \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' \u0026\u0026 @host.operatingsystem.major.to_i \u003e= 7 \u0026\u0026
        host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  #
        send PXELinux \"IPAPPEND 2\" option along\n  options.push(\"BOOTIF=01-$net_default_mac\")\n\n  ksoptions
        = options.join('' '')\n\n  # Grub EFI commands are RHEL7+ only (prevents \"Kernel
        is too old\") or for non-EFI arch\n  if (@host.operatingsystem.family == ''Redhat''
        \u0026\u0026 major \u003c 7) || !@host.pxe_loader.include?(''EFI'')\n    linuxcmd
        = \"linux\"\n    initrdcmd = \"initrd\"\n  else\n    linuxcmd = \"linuxefi\"\n    initrdcmd
        = \"initrdefi\"\n  end\n-%\u003e\n\nset default=0\nset timeout=\u003c%= host_param(''loader_timeout'')
        || 10 %\u003e\n\nmenuentry ''\u003c%= template_name %\u003e'' {\n  \u003c%=
        linuxcmd %\u003e \u003c%= @kernel %\u003e ks=\u003c%= foreman_url(''provision'')
        %\u003e \u003c%= pxe_kernel_options %\u003e \u003c%= ksoptions %\u003e\n  \u003c%=
        initrdcmd %\u003e \u003c%= @initrd %\u003e\n}\n\n\u003c%= snippet_if_exists(template_name
        + \" custom menu\") %\u003e\n","snippet":false,"template_kind_id":3,"created_at":"2019-07-15T16:12:13.457Z","updated_at":"2019-07-18T15:21:11.932Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"92fd8734274fa3266014b19aa640b1e3"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2c008675-f072-47d9-a91a-f24824719e4a]
      x-runtime: ['0.038054']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/14
  response:
    body: {string: !!python/unicode '{"id":14,"name":"Kickstart default PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: Kickstart default PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n- RedHat\n-%\u003e\n# This file was deployed via ''\u003c%=
        template_name %\u003e'' template\n\n\u003c%\n  major = @host.operatingsystem.major.to_i\n  mac
        = @host.provision_interface.mac\n\n  # Tell Anaconda to perform network functions
        with boot interface\n  #  both current and legacy syntax provided\n  options
        = [\"network\", \"ksdevice=bootif\", \"ks.device=bootif\"]\n  if mac\n    bootif
        = ''00-'' + mac.gsub('':'', ''-'')\n    options.push(\"BOOTIF=#{bootif}\")\n  end\n\n  #
        Tell Anaconda what to pass off to kickstart server\n  #  both current and
        legacy syntax provided\n  options.push(\"kssendmac\", \"ks.sendmac\", \"inst.ks.sendmac\")\n\n  #
        handle non-DHCP environments (e.g. bootdisk)\n  subnet = @host.provision_interface.subnet\n  unless
        subnet.dhcp_boot_mode?\n    # static network configuration\n    ip = @host.provision_interface.ip\n    mask
        = subnet.mask\n    gw = subnet.gateway\n    dns = [subnet.dns_primary]\n    if
        subnet.dns_secondary != ''''\n      dns.push(subnet.dns_secondary)\n    end\n    if
        (@host.operatingsystem.name.match(/Fedora/i) \u0026\u0026 major \u003c 17)
        || major \u003c 7\n      # old Anacoda found in Fedora 16 or RHEL 6 and older\n      dns_servers
        = dns.join('','')\n      options.push(\"ip=#{ip}\", \"netmask=#{mask}\", \"gateway=#{gw}\",
        \"dns=#{dns_servers}\")\n    else\n      options.push(\"ip=#{ip}::#{gw}:#{mask}:::none\")\n      dns.each
        { |server|\n        options.push(\"nameserver=#{server}\")\n      }\n    end\n  end\n\n  #
        optional repository for Atomic\n  if @host.operatingsystem.name.match(/Atomic/i)\n    options.push(\"inst.repo=#{medium_uri}\")\n  end\n\n  if
        @host.operatingsystem.name.match(/Atomic/i) || host_param(''kickstart_liveimg'')\n    options.push(''inst.stage2=''
        + @host.operatingsystem.medium_uri(@host).to_s)\n  end\n\n  if @host.operatingsystem.name
        != ''Fedora'' \u0026\u0026 @host.operatingsystem.major.to_i \u003e= 7 \u0026\u0026
        host_param_true?(''fips_enabled'')\n    options.push(''fips=1'')\n  end\n\n  ksoptions
        = options.join('' '')\n  timeout = host_param(''loader_timeout'').to_i * 10\n  timeout
        = 100 if timeout.nil? || timeout \u003c= 0\n-%\u003e\n\nDEFAULT menu\nMENU
        TITLE Booting into OS installer (ESC to stop)\nTIMEOUT \u003c%= timeout %\u003e\nONTIMEOUT
        installer\n\nLABEL installer\n  MENU LABEL \u003c%= template_name %\u003e\n  KERNEL
        \u003c%= @kernel %\u003e\n  APPEND initrd=\u003c%= @initrd %\u003e ks=\u003c%=
        foreman_url(''provision'') %\u003e \u003c%= pxe_kernel_options %\u003e \u003c%=
        ksoptions %\u003e\n  IPAPPEND 2\n\n\u003c%= snippet_if_exists(template_name
        + \" custom menu\") %\u003e\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.639Z","updated_at":"2019-07-18T15:21:12.021Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"2dafc77521fea353d3b9bfa60359aef9"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b5d28966-43d5-4cc7-95b1-7d4080ee3ce1]
      x-runtime: ['0.038886']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/92
  response:
    body: {string: !!python/unicode '{"id":92,"name":"Kickstart default user data","template":"\u003c%#\nkind:
        user_data\nname: Kickstart default user data\nmodel: ProvisioningTemplate\noses:\n-
        CentOS\n- Fedora\n-%\u003e\n\u003c%\n  rhel_compatible = @host.operatingsystem.family
        == ''Redhat'' \u0026\u0026 @host.operatingsystem.name != ''Fedora''\n  # safemode
        renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  proxy_uri = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        \u0026\u0026 @host.chef_proxy\n-%\u003e\n#!/bin/bash\n\n\u003c%# Cloud instances
        frequently have incorrect hosts data %\u003e\n\u003c%= snippet ''fix_hosts''
        %\u003e\n\n\u003c% if @host.provision_method == ''image'' \u0026\u0026 !root_pass.empty?
        -%\u003e\n# Install the root password\necho ''root:\u003c%= root_pass -%\u003e''
        | /usr/sbin/chpasswd -e\n\u003c% end -%\u003e\n\n\u003c% if proxy_uri -%\u003e\n#
        Yum proxy\necho ''proxy = \u003c%= proxy_uri %\u003e'' \u003e\u003e /etc/yum.conf\n\u003c%
        end -%\u003e\n\n#update local time\necho \"updating system time\"\nyum -y
        install ntpdate\n/usr/sbin/ntpdate -sub \u003c%= host_param(''ntp-server'')
        || ''0.fedora.pool.ntp.org'' %\u003e\n/usr/sbin/hwclock --systohc\n\n\u003c%
        if rhel_compatible \u0026\u0026 !host_param_false?(''enable-epel'') -%\u003e\n\u003c%=
        snippet ''epel'' -%\u003e\n\u003c% end -%\u003e\n\n\u003c%= snippet ''redhat_register''
        %\u003e\n\n\u003c% if host_enc[''parameters''][''realm''] \u0026\u0026 @host.realm
        \u0026\u0026 (@host.realm.realm_type == ''FreeIPA'' || @host.realm.realm_type
        == ''Red Hat Identity Management'') -%\u003e\n\u003c%= snippet ''freeipa_register''
        %\u003e\n\u003c% end -%\u003e\n\n\u003c% unless host_param_false?(''package_upgrade'')
        -%\u003e\n# update all the base packages from the updates repository\nif [
        -f /usr/bin/dnf ]; then\n  dnf -y update\nelse\n  yum -t -y update\nfi\n\u003c%
        end -%\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'') %\u003e\n\n\u003c%=
        snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c% if chef_enabled %\u003e\n\u003c%=
        snippet ''chef_client'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if puppet_enabled
        %\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppetlabs-repo'')
        || host_param_true?(''enable-puppetlabs-puppet5-repo'') -%\u003e\n\u003c%=
        snippet ''puppetlabs_repo'' %\u003e\n\u003c% end -%\u003e\n\u003c%= snippet
        ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\n#
        UserData still needs to mark the build as finished\n\u003c%= snippet ''built''
        %\u003e\n","snippet":false,"template_kind_id":8,"created_at":"2019-07-15T16:12:15.461Z","updated_at":"2019-07-18T15:21:12.086Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"600006c6bd9fc0673be6288df9dad067"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [86052556-5ad3-44cd-9795-40554857c1e6]
      x-runtime: ['0.038388']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/71
  response:
    body: {string: !!python/unicode '{"id":71,"name":"kickstart_ifcfg_bonded_interface","template":"\u003c%#\nname:
        kickstart_ifcfg_bonded_interface\nmodel: ProvisioningTemplate\nsnippet: true\nmodel:
        ProvisioningTemplate\nkind: snippet\n-%\u003e\n\u003c%= snippet(''kickstart_ifcfg_generic_interface'',
        :variables =\u003e {\n                  :interface =\u003e @interface,\n                  :subnet
        =\u003e @subnet,\n                  :subnet6 =\u003e @subnet6,\n                  :dhcp
        =\u003e @dhcp }) -%\u003e\nNM_CONTROLLED=no\nMASTER=\u003c%= @bond_identifier
        %\u003e\nSLAVE=yes\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.976Z","updated_at":"2019-07-18T15:21:12.153Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"77d462363f348866e7871465cff74ec5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b147bafb-b3c8-4c8a-81e7-7f5b355f1318]
      x-runtime: ['0.038047']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/70
  response:
    body: {string: !!python/unicode '{"id":70,"name":"kickstart_ifcfg_bond_interface","template":"\u003c%#\nname:
        kickstart_ifcfg_bond_interface\nmodel: ProvisioningTemplate\nsnippet: true\nmodel:
        ProvisioningTemplate\nkind: snippet\n-%\u003e\n\u003c%= snippet(''kickstart_ifcfg_generic_interface'',
        :variables =\u003e {\n                  :interface =\u003e @interface,\n                  :subnet
        =\u003e @subnet,\n                  :subnet6 =\u003e @subnet6,\n                  :dhcp
        =\u003e @dhcp }) -%\u003e\nTYPE=Bond\nBONDING_OPTS=\"\u003c%= @interface.bond_options
        -%\u003e mode=\u003c%= @interface.mode -%\u003e\"\nBONDING_MASTER=yes\nNM_CONTROLLED=no\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.953Z","updated_at":"2019-07-18T15:21:12.221Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"b17ef1bd11df783fda92dd831eb089ce"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2d83984b-37b8-4356-a1c8-b5a153e52216]
      x-runtime: ['0.039397']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/72
  response:
    body: {string: !!python/unicode '{"id":72,"name":"kickstart_ifcfg_generic_interface","template":"\u003c%#\nname:
        kickstart_ifcfg_generic_interface\nmodel: ProvisioningTemplate\nsnippet: true\nmodel:
        ProvisioningTemplate\nkind: snippet\n-%\u003e\nBOOTPROTO=\"\u003c%= @dhcp
        ? ''dhcp'' : ''none'' -%\u003e\"\n\u003c%- unless @dhcp || @subnet.nil? -%\u003e\n\u003c%-   if
        @interface.ip.present? -%\u003e\n\u003c%=     \"IPADDR=\\\"#{@interface.ip}\\\"\"
        %\u003e\n\u003c%=     \"NETMASK=\\\"#{@subnet.mask}\\\"\" %\u003e\n\u003c%-     if
        @subnet.gateway.present? -%\u003e\n\u003c%=       \"GATEWAY=\\\"#{@subnet.gateway}\\\"\"
        %\u003e\n\u003c%-     end -%\u003e\n\u003c%-   end -%\u003e\n\u003c%- end
        -%\u003e\n\u003c%- if @interface.ip6.present? -%\u003e\n\u003c%=   \"IPV6INIT=yes\"
        %\u003e\n\u003c%=   \"IPV6_AUTOCONF=no\" %\u003e\n\u003c%=   \"IPV6ADDR=#{@interface.ip6}\"
        %\u003e\n\u003c%-   if !@subnet6.nil? \u0026\u0026 @subnet6.gateway.present?
        -%\u003e\n\u003c%=     \"IPV6_DEFAULTGW=#{@subnet6.gateway}\" %\u003e\u003c%=
        ''%$real'' if @subnet6.gateway.match(/^fe80:/) %\u003e\n\u003c%-   end -%\u003e\n\u003c%=   \"IPV6_PEERDNS=no\"
        %\u003e\n\u003c%- end -%\u003e\n\u003c%- if @interface.domain -%\u003e\nDOMAIN=\"\u003c%=
        @interface.domain %\u003e\"\n\u003c%- end -%\u003e\nDEVICE=$real\n\u003c%-
        unless @interface.virtual? -%\u003e\n\u003c%=   \"HWADDR=\\\"#{@interface.mac}\\\"\"
        %\u003e\n\u003c%- end -%\u003e\nONBOOT=yes\n\u003c%- primary = @interface.primary
        ? ''yes'' : ''no'' -%\u003e\nPEERDNS=\u003c%= primary %\u003e\nPEERROUTES=\u003c%=
        primary %\u003e\nDEFROUTE=\u003c%= primary %\u003e\n\u003c%- if @interface.primary
        -%\u003e\n\u003c%-   if !@dhcp \u0026\u0026 @subnet \u0026\u0026 @subnet.dns_primary.present?
        -%\u003e\n\u003c%=     \"DNS1=\\\"#{@subnet.dns_primary}\\\"\" %\u003e\n\u003c%-     if
        @subnet.dns_secondary.present? -%\u003e\n\u003c%=       \"DNS2=\\\"#{@subnet.dns_secondary}\\\"\"
        %\u003e\n\u003c%-     end -%\u003e\n\u003c%-   end -%\u003e\n\u003c%- end
        -%\u003e\n\u003c%- if @interface.virtual? \u0026\u0026 (!@subnet.nil? \u0026\u0026
        (@subnet.has_vlanid? || @interface.vlanid.present?)) -%\u003e\n\u003c%=   \"VLAN=yes\"
        %\u003e\n\u003c%-   if @attached_to_bond -%\u003e\n\u003c%=     \"NM_CONTROLLED=no\"
        %\u003e\n\u003c%-   end -%\u003e\n\u003c%-   if @interface.identifier.match(/^vlan\\d+/)
        -%\u003e\n\u003c%=     \"VLAN_NAME_TYPE=VLAN_PLUS_VID_NO_PAD\" %\u003e\n\u003c%=     \"PHYSDEV=#{@interface.attached_to}\"
        %\u003e\n\u003c%-     if @bonding_interfaces.include?(@interface.attached_to)
        -%\u003e\n\u003c%=       \"TYPE=bonding\" %\u003e\n\u003c%-     end -%\u003e\n\u003c%-   end
        -%\u003e\n\u003c%- elsif @interface.virtual? \u0026\u0026 !@subnet.nil? \u0026\u0026
        !@subnet.has_vlanid? \u0026\u0026 @interface.identifier.include?('':'') -%\u003e\n\u003c%=   \"TYPE=Alias\"
        %\u003e\n\u003c%- end -%\u003e\n\u003c%- if @subnet -%\u003e\n\u003c%=   \"MTU=#{@subnet.mtu}\"
        %\u003e\n\u003c%- elsif @subnet6 -%\u003e\n\u003c%=   \"MTU=#{@subnet6.mtu}\"
        %\u003e\n\u003c%- end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:14.998Z","updated_at":"2019-07-18T15:21:12.298Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"4ff89ce29f9fb0967f79023d0fdcecba"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [fda5818d-c35a-4149-b96d-c4d3b4ca123e]
      x-runtime: ['0.037561']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/73
  response:
    body: {string: !!python/unicode '{"id":73,"name":"kickstart_ifcfg_get_identifier_names","template":"\u003c%#\nname:
        kickstart_ifcfg_get_identifier_names\nmodel: ProvisioningTemplate\nsnippet:
        true\nmodel: ProvisioningTemplate\nkind: snippet\n-%\u003e\n\u003c%- if @identifier
        -%\u003e\n\u003c%=   \"real=\\\"#{@identifier}\\\"\" %\u003e\n\u003c%- else
        -%\u003e\n\u003c%=   \"real=`grep -l #{@interface.inheriting_mac} /sys/class/net/*/{bonding_slave/perm_hwaddr,address}
        2\u003e/dev/null | awk -F ''/'' ''// {print $5}'' | head -1`\" -%\u003e\n\u003c%-   if
        @interface.virtual? -%\u003e\n\u003c%=     \"\\nreal=`echo #{@interface.identifier}
        | sed s/#{@interface.attached_to}/$real/`\" -%\u003e\n\u003c%-   end -%\u003e\n\u003c%-
        end -%\u003e\n\u003c%# ifcfg files are ignored by NM if their name contains
        colons so we convert colons to underscore %\u003e\nsanitized_real=`echo $real
        | sed s/:/_/`\n\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.020Z","updated_at":"2019-07-18T15:21:12.365Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"f67db2518349895098ad9540b997e59e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5bbabc88-133a-4c7e-8145-9e383c78d439]
      x-runtime: ['0.038923']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/74
  response:
    body: {string: !!python/unicode '{"id":74,"name":"kickstart_networking_setup","template":"\u003c%#\nname:
        kickstart_networking_setup\nmodel: ProvisioningTemplate\nsnippet: true\nmodel:
        ProvisioningTemplate\nkind: snippet\n-%\u003e\n\u003c%- bonded_interfaces
        = [] -%\u003e\n\u003c%- bonding_interfaces = [] -%\u003e\n\u003c%- @host.bond_interfaces.each
        do |bond| -%\u003e\n\u003c%-   bonding_interfaces.push(bond.identifier) -%\u003e\n\u003c%=   \"#
        #{bond.identifier} interface\" %\u003e\n\u003c%=   snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables =\u003e { :identifier =\u003e bond.identifier }) %\u003e\n\u003c%-   ifcfg
        = snippet(''kickstart_ifcfg_bond_interface'', :variables =\u003e {\n                        :interface
        =\u003e bond,\n                        :subnet =\u003e bond.subnet,\n                        :subnet6
        =\u003e bond.subnet6,\n                        :dhcp =\u003e bond.subnet.nil?
        ? false : bond.subnet.dhcp_boot_mode? }) -%\u003e\n\u003c%=   save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %\u003e\n\n\u003c%-   @host.interfaces_with_identifier(bond.attached_devices_identifiers).each
        do |interface| -%\u003e\n\u003c%-     next if !interface.managed? -%\u003e\n\u003c%=     \"#
        #{interface.identifier} interface\" %\u003e\n\u003c%=     snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables =\u003e { :interface =\u003e interface }) -%\u003e\n\u003c%-     ifcfg
        = snippet(''kickstart_ifcfg_bonded_interface'', :variables =\u003e {\n                          :interface
        =\u003e interface,\n                          :subnet =\u003e interface.subnet,\n                          :subnet6
        =\u003e interface.subnet6,\n                          :dhcp =\u003e false,\n                          :bond_identifier
        =\u003e bond.identifier }) %\u003e\n\u003c%=     save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %\u003e\n\u003c%-     bonded_interfaces.push(interface.identifier)
        %\u003e\n\u003c%-   end -%\u003e\n\u003c%- end -%\u003e\n\n\u003c%- @host.managed_interfaces.each
        do |interface| %\u003e\n\u003c%-   next if !interface.managed? -%\u003e\n\u003c%-   next
        if bonded_interfaces.include?(interface.identifier) -%\u003e\n\n\u003c%-   interface_identifier
        = @host.bond_interfaces.map { |i| i.identifier }.include?(interface.attached_to)
        ? interface.identifier : nil %\u003e\n\u003c%=   \"# #{interface.identifier}
        interface\" %\u003e\n\u003c%=   snippet(''kickstart_ifcfg_get_identifier_names'',
        :variables =\u003e { :interface =\u003e interface, :identifier =\u003e interface_identifier
        }) -%\u003e\n\u003c%-   ifcfg = snippet(''kickstart_ifcfg_generic_interface'',
        :variables =\u003e {\n                        :interface =\u003e interface,\n                        :subnet
        =\u003e interface.subnet,\n                        :subnet6 =\u003e interface.subnet6,\n                        :bonding_interfaces
        =\u003e bonding_interfaces,\n                        :dhcp =\u003e interface.subnet.nil?
        ? false : interface.subnet.dhcp_boot_mode?,\n                        :attached_to_bond
        =\u003e interface_identifier.present? }) %\u003e\n\u003c%=   save_to_file(''/etc/sysconfig/network-scripts/ifcfg-$sanitized_real'',
        ifcfg) %\u003e\n\u003c%- end %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.042Z","updated_at":"2019-07-18T15:21:12.433Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"cede8129cc55a6f38dff4fdf9125a593"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5206e5b7-0cd4-4b05-8156-c546606d8f0f]
      x-runtime: ['0.038419']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/48
  response:
    body: {string: !!python/unicode '{"id":48,"name":"Kickstart oVirt-RHVH","template":"\u003c%#\nkind:
        provision\nname: Kickstart oVirt-RHVH\nmodel: ProvisioningTemplate\noses:\n-
        oVirt\n- RHVH\n%\u003e\n\u003c%#\nThis template accepts the following parameters:\n-
        liveimg_name: string (default=squashfs.img)\n- lang: string (default=\"en_US.UTF-8\")\n-
        selinux-mode: string (default=\"enforcing\")\n- keyboard: string (default=\"us\")\n-
        time-zone: string (default=\"UTC\")\n- ntp-server: string (default=\"0.fedora.pool.ntp.org\")\n-
        disable-firewall: boolean (default=false)\n\nThis kickstart will only work
        with LVM THIN partitioning (''Kickstart default thin'')\nand it requires the
        installation URL to have squashfs.img image extracted in the\nroot folder
        (or specified via ''liveimg_name'' parameter). See oVirt Node documentation\nor
        RHV Installation Manual, section 5.2. Advanced installation.\n\nBy default,
        the template expects the squashfs.img to be present inside\nthe installation
        media. When using Katello for content management (the\nkt_activation_key parameter
        is set), the liveimg_name is used to\nspecify relative path to the file and
        the template use repository_url\nhelper to generate an absolute path to the
        file (taking into account\nalso info about the content proxy relevant for
        the host)\n\nFor example, in case the squashfs.img is uploaded inside custom\nproduct
        named ''oVirt'' and repository ''hypervisor'', the\nliveimg_name would be
        ''custom/ovirt/hypervisor/squashfs.img''.\nIn this case, this repository would
        need to be part of the content\nview the host is assigned to. It''s also possible
        to provide full url,\nin which case it would be used without a change.\n%\u003e\n\ninstall\n\u003c%\nliveimg_name
        = host_param(''liveimg_name'') || ''squashfs.img''\nif host_param(''kt_activation_keys'')\n  liveimg_url
        = repository_url(liveimg_name, ''isos'')\nelse\n  liveimg_url = \"#{medium_uri}/#{liveimg_name}\"\nend\n%\u003e\n\nliveimg
        --url=\u003c%= liveimg_url %\u003e\n\n\u003c% subnet = @host.subnet -%\u003e\n\u003c%
        if subnet.respond_to?(:dhcp_boot_mode?) -%\u003e\n\u003c% dhcp = subnet.dhcp_boot_mode?
        \u0026\u0026 !@static -%\u003e\n\u003c% else -%\u003e\n\u003c% dhcp = !@static
        -%\u003e\n\u003c% end -%\u003e\nnetwork --bootproto \u003c%= dhcp ? ''dhcp''
        : \"static --ip=#{@host.ip} --netmask=#{subnet.mask} --gateway=#{subnet.gateway}
        --nameserver=#{[subnet.dns_primary, subnet.dns_secondary].select{ |item| item.present?
        }.join('','')}\" %\u003e --hostname \u003c%= @host %\u003e --device=\u003c%=
        @host.mac -%\u003e\n\nrootpw --iscrypted \u003c%= root_pass %\u003e\n\u003c%
        if host_param_true?(''disable-firewall'') -%\u003e\nfirewall --disable\n\u003c%
        else -%\u003e\nfirewall --service=ssh\n\u003c% end -%\u003e\nlang \u003c%=
        host_param(''lang'') || ''en_US.UTF-8'' %\u003e\ntimezone --utc \u003c%= host_param(''time-zone'')
        || ''UTC'' %\u003e\nselinux --\u003c%= host_param(''selinux-mode'') || host_param(''selinux'')
        || ''enforcing'' %\u003e\nkeyboard \u003c%= host_param(''keyboard'') || ''us''
        %\u003e\nservices --enabled=sshd\ntext\nreboot\n\u003c%= @host.diskLayout
        %\u003e\n\n%post --log=/root/ks.post.log --erroronfail\nnodectl init\n\u003c%=
        snippet ''redhat_register'' %\u003e\n\u003c%= snippet ''kickstart_networking_setup''
        %\u003e\n\u003c%= snippet ''efibootmgr_netboot'' %\u003e\n/usr/sbin/ntpdate
        -sub \u003c%= host_param(''ntp-server'') || ''0.fedora.pool.ntp.org'' %\u003e\n/usr/sbin/hwclock
        --systohc\n\n/usr/bin/curl \u003c%= foreman_url(''built'') %\u003e\nsync\nsystemctl
        reboot\n%end\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.436Z","updated_at":"2019-07-18T15:21:12.495Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"127e631f90564ceb5ca246bf465f47ae"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [85ba7e38-52ee-4810-b55a-0f45ead67f3c]
      x-runtime: ['0.038604']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/15
  response:
    body: {string: !!python/unicode '{"id":15,"name":"Kickstart oVirt-RHVH PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: Kickstart oVirt-RHVH PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        oVirt\n- RHVH\n%\u003e\nDEFAULT rhvh\n\nLABEL rhvh\nKERNEL \u003c%= @kernel
        %\u003e\nAPPEND initrd=\u003c%= @initrd %\u003e inst.ks=\u003c%= foreman_url(\"provision\")
        %\u003e inst.stage2=\u003c%= medium_uri %\u003e local_boot_trigger=\u003c%=
        foreman_url(\"built\") %\u003e intel_iommu=on\nIPAPPEND 2\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.661Z","updated_at":"2019-07-18T15:21:12.557Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"c30315b55de0e75d4d491266bda86265"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [cfdc8535-ea8c-4a0f-9a87-11b7f23efb4a]
      x-runtime: ['0.038212']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/1
  response:
    body: {string: !!python/unicode '{"id":1,"name":"NX-OS default POAP setup","template":"\u003c%#\nkind:
        POAP\nname: NX-OS default POAP setup\nmodel: ProvisioningTemplate\noses:\n-
        NX-OS\n%\u003e\n# This template file is only a placeholder. Cisco provides
        sample Python\n# scripts for POAP, but they are only distributed through their
        support site.\n# You will need to provide your own POAP scripts or download
        one from Cisco.\n","snippet":false,"template_kind_id":10,"created_at":"2019-07-15T16:12:13.345Z","updated_at":"2019-07-18T15:21:12.621Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"1f881538d0644eefec5975bcca316b19"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [97daf0a1-e684-48d5-b076-c7a853c41b71]
      x-runtime: ['0.037351']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/49
  response:
    body: {string: !!python/unicode '{"id":49,"name":"Preseed default","template":"\u003c%#\nkind:
        provision\nname: Preseed default\nmodel: ProvisioningTemplate\noses:\n- Debian\n-
        Ubuntu\n%\u003e\n\u003c%\n  proxy_string = host_param(''http-proxy'') ? \"
        http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : ''''\n  ansible_enabled = plugin_present?(''foreman_ansible'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  os_major = @host.operatingsystem.major.to_i\n  squeeze_or_older
        = (@host.operatingsystem.name == ''Debian'' \u0026\u0026 os_major \u003c=
        6)\n\n  additional_packages = [''lsb-release'']\n  additional_packages \u003c\u003c
        host_param(''additional-packages'')\n  additional_packages \u003c\u003c ''python''
        if ansible_enabled\n  additional_packages \u003c\u003c ''salt-minion'' if
        salt_enabled\n  additional_packages = additional_packages.join(\" \").split().uniq().join(\"
        \")\n%\u003e\n# Locale\nd-i debian-installer/locale string \u003c%= host_param(''lang'')
        || ''en_US'' %\u003e\n# country and keyboard settings are automatic. Keep
        them ...\n# ... for wheezy and newer:\nd-i keyboard-configuration/xkb-keymap
        seen true\n\u003c% if squeeze_or_older -%\u003e\n# ... for squeeze and older:\nd-i
        console-keymaps-at/keymap seen true\n\u003c% end -%\u003e\n\n\u003c% subnet
        = @host.subnet -%\u003e\n\u003c% if subnet.respond_to?(:dhcp_boot_mode?) -%\u003e\n  \u003c%
        dhcp = subnet.dhcp_boot_mode? \u0026\u0026 !@static -%\u003e\n\u003c% else
        -%\u003e\n  \u003c% dhcp = !@static -%\u003e\n\u003c% end -%\u003e\n\u003c%
        unless dhcp -%\u003e\n# Static network configuration.\nd-i preseed/early_command
        string /bin/killall.sh; /bin/netcfg\nd-i netcfg/disable_autoconfig boolean
        true\nd-i netcfg/dhcp_failed note\nd-i netcfg/dhcp_options select Configure
        network manually\nd-i netcfg/disable_dhcp boolean true\nd-i netcfg/get_ipaddress
        string \u003c%= @host.ip %\u003e\nd-i netcfg/get_netmask string \u003c%= subnet.mask
        %\u003e\nd-i netcfg/get_nameservers string \u003c%= [subnet.dns_primary,subnet.dns_secondary].reject{|n|
        n.blank?}.join('' '') %\u003e\nd-i netcfg/get_gateway string \u003c%= subnet.gateway
        %\u003e\nd-i netcfg/confirm_static boolean true\n\u003c% end -%\u003e\n\n#
        Network configuration\nd-i netcfg/choose_interface select auto\nd-i netcfg/get_hostname
        string \u003c%= @host %\u003e\nd-i netcfg/get_domain string \u003c%= @host.domain
        %\u003e\nd-i netcfg/wireless_wep string\n\nd-i hw-detect/load_firmware boolean
        true\n\n\u003c% if host_param_true?(''preseed-live-installer'') -%\u003e\n#
        Offline live-installer location\nd-i live-installer/net-image string http://\u003c%=
        @preseed_server %\u003e\u003c%= @preseed_path %\u003e/install/filesystem.squashfs\n\u003c%
        end -%\u003e\n\n# Mirror settings\nd-i mirror/country string manual\nd-i mirror/http/hostname
        string \u003c%= @preseed_server %\u003e\nd-i mirror/http/directory string
        \u003c%= @preseed_path %\u003e\nd-i mirror/http/proxy string\u003c%= proxy_string
        %\u003e\nd-i mirror/codename string \u003c%= @host.operatingsystem.release_name
        %\u003e\nd-i mirror/suite string \u003c%= @host.operatingsystem.release_name
        %\u003e\nd-i mirror/udeb/suite string \u003c%= @host.operatingsystem.release_name
        %\u003e\n\n# Time settings\nd-i clock-setup/utc boolean true\nd-i time/zone
        string \u003c%= host_param(''time-zone'') || ''UTC'' %\u003e\n\n# NTP\nd-i
        clock-setup/ntp boolean true\nd-i clock-setup/ntp-server string \u003c%= host_param(''ntp-server'')
        || ''0.debian.pool.ntp.org'' %\u003e\n\n# Set alignment for automatic partitioning\n#
        Choices: cylinder, minimal, optimal\n#d-i partman/alignment select cylinder\n\n\u003c%=
        @host.diskLayout %\u003e\n\n\u003c% if host_param(''preseed-kernel-image'')
        -%\u003e\n# Install different kernel\nd-i base-installer/kernel/image string
        \u003c%= host_param(''preseed-kernel-image'') %\u003e\n\u003c% end %\u003e\n\n#
        User settings\nd-i passwd/root-password-crypted password \u003c%= root_pass
        %\u003e\nuser-setup-udeb passwd/root-login boolean true\nd-i passwd/make-user
        boolean false\nuser-setup-udeb passwd/make-user boolean false\n\n\u003c% repos
        = 0 %\u003e\n\n\u003c% @additional_media.each do |medium| -%\u003e\nd-i apt-setup/local\u003c%=
        repos %\u003e/repository string \u003c%= medium[:url] %\u003e \u003c%= @host.operatingsystem.release_name
        %\u003e-\u003c%= medium[:name] %\u003e main\n\u003c%= \"d-i apt-setup/local#{repos}/comment
        string #{medium[:comment]}\" if medium[:comment] %\u003e\n\u003c%= \"d-i apt-setup/local#{repos}/key
        string #{medium[:gpgkey]}\" if medium[:gpgkey] %\u003e\n\u003c% repos +=1
        -%\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled -%\u003e\n\u003c%
        salt_package = ''salt-minion'' -%\u003e\n\u003c% if host_param_true?(''enable-saltstack-repo'')
        -%\u003e\n\u003c% if @host.operatingsystem.name == ''Debian'' -%\u003e\nd-i
        apt-setup/local\u003c%= repos %\u003e/repository string http://debian.saltstack.com/debian
        \u003c%= @host.operatingsystem.release_name %\u003e-saltstack main\nd-i apt-setup/local\u003c%=
        repos %\u003e/comment string SaltStack Repository\nd-i apt-setup/local\u003c%=
        repos %\u003e/key string http://debian.saltstack.com/debian-salt-team-joehealy.gpg.key\n\u003c%
        repos += 1 -%\u003e\n\u003c% end -%\u003e\n\u003c% if @host.operatingsystem.name
        == ''Ubuntu'' -%\u003e\nd-i apt-setup/local\u003c%= repos %\u003e/repository
        string http://ppa.launchpad.net/saltstack/salt/ubuntu \u003c%= @host.operatingsystem.release_name
        %\u003e main\nd-i apt-setup/local\u003c%= repos %\u003e/comment string SaltStack
        Repository\nd-i apt-setup/local\u003c%= repos %\u003e/key string http://keyserver.ubuntu.com/pks/lookup?op=get\u0026search=0x4759FA960E27C0A6\n\u003c%
        repos += 1 -%\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\u003c% else
        -%\u003e\n\u003c% salt_package = '''' -%\u003e\n\u003c% end -%\u003e\n\n#
        Install minimal task set (see tasksel --task-packages minimal)\ntasksel tasksel/first
        multiselect minimal, ssh-server, openssh-server\n\n# Install some base packages\nd-i
        pkgsel/include string \u003c%= additional_packages %\u003e\nd-i pkgsel/update-policy
        select \u003c%= host_param(''preseed-update-policy'') || ''unattended-upgrades''
        %\u003e\nd-i pkgsel/upgrade select \u003c%= host_param(''preseed-post-install-upgrade'')
        || ''none'' %\u003e\n\npopularity-contest popularity-contest/participate boolean
        false\n\n# Boot loader settings\n#grub-pc grub-pc/hidden_timeout boolean false\n#grub-pc
        grub-pc/timeout string 10\nd-i grub-installer/only_debian boolean true\nd-i
        grub-installer/with_other_os boolean true\n\u003c% if host_param(''install-disk'')
        -%\u003e\nd-i grub-installer/bootdev string \u003c%= host_param(''install-disk'')
        %\u003e\n\u003c% elsif (@host.operatingsystem.name == ''Debian'' and @host.operatingsystem.major.to_i
        \u003e= 8) or (@host.operatingsystem.name == ''Ubuntu'' and @host.operatingsystem.major.to_i
        \u003e= 16) -%\u003e\nd-i grub-installer/bootdev string default\n\u003c% end
        -%\u003e\nd-i finish-install/reboot_in_progress note\n\nd-i preseed/late_command
        string wget -Y off \u003c%= @static ? \"''#{foreman_url(''finish'')}\u0026static=true''\"
        : foreman_url(''finish'') %\u003e -O /target/tmp/finish.sh \u0026\u0026 in-target
        chmod +x /tmp/finish.sh \u0026\u0026 in-target /tmp/finish.sh\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.460Z","updated_at":"2019-07-18T15:21:12.684Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"98b884dbcbc799ccad1553a370a4822e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [af33239f-58e5-4c8b-b2d0-de856bfe0942]
      x-runtime: ['0.038337']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/31
  response:
    body: {string: !!python/unicode '{"id":31,"name":"Preseed default finish","template":"\u003c%#\nkind:
        finish\nname: Preseed default finish\nmodel: ProvisioningTemplate\noses:\n-
        Debian\n- Ubuntu\n%\u003e\n\u003c%\n  # safemode renderer does not support
        unary negation\n  pm_set = @host.puppetmaster.empty? ? false : true\n  puppet_enabled
        = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled = host_param(''salt_master'')
        ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy) \u0026\u0026
        @host.chef_proxy\n%\u003e\n\n\u003c% subnet = @host.subnet -%\u003e\n\u003c%
        if subnet.respond_to?(:dhcp_boot_mode?) -%\u003e\n\u003c% dhcp = subnet.dhcp_boot_mode?
        \u0026\u0026 !@static -%\u003e\n\u003c% else -%\u003e\n\u003c% dhcp = !@static
        -%\u003e\n\u003c% end -%\u003e\n\u003c% unless dhcp -%\u003e\n# host and domain
        name need setting as these values may have come from dhcp if pxe booting\n/bin/sed
        -i \"s/^search.*$/search \u003c%= @host.domain %\u003e/g\" /etc/resolv.conf\n/bin/sed
        -i \"s/.*dns-search.*/\\tdns-search \u003c%= @host.domain %\u003e/g\" /etc/network/interfaces\n/bin/sed
        -i \"s/^\u003c%= @host.ip %\u003e.*/\u003c%= @host.ip %\u003e\\t\u003c%= @host.shortname
        %\u003e.\u003c%= @host.domain %\u003e\\t\u003c%= @host.shortname %\u003e/g\"
        /etc/hosts\n/bin/echo \u003c%= @host.shortname %\u003e \u003e /etc/hostname\n/bin/hostname  \u003c%=
        @host.shortname %\u003e.\u003c%= @host.domain %\u003e\n\u003c% end -%\u003e\n\n\u003c%=
        snippet_if_exists(template_name + \" custom snippet\") %\u003e\n\u003c% if
        host_enc[''parameters''][''realm''] \u0026\u0026 @host.realm \u0026\u0026
        @host.realm.realm_type == ''FreeIPA'' -%\u003e\n\u003c%= snippet ''freeipa_register''
        %\u003e\n\u003c% end -%\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'')
        %\u003e\n\n\u003c%= snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c%
        if chef_enabled %\u003e\n\u003c%= snippet ''chef_client'' %\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if puppet_enabled %\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%\u003e\n\u003c%= snippet ''puppetlabs_repo'' %\u003e\n\u003c% end -%\u003e\n\u003c%=
        snippet ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c%=
        snippet ''preseed_networking_setup'' %\u003e\n\u003c%= snippet ''efibootmgr_netboot''
        %\u003e\n\u003c%= snippet ''built'' %\u003e\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:14.057Z","updated_at":"2019-07-18T15:21:12.749Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"f3659c6b96e67274d4ac3cd7ad744abb"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a909b93b-c3be-4daa-aa16-5a23de9bf22b]
      x-runtime: ['0.038757']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/38
  response:
    body: {string: !!python/unicode '{"id":38,"name":"Preseed default iPXE","template":"#!gpxe\n\u003c%#\nkind:
        iPXE\nname: Preseed default iPXE\nmodel: ProvisioningTemplate\noses:\n- Debian\n-
        Ubuntu\n%\u003e\n\u003c% if @host.operatingsystem.name == ''Debian'' -%\u003e\n\u003c%
        keyboard_params = \"auto=true domain=#{@host.domain}\" -%\u003e\n\u003c% else
        -%\u003e\n\u003c% keyboard_params = ''console-setup/ask_detect=false console-setup/layout=USA
        console-setup/variant=USA keyboard-configuration/layoutcode=us'' -%\u003e\n\u003c%
        end -%\u003e\n\u003c% boot_files_uris = @host.operatingsystem.boot_files_uri(medium_provider)
        -%\u003e\n\u003c% kernel = boot_files_uris[0] -%\u003e\n\u003c% initrd = boot_files_uris[1]
        -%\u003e\n\u003c% static = @host.token.nil? ? ''?static=yes'' : ''\u0026static=yes''
        -%\u003e\n\nkernel \u003c%= kernel %\u003e initrd=initrd.img interface=auto
        url=\u003c%= foreman_url(''provision'')%\u003e\u003c%= static %\u003e ramdisk_size=10800
        root=/dev/rd/0 rw auto netcfg/disable_dhcp=true BOOTIF=01-${netX/mac:hexhyp}
        hostname=\u003c%= @host.name %\u003e \u003c%= keyboard_params %\u003e locale=\u003c%=
        host_param(''lang'') || ''en_US'' %\u003e netcfg/get_ipaddress=${netX/ip}
        netcfg/get_netmask=${netX/netmask} netcfg/get_gateway=${netX/gateway} netcfg/get_nameservers=${dns}
        netcfg/confirm_static=true\ninitrd \u003c%= initrd %\u003e\n\nboot\n","snippet":false,"template_kind_id":4,"created_at":"2019-07-15T16:12:14.212Z","updated_at":"2019-07-18T15:21:12.814Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"625c5d546376c6e48eb0104e890c1bde"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4a98af0b-5296-4cf6-ab95-7f573f518c6e]
      x-runtime: ['0.037484']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/7
  response:
    body: {string: !!python/unicode '{"id":7,"name":"Preseed default PXEGrub2","template":"\u003c%#\nkind:
        PXEGrub2\nname: Preseed default PXEGrub2\nmodel: ProvisioningTemplate\noses:\n-
        Debian\n- Ubuntu\n%\u003e\n#\n# This file was deployed via ''\u003c%= template_name
        %\u003e'' template\n#\n# Supported host/hostgroup parameters:\n#\n# blacklist
        = module1, module2\n#   Blacklisted kernel modules\n#\n# lang = en_US\n#   System
        locale\n#\n\u003c%\n  os_major = @host.operatingsystem.major.to_i\n  os_name  =
        @host.operatingsystem.name\n\n  options = []\n  if host_param(''blacklist'')\n    options
        \u003c\u003c host_param(''blacklist'').split('','').collect{|x| \"#{x.strip}.blacklist=yes\"}.join(''
        '')\n  end\n  if os_name == ''Debian''\n    options \u003c\u003c \"auto=true\"\n    options
        \u003c\u003c \"domain=#{@host.domain}\"\n  else\n    options \u003c\u003c
        ''console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA
        keyboard-configuration/layoutcode=us localechooser/translation/warn-light=true
        localechooser/translation/warn-severe=true''\n  end\n  options \u003c\u003c
        \"locale=#{host_param(''lang'') || ''en_US''}\"\n  \n  # send PXELinux \"IPAPPEND
        2\" option along\n  options.push(\"BOOTIF=01-$net_default_mac\")\n\n  options
        = options.join('' '')\n\n  if (os_name == ''Ubuntu'' \u0026\u0026 os_major
        \u003e 12) || (os_name == ''Debian'' \u0026\u0026 os_major \u003e 8)\n    efi_suffix
        = ''efi''\n  else\n    efi_suffix = ''''\n  end\n-%\u003e\nset default=0\nset
        timeout=\u003c%= host_param(''loader_timeout'') || 10 %\u003e\n\nmenuentry
        ''\u003c%= template_name %\u003e'' {\n  linux\u003c%= efi_suffix %\u003e  \u003c%=
        @kernel %\u003e interface=auto url=\u003c%= foreman_url(''provision'')%\u003e
        ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=\u003c%= @host.name %\u003e
        \u003c%= options %\u003e\n  initrd\u003c%= efi_suffix %\u003e \u003c%= @initrd
        %\u003e\n}\n\n\u003c%= snippet_if_exists(template_name + \" custom menu\")
        %\u003e\n","snippet":false,"template_kind_id":3,"created_at":"2019-07-15T16:12:13.481Z","updated_at":"2019-07-18T15:21:12.881Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"3d368480a744ce4c9a967db175255522"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [36292bd6-beb3-4d94-b8aa-8b18570dc67a]
      x-runtime: ['0.038214']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/16
  response:
    body: {string: !!python/unicode '{"id":16,"name":"Preseed default PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: Preseed default PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        Debian\n- Ubuntu\n%\u003e\n#\n# This file was deployed via ''\u003c%= template_name
        %\u003e'' template\n#\n# Supported host/hostgroup parameters:\n#\n# blacklist
        = module1, module2\n#   Blacklisted kernel modules\n#\n# lang = en_US\n#   System
        locale\n#\n\u003c%\n  options = []\n  if host_param(''blacklist'')\n    options
        \u003c\u003c host_param(''blacklist'').split('','').collect{|x| \"#{x.strip}.blacklist=yes\"}.join(''
        '')\n  end\n  if @host.operatingsystem.name == ''Debian''\n    options \u003c\u003c
        \"auto=true\"\n    options \u003c\u003c \"domain=#{@host.domain}\"\n  else\n    options
        \u003c\u003c ''console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA
        keyboard-configuration/layoutcode=us localechooser/translation/warn-light=true
        localechooser/translation/warn-severe=true''\n  end\n  options \u003c\u003c
        \"locale=#{host_param(''lang'') || ''en_US''}\"\n  options = options.join(''
        '')\n-%\u003e\n\nDEFAULT linux\n\nLABEL linux\n    KERNEL \u003c%= @kernel
        %\u003e\n    APPEND initrd=\u003c%= @initrd %\u003e interface=auto url=\u003c%=
        foreman_url(''provision'')%\u003e ramdisk_size=10800 root=/dev/rd/0 rw auto
        hostname=\u003c%= @host.name %\u003e \u003c%= options %\u003e\n    IPAPPEND
        2\n\n\u003c%= snippet_if_exists(template_name + \" custom menu\") %\u003e\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.689Z","updated_at":"2019-07-18T15:21:12.960Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"6083cd0be3dac0a75e99e531fbabe19c"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [ea2d5f72-58e5-4370-bce2-50247dc56d1a]
      x-runtime: ['0.036807']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/93
  response:
    body: {string: !!python/unicode '{"id":93,"name":"Preseed default user data","template":"\u003c%#\nkind:
        user_data\nname: Preseed default user data\nmodel: ProvisioningTemplate\noses:\n-
        Debian\n- Ubuntu\n-%\u003e\n#!/bin/bash\n\n\u003c%# Cloud instances frequently
        have incorrect hosts data %\u003e\n\u003c%= snippet ''fix_hosts'' %\u003e\n\n\u003c%\n  #
        safemode renderer does not support unary negation\n  pm_set = @host.puppetmaster.empty?
        ? false : true\n  proxy_uri = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        \u0026\u0026 @host.chef_proxy\n%\u003e\n\n\u003c% if proxy_uri -%\u003e\necho
        ''Acquire::http::Proxy \"\u003c%= proxy_uri %\u003e\";'' \u003e\u003e /etc/apt/apt.conf\n\u003c%
        end -%\u003e\n\n\u003c% if host_enc[''parameters''][''realm''] \u0026\u0026
        @host.realm \u0026\u0026 @host.realm.realm_type == ''FreeIPA'' -%\u003e\n\u003c%=
        snippet ''freeipa_register'' %\u003e\n\u003c% end -%\u003e\n\n\u003c%= snippet(''remote_execution_ssh_keys'')
        %\u003e\n\n\u003c%= snippet \"blacklist_kernel_modules\" %\u003e\n\n\u003c%
        if chef_enabled %\u003e\n\u003c%= snippet ''chef_client'' %\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if puppet_enabled %\u003e\n\u003c% if host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppetlabs-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%\u003e\n\u003c%= snippet ''puppetlabs_repo'' %\u003e\n\u003c% end -%\u003e\n\u003c%=
        snippet ''puppet_setup'' %\u003e\n\u003c% end -%\u003e\n\n\u003c% if salt_enabled
        %\u003e\n\u003c%= snippet ''saltstack_setup'' %\u003e\n\u003c% end -%\u003e\n\n#
        UserData still needs wget to mark as finished\n\u003c%= snippet ''built''
        %\u003e\n","snippet":false,"template_kind_id":8,"created_at":"2019-07-15T16:12:15.483Z","updated_at":"2019-07-18T15:21:13.027Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"c9e59fbc62c34c319f0a2816eb44d023"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8238486c-68ee-465c-971d-6d42736f1721]
      x-runtime: ['0.037581']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/75
  response:
    body: {string: !!python/unicode '{"id":75,"name":"preseed_networking_setup","template":"\u003c%#\nkind:
        snippet\nname: preseed_networking_setup\nmodel: ProvisioningTemplate\nsnippet:
        true\ndescription: this will configure your host networking, it configures
        your primary interface as well\n    as other configures NICs. It supports
        physical, VLAN and Alias interfaces. It''s intended to be\n    called in your
        preseed finish template.\n%\u003e\n\u003c% host_subnet = @host.subnet -%\u003e\n\u003c%
        host_dhcp = host_subnet.nil? ? false : host_subnet.dhcp_boot_mode? -%\u003e\n\u003c%
        host_subnet6 = @host.subnet6 -%\u003e\n\u003c% host_dhcp6 = host_subnet6.nil?
        ? false : host_subnet6.dhcp_boot_mode? -%\u003e\n\nreal=`ip -o link | awk
        ''/\u003c%= @host.mac -%\u003e/ {print $2;}'' | sed s/://`\ncat \u003c\u003c
        EOF \u003e /etc/network/interfaces\n#loopback\nauto lo\niface lo inet loopback\n\n#\u003c%=
        @host.primary_interface.identifier %\u003e\nauto $real\nallow-hotplug $real\niface
        $real inet \u003c%= host_dhcp ? ''dhcp'' : ''static'' %\u003e\n\u003c% unless
        host_dhcp -%\u003e\n    address \u003c%= @host.ip %\u003e\n    gateway \u003c%=
        host_subnet.gateway %\u003e\n    netmask \u003c%= host_subnet.mask %\u003e\n    dns-nameservers
        \u003c%= host_subnet.dns_primary %\u003e \u003c%= host_subnet.dns_secondary
        %\u003e\n    dns-search \u003c%= @host.domain %\u003e\n\u003c% end -%\u003e\n\u003c%
        if @host.ip6 \u0026\u0026 host_subnet6 \u0026\u0026 !host_dhcp6 -%\u003e\niface
        $real inet6 static\n    address \u003c%= @host.ip6 %\u003e/\u003c%= host_subnet6.cidr
        %\u003e\n\u003c% if host_subnet6.gateway -%\u003e\n    gateway \u003c%= host_subnet6.gateway
        %\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\nEOF\n\n\u003c% @host.managed_interfaces.each
        do |interface| -%\u003e\n\u003c% interface_subnet = interface.subnet -%\u003e\n\u003c%
        interface_dhcp = interface_subnet.nil? ? false : interface_subnet.dhcp_boot_mode?
        -%\u003e\n\u003c% interface_subnet6 = interface.subnet6 -%\u003e\n\u003c%
        interface_dhcp6 = interface_subnet6.nil? ? false : interface_subnet6.dhcp_boot_mode?
        -%\u003e\n\u003c% next if !interface.managed? || (interface_subnet.nil? \u0026\u0026
        interface_subnet6.nil?) || interface.primary -%\u003e\nreal=`ip -o link |
        awk ''/\u003c%= interface.mac -%\u003e/ {print $2;}'' | sed s/:$//`\n\u003c%
        virtual = interface.virtual? -%\u003e\n\u003c% if virtual -%\u003e\nreal=`echo
        \u003c%= interface.identifier -%\u003e | sed s/\u003c%= interface.attached_to
        -%\u003e/$real/`\n\u003c% end -%\u003e\n\ncat \u003c\u003c EOF \u003e\u003e
        /etc/network/interfaces\n#\u003c%= interface.identifier %\u003e\n\u003c% if
        interface_subnet %\u003e\nauto $real\niface $real inet \u003c%= interface_dhcp
        ? ''dhcp'' : ''static'' %\u003e\n\u003c% unless interface_dhcp -%\u003e\n    address
        \u003c%= interface.ip %\u003e\n    netmask \u003c%= interface_subnet.mask
        %\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\u003c% if interface.ip6
        \u0026\u0026 interface_subnet6 %\u003e\n\u003c% unless interface_dhcp6 -%\u003e\niface
        $real inet6 static\n    address \u003c%= interface.ip6 %\u003e/\u003c%= interface_subnet6.cidr
        %\u003e\n\u003c% if interface_subnet6.gateway -%\u003e\n    gateway \u003c%=
        interface_subnet6.gateway %\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\u003c%
        end -%\u003e\nEOF\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.063Z","updated_at":"2019-07-18T15:21:13.101Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"a413435932ba8ecd0c0800f30859a8f1"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [cad6fbe9-1fa3-4b3c-89d8-f1205285ea49]
      x-runtime: ['0.037648']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/76
  response:
    body: {string: !!python/unicode '{"id":76,"name":"puppet.conf","template":"\u003c%#\nkind:
        snippet\nname: puppet.conf\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n\u003c%\n  os_family
        = @host.operatingsystem.family\n  os_name   = @host.operatingsystem.name\n\n  aio_enabled
        = host_param_true?(''enable-puppetlabs-puppet5-repo'') || host_param_true?(''enable-puppetlabs-pc1-repo'')
        || host_param_true?(''enable-puppet4'') || host_param_true?(''enable-puppet5'')\n  aio_available
        = os_family == ''Debian'' || os_family == ''Redhat'' || os_name == ''SLES''\n\n  if
        aio_enabled \u0026\u0026 aio_available\n    var_dir = ''/opt/puppetlabs/puppet/cache''\n    log_dir
        = ''/var/log/puppetlabs/puppet''\n    run_dir = ''/var/run/puppetlabs''\n    ssl_dir
        = ''/etc/puppetlabs/puppet/ssl''\n  elsif os_family == ''Windows''\n    var_dir
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\cache''\n    log_dir = ''C:\\ProgramData\\PuppetLabs\\puppet\\var\\log''\n    run_dir
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\var\\run''\n    ssl_dir = ''C:\\ProgramData\\PuppetLabs\\puppet\\etc\\ssl''\n  else\n    if
        @host.operatingsystem.family == ''Freebsd''\n      var_dir = ''/var/puppet''\n    else\n      var_dir
        = ''/var/lib/puppet''\n    end\n    log_dir = ''/var/log/puppet''\n    run_dir
        = ''/var/run/puppet''\n    ssl_dir = ''\\$vardir/ssl''\n  end\n%\u003e\n[main]\n\u003c%-
        unless host_param(''dns_alt_names'').to_s.empty? -%\u003e\ndns_alt_names =
        \u003c%= host_param(''dns_alt_names'') %\u003e\n\u003c%- end -%\u003e\nvardir
        = \u003c%= var_dir %\u003e\nlogdir = \u003c%= log_dir %\u003e\nrundir = \u003c%=
        run_dir %\u003e\nssldir = \u003c%= ssl_dir %\u003e\n\u003c% if host_param_true?(''fips_enabled'')
        -%\u003e\ndigest_algorithm = sha256\n\u003c% end -%\u003e\n\n[agent]\npluginsync      =
        true\nreport          = true\nignoreschedules = true\n\u003c%- if @host.puppet_ca_server.strip
        -%\u003e\nca_server       = \u003c%= @host.puppet_ca_server %\u003e\n\u003c%-
        end -%\u003e\ncertname        = \u003c%= @host.certname %\u003e\nenvironment     =
        \u003c%= @host.environment %\u003e\nserver          = \u003c%= @host.puppetmaster
        %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.084Z","updated_at":"2019-07-18T15:21:13.168Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"bfceafded4bdf26324f76aa4d5f21345"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [a5b545e8-24de-446f-8c57-26e9cf3fff73]
      x-runtime: ['0.037841']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/78
  response:
    body: {string: !!python/unicode '{"id":78,"name":"puppetlabs_repo","template":"\u003c%#\nkind:
        snippet\nname: puppetlabs_repo\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%\nhttp_proxy   =
        host_param(''http-proxy'') ? \" --httpproxy #{host_param(''http-proxy'')}\"
        : nil\nhttp_port    = host_param(''http-proxy-port'') ? \" --httpport #{host_param(''http-proxy-port'')}\"
        : nil\nproxy_uri    = host_param(''http-proxy'') ? \"http://#{host_param(''http-proxy'')}:#{host_param(''http-proxy-port'')}\"
        : nil\nproxy_string = proxy_uri ? \" -e https_proxy=#{proxy_uri}/\" : ''''\nproxy_string_bits
        = proxy_uri ? \" -ProxyUsage Override -ProxyList #{proxy_uri}\" : ''''\nos_family
        = @host.operatingsystem.family\nos_major  = @host.operatingsystem.major.to_i\nos_name   =
        @host.operatingsystem.name\n\nif os_family == ''Redhat''\n  repo_host = ''yum.puppetlabs.com''\n  if
        os_name == ''Fedora''\n    repo_os = ''fedora''\n  else\n    repo_os = ''el''\n  end\nelsif
        os_family == ''Suse''\n  repo_host = ''yum.puppetlabs.com''\n  repo_os = ''sles''
        # PuppetLabs repos only exist for SLES, not OpenSUSE\nelsif os_family == ''Debian''\n  repo_host
        = ''apt.puppetlabs.com''\n  repo_os = @host.operatingsystem.release_name\nelsif
        os_family == ''Windows''\n  repo_host = ''downloads.puppetlabs.com''\n  repo_os
        = ''windows''\nend\n\nif host_param_true?(''enable-puppetlabs-repo'')\n  repo_name
        = ''puppetlabs-release''\nelsif host_param_true?(''enable-puppetlabs-pc1-repo'')\n  repo_name
        = ''puppetlabs-release-pc1''\nelsif host_param_true?(''enable-puppetlabs-puppet5-repo'')\n  repo_name
        = ''puppet5-release''\nend\n\nrepo_subdir = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        ? ''puppet5/'' : ''''\n-%\u003e\n\n\u003c% if repo_name -%\u003e\n\u003c%
        if os_family == ''Redhat'' || os_name == ''SLES'' -%\u003e\nrpm -Uvh\u003c%=
        http_proxy %\u003e\u003c%= http_port %\u003e https://\u003c%= repo_host %\u003e/\u003c%=
        repo_subdir %\u003e\u003c%= repo_name %\u003e-\u003c%= repo_os %\u003e-\u003c%=
        os_major %\u003e.noarch.rpm\n\u003c% elsif os_family == ''Debian'' -%\u003e\napt-get
        update\napt-get -y install ca-certificates\nwget -O /tmp/\u003c%= repo_name
        %\u003e-\u003c%= repo_os %\u003e.deb\u003c%= proxy_string %\u003e https://\u003c%=
        repo_host %\u003e/\u003c%= repo_name %\u003e-\u003c%= repo_os %\u003e.deb\ndpkg
        -i /tmp/\u003c%= repo_name %\u003e-\u003c%= repo_os %\u003e.deb\n\u003c% elsif
        os_family == ''Windows'' -%\u003e\n$puppet_agent_source = ''https://\u003c%=
        repo_host %\u003e/\u003c%= repo_os %\u003e/puppet-agent-\u003c%= @host.architecture
        %\u003e-latest.msi''\n$puppet_agent_msi = \"${env:TEMP}\\puppet-agent-\u003c%=
        @host.architecture %\u003e.msi\"\nWrite-Host \"Downloading puppet-agent from
        ${$puppet_agent_source} to ${puppet_agent_msi}\"\nStart-BitsTransfer -Source
        \"${puppet_agent_source}\" -Destination \"${puppet_agent_msi}\"\u003c%= proxy_string_bits
        %\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.128Z","updated_at":"2019-07-18T15:21:13.237Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:22 GMT']
      etag: [W/"fb2b1cea979759829d279a33a58a7580"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [bb301226-1024-4eec-b954-78f3d01db896]
      x-runtime: ['0.038148']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/77
  response:
    body: {string: !!python/unicode '{"id":77,"name":"puppet_setup","template":"\u003c%#\nkind:
        snippet\nname: puppet_setup\nmodel: ProvisioningTemplate\ndescription: this
        snippet will configure the Puppet agent\nsnippet: true\n%\u003e\n\u003c%\nos_family
        = @host.operatingsystem.family\nos_major  = @host.operatingsystem.major.to_i\nos_name   =
        @host.operatingsystem.name\n\naio_enabled = host_param_true?(''enable-puppetlabs-puppet5-repo'')
        || host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppet4'')
        || host_param_true?(''enable-puppet5'')\n\nif os_family == ''Freebsd''\n  freebsd_package
        = host_param_true?(''enable-puppet5'') ? ''puppet5'' : ''puppet4''\n  etc_path
        = ''/usr/local/etc/puppet''\n  bin_path = ''/usr/local/bin''\nelsif os_family
        == ''Windows''\n  windows_package = \"puppet-agent-#{@host.architecture}.msi\"\n  etc_path
        = ''C:\\ProgramData\\PuppetLabs\\puppet\\etc''\n  bin_path = ''C:\\Program
        Files\\Puppet Labs\\Puppet\\bin''\nelsif aio_enabled\n  linux_package = ''puppet-agent''\n  etc_path
        = ''/etc/puppetlabs/puppet''\n  bin_path = ''/opt/puppetlabs/bin''\nelse\n  linux_package
        = os_family == ''Suse'' ? ''rubygem-puppet'' : ''puppet''\n  etc_path = ''/etc/puppet''\n  bin_path
        = ''/usr/bin''\nend\n%\u003e\n\n\u003c% if os_family == ''Debian'' -%\u003e\napt-get
        update\napt-get install -y \u003c%= linux_package %\u003e\n\u003c% elsif os_family
        == ''Freebsd'' -%\u003e\npkg install -y \u003c%= freebsd_package %\u003e\n\u003c%
        elsif os_family == ''Redhat'' -%\u003e\nif [ -f /usr/bin/dnf ]; then\n  dnf
        -y install \u003c%= linux_package %\u003e\nelse\n  yum -t -y install \u003c%=
        linux_package %\u003e\nfi\n\u003c% elsif os_family == ''Suse'' -%\u003e\n\u003c%
        if host_param_true?(''enable-puppetlabs-pc1-repo'') || host_param_true?(''enable-puppetlabs-puppet5-repo'')
        -%\u003e\nrpmkeys --import http://yum.puppetlabs.com/RPM-GPG-KEY-puppetlabs\nrpmkeys
        --import http://yum.puppetlabs.com/RPM-GPG-KEY-puppet\n\u003c% end -%\u003e\n\u003c%
        if @host.provision_method == ''image'' -%\u003e\n/usr/bin/zypper -n install
        \u003c%= linux_package %\u003e\n\u003c% end -%\u003e\n\u003c% elsif os_family
        == ''Windows'' -%\u003e\n$puppet_agent_msi = \"${env:TEMP}\\\u003c%= windows_package
        %\u003e\"\n$puppet_install_args = @(\n  ''/qn'',\n  ''/norestart'',\n  ''/i'',\n  \"${puppet_agent_msi}\",\n  \u003c%-
        if @host.puppet_ca_server.strip -%\u003e\n  \"PUPPET_CA_SERVER=\u003c%= @host.puppet_ca_server
        %\u003e\",\n  \u003c%- end -%\u003e\n  \"PUPPET_MASTER_SERVER=\u003c%= @host.puppetmaster
        %\u003e\"\n)\n\nWrite-Host \"Installing ${puppet_agent_msi} with args ${puppet_install_args}\"\nStart-Process
        ''msiexec.exe'' -ArgumentList $puppet_install_args -Wait -NoNewWindow\n\u003c%
        end -%\u003e\n\n\u003c% if os_family == ''Windows'' -%\u003e\n$puppet_conf
        = @(\"\u003c%= snippet ''puppet.conf'' %\u003e\".Replace(\"`n\",\"`r`n\"))\nOut-File
        -FilePath \u003c%= etc_path %\u003e\\puppet.conf -InputObject $puppet_conf\n\u003c%
        else -%\u003e\ncat \u003e \u003c%= etc_path %\u003e/puppet.conf \u003c\u003c
        EOF\n\u003c%= snippet ''puppet.conf'' %\u003e\nEOF\n\u003c% end -%\u003e\n\n\u003c%
        if @host.puppetca_token.present? -%\u003e\n\u003c% if os_family == ''Windows''
        -%\u003e\n$csr_attributes = @(\"\u003c%= snippet ''csr_attributes.yaml'' %\u003e\".Replace(\"`n\",\"`r`n\"))\nOut-File
        -FilePath \u003c%= etc_path %\u003e\\csr_attributes.yaml -InputObject $csr_attributes\n\u003c%
        else -%\u003e\ncat \u003e \u003c%= etc_path %\u003e/csr_attributes.yaml \u003c\u003c
        EOF\n\u003c%= snippet ''csr_attributes.yaml'' %\u003e\nEOF\n\u003c% end -%\u003e\n\u003c%
        end -%\u003e\n\n\u003c% if os_family == ''Redhat'' -%\u003e\n\u003c% if os_major
        \u003e 6 -%\u003e\npuppet_unit=puppet\n/usr/bin/systemctl list-unit-files
        | grep -q puppetagent \u0026\u0026 puppet_unit=puppetagent\n/usr/bin/systemctl
        enable ${puppet_unit}\n\u003c% else -%\u003e\n/sbin/chkconfig --level 345
        puppet on\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\u003c% if os_family
        == ''Freebsd'' -%\u003e\necho ''puppet_enable=\"YES\"'' \u003e\u003e/etc/rc.conf\n\u003c%
        end -%\u003e\n\u003c% unless aio_enabled -%\u003e\n\u003c% if os_family ==
        ''Debian'' -%\u003e\nif [ -f \"/etc/default/puppet\" ]\nthen\n/bin/sed -i
        ''s/^START=no/START=yes/'' /etc/default/puppet\nfi\n\u003c%= bin_path %\u003e/puppet
        agent --enable\n\u003c% elsif os_family == ''Suse'' -%\u003e\nif [ -f \"/etc/sysconfig/puppet\"
        ]\nthen\n/usr/bin/sed -ie s/^PUPPET_SERVER=.*/PUPPET_SERVER=\u003c%= @host.puppetmaster.blank?
        ? '''' : @host.puppetmaster %\u003e/ /etc/sysconfig/puppet\nfi\n\u003c% end
        -%\u003e\n\u003c% end -%\u003e\n\u003c%#\nIMPORTANT NOTE: Setting \"run-puppet-in-installer\"
        is UNSUPPORTED!\n\nThe default mode of operation in Foreman is only to set
        up Puppet, but to not run it inside the installer environment.\nRunning Puppet
        inside the installer can cause various hard to diagnose errors, many of them
        resulting from the fact that\nservices are not started inside the installer.\n\nIf
        you are aware of the downsides, you can trigger a Puppet run inside the installer
        by setting the variable\nrun-puppet-in-installer to true.\n\nNote, that this
        is an *unsupported mode of operation* and not supported by Foreman at all.
        You have been warned!\n%\u003e\n\u003c% if host_param_true?(''run-puppet-in-installer'')
        -%\u003e\n\u003c% if (os_name == ''Ubuntu'' \u0026\u0026 os_major \u003e=
        15) || (os_name == ''Debian'' \u0026\u0026 os_major \u003e= 8) -%\u003e\n#
        Puppet tries to detect the init system by checking the presence of the directory
        /run/systemd/system. That detection\n# fails in a chroot environment like
        the one the installer provides. See Puppet tickets PA-136 and PUP-5577\n#\n#
        We work around that here until it gets fixed in Puppet (probably never for
        Puppet 3.x)\nmkdir -p /run/systemd/system\n\u003c% end -%\u003e\n\u003c% end
        -%\u003e\n# export a custom fact called ''is_installer'' to allow detection
        of the installer environment in Puppet modules\n\u003c% if os_family == ''Windows''
        -%\u003e\n$env:FACTER_is_installer = $TRUE\n\n# passing a non-existent tag
        like \"no_such_tag\" to the puppet agent only initializes the node\n$puppet_agent_args
        = @(\n  \"agent\",\n  \"--config\", \"\u003c%= etc_path %\u003e\\puppet.conf\",\n  \"--onetime\",\n  \u003c%=
        host_param_true?(''run-puppet-in-installer'') ? '''' : ''\"--tags no_such_tag\",''
        %\u003e\n  \u003c%= @host.puppetmaster.blank? ? '''' : \"\\\"--server #{@host.puppetmaster}\\\",\"
        %\u003e\n  \"--no-daemonize\"\n)\nStart-Process ''\u003c%= bin_path %\u003e\\puppet''
        -ArgumentList $puppet_agent_args -Wait -NoNewWindow\n\u003c% else -%\u003e\nexport
        FACTER_is_installer=true\n# passing a non-existent tag like \"no_such_tag\"
        to the puppet agent only initializes the node\n\u003c%= bin_path %\u003e/puppet
        agent --config \u003c%= etc_path %\u003e/puppet.conf --onetime \u003c%= host_param_true?(''run-puppet-in-installer'')
        ? '''' : ''--tags no_such_tag'' %\u003e \u003c%= @host.puppetmaster.blank?
        ? '''' : \"--server #{@host.puppetmaster}\" %\u003e --no-daemonize\n\u003c%
        if os_family == ''Suse'' || (os_name == ''Debian'' \u0026\u0026 os_major \u003e
        8) || (os_name == ''Ubuntu'' \u0026\u0026 os_major \u003e= 15) -%\u003e\n\u003c%=
        bin_path %\u003e/puppet resource service puppet enable=true\n\u003c% if @host.provision_method
        == ''image'' -%\u003e\n\u003c%= bin_path %\u003e/puppet resource service puppet
        ensure=running\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.106Z","updated_at":"2019-07-18T15:21:13.306Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"ca2dfa7f8a1c5773b4fdc1e77c644ed1"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f8bc84d3-1ff4-4311-9c44-31ca312d9782]
      x-runtime: ['0.041463']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/79
  response:
    body: {string: !!python/unicode '{"id":79,"name":"pxegrub2_chainload","template":"\u003c%#\nkind:
        snippet\nname: pxegrub2_chainload\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n\u003c%\n  paths
        = [\n    ''/EFI/fedora/shim.efi'',\n    ''/EFI/fedora/grubx64.efi'',\n    ''/EFI/redhat/shim.efi'',\n    ''/EFI/redhat/grubx64.efi'',\n    ''/EFI/centos/shim.efi'',\n    ''/EFI/centos/grubx64.efi'',\n    ''/EFI/debian/grubx64.efi'',\n    ''/EFI/ubuntu/grubx64.efi'',\n    ''/EFI/sles/grubx64.efi'',\n    ''/EFI/opensuse/grubx64.efi'',\n    ''/EFI/Microsoft/boot/bootmgfw.efi''\n  ]\n-%\u003e\ninsmod
        part_gpt\ninsmod fat\ninsmod chain\n\nmenuentry ''Chainload Grub2 EFI from
        ESP'' --id local_chain_hd0 {\n  echo Chainloading Grub2 EFI from ESP, enabled
        devices for booting:\n  ls\n\u003c%\n  paths.each do |path|\n-%\u003e\n  echo
        \"Trying \u003c%= path %\u003e \"\n  unset chroot\n  search --file --no-floppy
        --set=chroot \u003c%= path %\u003e\n  if [ -f ($chroot)\u003c%= path %\u003e
        ]; then\n    chainloader ($chroot)\u003c%= path %\u003e\n    echo \"Found
        \u003c%= path %\u003e at $chroot, attempting to chainboot it...\"\n    sleep
        2\n    boot\n  fi\n\u003c%\n  end\n-%\u003e\n  echo Partition with known EFI
        file not found, you may want to drop to grub shell\n  echo and investigate
        available files updating ''pxegrub2_chainload'' template and\n  echo the list
        of known filepaths for probing. Contents of \\EFI directory:\n  ls ($chroot)/EFI\n  echo
        The system will halt in 2 minutes or press ESC to halt immediately.\n  sleep
        -i 120\n  halt --no-apm\n}\n\nmenuentry ''Chainload into BIOS bootloader on
        first disk'' --id local_chain_legacy_hd0 {\n  set root=(hd0,0)\n  chainloader
        +1\n  boot\n}\n\nmenuentry ''Chainload into BIOS bootloader on second disk''
        --id local_chain_legacy_hd1 {\n  set root=(hd1,0)\n  chainloader +1\n  boot\n}\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.149Z","updated_at":"2019-07-18T15:21:13.377Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"6ec56ef6a803fd6ffb2f5055ddd5293e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [61ca79ff-f2f7-4ba3-9321-5ae2447afe72]
      x-runtime: ['0.039990']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/8
  response:
    body: {string: !!python/unicode '{"id":8,"name":"PXEGrub2 default local boot","template":"\u003c%#\nkind:
        PXEGrub2\nname: PXEGrub2 default local boot\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#
        Used to boot provisioned hosts, do not associate or change the name. %\u003e\n\nset
        default=\u003c%= global_setting(\"default_pxe_item_local\", \"local\") %\u003e\nset
        timeout=20\necho Default PXE local template entry is set to ''\u003c%= global_setting(\"default_pxe_item_local\",
        \"local\") %\u003e''\n\n\u003c%= snippet \"pxegrub2_mac\" %\u003e\n\u003c%=
        snippet \"pxegrub2_chainload\" %\u003e\n\u003c%= snippet \"pxegrub2_discovery\"
        %\u003e\n","snippet":false,"template_kind_id":3,"created_at":"2019-07-15T16:12:13.505Z","updated_at":"2019-07-18T15:21:13.441Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"66c1cd1c94e787d6576003d5f2e8598b"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [35310e5a-aba9-4258-9b27-40a7baef5eca]
      x-runtime: ['0.047930']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/80
  response:
    body: {string: !!python/unicode '{"id":80,"name":"pxegrub2_discovery","template":"\u003c%#\nkind:
        snippet\nname: pxegrub2_discovery\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%#\nRHEL
        7 virtio driver does not have persistent naming scheme, causing interfaces\nto
        be named eth0, eth1, etc.. If you want to enable the new persistent naming\nscheme
        and get inteface names like ens3, add net.ifnames=1 to the linuxefi line\nbelow.
        This will not be fixed until RHEL8 due to prevent breaking changes for\nexisting
        systems. See RHBZ#1259015 for more details.\n\nAnother bug in RHEL 7.4 is
        affecting $net_default_mac with a trailing slash, in\nthe global template
        we have a regexp module creating corrected variable $mac\nwhich is used here.
        See RHBZ#1487107 for more info.\n-%\u003e\n\u003c% [\"efi\", \"\"].each do
        |suffix| %\u003e\nmenuentry ''Foreman Discovery Image \u003c%= suffix %\u003e''
        --id discovery\u003c%= suffix %\u003e {\n  linux\u003c%= suffix %\u003e boot/fdi-image/vmlinuz0
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=\u003c%= foreman_server_url %\u003e proxy.type=foreman BOOTIF=01-$mac\n  initrd\u003c%=
        suffix %\u003e boot/fdi-image/initrd0.img\n}\n\u003c% end %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.171Z","updated_at":"2019-07-18T15:21:13.510Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"8a0497a98768f4db9d4f24ecc6a8148f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [62a886e6-cec2-46e0-952c-c696ed3eae80]
      x-runtime: ['0.041837']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/9
  response:
    body: {string: !!python/unicode '{"id":9,"name":"PXEGrub2 global default","template":"\u003c%#\nkind:
        PXEGrub2\nname: PXEGrub2 global default\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#
        Used to boot unknown hosts, do not associate or change the name. %\u003e\n\ndefault=\u003c%=
        global_setting(\"default_pxe_item_global\", \"local\") %\u003e\ntimeout=20\necho
        Default PXE global template entry is set to ''\u003c%= global_setting(\"default_pxe_item_global\",
        \"local\") %\u003e''\n\n\u003c%= snippet \"pxegrub2_mac\" %\u003e\n\n# Only
        grub2 from redhat has MAC-based config loading patch, load explicitly\nconfigfile=/grub2/grub.cfg-01-$mac\nsource
        \"$configfile\"\n\n# And if that fails render chain and discovery menu\n\u003c%=
        snippet \"pxegrub2_chainload\" %\u003e\n\u003c%= snippet \"pxegrub2_discovery\"
        %\u003e\n\n\u003c% unless @profiles.nil? -%\u003e\n\u003c% for profile in
        @profiles\n  url = default_template_url(profile[:template], profile[:hostgroup])\n  case
        profile[:pxe_type]\n  when ''kickstart''\n    append = \"ks=#{url} ksdevice=bootif
        network kssendmac ks.sendmac inst.ks.sendmac\"\n  when ''preseed''\n    locale
        = profile[:hostgroup].params[''lang''] || ''en_US''\n    append = \"interface=auto
        url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %\u003e\nmenuentry ''\u003c%= \"#{profile[:hostgroup]} - #{profile[:template]}\"
        %\u003e'' {\n  linuxefi \u003c%= profile[:kernel] %\u003e \u003c%= append
        %\u003e\n  initrdefi \u003c%= profile[:initrd] %\u003e\n}\n\u003c% end %\u003e\n\u003c%
        end -%\u003e\n","snippet":false,"template_kind_id":3,"created_at":"2019-07-15T16:12:13.528Z","updated_at":"2019-07-18T15:21:13.573Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"ef6bf544446918001b042e201f6727fe"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [616c6930-afb3-4b84-9974-01251e876041]
      x-runtime: ['0.041702']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/81
  response:
    body: {string: !!python/unicode '{"id":81,"name":"pxegrub2_mac","template":"\u003c%#\nkind:
        snippet\nname: pxegrub2_mac\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n#
        To load MAC-based config explicitly, a MAC address separated by dash chars
        is needed.\n# Also due to bug in RHEL 7.4 files are loaded with an extra \":\"
        character at the end.\n# This workarounds both cases, make sure \"regexp.mod\"
        file is present on the TFTP.\n# For more info see: https://bugzilla.redhat.com/show_bug.cgi?id=1370642#c70\ninsmod
        regexp\nregexp --set=1:m1 --set=2:m2 --set=3:m3 --set=4:m4 --set=5:m5 --set=6:m6
        ''^([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})\\:([0-9a-f]{1,2})''
        \"$net_default_mac\"\nmac=${m1}-${m2}-${m3}-${m4}-${m5}-${m6}\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.193Z","updated_at":"2019-07-18T15:21:13.642Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"f2db6a7bd039a2c393f4cfb922d85613"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [7636289a-7312-4daf-8590-932ba4907454]
      x-runtime: ['0.041485']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/82
  response:
    body: {string: !!python/unicode '{"id":82,"name":"pxegrub_chainload","template":"\u003c%#\nkind:
        snippet\nname: pxegrub_chainload\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\n\u003c%\n  #
        paths variable must be passed into the snippet, otherwise no EFI items are
        rendered\n  if !@paths.nil? \u0026\u0026 @paths.size \u003e 1\n-%\u003e\nfallback=\u003c%=
        (1..@paths.size).to_a.join('' '') %\u003e\n  \u003c% @paths.each do |path|
        %\u003e\ntitle Chainload Grub from /EFI/\u003c%= path %\u003e or try next\n  rootnoverify
        (hd0,0)\n  chainloader /EFI/\u003c%= path %\u003e/grubx64.efi\n  \u003c% end
        -%\u003e\n\u003c% else -%\u003e\ntitle Update your PXEGrub local template
        to get EFI options\n  root (hd0,0)\n  chainloader +1\n\u003c% end -%\u003e\n\ntitle
        Chainload into bootloader on first disk\n  root (hd0,0)\n  chainloader +1\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.236Z","updated_at":"2019-07-18T15:21:13.712Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"4ff509085cfc33f829abb7a308a08531"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [edb19a75-aa1a-4df4-b06e-0c767c3569bf]
      x-runtime: ['0.040979']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/4
  response:
    body: {string: !!python/unicode '{"id":4,"name":"PXEGrub default local boot","template":"\u003c%#\nkind:
        PXEGrub\nname: PXEGrub default local boot\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#
        Used to boot provisioned hosts, do not associate or change the name. %\u003e\n\u003c%\n  #
        Grub1 only supports numeric default statement, this allows conversion to number.
        First define\n  # array of directories we will search for EFI booloaders:\n  paths
        = [\"fedora\", \"redhat\", \"centos\", \"debian\", \"ubuntu\", \"sles\", \"opensuse\",
        \"Microsoft\", \"EFI\"]\n  # Add remaining entries to it and use this to convert
        to number:\n  items = paths.push(\"local_chain_hd0\")\n  # Read default setting
        but since \"local\" is missing, use the first path available.\n  default_setting
        = global_setting(\"default_pxe_item_local\", paths.first)\n  default_setting
        = paths.first if default_setting == ''local''\n  default_item = items.index(default_setting)
        || 0\n%\u003e\ndefault=\u003c%= default_item %\u003e\ntimeout=20\n\n\u003c%=
        snippet \"pxegrub_chainload\", variables: {paths: paths} %\u003e\n","snippet":false,"template_kind_id":2,"created_at":"2019-07-15T16:12:13.414Z","updated_at":"2019-07-18T15:21:13.776Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"91ce9eab5bd243b3610dbe4df455a79e"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [56a1baf9-e5f1-442c-9928-a5a2f4900f73]
      x-runtime: ['0.037798']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/83
  response:
    body: {string: !!python/unicode '{"id":83,"name":"pxegrub_discovery","template":"\u003c%#\nkind:
        snippet\nname: pxegrub_discovery\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%#\nRHEL
        7 virtio driver does not have persistent naming scheme, causing interfaces\nto
        be named eth0, eth1, etc.. If you want to enable the new persistent naming\nscheme
        and get inteface names like ens3, add net.ifnames=1 to the linuxefi line\nbelow.
        This will not be fixed until RHEL8 due to prevent breaking changes for\nexisting
        systems. See RHBZ#1259015 for more details.\n-%\u003e\n# http://projects.theforeman.org/issues/15997\ntitle
        Foreman Discovery Image - not supported with Grub 1.x\n  kernel boot/fdi-image/vmlinuz0
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=\u003c%= foreman_server_url %\u003e proxy.type=foreman BOOTIF=01-$net_default_mac\n  initrd
        boot/fdi-image/initrd0.img\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.260Z","updated_at":"2019-07-18T15:21:13.850Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"6d850075ae9259e1c2ef8fa5f7ec9582"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [17e8dca4-2864-4de8-a7ef-0d30f51d5b6a]
      x-runtime: ['0.041454']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/5
  response:
    body: {string: !!python/unicode '{"id":5,"name":"PXEGrub global default","template":"\u003c%#\nkind:
        PXEGrub\nname: PXEGrub global default\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#
        Used to boot unknown hosts, do not associate or change the name. %\u003e\n\u003c%\n  #
        Grub1 only supports numeric default statement, this allows conversion to number.
        First define\n  # array of directories we will search for EFI booloaders:\n  paths
        = [\"fedora\", \"redhat\", \"centos\", \"debian\", \"ubuntu\", \"sles\", \"opensuse\",
        \"Microsoft\", \"EFI\"]\n  # Add remaining entries to it and use this to convert
        to number:\n  items = paths.push(\"local_chain_hd0\", \"discovery\")\n  #
        Read default setting but since \"local\" is missing, use the first path available.\n  default_setting
        = global_setting(\"default_pxe_item_global\", paths.first)\n  default_setting
        = paths.first if default_setting == ''local''\n  default_item = items.index(default_setting)
        || 0\n%\u003e\ndefault=\u003c%= default_item %\u003e\ntimeout=20\n\n\u003c%=
        snippet \"pxegrub_chainload\", variables: {paths: paths} %\u003e\n\n\u003c%=
        snippet \"pxegrub_discovery\" %\u003e\n\n\u003c% unless @profiles.nil? -%\u003e\n\u003c%
        for profile in @profiles\n  url = default_template_url(profile[:template],
        profile[:hostgroup])\n  case profile[:pxe_type]\n  when ''kickstart''\n    append
        = \"ks=#{url} ksdevice=bootif network kssendmac ks.sendmac inst.ks.sendmac\"\n  when
        ''preseed''\n    locale = profile[:hostgroup].params[''lang''] || ''en_US''\n    append
        = \"interface=auto url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %\u003e\ntitle \u003c%= \"#{profile[:hostgroup]} - #{profile[:template]}\"
        %\u003e\n  kernel \u003c%= profile[:kernel] %\u003e \u003c%= append %\u003e\n  initrd
        \u003c%= profile[:initrd] %\u003e\n\u003c% end %\u003e\n\u003c% end -%\u003e\n","snippet":false,"template_kind_id":2,"created_at":"2019-07-15T16:12:13.433Z","updated_at":"2019-07-18T15:21:13.915Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"b8608556a608e0ef8efbd2d9ba180bb1"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2c62511c-b51a-428b-b025-746e99436ada]
      x-runtime: ['0.064427']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/17
  response:
    body: {string: !!python/unicode '{"id":17,"name":"PXELinux chain iPXE","template":"\u003c%#\nkind:
        PXELinux\nname: PXELinux chain iPXE\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#\nChainboots
        iPXE/gPXE from PXELinux. Make sure the OS has iPXE template\nassociated and
        file ipxe.lkrn was copied in the TFTP directory (e.g. from\n/usr/share/ipxe/ipxe.lkrn
        or iPXE project web site).\n\nFor more info visit:\nhttp://projects.theforeman.org/projects/foreman/wiki/Fetch_boot_files_via_http_instead_of_TFTP\n%\u003e\nDEFAULT
        linux\nLABEL linux\nKERNEL ipxe.lkrn\nAPPEND dhcp \u0026\u0026 chain \u003c%=
        foreman_url(''iPXE'') %\u003e\nIPAPPEND 2\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.711Z","updated_at":"2019-07-18T15:21:13.981Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"83a7d642642f8300a77d817f6ab5a5fd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [5162de48-ef38-4bbe-9aac-f24e23ce46f8]
      x-runtime: ['0.038104']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/18
  response:
    body: {string: !!python/unicode '{"id":18,"name":"PXELinux chain iPXE UNDI","template":"\u003c%#\nkind:
        PXELinux\nname: PXELinux chain iPXE UNDI\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#\nChainboots
        iPXE/gPXE from PXELinux via UNDI. Make sure the OS has an iPXE\ntemplate associated
        and the file undionly.kpxe was copied into the TFTP\ndirectory as undionly-ipxe.0
        (e.g. from /usr/share/ipxe/undionly.kpxe or\nthe iPXE project web site). Changes
        need to be made in the DHCP\nconfiguration to prevent an endless loop to happen.\n\nFor
        more info visit:\nhttp://projects.theforeman.org/projects/foreman/wiki/Fetch_boot_files_via_http_instead_of_TFTP\n%\u003e\nDEFAULT
        linux\nLABEL linux\nKERNEL undionly-ipxe.0\nIPAPPEND 2\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.731Z","updated_at":"2019-07-18T15:21:14.048Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"69f6f84d19647882286f80a3945426b5"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b3bb9c1a-fe12-4882-9f84-63103eef96e1]
      x-runtime: ['0.037820']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/84
  response:
    body: {string: !!python/unicode '{"id":84,"name":"pxelinux_chainload","template":"\u003c%#\nkind:
        snippet\nname: pxelinux_chainload\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\nLABEL
        local\n  MENU LABEL Default local boot\n  MENU DEFAULT\n  LOCALBOOT 0\n\nLABEL
        local_primary\n  MENU LABEL Default local boot from primary hard drive\n  LOCALBOOT
        0x80\n\nLABEL local_skip\n  MENU LABEL Boot from the next BIOS device\n  LOCALBOOT
        -1\n\nLABEL local_chain_hd0\n  MENU LABEL Chainload the first hard drive (hd0)\n  COM32
        chain.c32\n  APPEND hd0\n\nLABEL local_chain_hd1\n  MENU LABEL Chainload the
        second hard drive (hd1)\n  COM32 chain.c32\n  APPEND hd1\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.282Z","updated_at":"2019-07-18T15:21:14.123Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"0a5a6aee9a5810b0c293ee3714ce7c72"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8d83c9d0-6b70-4824-875b-093eeb4bfb92]
      x-runtime: ['0.037278']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/19
  response:
    body: {string: !!python/unicode '{"id":19,"name":"PXELinux default local boot","template":"\u003c%#\nkind:
        PXELinux\nname: PXELinux default local boot\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#
        Used to boot provisioned hosts, do not associate or change the name. %\u003e\n\nDEFAULT
        menu\nMENU TITLE Booting local disk (ESC to stop)\nTIMEOUT 200\nDEFAULT \u003c%=
        global_setting(\"default_pxe_item_local\", \"local_chain_hd0\") %\u003e\n\n\u003c%=
        snippet \"pxelinux_chainload\" %\u003e\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.751Z","updated_at":"2019-07-18T15:21:14.185Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"df757d795d05516e896c3d9ab8662127"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [df54a2d5-1f10-4cfa-b26c-bfc8e4fdace5]
      x-runtime: ['0.037083']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/20
  response:
    body: {string: !!python/unicode '{"id":20,"name":"PXELinux default memdisk","template":"\u003c%#\nkind:
        PXELinux\nname: PXELinux default memdisk\nmodel: ProvisioningTemplate\noses:\n-
        FreeBSD (memdisk image)\n%\u003e\nDEFAULT memdisk\n\nLABEL memdisk\n    KERNEL
        memdisk\n    APPEND initrd=\u003c%= @initrd %\u003e harddisk raw\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.773Z","updated_at":"2019-07-18T15:21:14.252Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"e7e6e871e5efa98bb414e7f877127636"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [52fbf470-3e64-4b4c-95de-36ee9e4d9600]
      x-runtime: ['0.037295']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/85
  response:
    body: {string: !!python/unicode '{"id":85,"name":"pxelinux_discovery","template":"\u003c%#\nkind:
        snippet\nname: pxelinux_discovery\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%#\ndiscovery
        image is based on CentOS/RHEL and therefor it is affected by https://bugzilla.redhat.com/show_bug.cgi?id=1259015.\nIn
        short, before RHEL 7.2 virtio driver didn''t have the new persistent naming
        scheme, causing interfaces to be named eth0, eth1, etc..\nIf you want to enable
        the new persistent naming scheme and get inteface names like ens3, add net.ifnames=1
        to the APPEND line below.\n-%\u003e\nLABEL discovery\n  MENU LABEL Foreman
        Discovery Image\n  KERNEL boot/fdi-image/vmlinuz0\n  APPEND initrd=boot/fdi-image/initrd0.img
        rootflags=loop root=live:/fdi.iso rootfstype=auto ro rd.live.image acpi=force
        rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0 rd.bootif=0 rd.neednet=0 nokaslr nomodeset
        proxy.url=\u003c%= foreman_server_url %\u003e proxy.type=foreman\n  IPAPPEND
        2\n\n\u003c%#\nChainbooting via iPXE requires an extra script published via
        HTTP:\n\n#!ipxe\nkernel http://foreman_url/pub/vmlinuz0 rootflags=loop root=live:/fdi.iso
        rootfstype=auto ro rd.live.image acpi=force rd.luks=0 rd.md=0 rd.dm=0 rd.lvm=0
        rd.bootif=0 rd.neednet=0 nokaslr nomodeset proxy.url=https://foreman_url proxy.type=foreman
        BOOTIF=01-${net0/mac}\ninitrd http://foreman_url/pub/initrd0.img\nboot\n-%\u003e\nLABEL
        discovery_ipxe\n  MENU LABEL Foreman Discovery Image - iPXE\n  KERNEL ipxe.lkrn\n  APPEND
        dhcp \u0026\u0026 chain \u003c%= foreman_server_url %\u003e/pub/discovery.ipxe\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.304Z","updated_at":"2019-07-18T15:21:14.326Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"7fee3847a41d4f2ed6e41f80d1dbfe48"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [2504aee6-054f-4662-a348-de8c2e1ae1b8]
      x-runtime: ['0.037962']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/21
  response:
    body: {string: !!python/unicode '{"id":21,"name":"PXELinux global default","template":"\u003c%#\nkind:
        PXELinux\nname: PXELinux global default\nmodel: ProvisioningTemplate\n%\u003e\n\u003c%#
        Used to boot unknown hosts, do not associate or change the name. %\u003e\n\nDEFAULT
        menu\nMENU TITLE Booting unknown host (ESC to stop)\nTIMEOUT 200\nONTIMEOUT
        \u003c%= global_setting(\"default_pxe_item_global\", \"local\") %\u003e\n\n\u003c%=
        snippet \"pxelinux_chainload\" %\u003e\n\n\u003c%= snippet \"pxelinux_discovery\"
        %\u003e\n\n\u003c% unless @profiles.nil? -%\u003e\n\u003c% for profile in
        @profiles\n  url = default_template_url(profile[:template], profile[:hostgroup])\n  case
        profile[:pxe_type]\n  when ''kickstart''\n    append = \"ks=#{url} ksdevice=bootif
        network kssendmac ks.sendmac inst.ks.sendmac\"\n  when ''preseed''\n    locale
        = profile[:hostgroup].params[''lang''] || ''en_US''\n    append = \"interface=auto
        url=#{url} ramdisk_size=10800 root=/dev/rd/0 rw auto hostname=unassigned-hostname
        locale=#{locale} console-setup/ask_detect=false console-setup/layout=USA console-setup/variant=USA\"\n  else\n    raise(\"PXE
        type #{profile[:pxe_type]} not supported by template #{template_name}\")\n  end
        %\u003e\nLABEL \u003c%= \"#{profile[:hostgroup]} - #{profile[:template]}\"
        %\u003e\n  KERNEL \u003c%= profile[:kernel] %\u003e\n  APPEND initrd=\u003c%=
        profile[:initrd] %\u003e \u003c%= append %\u003e\n\u003c% end %\u003e\n\u003c%
        end -%\u003e\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.793Z","updated_at":"2019-07-18T15:21:14.391Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"a16af4aa382848a1244d3a5d1dc1e1d8"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b2faf9f7-23c5-4ab5-9199-5d1fb4c46b44]
      x-runtime: ['0.037513']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/86
  response:
    body: {string: !!python/unicode '{"id":86,"name":"rancheros_cloudconfig","template":"\u003c%#\nkind:
        snippet\nname: rancheros_cloudconfig\nmodel: ProvisioningTemplate\nsnippet:
        true\n-%\u003e\n#cloud-config\nhostname: \u003c%= @host.shortname %\u003e\nrancher:\n  network:\n    dns:\n      nameservers:\n\u003c%
        if @host.subnet.dns_primary.present? or @host.subnet.dns_secondary.present?
        -%\u003e\n\u003c% if @host.subnet.dns_primary.present? -%\u003e\n        -
        \u003c%= @host.subnet.dns_primary %\u003e\n\u003c% end -%\u003e\n\u003c% if
        @host.subnet.dns_secondary.present? -%\u003e\n        - \u003c%= @host.subnet.dns_secondary
        %\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n      search:\n        -
        \u003c%= @host.domain %\u003e\n    interfaces:\n      eth*:\n        dhcp:
        true\n\u003c% unless @host.subnet.respond_to?(:dhcp_boot_mode?) -%\u003e\n      eth0:\n        address:
        \u003c%= @host.ip -%\u003e/\u003c%= @host.subnet.cidr %\u003e\n        gateway:
        \u003c%= @host.subnet.gateway %\u003e\n\u003c% end -%\u003e\n  console: debian\nssh_authorized_keys:\n\u003c%-\nusers
        = @host.owner_type == ''Usergroup'' ? @host.owner.all_users : [@host.owner]\nusers.each
        do |user|\n  if user.respond_to?(:ssh_authorized_keys) \u0026\u0026 user.ssh_authorized_keys.any?\n    index
        = 0\n    user.ssh_keys.each do |key|\n      if index == 0\n-%\u003e\n\u003c%=\"  -
        #{key.type} #{key.ssh_key} #{key.comment}\"%\u003e\n\u003c%-\n      else\n-%\u003e\n\u003c%=\"  -
        #{key.type} #{key.ssh_key} #{key.comment} - #{index}\"%\u003e\n\u003c%-\n      end\n      index
        += 1\n    end\n  end\nend\n-%\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.325Z","updated_at":"2019-07-18T15:21:14.465Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"af91c36688caa64f9b849dbfcca4da77"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b7c6edda-036b-483e-9585-aacdb3788d39]
      x-runtime: ['0.037571']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/50
  response:
    body: {string: !!python/unicode '{"id":50,"name":"RancherOS provision","template":"\u003c%#\nkind:
        provision\nname: RancherOS provision\nmodel: ProvisioningTemplate\noses:\n-
        RancherOS\n-%\u003e\n\u003c%= snippet ''rancheros_cloudconfig'' -%\u003e\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.482Z","updated_at":"2019-07-18T15:21:14.540Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"c25014d249299a68e23761a7256cc798"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e94a1264-8e1e-497b-bb55-d7086c8ab062]
      x-runtime: ['0.036878']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/22
  response:
    body: {string: !!python/unicode '{"id":22,"name":"RancherOS PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: RancherOS PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        RancherOS\n-%\u003e\nDEFAULT rancheros\n\nLABEL rancheros\n  KERNEL \u003c%=
        @kernel -%\u003e rancher.state.dev=LABEL=RANCHER_STATE rancher.state.autoformat=[\u003c%=
        host_param(''install-disk'') || ''/dev/sda'' %\u003e] rancher.cloud_init.datasources=[''url:\u003c%=
        foreman_url(''provision'')-%\u003e'']\n  APPEND initrd=\u003c%= @initrd -%\u003e\n\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.834Z","updated_at":"2019-07-18T15:21:14.608Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:23 GMT']
      etag: [W/"953137e07050be445dd813d4eb4f7d2f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [64f40af8-b201-49d4-aaef-59ddfff6068a]
      x-runtime: ['0.039990']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/87
  response:
    body: {string: !!python/unicode '{"id":87,"name":"redhat_register","template":"\u003c%#\nkind:
        snippet\nname: redhat_register\nmodel: ProvisioningTemplate\nsnippet: true\n-%\u003e\n\u003c%#\n#
        Red Hat Registration Snippet\n#\n# General parameters:\n#\n#   redhat_install_agent
        = [true|false]         Install the management agent.  For Spacewalk,\n#                                               this
        is OSAD.  For Katello, this is katello-agent.\n#\n#   redhat_install_host_tools
        = [true|false]    Install the katello-host-tools yum/dnf plugins.\n#\n#   redhat_install_host_tracer_tools
        = [true|false]  Install the katello-host-tools Tracer yum/dnf plugin.\n#\n#   activation_key
        = \u003ckey\u003e                      Activation key string, not needed if
        using\n#                                               subscription-manager
        with username/password\n#\n#   atomic = [true|false]                       Whether
        or not this system is Atomic\n#\n# Parameters for use with subscription-manager
        (Red Hat CDN, Satellite, or Katello)\n#\n#   subscription_manager = ''true''               You''re
        going to use subscription-manager\n#\n#   subscription_manager_username =
        \u003cusername\u003e  Username for subscription-manager\n#\n#   subscription_manager_password
        = \u003cpassword\u003e  Password for subscription-manager\n#\n#   subscription_manager_certpkg_url
        = \u003curl\u003e    Custom certificate package URL\n#\n#   subscription_manager_atomic_url
        = \u003curl\u003e     Script used for configuring Atomic servers\n#                                               for
        subscription-manager\n#\n#   subscription_manager_org = \u003corg name\u003e       Organization
        name, if required\n#\n#   subscription_manager_repos = \u003crepos\u003e        Additional
        repositories to enable\n#                                               after
        registration\n#\n#   subscription_manager_override_repos_cost = \u003ccost\u003e  Override
        repository cost\n#\n#   subscription_manager_pool = \u003cpool\u003e          Specific
        subscription pool to use\n#\n#   http-proxy = \u003chost\u003e                         Proxy
        hostname to be used for registration\n#\n#   http-proxy-port = \u003cport\u003e                    Proxy
        port to be used for registration\n#\n#   http-proxy-user = \u003cuser\u003e                    Proxy
        user to be used for registration\n#\n#   http-proxy-password = \u003cpassword\u003e            Proxy
        password to be used for registration\n#\n#   syspurpose_role                             Sets
        the system purpose role\n#\n#   syspurpose_usage                            Sets
        the system purpose usage\n#\n#   syspurpose_sla                              Sets
        the system purpose SLA\n#\n#   syspurpose_addons                           Sets
        the system purpose add-ons. Separate multiple\n#                                               values
        with commas.\n#\n# Set these parameters if you''re using rhnreg_ks:\n#\n#   spacewalk_host
        = \u003chostname\u003e                 Hostname of Spacewalk server\n#\n%\u003e\n\n\u003c%\n  #
        Katello or subscription-manager:\n  if host_param_true?(''subscription_manager'')
        || host_param(''kt_activation_keys'')\n    registration_type = ''subscription_manager''\n  #
        Spacewalk:\n  elsif host_param(''spacewalk_host'')\n    registration_type
        = ''spacewalk''\n  end if\n%\u003e\n\n\u003c% if registration_type == ''subscription_manager''
        %\u003e\n  \u003c%\n    atomic = @host.operatingsystem.respond_to?(:atomic)
        ? @host.operatingsystem.atomic? : host_param_true?(''atomic'')\n\n    if host_param(''kt_activation_keys'')\n      subscription_manager_certpkg_url
        = subscription_manager_configuration_url(@host)\n      subscription_manager_atomic_url
        = subscription_manager_configuration_url(@host, false)\n      subscription_manager_org
        = @host.rhsm_organization_label\n      activation_key = host_param(''kt_activation_keys'')\n      redhat_install_agent
        = true\n      redhat_install_host_tools = true\n      redhat_install_host_tracer_tools
        = false\n    else\n      subscription_manager_certpkg_url = host_param(''subscription_manager_certpkg_url'')\n      subscription_manager_atomic_url
        = host_param(''subscription_manager_atomic_url'')\n      subscription_manager_org
        = host_param(''subscription_manager_org'')\n      activation_key = host_param(''activation_key'')\n      redhat_install_agent
        = host_param_true?(''redhat_install_agent'')\n      redhat_install_host_tools
        = host_param_true?(''redhat_install_host_tools'')\n      redhat_install_host_tracer_tools
        = host_param_true?(''redhat_install_host_tracer_tools'')\n    end\n  %\u003e\n\n  echo
        ##############################################################\n  echo #################
        SUBSCRIPTION MANAGER #######################\n  echo ##############################################################\n  echo\n  echo
        \"Starting the subscription-manager registration process\"\n\n  \u003c% if
        !atomic %\u003e\n    if [ -f /usr/bin/dnf ]; then\n      dnf -y install subscription-manager\n    else\n      yum
        -t -y install subscription-manager\n    fi\n  \u003c% end %\u003e\n\n  \u003c%-
        if (host_param(''syspurpose_role'') || host_param(''syspurpose_usage'') ||
        host_param(''syspurpose_sla'') || host_param(''syspurpose_addons'')) %\u003e\n    \u003c%-
        if !atomic %\u003e\n      if [ -f /usr/bin/dnf ]; then\n        dnf -y install
        subscription-manager-syspurpose\n      else\n        yum -t -y install subscription-manager-syspurpose\n      fi\n    \u003c%-
        end %\u003e\n\n    if [ -f /usr/sbin/syspurpose ]; then\n      \u003c%- if
        host_param(''syspurpose_role'') %\u003e\n        syspurpose set-role \"\u003c%=
        host_param(''syspurpose_role'') %\u003e\"\n      \u003c%- end %\u003e\n      \u003c%-
        if host_param(''syspurpose_usage'') %\u003e\n        syspurpose set-usage
        \"\u003c%= host_param(''syspurpose_usage'') %\u003e\"\n      \u003c%- end
        %\u003e\n      \u003c%- if host_param(''syspurpose_sla'') %\u003e\n        syspurpose
        set-sla \"\u003c%= host_param(''syspurpose_sla'') %\u003e\"\n      \u003c%-
        end %\u003e\n      \u003c%- if host_param(''syspurpose_addons'') %\u003e\n        \u003c%-
        addons = host_param(''syspurpose_addons'').split('','')\n              .map
        { |add_on| \"''#{add_on.strip}''\" }.join(\" \") %\u003e\n        syspurpose
        add-addons \u003c%= addons %\u003e\n      \u003c%- end %\u003e\n    else\n      echo
        \"Syspurpose CLI not found.\"\n    fi\n  \u003c% end %\u003e\n\n  \u003c%
        if host_param(''http-proxy'') %\u003e\n    subscription-manager config --server.proxy_hostname=''\u003c%=
        host_param(\"http-proxy\") %\u003e''\n    \u003c% if host_param(''http-proxy-user'')
        %\u003e\n      subscription-manager config --server.proxy_user=''\u003c%=
        host_param(\"http-proxy-user\") %\u003e''\n    \u003c% end %\u003e\n    \u003c%
        if host_param(''http-proxy-password'') %\u003e\n      subscription-manager
        config --server.proxy_password=''\u003c%= host_param(\"http-proxy-password\")
        %\u003e''\n    \u003c% end %\u003e\n    \u003c% if host_param(''http-proxy-port'')
        %\u003e\n      subscription-manager config --server.proxy_port=''\u003c%=
        host_param(\"http-proxy-port\") %\u003e''\n    \u003c% end %\u003e\n  \u003c%
        end %\u003e\n\n  \u003c% if atomic %\u003e\n    curl -s \u003c%= subscription_manager_atomic_url
        %\u003e | IS_ATOMIC=true bash\n  \u003c% elsif subscription_manager_certpkg_url
        %\u003e\n    rpm -Uvh \u003c%= subscription_manager_certpkg_url %\u003e\n  \u003c%
        end %\u003e\n\n  \u003c% if host_param(''subscription_manager_username'')
        \u0026\u0026 host_param(''subscription_manager_password'') %\u003e\n    \u003c%
        if host_param(''subscription_manager_pool'') %\u003e\n      subscription-manager
        register --name=\"\u003c%= @host.name %\u003e\" --username=''\u003c%= host_param(\"subscription_manager_username\")
        %\u003e'' --password=''\u003c%= host_param(\"subscription_manager_password\")
        %\u003e''\n      subscription-manager attach --pool=''\u003c%= host_param(''subscription_manager_pool'')
        %\u003e''\n    \u003c% else %\u003e\n      subscription-manager register --name=\"\u003c%=
        @host.name %\u003e\" --username=''\u003c%= host_param(\"subscription_manager_username\")
        %\u003e'' --password=''\u003c%= host_param(\"subscription_manager_password\")
        %\u003e'' --auto-attach\n    \u003c% end %\u003e\n\n  \u003c% elsif activation_key
        %\u003e\n    subscription-manager register --name=\"\u003c%= @host.name %\u003e\"
        --org=''\u003c%= subscription_manager_org %\u003e'' --activationkey=''\u003c%=
        activation_key %\u003e''\n  \u003c% else %\u003e\n    echo \"No activation
        key found: Not registering to subscription manager\"\n  \u003c% end %\u003e\n\n  \u003c%
        if host_param(''subscription_manager_repos'') %\u003e\n    # workaround for
        RHEL 6.4 bug https://bugzilla.redhat.com/show_bug.cgi?id=1008016\n    subscription-manager
        repos --list \u003e /dev/null\n    \u003c%= \"subscription-manager repos --enable
        #{host_param(''subscription_manager_repos'').gsub('','', '' --enable'')}\"
        %\u003e\n  \u003c% end %\u003e\n\n  \u003c% if host_param(''subscription_manager_override_repos_cost'')
        %\u003e\n    for repo in $(subscription-manager repos --list-enabled | grep
        \"Repo ID:\" | awk -F'' '' ''{ print $3 }''); do\n      \u003c%= \"subscription-manager
        repo-override --list --repo $repo | grep ''cost:'' \u0026\u003e/dev/null ||
        subscription-manager repo-override --repo $repo --add=cost:#{host_param(''subscription_manager_override_repos_cost'')}\"
        %\u003e\n    done\n  \u003c% end %\u003e\n\n  \u003c% if !atomic %\u003e\n    \u003c%
        if redhat_install_agent || redhat_install_host_tools || redhat_install_host_tracer_tools
        %\u003e\n       if [ -f /usr/bin/dnf ]; then\n         PACKAGE_MAN=\"dnf -y\"\n       else\n         PACKAGE_MAN=\"yum
        -t -y\"\n       fi\n    \u003c% end %\u003e\n\n    \u003c% if redhat_install_agent
        %\u003e\n      $PACKAGE_MAN install katello-agent\n    \u003c% elsif redhat_install_host_tools
        %\u003e\n      $PACKAGE_MAN install katello-host-tools\n    \u003c% end %\u003e\n\n    \u003c%
        if redhat_install_host_tracer_tools %\u003e\n      $PACKAGE_MAN install katello-host-tools-tracer\n    \u003c%
        end %\u003e\n  \u003c% end %\u003e\n\u003c% end %\u003e\n\n\u003c% if registration_type
        == ''spacewalk'' %\u003e\n  echo ##############################################################\n  echo
        ################ SPACEWALK REGISTRATION ######################\n  echo ##############################################################\n\n  \u003c%
        if host_param(''activation_key'') %\u003e\n    rhn_activation_key=\"\u003c%=
        host_param(''activation_key'') -%\u003e\"\n    satellite_hostname=\"\u003c%=
        host_param(''spacewalk_host'') -%\u003e\"\n    rhn_cert_file=\"RHN-ORG-TRUSTED-SSL-CERT\"\n\n    echo
        \"Registering to RHN Satellite at [$satellite_hostname]\"\n    echo \"Using
        Registration Key [$rhn_activation_key]\"\n\n    # Obtain our RHN Satellite
        Certificate\n    echo \"Obtaining RHN SSL certificate\"\n    curl -o /usr/share/rhn/$rhn_cert_file
        -k https://$satellite_hostname/pub/$rhn_cert_file\n\n    \u003c% if @host.operatingsystem.name
        == ''SLES'' -%\u003e\n      # If SLES then add CA Cert to CA Certs for curl\n      cp
        /usr/share/rhn/$rhn_cert_file /etc/ssl/certs/\n      ln -s /etc/ssl/certs/$rhn_cert_file
        /etc/ssl/certs/`openssl x509 -hash -noout -in /etc/ssl/certs/$rhn_cert_file`.0\n    \u003c%
        end -%\u003e\n\n    # Update our up2date configuration file\n    echo \"Updating
        SSL CA Certificate to /usr/share/rhn/$rhn_cert_file\"\n    sed -i -e \"s|^sslCACert=.*$|sslCACert=/usr/share/rhn/$rhn_cert_file|\"
        /etc/sysconfig/rhn/up2date\n\n    # Update our Satellite Hostname\n    echo
        \"Updating Satellite Hostname to [$satellite_hostname]\"\n    sed -i -e \"s|^serverURL=.*$|serverURL=https://$satellite_hostname/XMLRPC|\"
        /etc/sysconfig/rhn/up2date\n    sed -i -e \"s|^noSSLServerURL=.*$|noSSLServerURL=https://$satellite_hostname/XMLRPC|\"
        /etc/sysconfig/rhn/up2date\n\n    # Restart messagebus/HAL to try and prevent
        hardware detection errors in rhnreg_ks\n    echo \"Restarting services...\"\n    \u003c%
        if @host.operatingsystem.name == ''SLES'' \u0026\u0026 @host.operatingsystem.major.to_i
        \u003c 12 -%\u003e\n      service haldaemon restart\n    \u003c% else -%\u003e\n      service
        messagebus restart\n      service hald restart\n    \u003c% end -%\u003e\n\n    #
        Now, perform our registration\n    #  (might get hardware errors here, due
        to dbus/messagebus lameness. These are safe to ignore.)\n    echo -n \"Performing
        RHN Registration... \"\n    rhnreg_ks --activationkey=$rhn_activation_key\n    echo
        \"done.\"\n\n    # Check we registered\n    echo -n \"Checking System Registration...
        \"\n    if ! rhn_check; then\n        echo \"FAILED\"\n        echo \" \u003e\u003e
        RHN Registration FAILED. Please Investigate. \u003c\u003c\"\n    else\n        echo
        \"registration successful.\"\n    fi\n\n    \u003c% if host_param_true?(''redhat_install_agent'')
        %\u003e\n    if [ -f /usr/bin/dnf ]; then\n      dnf -y install osad\n    else\n      yum
        -t -y install osad\n    fi\n    \u003c% end %\u003e\n  \u003c% else %\u003e\n    echo
        \"No activation key found: Not registering\"\n  \u003c% end %\u003e\n\u003c%
        end %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.347Z","updated_at":"2019-07-18T15:21:14.682Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"74c2bebaa0c6dda6805e3c3633bcb64a"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8ba400a3-c233-4e7e-be6b-2c4d607c0e75]
      x-runtime: ['0.039589']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/88
  response:
    body: {string: !!python/unicode '{"id":88,"name":"remote_execution_ssh_keys","template":"\u003c%#\nkind:
        snippet\nname: remote_execution_ssh_keys\nmodel: ProvisioningTemplate\nsnippet:
        true\n%\u003e\n# SSH keys setup snippet for Remote Execution plugin\n#\n#
        Parameters:\n#\n# remote_execution_ssh_keys: public keys to be put in ~/.ssh/authorized_keys\n#\n#
        remote_execution_ssh_user: user for which remote_execution_ssh_keys will be\n#                            authorized\n#\n#
        remote_execution_create_user: create user if it not already existing\n#\n#
        remote_execution_effective_user_method: method to switch from ssh user to\n#                                         effective
        user\n#\n# This template sets up SSH keys in any host so that as long as your
        public\n# SSH key is in remote_execution_ssh_keys, you can SSH into a host.
        This \n# works in combination with Remote Execution plugin by querying smart
        proxies\n# to build an array.\n#\n# To use this snippet without the plugin
        provide the SSH keys as host parameter\n# remote_execution_ssh_keys. It expects
        the same format like the authorized_keys\n# file.\n\n\n\u003c% if !host_param(''remote_execution_ssh_keys'').blank?
        %\u003e\n\u003c% ssh_user = host_param(''remote_execution_ssh_user'') || ''root''
        %\u003e\n\nuser_exists=false\ngetent passwd \u003c%= ssh_user %\u003e \u003e/dev/null
        2\u003e\u00261 \u0026\u0026 user_exists=true\n\n\u003c% if ssh_user != ''root''
        \u0026\u0026 host_param_true?(''remote_execution_create_user'') -%\u003e\nif
        ! $user_exists; then\n  useradd -m \u003c%= ssh_user %\u003e \u0026\u0026
        user_exists=true\nfi\n\u003c% end -%\u003e\n\nif $user_exists; then\n\u003c%
        ssh_path = \"~#{ssh_user}/.ssh\" %\u003e\n\n  mkdir -p \u003c%= ssh_path %\u003e\n\n  cat
        \u003c\u003c EOF \u003e\u003e \u003c%= ssh_path %\u003e/authorized_keys\n\u003c%=
        host_param(''remote_execution_ssh_keys'').is_a?(String) ? host_param(''remote_execution_ssh_keys'')
        : host_param(''remote_execution_ssh_keys'').join(\"\\n\") %\u003e\nEOF\n\n  chmod
        0700 \u003c%= ssh_path %\u003e\n  chmod 0600 \u003c%= ssh_path %\u003e/authorized_keys\n  chown
        -R \u003c%= \"#{ssh_user}:\" %\u003e \u003c%= ssh_path %\u003e\n\n  # Restore
        SELinux context with restorecon, if it''s available:\n  command -v restorecon
        \u0026\u0026 restorecon -RvF \u003c%= ssh_path %\u003e || true\n  \n\u003c%
        if ssh_user != ''root'' \u0026\u0026 host_param(''remote_execution_effective_user_method'')
        == ''sudo'' -%\u003e\n\u003c% if @host.operatingsystem.family == ''Redhat''
        || @host.operatingsystem.family == ''Debian'' -%\u003e\necho \"\u003c%= ssh_user
        %\u003e ALL = (root) NOPASSWD : ALL\nDefaults:\u003c%= ssh_user %\u003e !requiretty\"
        \u003e /etc/sudoers.d/\u003c%= ssh_user %\u003e\n\u003c% elsif @host.operatingsystem.family
        == ''Suse'' -%\u003e\necho \"\u003c%= ssh_user %\u003e ALL = (root) NOPASSWD
        : ALL\nDefaults:\u003c%= ssh_user %\u003e !targetpw\" \u003e\u003e /etc/sudoers\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\nelse\n  echo ''The remote_execution_ssh_user
        does not exist and remote_execution_create_user is not set to true.  remote_execution_ssh_keys
        snippet will not install keys''\nfi\n\u003c% end %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.369Z","updated_at":"2019-07-18T15:21:14.753Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"3e780d4f357bb791554e0b41734d8565"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [e881970d-213e-422f-b857-5c29ab11e861]
      x-runtime: ['0.038913']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/89
  response:
    body: {string: !!python/unicode '{"id":89,"name":"saltstack_minion","template":"\u003c%#\nkind:
        snippet\nname: saltstack_minion\nmodel: ProvisioningTemplate\nsnippet: true\n%\u003e\nmaster:
        \u003c%= host_param(''salt_master'') %\u003e\nlog_level: warning\n\n\u003c%#\n#
        Grains (http://docs.saltstack.com/en/latest/topics/targeting/grains.html#grains-in-the-minion-config)\n#\n#
        Possible parameters are:\n#\n# * {''cluster'': ''alpha''}\n# * {''roles'':
        [''webserver'', ''frontend'']}\n#\n%\u003e\ngrains: \u003c%= host_param(''salt_grains'')
        ? host_param(''salt_grains'') : ''{}'' %\u003e\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.391Z","updated_at":"2019-07-18T15:21:14.825Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"4a7d2fd19a80d948b9c92e1a37ec9e53"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [b1a7fdd6-9f1c-461e-affd-e5d9e03402b2]
      x-runtime: ['0.038476']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/90
  response:
    body: {string: !!python/unicode '{"id":90,"name":"saltstack_setup","template":"\u003c%#\nkind:
        snippet\nname: saltstack_setup\nmodel: ProvisioningTemplate\ndescription:
        this snippet will configure the Saltstack Minion\nsnippet: true\n%\u003e\n\u003c%\netc_path
        = (@host.operatingsystem.family == ''Freebsd'') ? ''/usr/local/etc/salt''
        : ''/etc/salt''\nbin_path = (@host.operatingsystem.family == ''Freebsd'')
        ? ''/usr/local/bin'' : ''/usr/bin''\n%\u003e\n\n\u003c% if @host.operatingsystem.family
        == ''Debian'' -%\u003e\napt-get update\napt-get install -y salt-minion\n\u003c%
        elsif @host.operatingsystem.family == ''Freebsd'' -%\u003e\npkg install -y
        py27-salt\n\u003c% elsif @host.operatingsystem.family == ''Redhat'' -%\u003e\nyum
        -t -y install salt-minion\n\u003c% end -%\u003e\n\ncat \u003e \u003c%= etc_path
        %\u003e/minion \u003c\u003c EOF\n\u003c%= snippet ''saltstack_minion'' %\u003e\nEOF\n\n\u003c%
        if @host.operatingsystem.family == ''Freebsd'' -%\u003e\necho ''salt_minion_enable=\"YES\"''
        \u003e\u003e/etc/rc.conf\necho ''salt_minion_paths=\"/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin\"''
        \u003e\u003e/etc/rc.conf\n\u003c% elsif @host.operatingsystem.family == ''Redhat''
        -%\u003e\n/sbin/chkconfig --level 345 salt-minion on\n\u003c% elsif @host.operatingsystem.family
        == ''Suse'' -%\u003e\n/sbin/chkconfig salt-minion on -f\n\u003c% end -%\u003e\n\n\u003c%=
        bin_path %\u003e/salt-call --no-color --grains \u003e/dev/null\n","snippet":true,"template_kind_id":null,"created_at":"2019-07-15T16:12:15.415Z","updated_at":"2019-07-18T15:21:14.895Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"5406357ff52bce2b018c7382b30b4bb4"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [baf24c95-d77c-4ed5-8089-924de79eb056]
      x-runtime: ['0.037255']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/94
  response:
    body: {string: !!python/unicode '{"id":94,"name":"UserData default","template":"\u003c%#\nkind:
        user_data\nname: UserData default\nmodel: ProvisioningTemplate\noses:\n- CentOS\n-
        Fedora\n- Debian\n- Ubuntu\n-%\u003e\n\u003c%#\nThis template accepts the
        following parameters:\n- ssh_pwauth: boolean (default=true unless ssh_authorized_keys)\n-
        ssh_authorized_keys: string w newline seperated keys (default=\"\")\n- package_upgrade:
        boolean (default=false)\n- reboot: boolean (default=false)\n-%\u003e\n\u003c%\n  ssh_pwauth
        = host_param(''ssh_pwauth'') ? host_param_true?(''ssh_pwauth'') : !host_param(''ssh_authorized_keys'')\n  rhel_compatible
        = @host.operatingsystem.family == ''Redhat'' \u0026\u0026 @host.operatingsystem.name
        != ''Fedora''\n  # safemode renderer does not support unary negation\n  pm_set
        = @host.puppetmaster.empty? ? false : true\n  puppet_enabled = pm_set || host_param_true?(''force-puppet'')\n  salt_enabled
        = host_param(''salt_master'') ? true : false\n  chef_enabled = @host.respond_to?(:chef_proxy)
        \u0026\u0026 @host.chef_proxy\n-%\u003e\n#cloud-config\nhostname: \u003c%=
        @host.shortname %\u003e\nfqdn: \u003c%= @host %\u003e\nmanage_etc_hosts: true\n\u003c%
        if ssh_pwauth -%\u003e\n\u003c%# Don''t enable this in production. It is very
        insecure! Use ssh_authorized_keys instead...\n    http://cloudinit.readthedocs.io/en/latest/topics/examples.html#including-users-and-groups
        -%\u003e\nssh_pwauth: true\ngroups:\n- admin\nusers:\n- default\n- name: admin\n  primary-group:
        admin\n  groups: users\n  shell: /bin/bash\n  sudo: [''ALL=(ALL) ALL'']\n  lock-passwd:
        false\n  passwd: \u003c%= @host.root_pass %\u003e\n\u003c% end -%\u003e\n\u003c%
        if host_param(''ssh_authorized_keys'') -%\u003e\nssh_authorized_keys:\n\u003c%
        host_param(''ssh_authorized_keys'').split(\"\\n\").each do |ssh_key| -%\u003e\n-
        \u003c%= ssh_key %\u003e\n\u003c% end -%\u003e\n\u003c% end -%\u003e\n\n\u003c%
        if host_param_true?(''package_upgrade'') -%\u003e\npackage_upgrade: true\n\u003c%
        end -%\u003e\n\nruncmd:\n\u003c% if rhel_compatible -%\u003e\n- |\n\u003c%=
        indent(2) { snippet(''epel'') } %\u003e\n\u003c% end -%\u003e\n- |\n\u003c%=
        indent(2) { snippet(''remote_execution_ssh_keys'') } %\u003e\n\u003c% if chef_enabled
        -%\u003e\n- |\n\u003c%= indent(2) { snippet(''chef_client'') } %\u003e\n\u003c%
        end -%\u003e\n\u003c% if puppet_enabled -%\u003e\n- |\n\u003c%= indent(2)
        { snippet(''puppetlabs_repo'') } %\u003e\n- |\n\u003c%= indent(2) { snippet(''puppet_setup'')
        } %\u003e\n\u003c% end -%\u003e\n\u003c% if salt_enabled -%\u003e\n- |\n\u003c%=
        indent(2) { snippet(''saltstack_setup'') } %\u003e\n\u003c% end -%\u003e\n\n\u003c%#
        Contact Foreman to confirm instance is built -%\u003e\nphone_home:\n  url:
        \u003c%= foreman_url(''built'') %\u003e\n  post: []\n  tries: 10\n\n\u003c%
        if host_param_true?(''reboot'') -%\u003e\npower_state:\n  mode: reboot\n  timeout:
        30\n  condition: true\n\u003c% end -%\u003e\n","snippet":false,"template_kind_id":8,"created_at":"2019-07-15T16:12:15.505Z","updated_at":"2019-07-18T15:21:14.960Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"050c36a2d16c865a88d03a476d803e36"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8c82f5fa-074e-44df-b354-01859ccf2a6c]
      x-runtime: ['0.037773']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/23
  response:
    body: {string: !!python/unicode '{"id":23,"name":"WAIK default PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: WAIK default PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        Windows\n%\u003e\nDEFAULT winPE\n\nLABEL winPE\n    KERNEL /Boot/startrom.0\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.858Z","updated_at":"2019-07-18T15:21:15.029Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"6ea12150b67133815c577a7f2df6ac9f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [f9adc202-88a3-4eff-9ce9-3504c6cf872c]
      x-runtime: ['0.037702']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/51
  response:
    body: {string: !!python/unicode '{"id":51,"name":"XenServer default answerfile","template":"\u003c%#\nkind:
        provision\nname: XenServer default answerfile\nmodel: ProvisioningTemplate\noses:\n-
        XenServer\n-%\u003e\n\u003c%\n  subnet = @host.subnet\n  dhcp = subnet.dhcp_boot_mode?\n  interface_name
        = @host.primary_interface.identifier.blank? ? ''eth0'' : @host.primary_interface.identifier\n-%\u003e\n\u003c?xml
        version=\"1.0\"?\u003e\n\u003cinstallation mode=\"fresh\" srtype=\"lvm\"\u003e\n\u003c%=
        @host.diskLayout -%\u003e\n  \u003ckeymap\u003e\u003c%= host_param(''keyboard'')
        || ''us'' %\u003e\u003c/keymap\u003e\n  \u003chostname\u003e\u003c%= @host.shortname
        %\u003e\u003c/hostname\u003e\n  \u003croot-password type=\"hash\"\u003e\u003c%=
        root_pass %\u003e\u003c/root-password\u003e\n  \u003csource type=\"url\"\u003e\u003c%=
        @mediapath %\u003e\u003c/source\u003e\n  \u003cadmin-interface name=\"\u003c%=
        interface_name %\u003e\" proto=\"\u003c%= dhcp ? ''dhcp'' : ''static'' %\u003e\"\u003e\n\u003c%
        unless dhcp -%\u003e\n    \u003cip\u003e\u003c%= @host.ip %\u003e\u003c/ip\u003e\n    \u003csubnet-mask\u003e\u003c%=
        subnet.mask %\u003e\u003c/subnet-mask\u003e\n\u003c% if subnet.gateway.present?
        -%\u003e\n    \u003cgateway\u003e\u003c%= subnet.gateway %\u003e\u003c/gateway\u003e\n\u003c%
        end -%\u003e\n\u003c% end -%\u003e\n  \u003c/admin-interface\u003e\n\u003c%
        if subnet.dns_primary.present? -%\u003e\n  \u003cname-server\u003e\u003c%=
        subnet.dns_primary %\u003e\u003c/name-server\u003e\n\u003c% end -%\u003e\n\u003c%
        if subnet.dns_secondary.present? -%\u003e\n  \u003cname-server\u003e\u003c%=
        subnet.dns_secondary %\u003e\u003c/name-server\u003e\n\u003c% end -%\u003e\n  \u003cntp-server\u003e\u003c%=
        host_param(''ntp-server'') || ''pool.ntp.org'' %\u003e\u003c/ntp-server\u003e\n  \u003ctimezone\u003e\u003c%=
        host_param(''time-zone'') || ''UTC'' %\u003e\u003c/timezone\u003e\n  \u003ctime-config-method\u003entp\u003c/time-config-method\u003e\n  \u003cscript
        stage=\"installation-complete\" type=\"url\"\u003e\n    \u003c%= foreman_url(''finish'')
        %\u003e\n  \u003c/script\u003e\n\u003c/installation\u003e\n","snippet":false,"template_kind_id":5,"created_at":"2019-07-15T16:12:14.505Z","updated_at":"2019-07-18T15:21:15.098Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"255b7eff88c5fd73422a6de5c135a477"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8fc8be55-c489-4561-8f78-b7cfcc8cbebe]
      x-runtime: ['0.037135']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/32
  response:
    body: {string: !!python/unicode '{"id":32,"name":"XenServer default finish","template":"\u003c%#\nkind:
        finish\nname: XenServer default finish\nmodel: ProvisioningTemplate\noses:\n-
        XenServer\n-%\u003e\n#!/bin/bash\n\u003c%= snippet ''built'' %\u003e\n","snippet":false,"template_kind_id":6,"created_at":"2019-07-15T16:12:14.081Z","updated_at":"2019-07-18T15:21:15.164Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"5553ccdf2cb25f9d6d18b977055d201f"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [8eb45681-df76-4405-a746-36c522f9be77]
      x-runtime: ['0.037263']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json;version=2]
      Content-Length: ['0']
      Cookie: [request_method=DELETE; _session_id=ae41c26b21ef2b768294c787042cba4e]
    method: DELETE
    uri: https://centos7-foreman-1-22/api/provisioning_templates/24
  response:
    body: {string: !!python/unicode '{"id":24,"name":"XenServer default PXELinux","template":"\u003c%#\nkind:
        PXELinux\nname: XenServer default PXELinux\nmodel: ProvisioningTemplate\noses:\n-
        XenServer\n%\u003e\ndefault xenserver\nlabel xenserver\nkernel mboot.c32\nappend
        \u003c%= @xen %\u003e dom0_max_vcpus=1-2 dom0_mem=752M,max:752M com1=115200,8n1
        console=com1,vga --- \u003c%= @kernel -%\u003e xencons=hvc console=hvc0 console=tty0
        answerfile=\u003c%= foreman_url(''provision'')%\u003e install --- \u003c%=
        @initrd %\u003e\nIPAPPEND 2\n","snippet":false,"template_kind_id":1,"created_at":"2019-07-15T16:12:13.881Z","updated_at":"2019-07-18T15:21:15.231Z","locked":false,"default":true,"vendor":"Foreman","os_family":null}'}
    headers:
      apipie-checksum: [d3e1ab676c84fc216ffc13da25fd35b92959027b]
      cache-control: ['max-age=0, private, must-revalidate']
      content-security-policy: ['default-src ''self''; child-src ''self''; connect-src
          ''self'' ws: wss:; img-src ''self'' data: *.gravatar.com; script-src ''unsafe-eval''
          ''unsafe-inline'' ''self''; style-src ''unsafe-inline'' ''self''']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 18 Jul 2019 15:21:24 GMT']
      etag: [W/"f0c2180a9929a436901cf5c9b613f7dd"]
      foreman_api_version: ['2']
      foreman_version: [1.22.0]
      server: [Apache]
      status: [200 OK]
      strict-transport-security: [max-age=631139040; includeSubdomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-download-options: [noopen]
      x-frame-options: [sameorigin]
      x-permitted-cross-domain-policies: [none]
      x-powered-by: [Phusion Passenger 4.0.53]
      x-request-id: [4d7cb987-8e7d-4d91-a0e8-1bca13b04cfc]
      x-runtime: ['0.038383']
      x-xss-protection: [1; mode=block]
    status: {code: 200, message: OK}
version: 1
