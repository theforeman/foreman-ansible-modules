

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foreman Ansible Modules &mdash; Foreman Ansible Modules  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/antsibull-minimal.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Theforeman.Foreman" href="plugins/index.html" />
    <link rel="prev" title="Welcome to Foreman Ansible Modules’ documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Foreman Ansible Modules
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Foreman Ansible Modules </a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#support">Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-foreman-and-plugins-versions">Supported Foreman and plugins versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-ansible-versions">Supported Ansible Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-python-versions">Supported Python Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-from-ansible-galaxy">Installation from Ansible Galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-via-packages">Installation via packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-from-source">Installation From Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-from-github-repository">Installation from Github Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-and-installing-the-collection-locally">Building and Installing the Collection Locally</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#foreman-ansible-roles">Foreman Ansible Roles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-role-variables">Common Role Variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Theforeman.Foreman</a></li>
<li class="toctree-l1"><a class="reference internal" href="roles/index.html">Role Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="cvmanager.html">Migrating from <code class="docutils literal notranslate"><span class="pre">cvmanager</span></code> to Foreman Ansible Modules</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developing.html">How to write modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html"><code class="docutils literal notranslate"><span class="pre">foreman_helper</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Foreman Ansible Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Releasing the collection</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Foreman Ansible Modules</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Foreman Ansible Modules </li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="foreman-ansible-modules-build-status">
<h1>Foreman Ansible Modules <img alt="Build Status" src="https://github.com/theforeman/foreman-ansible-modules/workflows/CI/badge.svg" /><a class="headerlink" href="#foreman-ansible-modules-build-status" title="Link to this heading"></a></h1>
<p>Ansible modules for interacting with the Foreman API and various plugin APIs such as Katello.</p>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h2>
<p>A list of all modules and their documentation can be found at <a class="reference external" href="https://theforeman.org/plugins/foreman-ansible-modules/">theforeman.org/plugins/foreman-ansible-modules</a>.</p>
</section>
<section id="support">
<h2>Support<a class="headerlink" href="#support" title="Link to this heading"></a></h2>
<section id="supported-foreman-and-plugins-versions">
<h3>Supported Foreman and plugins versions<a class="headerlink" href="#supported-foreman-and-plugins-versions" title="Link to this heading"></a></h3>
<p>Modules should support any currently stable Foreman release and the matching set of plugins.
Some modules have additional features/arguments that are only applied when the corresponding plugin is installed.</p>
<p>We actively test the modules against the latest stable Foreman release and the matching set of plugins.</p>
</section>
<section id="supported-ansible-versions">
<h3>Supported Ansible Versions<a class="headerlink" href="#supported-ansible-versions" title="Link to this heading"></a></h3>
<p>The supported Ansible versions are aligned with currently maintained Ansible versions that support Collections (2.9+).
You can find the list of maintained Ansible versions <a class="reference external" href="https://docs.ansible.com/ansible/devel/reference_appendices/release_and_maintenance.html">here</a>.</p>
</section>
<section id="supported-python-versions">
<h3>Supported Python Versions<a class="headerlink" href="#supported-python-versions" title="Link to this heading"></a></h3>
<p>Ansible only supports Python 2.7 and 3.5 (and higher). These are also the only Python versions we develop and test the modules against.</p>
</section>
<section id="known-issues">
<h3>Known issues<a class="headerlink" href="#known-issues" title="Link to this heading"></a></h3>
<ul>
<li><p>Some modules, e.g. <code class="docutils literal notranslate"><span class="pre">repository_sync</span></code> and <code class="docutils literal notranslate"><span class="pre">content_view_version</span></code>, trigger long running tasks on the server side. It might be beneficial to your playbook to wait for their completion in an asynchronous manner.
As Ansible has facilities to do so, the modules will wait unconditionally. See the <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_async.html">Ansible documentation</a> for putting tasks in the background.
Please make sure to set a high enough <code class="docutils literal notranslate"><span class="pre">async</span></code> value, as otherwise Ansible might abort the execution of the module while there is still a task running on the server, making status reporting fail.</p></li>
<li><p>According to <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_loops.html">Ansible documentation</a>, using loop over Ansible resources can leak sensitive data. This applies to all modules, but especially those which require more secrets than the API credentials (<code class="docutils literal notranslate"><span class="pre">auth_source_ldap</span></code>, <code class="docutils literal notranslate"><span class="pre">compute_resource</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">hostgroup</span></code>, <code class="docutils literal notranslate"><span class="pre">http_proxy</span></code>, <code class="docutils literal notranslate"><span class="pre">image</span></code>, <code class="docutils literal notranslate"><span class="pre">repository</span></code>, <code class="docutils literal notranslate"><span class="pre">scc_account</span></code>, <code class="docutils literal notranslate"><span class="pre">user</span></code>). You can prevent this by using <code class="docutils literal notranslate"><span class="pre">no_log:</span> <span class="pre">true</span></code> on the task.</p>
<p>eg:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create compute resources</span>
<span class="w">  </span><span class="nt">theforeman.foreman.compute_resource</span><span class="p">:</span>
<span class="w">    </span><span class="nt">server_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://foreman.example.com</span>
<span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">changeme</span>
<span class="w">    </span><span class="nt">validate_certs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.name</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">organizations</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.organizations</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">locations</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.locations</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.description</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.provider</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">provider_params</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.provider_params</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(omit)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.state</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">default(&#39;present&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">loop</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">compute_resources</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">no_log</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</li>
<li><p>Modules require write access to <code class="docutils literal notranslate"><span class="pre">~/.cache</span></code> (or wherever <code class="docutils literal notranslate"><span class="pre">$XDG_CACHE_HOME</span></code> points at). Otherwise the API documentation cannot be downloaded and you get errors like <code class="docutils literal notranslate"><span class="pre">[Errno</span> <span class="pre">13]</span> <span class="pre">Permission</span> <span class="pre">denied:</span> <span class="pre">'/home/runner/.cache/apypie</span></code>. If on your system <code class="docutils literal notranslate"><span class="pre">~/.cache</span></code> is not writeable, please set the <code class="docutils literal notranslate"><span class="pre">$XDG_CACHE_HOME</span></code> environment variable to a directory Ansible can write to.</p></li>
</ul>
</section>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>There are currently two ways to use the modules in your setup: install directly from Ansible Galaxy or via packages.</p>
<section id="installation-from-ansible-galaxy">
<h3>Installation from Ansible Galaxy<a class="headerlink" href="#installation-from-ansible-galaxy" title="Link to this heading"></a></h3>
<p>You can install the collection from <a class="reference external" href="https://galaxy.ansible.com/theforeman/foreman">Ansible Galaxy</a> by running <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">install</span> <span class="pre">theforeman.foreman</span></code>.</p>
<p>After the installation, the modules are available as <code class="docutils literal notranslate"><span class="pre">theforeman.foreman.&lt;module_name&gt;</span></code>. Please see the <a class="reference external" href="https://docs.ansible.com/ansible/devel/user_guide/collections_using.html">Using Ansible collections documentation</a> for further details.</p>
</section>
<section id="installation-via-packages">
<h3>Installation via packages<a class="headerlink" href="#installation-via-packages" title="Link to this heading"></a></h3>
<p>The collection is also available as <code class="docutils literal notranslate"><span class="pre">ansible-collection-theforeman-foreman</span></code> from the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> repository on <code class="docutils literal notranslate"><span class="pre">yum.theforeman.org</span></code> for Enterprise Linux systems and from the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> repository on <code class="docutils literal notranslate"><span class="pre">deb.theforeman.org</span></code> for Debian and Ubuntu systems.</p>
<p>After installing the package, you can use the modules in the same way as when they are installed directly from Ansible Galaxy.</p>
</section>
</section>
<section id="installation-from-source">
<h2>Installation From Source<a class="headerlink" href="#installation-from-source" title="Link to this heading"></a></h2>
<p>For development or testing purposes, you can install the collection from source git repository. For production usage, see the instructions above on installing the latest stable release.</p>
<section id="installation-from-github-repository">
<h3>Installation from Github Repository<a class="headerlink" href="#installation-from-github-repository" title="Link to this heading"></a></h3>
<p>With Ansible &gt;= 2.10, you can install from a Github repository (such as this one or your fork):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>git+https://github.com/theforeman/foreman-ansible-modules.git
</pre></div>
</div>
<p>If you have configured GitHub to use SSH instead of HTTPS, you can do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>git@github.com/theforeman/foreman-ansible-modules.git
</pre></div>
</div>
<p>You can also specify a branch to use such as <code class="docutils literal notranslate"><span class="pre">devel</span></code> (below) or a feature branch that you are working with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>git+https://github.com/theforeman/foreman-ansible-modules.git,devel
</pre></div>
</div>
<p>To install from a <code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code> file (useful when installing multiple collections) add a snippet to your <code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code> like</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">collections</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/theforeman/foreman-ansible-modules.git</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">git</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">devel</span>
</pre></div>
</div>
<p>And install all specified requirements with <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.yml</span></code></p>
</section>
<section id="building-and-installing-the-collection-locally">
<h3>Building and Installing the Collection Locally<a class="headerlink" href="#building-and-installing-the-collection-locally" title="Link to this heading"></a></h3>
<p>For all currently supported versions of Ansible (i.e. Ansible &gt;= 2.9, and particularly Ansible &lt; 2.10 where the above approach is not yet supported), you can build the collection locally:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>dist
</pre></div>
</div>
<p>And install it with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>./theforeman-foreman-*.tar.gz
</pre></div>
</div>
</section>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading"></a></h2>
<p>These dependencies are required for the Ansible controller, not the Foreman server.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/PyYAML/"><code class="docutils literal notranslate"><span class="pre">PyYAML</span></code></a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/requests/"><code class="docutils literal notranslate"><span class="pre">requests</span></code></a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/ipaddress/"><code class="docutils literal notranslate"><span class="pre">ipaddress</span></code></a> for the <code class="docutils literal notranslate"><span class="pre">subnet</span></code> module on Python 2.7</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpm</span></code> for the RPM support in the <code class="docutils literal notranslate"><span class="pre">content_upload</span></code> module</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debian</span></code> for the DEB support in the <code class="docutils literal notranslate"><span class="pre">content_upload</span></code> module</p></li>
</ul>
</section>
</section>
<section id="foreman-ansible-roles">
<h1>Foreman Ansible Roles<a class="headerlink" href="#foreman-ansible-roles" title="Link to this heading"></a></h1>
<p>Roles using the Foreman Ansible Modules to configure Foreman and its plugins.</p>
<section id="id1">
<h2>Documentation<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>For individual role documentation, check the README defined at <code class="docutils literal notranslate"><span class="pre">roles/rolename/README.md</span></code>.</p>
<section id="common-role-variables">
<h3>Common Role Variables<a class="headerlink" href="#common-role-variables" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">foreman_server_url</span></code>: URL of the Foreman server. If the variable is not specified, the value of environment variable <code class="docutils literal notranslate"><span class="pre">FOREMAN_SERVER_URL</span></code> will be used instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">foreman_username</span></code>: Username accessing the Foreman server. If the variable is not specified, the value of environment variable <code class="docutils literal notranslate"><span class="pre">FOREMAN_USERNAME</span></code> will be used instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">foreman_password</span></code>: Password of the user accessing the Foreman server. If the variable is not specified, the value of environment variable <code class="docutils literal notranslate"><span class="pre">FOREMAN_PASSWORD</span></code> will be used instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">foreman_validate_certs</span></code>: Whether or not to verify the TLS certificates of the Foreman server. If the variable is not specified, the value of environment variable <code class="docutils literal notranslate"><span class="pre">FOREMAN_VALIDATE_CERTS</span></code> will be used instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">foreman_organization</span></code>: Organization where configuration will be applied.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Foreman Ansible Modules’ documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plugins/index.html" class="btn btn-neutral float-right" title="Theforeman.Foreman" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, The Foreman Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>